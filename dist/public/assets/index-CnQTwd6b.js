var $4=Object.defineProperty;var R_=t=>{throw TypeError(t)};var U4=(t,e,n)=>e in t?$4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>U4(t,typeof e!="symbol"?e+"":e,n),ey=(t,e,n)=>e.has(t)||R_("Cannot "+n);var k=(t,e,n)=>(ey(t,e,"read from private field"),n?n.call(t):e.get(t)),X=(t,e,n)=>e.has(t)?R_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),re=(t,e,n,r)=>(ey(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ae=(t,e,n)=>(ey(t,e,"access private method"),n);var mf=(t,e,n,r)=>({set _(s){re(t,e,s,n)},get _(){return k(t,e,r)}});function z4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ea(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function iJ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var kN={exports:{}},iv={},AN={exports:{}},pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op=Symbol.for("react.element"),B4=Symbol.for("react.portal"),V4=Symbol.for("react.fragment"),H4=Symbol.for("react.strict_mode"),q4=Symbol.for("react.profiler"),W4=Symbol.for("react.provider"),G4=Symbol.for("react.context"),K4=Symbol.for("react.forward_ref"),Q4=Symbol.for("react.suspense"),Y4=Symbol.for("react.memo"),Z4=Symbol.for("react.lazy"),D_=Symbol.iterator;function X4(t){return t===null||typeof t!="object"?null:(t=D_&&t[D_]||t["@@iterator"],typeof t=="function"?t:null)}var PN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IN=Object.assign,RN={};function tu(t,e,n){this.props=t,this.context=e,this.refs=RN,this.updater=n||PN}tu.prototype.isReactComponent={};tu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};tu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function DN(){}DN.prototype=tu.prototype;function Q0(t,e,n){this.props=t,this.context=e,this.refs=RN,this.updater=n||PN}var Y0=Q0.prototype=new DN;Y0.constructor=Q0;IN(Y0,tu.prototype);Y0.isPureReactComponent=!0;var O_=Array.isArray,ON=Object.prototype.hasOwnProperty,Z0={current:null},FN={key:!0,ref:!0,__self:!0,__source:!0};function MN(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)ON.call(e,r)&&!FN.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Op,type:t,key:a,ref:o,props:s,_owner:Z0.current}}function J4(t,e){return{$$typeof:Op,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function X0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Op}function eO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var F_=/\/+/g;function ty(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eO(""+t.key):e.toString(36)}function im(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Op:case B4:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ty(o,0):r,O_(s)?(n="",t!=null&&(n=t.replace(F_,"$&/")+"/"),im(s,e,n,"",function(u){return u})):s!=null&&(X0(s)&&(s=J4(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(F_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",O_(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+ty(a,l);o+=im(a,e,n,c,s)}else if(c=X4(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+ty(a,l++),o+=im(a,e,n,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vf(t,e,n){if(t==null)return t;var r=[],s=0;return im(t,r,"","",function(a){return e.call(n,a,s++)}),r}function tO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sr={current:null},am={transition:null},nO={ReactCurrentDispatcher:Sr,ReactCurrentBatchConfig:am,ReactCurrentOwner:Z0};function LN(){throw Error("act(...) is not supported in production builds of React.")}pt.Children={map:vf,forEach:function(t,e,n){vf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vf(t,function(){e++}),e},toArray:function(t){return vf(t,function(e){return e})||[]},only:function(t){if(!X0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pt.Component=tu;pt.Fragment=V4;pt.Profiler=q4;pt.PureComponent=Q0;pt.StrictMode=H4;pt.Suspense=Q4;pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nO;pt.act=LN;pt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=IN({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Z0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)ON.call(e,c)&&!FN.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Op,type:t.type,key:s,ref:a,props:r,_owner:o}};pt.createContext=function(t){return t={$$typeof:G4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:W4,_context:t},t.Consumer=t};pt.createElement=MN;pt.createFactory=function(t){var e=MN.bind(null,t);return e.type=t,e};pt.createRef=function(){return{current:null}};pt.forwardRef=function(t){return{$$typeof:K4,render:t}};pt.isValidElement=X0;pt.lazy=function(t){return{$$typeof:Z4,_payload:{_status:-1,_result:t},_init:tO}};pt.memo=function(t,e){return{$$typeof:Y4,type:t,compare:e===void 0?null:e}};pt.startTransition=function(t){var e=am.transition;am.transition={};try{t()}finally{am.transition=e}};pt.unstable_act=LN;pt.useCallback=function(t,e){return Sr.current.useCallback(t,e)};pt.useContext=function(t){return Sr.current.useContext(t)};pt.useDebugValue=function(){};pt.useDeferredValue=function(t){return Sr.current.useDeferredValue(t)};pt.useEffect=function(t,e){return Sr.current.useEffect(t,e)};pt.useId=function(){return Sr.current.useId()};pt.useImperativeHandle=function(t,e,n){return Sr.current.useImperativeHandle(t,e,n)};pt.useInsertionEffect=function(t,e){return Sr.current.useInsertionEffect(t,e)};pt.useLayoutEffect=function(t,e){return Sr.current.useLayoutEffect(t,e)};pt.useMemo=function(t,e){return Sr.current.useMemo(t,e)};pt.useReducer=function(t,e,n){return Sr.current.useReducer(t,e,n)};pt.useRef=function(t){return Sr.current.useRef(t)};pt.useState=function(t){return Sr.current.useState(t)};pt.useSyncExternalStore=function(t,e,n){return Sr.current.useSyncExternalStore(t,e,n)};pt.useTransition=function(){return Sr.current.useTransition()};pt.version="18.3.1";AN.exports=pt;var y=AN.exports;const bn=Ea(y),J0=z4({__proto__:null,default:bn},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rO=y,sO=Symbol.for("react.element"),iO=Symbol.for("react.fragment"),aO=Object.prototype.hasOwnProperty,oO=rO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lO={key:!0,ref:!0,__self:!0,__source:!0};function $N(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)aO.call(e,r)&&!lO.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:sO,type:t,key:a,ref:o,props:s,_owner:oO.current}}iv.Fragment=iO;iv.jsx=$N;iv.jsxs=$N;kN.exports=iv;var i=kN.exports,UN={exports:{}},Gr={},zN={exports:{}},BN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,ce){var ue=Q.length;Q.push(ce);e:for(;0<ue;){var we=ue-1>>>1,$e=Q[we];if(0<s($e,ce))Q[we]=ce,Q[ue]=$e,ue=we;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ce=Q[0],ue=Q.pop();if(ue!==ce){Q[0]=ue;e:for(var we=0,$e=Q.length,B=$e>>>1;we<B;){var me=2*(we+1)-1,ve=Q[me],Ge=me+1,ye=Q[Ge];if(0>s(ve,ue))Ge<$e&&0>s(ye,ve)?(Q[we]=ye,Q[Ge]=ue,we=Ge):(Q[we]=ve,Q[me]=ue,we=me);else if(Ge<$e&&0>s(ye,ue))Q[we]=ye,Q[Ge]=ue,we=Ge;else break e}}return ce}function s(Q,ce){var ue=Q.sortIndex-ce.sortIndex;return ue!==0?ue:Q.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,p=null,m=3,x=!1,N=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Q){for(var ce=n(u);ce!==null;){if(ce.callback===null)r(u);else if(ce.startTime<=Q)r(u),ce.sortIndex=ce.expirationTime,e(c,ce);else break;ce=n(u)}}function I(Q){if(w=!1,T(Q),!N)if(n(c)!==null)N=!0,se(L);else{var ce=n(u);ce!==null&&de(I,ce.startTime-Q)}}function L(Q,ce){N=!1,w&&(w=!1,S(_),_=-1),x=!0;var ue=m;try{for(T(ce),p=n(c);p!==null&&(!(p.expirationTime>ce)||Q&&!F());){var we=p.callback;if(typeof we=="function"){p.callback=null,m=p.priorityLevel;var $e=we(p.expirationTime<=ce);ce=t.unstable_now(),typeof $e=="function"?p.callback=$e:p===n(c)&&r(c),T(ce)}else r(c);p=n(c)}if(p!==null)var B=!0;else{var me=n(u);me!==null&&de(I,me.startTime-ce),B=!1}return B}finally{p=null,m=ue,x=!1}}var R=!1,C=null,_=-1,P=5,A=-1;function F(){return!(t.unstable_now()-A<P)}function D(){if(C!==null){var Q=t.unstable_now();A=Q;var ce=!0;try{ce=C(!0,Q)}finally{ce?E():(R=!1,C=null)}}else R=!1}var E;if(typeof v=="function")E=function(){v(D)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,G=$.port2;$.port1.onmessage=D,E=function(){G.postMessage(null)}}else E=function(){b(D,0)};function se(Q){C=Q,R||(R=!0,E())}function de(Q,ce){_=b(function(){Q(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){N||x||(N=!0,se(L))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(Q){switch(m){case 1:case 2:case 3:var ce=3;break;default:ce=m}var ue=m;m=ce;try{return Q()}finally{m=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,ce){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ue=m;m=Q;try{return ce()}finally{m=ue}},t.unstable_scheduleCallback=function(Q,ce,ue){var we=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?we+ue:we):ue=we,Q){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ue+$e,Q={id:h++,callback:ce,priorityLevel:Q,startTime:ue,expirationTime:$e,sortIndex:-1},ue>we?(Q.sortIndex=ue,e(u,Q),n(c)===null&&Q===n(u)&&(w?(S(_),_=-1):w=!0,de(I,ue-we))):(Q.sortIndex=$e,e(c,Q),N||x||(N=!0,se(L))),Q},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(Q){var ce=m;return function(){var ue=m;m=ce;try{return Q.apply(this,arguments)}finally{m=ue}}}})(BN);zN.exports=BN;var cO=zN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dO=y,Wr=cO;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VN=new Set,_h={};function Kl(t,e){Fd(t,e),Fd(t+"Capture",e)}function Fd(t,e){for(_h[t]=e,t=0;t<e.length;t++)VN.add(e[t])}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sx=Object.prototype.hasOwnProperty,uO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M_={},L_={};function hO(t){return Sx.call(L_,t)?!0:Sx.call(M_,t)?!1:uO.test(t)?L_[t]=!0:(M_[t]=!0,!1)}function pO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fO(t,e,n,r){if(e===null||typeof e>"u"||pO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Er(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wn[t]=new Er(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wn[e]=new Er(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wn[t]=new Er(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wn[t]=new Er(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wn[t]=new Er(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wn[t]=new Er(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wn[t]=new Er(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wn[t]=new Er(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wn[t]=new Er(t,5,!1,t.toLowerCase(),null,!1,!1)});var ew=/[\-:]([a-z])/g;function tw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ew,tw);Wn[e]=new Er(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ew,tw);Wn[e]=new Er(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ew,tw);Wn[e]=new Er(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wn[t]=new Er(t,1,!1,t.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new Er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wn[t]=new Er(t,1,!1,t.toLowerCase(),null,!0,!0)});function nw(t,e,n,r){var s=Wn.hasOwnProperty(e)?Wn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fO(e,n,s,r)&&(n=null),r||s===null?hO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ja=dO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yf=Symbol.for("react.element"),Cc=Symbol.for("react.portal"),Sc=Symbol.for("react.fragment"),rw=Symbol.for("react.strict_mode"),Ex=Symbol.for("react.profiler"),HN=Symbol.for("react.provider"),qN=Symbol.for("react.context"),sw=Symbol.for("react.forward_ref"),jx=Symbol.for("react.suspense"),Nx=Symbol.for("react.suspense_list"),iw=Symbol.for("react.memo"),La=Symbol.for("react.lazy"),WN=Symbol.for("react.offscreen"),$_=Symbol.iterator;function yu(t){return t===null||typeof t!="object"?null:(t=$_&&t[$_]||t["@@iterator"],typeof t=="function"?t:null)}var rn=Object.assign,ny;function Uu(t){if(ny===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ny=e&&e[1]||""}return`
`+ny+t}var ry=!1;function sy(t,e){if(!t||ry)return"";ry=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{ry=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Uu(t):""}function mO(t){switch(t.tag){case 5:return Uu(t.type);case 16:return Uu("Lazy");case 13:return Uu("Suspense");case 19:return Uu("SuspenseList");case 0:case 2:case 15:return t=sy(t.type,!1),t;case 11:return t=sy(t.type.render,!1),t;case 1:return t=sy(t.type,!0),t;default:return""}}function Tx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sc:return"Fragment";case Cc:return"Portal";case Ex:return"Profiler";case rw:return"StrictMode";case jx:return"Suspense";case Nx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qN:return(t.displayName||"Context")+".Consumer";case HN:return(t._context.displayName||"Context")+".Provider";case sw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iw:return e=t.displayName||null,e!==null?e:Tx(t.type)||"Memo";case La:e=t._payload,t=t._init;try{return Tx(t(e))}catch{}}return null}function gO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tx(e);case 8:return e===rw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function GN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vO(t){var e=GN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xf(t){t._valueTracker||(t._valueTracker=vO(t))}function KN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=GN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kx(t,e){var n=e.checked;return rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function U_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QN(t,e){e=e.checked,e!=null&&nw(t,"checked",e,!1)}function Ax(t,e){QN(t,e);var n=bo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Px(t,e.type,n):e.hasOwnProperty("defaultValue")&&Px(t,e.type,bo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function z_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Px(t,e,n){(e!=="number"||Fm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zu=Array.isArray;function Uc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ix(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return rn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function B_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(zu(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bo(n)}}function YN(t,e){var n=bo(e.value),r=bo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function V_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bf,XN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bf=bf||document.createElement("div"),bf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ch(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yO=["Webkit","ms","Moz","O"];Object.keys(nh).forEach(function(t){yO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nh[e]=nh[t]})});function JN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nh.hasOwnProperty(t)&&nh[t]?(""+e).trim():e+"px"}function eT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=JN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var xO=rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dx(t,e){if(e){if(xO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function Ox(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fx=null;function aw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mx=null,zc=null,Bc=null;function H_(t){if(t=Lp(t)){if(typeof Mx!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=dv(e),Mx(t.stateNode,t.type,e))}}function tT(t){zc?Bc?Bc.push(t):Bc=[t]:zc=t}function nT(){if(zc){var t=zc,e=Bc;if(Bc=zc=null,H_(t),e)for(t=0;t<e.length;t++)H_(e[t])}}function rT(t,e){return t(e)}function sT(){}var iy=!1;function iT(t,e,n){if(iy)return t(e,n);iy=!0;try{return rT(t,e,n)}finally{iy=!1,(zc!==null||Bc!==null)&&(sT(),nT())}}function Sh(t,e){var n=t.stateNode;if(n===null)return null;var r=dv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var Lx=!1;if(ga)try{var xu={};Object.defineProperty(xu,"passive",{get:function(){Lx=!0}}),window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{Lx=!1}function bO(t,e,n,r,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var rh=!1,Mm=null,Lm=!1,$x=null,wO={onError:function(t){rh=!0,Mm=t}};function _O(t,e,n,r,s,a,o,l,c){rh=!1,Mm=null,bO.apply(wO,arguments)}function CO(t,e,n,r,s,a,o,l,c){if(_O.apply(this,arguments),rh){if(rh){var u=Mm;rh=!1,Mm=null}else throw Error(fe(198));Lm||(Lm=!0,$x=u)}}function Ql(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function q_(t){if(Ql(t)!==t)throw Error(fe(188))}function SO(t){var e=t.alternate;if(!e){if(e=Ql(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return q_(s),t;if(a===r)return q_(s),e;a=a.sibling}throw Error(fe(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function oT(t){return t=SO(t),t!==null?lT(t):null}function lT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lT(t);if(e!==null)return e;t=t.sibling}return null}var cT=Wr.unstable_scheduleCallback,W_=Wr.unstable_cancelCallback,EO=Wr.unstable_shouldYield,jO=Wr.unstable_requestPaint,fn=Wr.unstable_now,NO=Wr.unstable_getCurrentPriorityLevel,ow=Wr.unstable_ImmediatePriority,dT=Wr.unstable_UserBlockingPriority,$m=Wr.unstable_NormalPriority,TO=Wr.unstable_LowPriority,uT=Wr.unstable_IdlePriority,av=null,Pi=null;function kO(t){if(Pi&&typeof Pi.onCommitFiberRoot=="function")try{Pi.onCommitFiberRoot(av,t,void 0,(t.current.flags&128)===128)}catch{}}var qs=Math.clz32?Math.clz32:IO,AO=Math.log,PO=Math.LN2;function IO(t){return t>>>=0,t===0?32:31-(AO(t)/PO|0)|0}var wf=64,_f=4194304;function Bu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Um(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Bu(l):(a&=o,a!==0&&(r=Bu(a)))}else o=n&~s,o!==0?r=Bu(o):a!==0&&(r=Bu(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qs(e),s=1<<n,r|=t[n],e&=~s;return r}function RO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-qs(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=RO(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Ux(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hT(){var t=wf;return wf<<=1,!(wf&4194240)&&(wf=64),t}function ay(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qs(e),t[e]=n}function OO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-qs(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function lw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Dt=0;function pT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fT,cw,mT,gT,vT,zx=!1,Cf=[],lo=null,co=null,uo=null,Eh=new Map,jh=new Map,Ua=[],FO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G_(t,e){switch(t){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":Eh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jh.delete(e.pointerId)}}function bu(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Lp(e),e!==null&&cw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function MO(t,e,n,r,s){switch(e){case"focusin":return lo=bu(lo,t,e,n,r,s),!0;case"dragenter":return co=bu(co,t,e,n,r,s),!0;case"mouseover":return uo=bu(uo,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Eh.set(a,bu(Eh.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,jh.set(a,bu(jh.get(a)||null,t,e,n,r,s)),!0}return!1}function yT(t){var e=Zo(t.target);if(e!==null){var n=Ql(e);if(n!==null){if(e=n.tag,e===13){if(e=aT(n),e!==null){t.blockedOn=e,vT(t.priority,function(){mT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function om(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fx=r,n.target.dispatchEvent(r),Fx=null}else return e=Lp(n),e!==null&&cw(e),t.blockedOn=n,!1;e.shift()}return!0}function K_(t,e,n){om(t)&&n.delete(e)}function LO(){zx=!1,lo!==null&&om(lo)&&(lo=null),co!==null&&om(co)&&(co=null),uo!==null&&om(uo)&&(uo=null),Eh.forEach(K_),jh.forEach(K_)}function wu(t,e){t.blockedOn===e&&(t.blockedOn=null,zx||(zx=!0,Wr.unstable_scheduleCallback(Wr.unstable_NormalPriority,LO)))}function Nh(t){function e(s){return wu(s,t)}if(0<Cf.length){wu(Cf[0],t);for(var n=1;n<Cf.length;n++){var r=Cf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(lo!==null&&wu(lo,t),co!==null&&wu(co,t),uo!==null&&wu(uo,t),Eh.forEach(e),jh.forEach(e),n=0;n<Ua.length;n++)r=Ua[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ua.length&&(n=Ua[0],n.blockedOn===null);)yT(n),n.blockedOn===null&&Ua.shift()}var Vc=ja.ReactCurrentBatchConfig,zm=!0;function $O(t,e,n,r){var s=Dt,a=Vc.transition;Vc.transition=null;try{Dt=1,dw(t,e,n,r)}finally{Dt=s,Vc.transition=a}}function UO(t,e,n,r){var s=Dt,a=Vc.transition;Vc.transition=null;try{Dt=4,dw(t,e,n,r)}finally{Dt=s,Vc.transition=a}}function dw(t,e,n,r){if(zm){var s=Bx(t,e,n,r);if(s===null)gy(t,e,r,Bm,n),G_(t,r);else if(MO(s,t,e,n,r))r.stopPropagation();else if(G_(t,r),e&4&&-1<FO.indexOf(t)){for(;s!==null;){var a=Lp(s);if(a!==null&&fT(a),a=Bx(t,e,n,r),a===null&&gy(t,e,r,Bm,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else gy(t,e,r,null,n)}}var Bm=null;function Bx(t,e,n,r){if(Bm=null,t=aw(r),t=Zo(t),t!==null)if(e=Ql(t),e===null)t=null;else if(n=e.tag,n===13){if(t=aT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bm=t,null}function xT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NO()){case ow:return 1;case dT:return 4;case $m:case TO:return 16;case uT:return 536870912;default:return 16}default:return 16}}var io=null,uw=null,lm=null;function bT(){if(lm)return lm;var t,e=uw,n=e.length,r,s="value"in io?io.value:io.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return lm=s.slice(t,1<r?1-r:void 0)}function cm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sf(){return!0}function Q_(){return!1}function Kr(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Sf:Q_,this.isPropagationStopped=Q_,this}return rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sf)},persist:function(){},isPersistent:Sf}),e}var nu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hw=Kr(nu),Mp=rn({},nu,{view:0,detail:0}),zO=Kr(Mp),oy,ly,_u,ov=rn({},Mp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_u&&(_u&&t.type==="mousemove"?(oy=t.screenX-_u.screenX,ly=t.screenY-_u.screenY):ly=oy=0,_u=t),oy)},movementY:function(t){return"movementY"in t?t.movementY:ly}}),Y_=Kr(ov),BO=rn({},ov,{dataTransfer:0}),VO=Kr(BO),HO=rn({},Mp,{relatedTarget:0}),cy=Kr(HO),qO=rn({},nu,{animationName:0,elapsedTime:0,pseudoElement:0}),WO=Kr(qO),GO=rn({},nu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KO=Kr(GO),QO=rn({},nu,{data:0}),Z_=Kr(QO),YO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XO[t])?!!e[t]:!1}function pw(){return JO}var eF=rn({},Mp,{key:function(t){if(t.key){var e=YO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pw,charCode:function(t){return t.type==="keypress"?cm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tF=Kr(eF),nF=rn({},ov,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X_=Kr(nF),rF=rn({},Mp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pw}),sF=Kr(rF),iF=rn({},nu,{propertyName:0,elapsedTime:0,pseudoElement:0}),aF=Kr(iF),oF=rn({},ov,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lF=Kr(oF),cF=[9,13,27,32],fw=ga&&"CompositionEvent"in window,sh=null;ga&&"documentMode"in document&&(sh=document.documentMode);var dF=ga&&"TextEvent"in window&&!sh,wT=ga&&(!fw||sh&&8<sh&&11>=sh),J_=" ",eC=!1;function _T(t,e){switch(t){case"keyup":return cF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ec=!1;function uF(t,e){switch(t){case"compositionend":return CT(e);case"keypress":return e.which!==32?null:(eC=!0,J_);case"textInput":return t=e.data,t===J_&&eC?null:t;default:return null}}function hF(t,e){if(Ec)return t==="compositionend"||!fw&&_T(t,e)?(t=bT(),lm=uw=io=null,Ec=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wT&&e.locale!=="ko"?null:e.data;default:return null}}var pF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pF[t.type]:e==="textarea"}function ST(t,e,n,r){tT(r),e=Vm(e,"onChange"),0<e.length&&(n=new hw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ih=null,Th=null;function fF(t){OT(t,0)}function lv(t){var e=Tc(t);if(KN(e))return t}function mF(t,e){if(t==="change")return e}var ET=!1;if(ga){var dy;if(ga){var uy="oninput"in document;if(!uy){var nC=document.createElement("div");nC.setAttribute("oninput","return;"),uy=typeof nC.oninput=="function"}dy=uy}else dy=!1;ET=dy&&(!document.documentMode||9<document.documentMode)}function rC(){ih&&(ih.detachEvent("onpropertychange",jT),Th=ih=null)}function jT(t){if(t.propertyName==="value"&&lv(Th)){var e=[];ST(e,Th,t,aw(t)),iT(fF,e)}}function gF(t,e,n){t==="focusin"?(rC(),ih=e,Th=n,ih.attachEvent("onpropertychange",jT)):t==="focusout"&&rC()}function vF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lv(Th)}function yF(t,e){if(t==="click")return lv(e)}function xF(t,e){if(t==="input"||t==="change")return lv(e)}function bF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ks=typeof Object.is=="function"?Object.is:bF;function kh(t,e){if(Ks(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sx.call(e,s)||!Ks(t[s],e[s]))return!1}return!0}function sC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iC(t,e){var n=sC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sC(n)}}function NT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function TT(){for(var t=window,e=Fm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fm(t.document)}return e}function mw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wF(t){var e=TT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NT(n.ownerDocument.documentElement,n)){if(r!==null&&mw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=iC(n,a);var o=iC(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _F=ga&&"documentMode"in document&&11>=document.documentMode,jc=null,Vx=null,ah=null,Hx=!1;function aC(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hx||jc==null||jc!==Fm(r)||(r=jc,"selectionStart"in r&&mw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ah&&kh(ah,r)||(ah=r,r=Vm(Vx,"onSelect"),0<r.length&&(e=new hw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jc)))}function Ef(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Nc={animationend:Ef("Animation","AnimationEnd"),animationiteration:Ef("Animation","AnimationIteration"),animationstart:Ef("Animation","AnimationStart"),transitionend:Ef("Transition","TransitionEnd")},hy={},kT={};ga&&(kT=document.createElement("div").style,"AnimationEvent"in window||(delete Nc.animationend.animation,delete Nc.animationiteration.animation,delete Nc.animationstart.animation),"TransitionEvent"in window||delete Nc.transitionend.transition);function cv(t){if(hy[t])return hy[t];if(!Nc[t])return t;var e=Nc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kT)return hy[t]=e[n];return t}var AT=cv("animationend"),PT=cv("animationiteration"),IT=cv("animationstart"),RT=cv("transitionend"),DT=new Map,oC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(t,e){DT.set(t,e),Kl(e,[t])}for(var py=0;py<oC.length;py++){var fy=oC[py],CF=fy.toLowerCase(),SF=fy[0].toUpperCase()+fy.slice(1);Io(CF,"on"+SF)}Io(AT,"onAnimationEnd");Io(PT,"onAnimationIteration");Io(IT,"onAnimationStart");Io("dblclick","onDoubleClick");Io("focusin","onFocus");Io("focusout","onBlur");Io(RT,"onTransitionEnd");Fd("onMouseEnter",["mouseout","mouseover"]);Fd("onMouseLeave",["mouseout","mouseover"]);Fd("onPointerEnter",["pointerout","pointerover"]);Fd("onPointerLeave",["pointerout","pointerover"]);Kl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vu));function lC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,CO(r,e,void 0,t),t.currentTarget=null}function OT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;lC(s,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;lC(s,l,u),a=c}}}if(Lm)throw t=$x,Lm=!1,$x=null,t}function Wt(t,e){var n=e[Qx];n===void 0&&(n=e[Qx]=new Set);var r=t+"__bubble";n.has(r)||(FT(e,t,2,!1),n.add(r))}function my(t,e,n){var r=0;e&&(r|=4),FT(n,t,r,e)}var jf="_reactListening"+Math.random().toString(36).slice(2);function Ah(t){if(!t[jf]){t[jf]=!0,VN.forEach(function(n){n!=="selectionchange"&&(EF.has(n)||my(n,!1,t),my(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jf]||(e[jf]=!0,my("selectionchange",!1,e))}}function FT(t,e,n,r){switch(xT(e)){case 1:var s=$O;break;case 4:s=UO;break;default:s=dw}n=s.bind(null,e,n,t),s=void 0,!Lx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function gy(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Zo(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}iT(function(){var u=a,h=aw(n),p=[];e:{var m=DT.get(t);if(m!==void 0){var x=hw,N=t;switch(t){case"keypress":if(cm(n)===0)break e;case"keydown":case"keyup":x=tF;break;case"focusin":N="focus",x=cy;break;case"focusout":N="blur",x=cy;break;case"beforeblur":case"afterblur":x=cy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Y_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=VO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=sF;break;case AT:case PT:case IT:x=WO;break;case RT:x=aF;break;case"scroll":x=zO;break;case"wheel":x=lF;break;case"copy":case"cut":case"paste":x=KO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=X_}var w=(e&4)!==0,b=!w&&t==="scroll",S=w?m!==null?m+"Capture":null:m;w=[];for(var v=u,T;v!==null;){T=v;var I=T.stateNode;if(T.tag===5&&I!==null&&(T=I,S!==null&&(I=Sh(v,S),I!=null&&w.push(Ph(v,I,T)))),b)break;v=v.return}0<w.length&&(m=new x(m,N,null,n,h),p.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&n!==Fx&&(N=n.relatedTarget||n.fromElement)&&(Zo(N)||N[va]))break e;if((x||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,x?(N=n.relatedTarget||n.toElement,x=u,N=N?Zo(N):null,N!==null&&(b=Ql(N),N!==b||N.tag!==5&&N.tag!==6)&&(N=null)):(x=null,N=u),x!==N)){if(w=Y_,I="onMouseLeave",S="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(w=X_,I="onPointerLeave",S="onPointerEnter",v="pointer"),b=x==null?m:Tc(x),T=N==null?m:Tc(N),m=new w(I,v+"leave",x,n,h),m.target=b,m.relatedTarget=T,I=null,Zo(h)===u&&(w=new w(S,v+"enter",N,n,h),w.target=T,w.relatedTarget=b,I=w),b=I,x&&N)t:{for(w=x,S=N,v=0,T=w;T;T=mc(T))v++;for(T=0,I=S;I;I=mc(I))T++;for(;0<v-T;)w=mc(w),v--;for(;0<T-v;)S=mc(S),T--;for(;v--;){if(w===S||S!==null&&w===S.alternate)break t;w=mc(w),S=mc(S)}w=null}else w=null;x!==null&&cC(p,m,x,w,!1),N!==null&&b!==null&&cC(p,b,N,w,!0)}}e:{if(m=u?Tc(u):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var L=mF;else if(tC(m))if(ET)L=xF;else{L=vF;var R=gF}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=yF);if(L&&(L=L(t,u))){ST(p,L,n,h);break e}R&&R(t,m,u),t==="focusout"&&(R=m._wrapperState)&&R.controlled&&m.type==="number"&&Px(m,"number",m.value)}switch(R=u?Tc(u):window,t){case"focusin":(tC(R)||R.contentEditable==="true")&&(jc=R,Vx=u,ah=null);break;case"focusout":ah=Vx=jc=null;break;case"mousedown":Hx=!0;break;case"contextmenu":case"mouseup":case"dragend":Hx=!1,aC(p,n,h);break;case"selectionchange":if(_F)break;case"keydown":case"keyup":aC(p,n,h)}var C;if(fw)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ec?_T(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(wT&&n.locale!=="ko"&&(Ec||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ec&&(C=bT()):(io=h,uw="value"in io?io.value:io.textContent,Ec=!0)),R=Vm(u,_),0<R.length&&(_=new Z_(_,t,null,n,h),p.push({event:_,listeners:R}),C?_.data=C:(C=CT(n),C!==null&&(_.data=C)))),(C=dF?uF(t,n):hF(t,n))&&(u=Vm(u,"onBeforeInput"),0<u.length&&(h=new Z_("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=C))}OT(p,e)})}function Ph(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Sh(t,n),a!=null&&r.unshift(Ph(t,a,s)),a=Sh(t,e),a!=null&&r.push(Ph(t,a,s))),t=t.return}return r}function mc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cC(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Sh(n,a),c!=null&&o.unshift(Ph(n,c,l))):s||(c=Sh(n,a),c!=null&&o.push(Ph(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jF=/\r\n?/g,NF=/\u0000|\uFFFD/g;function dC(t){return(typeof t=="string"?t:""+t).replace(jF,`
`).replace(NF,"")}function Nf(t,e,n){if(e=dC(e),dC(t)!==e&&n)throw Error(fe(425))}function Hm(){}var qx=null,Wx=null;function Gx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kx=typeof setTimeout=="function"?setTimeout:void 0,TF=typeof clearTimeout=="function"?clearTimeout:void 0,uC=typeof Promise=="function"?Promise:void 0,kF=typeof queueMicrotask=="function"?queueMicrotask:typeof uC<"u"?function(t){return uC.resolve(null).then(t).catch(AF)}:Kx;function AF(t){setTimeout(function(){throw t})}function vy(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Nh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nh(e)}function ho(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ru=Math.random().toString(36).slice(2),Ei="__reactFiber$"+ru,Ih="__reactProps$"+ru,va="__reactContainer$"+ru,Qx="__reactEvents$"+ru,PF="__reactListeners$"+ru,IF="__reactHandles$"+ru;function Zo(t){var e=t[Ei];if(e)return e;for(var n=t.parentNode;n;){if(e=n[va]||n[Ei]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hC(t);t!==null;){if(n=t[Ei])return n;t=hC(t)}return e}t=n,n=t.parentNode}return null}function Lp(t){return t=t[Ei]||t[va],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function dv(t){return t[Ih]||null}var Yx=[],kc=-1;function Ro(t){return{current:t}}function Gt(t){0>kc||(t.current=Yx[kc],Yx[kc]=null,kc--)}function Vt(t,e){kc++,Yx[kc]=t.current,t.current=e}var wo={},sr=Ro(wo),Pr=Ro(!1),kl=wo;function Md(t,e){var n=t.type.contextTypes;if(!n)return wo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ir(t){return t=t.childContextTypes,t!=null}function qm(){Gt(Pr),Gt(sr)}function pC(t,e,n){if(sr.current!==wo)throw Error(fe(168));Vt(sr,e),Vt(Pr,n)}function MT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(fe(108,gO(t)||"Unknown",s));return rn({},n,r)}function Wm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wo,kl=sr.current,Vt(sr,t),Vt(Pr,Pr.current),!0}function fC(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=MT(t,e,kl),r.__reactInternalMemoizedMergedChildContext=t,Gt(Pr),Gt(sr),Vt(sr,t)):Gt(Pr),Vt(Pr,n)}var ea=null,uv=!1,yy=!1;function LT(t){ea===null?ea=[t]:ea.push(t)}function RF(t){uv=!0,LT(t)}function Do(){if(!yy&&ea!==null){yy=!0;var t=0,e=Dt;try{var n=ea;for(Dt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ea=null,uv=!1}catch(s){throw ea!==null&&(ea=ea.slice(t+1)),cT(ow,Do),s}finally{Dt=e,yy=!1}}return null}var Ac=[],Pc=0,Gm=null,Km=0,ts=[],ns=0,Al=null,ca=1,da="";function qo(t,e){Ac[Pc++]=Km,Ac[Pc++]=Gm,Gm=t,Km=e}function $T(t,e,n){ts[ns++]=ca,ts[ns++]=da,ts[ns++]=Al,Al=t;var r=ca;t=da;var s=32-qs(r)-1;r&=~(1<<s),n+=1;var a=32-qs(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ca=1<<32-qs(e)+s|n<<s|r,da=a+t}else ca=1<<a|n<<s|r,da=t}function gw(t){t.return!==null&&(qo(t,1),$T(t,1,0))}function vw(t){for(;t===Gm;)Gm=Ac[--Pc],Ac[Pc]=null,Km=Ac[--Pc],Ac[Pc]=null;for(;t===Al;)Al=ts[--ns],ts[ns]=null,da=ts[--ns],ts[ns]=null,ca=ts[--ns],ts[ns]=null}var Vr=null,Br=null,Yt=!1,Is=null;function UT(t,e){var n=as(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vr=t,Br=ho(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vr=t,Br=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Al!==null?{id:ca,overflow:da}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=as(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vr=t,Br=null,!0):!1;default:return!1}}function Zx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xx(t){if(Yt){var e=Br;if(e){var n=e;if(!mC(t,e)){if(Zx(t))throw Error(fe(418));e=ho(n.nextSibling);var r=Vr;e&&mC(t,e)?UT(r,n):(t.flags=t.flags&-4097|2,Yt=!1,Vr=t)}}else{if(Zx(t))throw Error(fe(418));t.flags=t.flags&-4097|2,Yt=!1,Vr=t}}}function gC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vr=t}function Tf(t){if(t!==Vr)return!1;if(!Yt)return gC(t),Yt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gx(t.type,t.memoizedProps)),e&&(e=Br)){if(Zx(t))throw zT(),Error(fe(418));for(;e;)UT(t,e),e=ho(e.nextSibling)}if(gC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Br=ho(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Br=null}}else Br=Vr?ho(t.stateNode.nextSibling):null;return!0}function zT(){for(var t=Br;t;)t=ho(t.nextSibling)}function Ld(){Br=Vr=null,Yt=!1}function yw(t){Is===null?Is=[t]:Is.push(t)}var DF=ja.ReactCurrentBatchConfig;function Cu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function kf(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vC(t){var e=t._init;return e(t._payload)}function BT(t){function e(S,v){if(t){var T=S.deletions;T===null?(S.deletions=[v],S.flags|=16):T.push(v)}}function n(S,v){if(!t)return null;for(;v!==null;)e(S,v),v=v.sibling;return null}function r(S,v){for(S=new Map;v!==null;)v.key!==null?S.set(v.key,v):S.set(v.index,v),v=v.sibling;return S}function s(S,v){return S=go(S,v),S.index=0,S.sibling=null,S}function a(S,v,T){return S.index=T,t?(T=S.alternate,T!==null?(T=T.index,T<v?(S.flags|=2,v):T):(S.flags|=2,v)):(S.flags|=1048576,v)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,v,T,I){return v===null||v.tag!==6?(v=Ey(T,S.mode,I),v.return=S,v):(v=s(v,T),v.return=S,v)}function c(S,v,T,I){var L=T.type;return L===Sc?h(S,v,T.props.children,I,T.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===La&&vC(L)===v.type)?(I=s(v,T.props),I.ref=Cu(S,v,T),I.return=S,I):(I=gm(T.type,T.key,T.props,null,S.mode,I),I.ref=Cu(S,v,T),I.return=S,I)}function u(S,v,T,I){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=jy(T,S.mode,I),v.return=S,v):(v=s(v,T.children||[]),v.return=S,v)}function h(S,v,T,I,L){return v===null||v.tag!==7?(v=El(T,S.mode,I,L),v.return=S,v):(v=s(v,T),v.return=S,v)}function p(S,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ey(""+v,S.mode,T),v.return=S,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case yf:return T=gm(v.type,v.key,v.props,null,S.mode,T),T.ref=Cu(S,null,v),T.return=S,T;case Cc:return v=jy(v,S.mode,T),v.return=S,v;case La:var I=v._init;return p(S,I(v._payload),T)}if(zu(v)||yu(v))return v=El(v,S.mode,T,null),v.return=S,v;kf(S,v)}return null}function m(S,v,T,I){var L=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:l(S,v,""+T,I);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case yf:return T.key===L?c(S,v,T,I):null;case Cc:return T.key===L?u(S,v,T,I):null;case La:return L=T._init,m(S,v,L(T._payload),I)}if(zu(T)||yu(T))return L!==null?null:h(S,v,T,I,null);kf(S,T)}return null}function x(S,v,T,I,L){if(typeof I=="string"&&I!==""||typeof I=="number")return S=S.get(T)||null,l(v,S,""+I,L);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case yf:return S=S.get(I.key===null?T:I.key)||null,c(v,S,I,L);case Cc:return S=S.get(I.key===null?T:I.key)||null,u(v,S,I,L);case La:var R=I._init;return x(S,v,T,R(I._payload),L)}if(zu(I)||yu(I))return S=S.get(T)||null,h(v,S,I,L,null);kf(v,I)}return null}function N(S,v,T,I){for(var L=null,R=null,C=v,_=v=0,P=null;C!==null&&_<T.length;_++){C.index>_?(P=C,C=null):P=C.sibling;var A=m(S,C,T[_],I);if(A===null){C===null&&(C=P);break}t&&C&&A.alternate===null&&e(S,C),v=a(A,v,_),R===null?L=A:R.sibling=A,R=A,C=P}if(_===T.length)return n(S,C),Yt&&qo(S,_),L;if(C===null){for(;_<T.length;_++)C=p(S,T[_],I),C!==null&&(v=a(C,v,_),R===null?L=C:R.sibling=C,R=C);return Yt&&qo(S,_),L}for(C=r(S,C);_<T.length;_++)P=x(C,S,_,T[_],I),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?_:P.key),v=a(P,v,_),R===null?L=P:R.sibling=P,R=P);return t&&C.forEach(function(F){return e(S,F)}),Yt&&qo(S,_),L}function w(S,v,T,I){var L=yu(T);if(typeof L!="function")throw Error(fe(150));if(T=L.call(T),T==null)throw Error(fe(151));for(var R=L=null,C=v,_=v=0,P=null,A=T.next();C!==null&&!A.done;_++,A=T.next()){C.index>_?(P=C,C=null):P=C.sibling;var F=m(S,C,A.value,I);if(F===null){C===null&&(C=P);break}t&&C&&F.alternate===null&&e(S,C),v=a(F,v,_),R===null?L=F:R.sibling=F,R=F,C=P}if(A.done)return n(S,C),Yt&&qo(S,_),L;if(C===null){for(;!A.done;_++,A=T.next())A=p(S,A.value,I),A!==null&&(v=a(A,v,_),R===null?L=A:R.sibling=A,R=A);return Yt&&qo(S,_),L}for(C=r(S,C);!A.done;_++,A=T.next())A=x(C,S,_,A.value,I),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?_:A.key),v=a(A,v,_),R===null?L=A:R.sibling=A,R=A);return t&&C.forEach(function(D){return e(S,D)}),Yt&&qo(S,_),L}function b(S,v,T,I){if(typeof T=="object"&&T!==null&&T.type===Sc&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case yf:e:{for(var L=T.key,R=v;R!==null;){if(R.key===L){if(L=T.type,L===Sc){if(R.tag===7){n(S,R.sibling),v=s(R,T.props.children),v.return=S,S=v;break e}}else if(R.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===La&&vC(L)===R.type){n(S,R.sibling),v=s(R,T.props),v.ref=Cu(S,R,T),v.return=S,S=v;break e}n(S,R);break}else e(S,R);R=R.sibling}T.type===Sc?(v=El(T.props.children,S.mode,I,T.key),v.return=S,S=v):(I=gm(T.type,T.key,T.props,null,S.mode,I),I.ref=Cu(S,v,T),I.return=S,S=I)}return o(S);case Cc:e:{for(R=T.key;v!==null;){if(v.key===R)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(S,v.sibling),v=s(v,T.children||[]),v.return=S,S=v;break e}else{n(S,v);break}else e(S,v);v=v.sibling}v=jy(T,S.mode,I),v.return=S,S=v}return o(S);case La:return R=T._init,b(S,v,R(T._payload),I)}if(zu(T))return N(S,v,T,I);if(yu(T))return w(S,v,T,I);kf(S,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,v!==null&&v.tag===6?(n(S,v.sibling),v=s(v,T),v.return=S,S=v):(n(S,v),v=Ey(T,S.mode,I),v.return=S,S=v),o(S)):n(S,v)}return b}var $d=BT(!0),VT=BT(!1),Qm=Ro(null),Ym=null,Ic=null,xw=null;function bw(){xw=Ic=Ym=null}function ww(t){var e=Qm.current;Gt(Qm),t._currentValue=e}function Jx(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hc(t,e){Ym=t,xw=Ic=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ar=!0),t.firstContext=null)}function ls(t){var e=t._currentValue;if(xw!==t)if(t={context:t,memoizedValue:e,next:null},Ic===null){if(Ym===null)throw Error(fe(308));Ic=t,Ym.dependencies={lanes:0,firstContext:t}}else Ic=Ic.next=t;return e}var Xo=null;function _w(t){Xo===null?Xo=[t]:Xo.push(t)}function HT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_w(e)):(n.next=s.next,s.next=n),e.interleaved=n,ya(t,r)}function ya(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $a=!1;function Cw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function po(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_t&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ya(t,n)}return s=r.interleaved,s===null?(e.next=e,_w(r)):(e.next=s.next,s.next=e),r.interleaved=e,ya(t,n)}function dm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lw(t,n)}}function yC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zm(t,e,n,r){var s=t.updateQueue;$a=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var p=s.baseState;o=0,h=u=c=null,l=a;do{var m=l.lane,x=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,w=l;switch(m=e,x=n,w.tag){case 1:if(N=w.payload,typeof N=="function"){p=N.call(x,p,m);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=w.payload,m=typeof N=="function"?N.call(x,p,m):N,m==null)break e;p=rn({},p,m);break e;case 2:$a=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=x,c=p):h=h.next=x,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Il|=o,t.lanes=o,t.memoizedState=p}}function xC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(fe(191,s));s.call(r)}}}var $p={},Ii=Ro($p),Rh=Ro($p),Dh=Ro($p);function Jo(t){if(t===$p)throw Error(fe(174));return t}function Sw(t,e){switch(Vt(Dh,e),Vt(Rh,t),Vt(Ii,$p),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rx(e,t)}Gt(Ii),Vt(Ii,e)}function Ud(){Gt(Ii),Gt(Rh),Gt(Dh)}function WT(t){Jo(Dh.current);var e=Jo(Ii.current),n=Rx(e,t.type);e!==n&&(Vt(Rh,t),Vt(Ii,n))}function Ew(t){Rh.current===t&&(Gt(Ii),Gt(Rh))}var tn=Ro(0);function Xm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xy=[];function jw(){for(var t=0;t<xy.length;t++)xy[t]._workInProgressVersionPrimary=null;xy.length=0}var um=ja.ReactCurrentDispatcher,by=ja.ReactCurrentBatchConfig,Pl=0,nn=null,Tn=null,Fn=null,Jm=!1,oh=!1,Oh=0,OF=0;function Yn(){throw Error(fe(321))}function Nw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ks(t[n],e[n]))return!1;return!0}function Tw(t,e,n,r,s,a){if(Pl=a,nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,um.current=t===null||t.memoizedState===null?$F:UF,t=n(r,s),oh){a=0;do{if(oh=!1,Oh=0,25<=a)throw Error(fe(301));a+=1,Fn=Tn=null,e.updateQueue=null,um.current=zF,t=n(r,s)}while(oh)}if(um.current=eg,e=Tn!==null&&Tn.next!==null,Pl=0,Fn=Tn=nn=null,Jm=!1,e)throw Error(fe(300));return t}function kw(){var t=Oh!==0;return Oh=0,t}function hi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?nn.memoizedState=Fn=t:Fn=Fn.next=t,Fn}function cs(){if(Tn===null){var t=nn.alternate;t=t!==null?t.memoizedState:null}else t=Tn.next;var e=Fn===null?nn.memoizedState:Fn.next;if(e!==null)Fn=e,Tn=t;else{if(t===null)throw Error(fe(310));Tn=t,t={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},Fn===null?nn.memoizedState=Fn=t:Fn=Fn.next=t}return Fn}function Fh(t,e){return typeof e=="function"?e(t):e}function wy(t){var e=cs(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=Tn,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((Pl&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,nn.lanes|=h,Il|=h}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,Ks(r,e.memoizedState)||(Ar=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,nn.lanes|=a,Il|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _y(t){var e=cs(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);Ks(a,e.memoizedState)||(Ar=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function GT(){}function KT(t,e){var n=nn,r=cs(),s=e(),a=!Ks(r.memoizedState,s);if(a&&(r.memoizedState=s,Ar=!0),r=r.queue,Aw(ZT.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Fn!==null&&Fn.memoizedState.tag&1){if(n.flags|=2048,Mh(9,YT.bind(null,n,r,s,e),void 0,null),Mn===null)throw Error(fe(349));Pl&30||QT(n,e,s)}return s}function QT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function YT(t,e,n,r){e.value=n,e.getSnapshot=r,XT(e)&&JT(t)}function ZT(t,e,n){return n(function(){XT(e)&&JT(t)})}function XT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ks(t,n)}catch{return!0}}function JT(t){var e=ya(t,1);e!==null&&Ws(e,t,1,-1)}function bC(t){var e=hi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fh,lastRenderedState:t},e.queue=t,t=t.dispatch=LF.bind(null,nn,t),[e.memoizedState,t]}function Mh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function e2(){return cs().memoizedState}function hm(t,e,n,r){var s=hi();nn.flags|=t,s.memoizedState=Mh(1|e,n,void 0,r===void 0?null:r)}function hv(t,e,n,r){var s=cs();r=r===void 0?null:r;var a=void 0;if(Tn!==null){var o=Tn.memoizedState;if(a=o.destroy,r!==null&&Nw(r,o.deps)){s.memoizedState=Mh(e,n,a,r);return}}nn.flags|=t,s.memoizedState=Mh(1|e,n,a,r)}function wC(t,e){return hm(8390656,8,t,e)}function Aw(t,e){return hv(2048,8,t,e)}function t2(t,e){return hv(4,2,t,e)}function n2(t,e){return hv(4,4,t,e)}function r2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function s2(t,e,n){return n=n!=null?n.concat([t]):null,hv(4,4,r2.bind(null,e,t),n)}function Pw(){}function i2(t,e){var n=cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function a2(t,e){var n=cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function o2(t,e,n){return Pl&21?(Ks(n,e)||(n=hT(),nn.lanes|=n,Il|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ar=!0),t.memoizedState=n)}function FF(t,e){var n=Dt;Dt=n!==0&&4>n?n:4,t(!0);var r=by.transition;by.transition={};try{t(!1),e()}finally{Dt=n,by.transition=r}}function l2(){return cs().memoizedState}function MF(t,e,n){var r=mo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},c2(t))d2(e,n);else if(n=HT(t,e,n,r),n!==null){var s=xr();Ws(n,t,r,s),u2(n,e,r)}}function LF(t,e,n){var r=mo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(c2(t))d2(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,Ks(l,o)){var c=e.interleaved;c===null?(s.next=s,_w(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=HT(t,e,s,r),n!==null&&(s=xr(),Ws(n,t,r,s),u2(n,e,r))}}function c2(t){var e=t.alternate;return t===nn||e!==null&&e===nn}function d2(t,e){oh=Jm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function u2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lw(t,n)}}var eg={readContext:ls,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useInsertionEffect:Yn,useLayoutEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useMutableSource:Yn,useSyncExternalStore:Yn,useId:Yn,unstable_isNewReconciler:!1},$F={readContext:ls,useCallback:function(t,e){return hi().memoizedState=[t,e===void 0?null:e],t},useContext:ls,useEffect:wC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hm(4194308,4,r2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hm(4194308,4,t,e)},useInsertionEffect:function(t,e){return hm(4,2,t,e)},useMemo:function(t,e){var n=hi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=MF.bind(null,nn,t),[r.memoizedState,t]},useRef:function(t){var e=hi();return t={current:t},e.memoizedState=t},useState:bC,useDebugValue:Pw,useDeferredValue:function(t){return hi().memoizedState=t},useTransition:function(){var t=bC(!1),e=t[0];return t=FF.bind(null,t[1]),hi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=nn,s=hi();if(Yt){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),Mn===null)throw Error(fe(349));Pl&30||QT(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,wC(ZT.bind(null,r,a,t),[t]),r.flags|=2048,Mh(9,YT.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=hi(),e=Mn.identifierPrefix;if(Yt){var n=da,r=ca;n=(r&~(1<<32-qs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=OF++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UF={readContext:ls,useCallback:i2,useContext:ls,useEffect:Aw,useImperativeHandle:s2,useInsertionEffect:t2,useLayoutEffect:n2,useMemo:a2,useReducer:wy,useRef:e2,useState:function(){return wy(Fh)},useDebugValue:Pw,useDeferredValue:function(t){var e=cs();return o2(e,Tn.memoizedState,t)},useTransition:function(){var t=wy(Fh)[0],e=cs().memoizedState;return[t,e]},useMutableSource:GT,useSyncExternalStore:KT,useId:l2,unstable_isNewReconciler:!1},zF={readContext:ls,useCallback:i2,useContext:ls,useEffect:Aw,useImperativeHandle:s2,useInsertionEffect:t2,useLayoutEffect:n2,useMemo:a2,useReducer:_y,useRef:e2,useState:function(){return _y(Fh)},useDebugValue:Pw,useDeferredValue:function(t){var e=cs();return Tn===null?e.memoizedState=t:o2(e,Tn.memoizedState,t)},useTransition:function(){var t=_y(Fh)[0],e=cs().memoizedState;return[t,e]},useMutableSource:GT,useSyncExternalStore:KT,useId:l2,unstable_isNewReconciler:!1};function xs(t,e){if(t&&t.defaultProps){e=rn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function eb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:rn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pv={isMounted:function(t){return(t=t._reactInternals)?Ql(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xr(),s=mo(t),a=pa(r,s);a.payload=e,n!=null&&(a.callback=n),e=po(t,a,s),e!==null&&(Ws(e,t,s,r),dm(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xr(),s=mo(t),a=pa(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=po(t,a,s),e!==null&&(Ws(e,t,s,r),dm(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xr(),r=mo(t),s=pa(n,r);s.tag=2,e!=null&&(s.callback=e),e=po(t,s,r),e!==null&&(Ws(e,t,r,n),dm(e,t,r))}};function _C(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!kh(n,r)||!kh(s,a):!0}function h2(t,e,n){var r=!1,s=wo,a=e.contextType;return typeof a=="object"&&a!==null?a=ls(a):(s=Ir(e)?kl:sr.current,r=e.contextTypes,a=(r=r!=null)?Md(t,s):wo),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function CC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pv.enqueueReplaceState(e,e.state,null)}function tb(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Cw(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=ls(a):(a=Ir(e)?kl:sr.current,s.context=Md(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(eb(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pv.enqueueReplaceState(s,s.state,null),Zm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function zd(t,e){try{var n="",r=e;do n+=mO(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Cy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BF=typeof WeakMap=="function"?WeakMap:Map;function p2(t,e,n){n=pa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ng||(ng=!0,hb=r),nb(t,e)},n}function f2(t,e,n){n=pa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){nb(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){nb(t,e),typeof r!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function SC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BF;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=n5.bind(null,t,e,n),e.then(t,t))}function EC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jC(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pa(-1,1),e.tag=2,po(n,e,1))),n.lanes|=1),t)}var VF=ja.ReactCurrentOwner,Ar=!1;function gr(t,e,n,r){e.child=t===null?VT(e,null,n,r):$d(e,t.child,n,r)}function NC(t,e,n,r,s){n=n.render;var a=e.ref;return Hc(e,s),r=Tw(t,e,n,r,a,s),n=kw(),t!==null&&!Ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xa(t,e,s)):(Yt&&n&&gw(e),e.flags|=1,gr(t,e,r,s),e.child)}function TC(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!$w(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,m2(t,e,a,r,s)):(t=gm(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:kh,n(o,r)&&t.ref===e.ref)return xa(t,e,s)}return e.flags|=1,t=go(a,r),t.ref=e.ref,t.return=e,e.child=t}function m2(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(kh(a,r)&&t.ref===e.ref)if(Ar=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(Ar=!0);else return e.lanes=t.lanes,xa(t,e,s)}return rb(t,e,n,r,s)}function g2(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(Dc,Lr),Lr|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Vt(Dc,Lr),Lr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Vt(Dc,Lr),Lr|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Vt(Dc,Lr),Lr|=r;return gr(t,e,s,n),e.child}function v2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rb(t,e,n,r,s){var a=Ir(n)?kl:sr.current;return a=Md(e,a),Hc(e,s),n=Tw(t,e,n,r,a,s),r=kw(),t!==null&&!Ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xa(t,e,s)):(Yt&&r&&gw(e),e.flags|=1,gr(t,e,n,s),e.child)}function kC(t,e,n,r,s){if(Ir(n)){var a=!0;Wm(e)}else a=!1;if(Hc(e,s),e.stateNode===null)pm(t,e),h2(e,n,r),tb(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ls(u):(u=Ir(n)?kl:sr.current,u=Md(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&CC(e,o,r,u),$a=!1;var m=e.memoizedState;o.state=m,Zm(e,r,o,s),c=e.memoizedState,l!==r||m!==c||Pr.current||$a?(typeof h=="function"&&(eb(e,n,h,r),c=e.memoizedState),(l=$a||_C(e,n,l,r,m,c,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,qT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:xs(e.type,l),o.props=u,p=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ls(c):(c=Ir(n)?kl:sr.current,c=Md(e,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==c)&&CC(e,o,r,c),$a=!1,m=e.memoizedState,o.state=m,Zm(e,r,o,s);var N=e.memoizedState;l!==p||m!==N||Pr.current||$a?(typeof x=="function"&&(eb(e,n,x,r),N=e.memoizedState),(u=$a||_C(e,n,u,r,m,N,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return sb(t,e,n,r,a,s)}function sb(t,e,n,r,s,a){v2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&fC(e,n,!1),xa(t,e,a);r=e.stateNode,VF.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$d(e,t.child,null,a),e.child=$d(e,null,l,a)):gr(t,e,l,a),e.memoizedState=r.state,s&&fC(e,n,!0),e.child}function y2(t){var e=t.stateNode;e.pendingContext?pC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pC(t,e.context,!1),Sw(t,e.containerInfo)}function AC(t,e,n,r,s){return Ld(),yw(s),e.flags|=256,gr(t,e,n,r),e.child}var ib={dehydrated:null,treeContext:null,retryLane:0};function ab(t){return{baseLanes:t,cachePool:null,transitions:null}}function x2(t,e,n){var r=e.pendingProps,s=tn.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Vt(tn,s&1),t===null)return Xx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=gv(o,r,0,null),t=El(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=ab(n),e.memoizedState=ib,t):Iw(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return HF(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=go(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=go(l,a):(a=El(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?ab(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=ib,r}return a=t.child,t=a.sibling,r=go(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iw(t,e){return e=gv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Af(t,e,n,r){return r!==null&&yw(r),$d(e,t.child,null,n),t=Iw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HF(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Cy(Error(fe(422))),Af(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=gv({mode:"visible",children:r.children},s,0,null),a=El(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&$d(e,t.child,null,o),e.child.memoizedState=ab(o),e.memoizedState=ib,a);if(!(e.mode&1))return Af(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(fe(419)),r=Cy(a,r,void 0),Af(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ar||l){if(r=Mn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ya(t,s),Ws(r,t,s,-1))}return Lw(),r=Cy(Error(fe(421))),Af(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=r5.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Br=ho(s.nextSibling),Vr=e,Yt=!0,Is=null,t!==null&&(ts[ns++]=ca,ts[ns++]=da,ts[ns++]=Al,ca=t.id,da=t.overflow,Al=e),e=Iw(e,r.children),e.flags|=4096,e)}function PC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jx(t.return,e,n)}function Sy(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function b2(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(gr(t,e,r.children,n),r=tn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&PC(t,n,e);else if(t.tag===19)PC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Vt(tn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Xm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Sy(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Xm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Sy(e,!0,n,null,a);break;case"together":Sy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Il|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=go(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=go(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qF(t,e,n){switch(e.tag){case 3:y2(e),Ld();break;case 5:WT(e);break;case 1:Ir(e.type)&&Wm(e);break;case 4:Sw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Vt(Qm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Vt(tn,tn.current&1),e.flags|=128,null):n&e.child.childLanes?x2(t,e,n):(Vt(tn,tn.current&1),t=xa(t,e,n),t!==null?t.sibling:null);Vt(tn,tn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return b2(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Vt(tn,tn.current),r)break;return null;case 22:case 23:return e.lanes=0,g2(t,e,n)}return xa(t,e,n)}var w2,ob,_2,C2;w2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ob=function(){};_2=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Jo(Ii.current);var a=null;switch(n){case"input":s=kx(t,s),r=kx(t,r),a=[];break;case"select":s=rn({},s,{value:void 0}),r=rn({},r,{value:void 0}),a=[];break;case"textarea":s=Ix(t,s),r=Ix(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Hm)}Dx(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_h.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_h.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Wt("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};C2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Su(t,e){if(!Yt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function WF(t,e,n){var r=e.pendingProps;switch(vw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(e),null;case 1:return Ir(e.type)&&qm(),Zn(e),null;case 3:return r=e.stateNode,Ud(),Gt(Pr),Gt(sr),jw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Tf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Is!==null&&(mb(Is),Is=null))),ob(t,e),Zn(e),null;case 5:Ew(e);var s=Jo(Dh.current);if(n=e.type,t!==null&&e.stateNode!=null)_2(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return Zn(e),null}if(t=Jo(Ii.current),Tf(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Ei]=e,r[Ih]=a,t=(e.mode&1)!==0,n){case"dialog":Wt("cancel",r),Wt("close",r);break;case"iframe":case"object":case"embed":Wt("load",r);break;case"video":case"audio":for(s=0;s<Vu.length;s++)Wt(Vu[s],r);break;case"source":Wt("error",r);break;case"img":case"image":case"link":Wt("error",r),Wt("load",r);break;case"details":Wt("toggle",r);break;case"input":U_(r,a),Wt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Wt("invalid",r);break;case"textarea":B_(r,a),Wt("invalid",r)}Dx(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Nf(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Nf(r.textContent,l,t),s=["children",""+l]):_h.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Wt("scroll",r)}switch(n){case"input":xf(r),z_(r,a,!0);break;case"textarea":xf(r),V_(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Hm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ei]=e,t[Ih]=r,w2(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ox(n,r),n){case"dialog":Wt("cancel",t),Wt("close",t),s=r;break;case"iframe":case"object":case"embed":Wt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Vu.length;s++)Wt(Vu[s],t);s=r;break;case"source":Wt("error",t),s=r;break;case"img":case"image":case"link":Wt("error",t),Wt("load",t),s=r;break;case"details":Wt("toggle",t),s=r;break;case"input":U_(t,r),s=kx(t,r),Wt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=rn({},r,{value:void 0}),Wt("invalid",t);break;case"textarea":B_(t,r),s=Ix(t,r),Wt("invalid",t);break;default:s=r}Dx(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?eT(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&XN(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ch(t,c):typeof c=="number"&&Ch(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(_h.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Wt("scroll",t):c!=null&&nw(t,a,c,o))}switch(n){case"input":xf(t),z_(t,r,!1);break;case"textarea":xf(t),V_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bo(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Uc(t,!!r.multiple,a,!1):r.defaultValue!=null&&Uc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Hm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zn(e),null;case 6:if(t&&e.stateNode!=null)C2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=Jo(Dh.current),Jo(Ii.current),Tf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ei]=e,(a=r.nodeValue!==n)&&(t=Vr,t!==null))switch(t.tag){case 3:Nf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nf(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ei]=e,e.stateNode=r}return Zn(e),null;case 13:if(Gt(tn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Yt&&Br!==null&&e.mode&1&&!(e.flags&128))zT(),Ld(),e.flags|=98560,a=!1;else if(a=Tf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(fe(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(fe(317));a[Ei]=e}else Ld(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zn(e),a=!1}else Is!==null&&(mb(Is),Is=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tn.current&1?Pn===0&&(Pn=3):Lw())),e.updateQueue!==null&&(e.flags|=4),Zn(e),null);case 4:return Ud(),ob(t,e),t===null&&Ah(e.stateNode.containerInfo),Zn(e),null;case 10:return ww(e.type._context),Zn(e),null;case 17:return Ir(e.type)&&qm(),Zn(e),null;case 19:if(Gt(tn),a=e.memoizedState,a===null)return Zn(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Su(a,!1);else{if(Pn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xm(t),o!==null){for(e.flags|=128,Su(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Vt(tn,tn.current&1|2),e.child}t=t.sibling}a.tail!==null&&fn()>Bd&&(e.flags|=128,r=!0,Su(a,!1),e.lanes=4194304)}else{if(!r)if(t=Xm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Su(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Yt)return Zn(e),null}else 2*fn()-a.renderingStartTime>Bd&&n!==1073741824&&(e.flags|=128,r=!0,Su(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=fn(),e.sibling=null,n=tn.current,Vt(tn,r?n&1|2:n&1),e):(Zn(e),null);case 22:case 23:return Mw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lr&1073741824&&(Zn(e),e.subtreeFlags&6&&(e.flags|=8192)):Zn(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function GF(t,e){switch(vw(e),e.tag){case 1:return Ir(e.type)&&qm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ud(),Gt(Pr),Gt(sr),jw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ew(e),null;case 13:if(Gt(tn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));Ld()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Gt(tn),null;case 4:return Ud(),null;case 10:return ww(e.type._context),null;case 22:case 23:return Mw(),null;case 24:return null;default:return null}}var Pf=!1,tr=!1,KF=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Rc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){on(t,e,r)}else n.current=null}function lb(t,e,n){try{n()}catch(r){on(t,e,r)}}var IC=!1;function QF(t,e){if(qx=zm,t=TT(),mw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,p=t,m=null;t:for(;;){for(var x;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==a||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)m=p,p=x;for(;;){if(p===t)break t;if(m===n&&++u===s&&(l=o),m===a&&++h===r&&(c=o),(x=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wx={focusedElem:t,selectionRange:n},zm=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var w=N.memoizedProps,b=N.memoizedState,S=e.stateNode,v=S.getSnapshotBeforeUpdate(e.elementType===e.type?w:xs(e.type,w),b);S.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(I){on(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return N=IC,IC=!1,N}function lh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&lb(e,n,a)}s=s.next}while(s!==r)}}function fv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function S2(t){var e=t.alternate;e!==null&&(t.alternate=null,S2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ei],delete e[Ih],delete e[Qx],delete e[PF],delete e[IF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function E2(t){return t.tag===5||t.tag===3||t.tag===4}function RC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||E2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function db(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hm));else if(r!==4&&(t=t.child,t!==null))for(db(t,e,n),t=t.sibling;t!==null;)db(t,e,n),t=t.sibling}function ub(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ub(t,e,n),t=t.sibling;t!==null;)ub(t,e,n),t=t.sibling}var Hn=null,Ns=!1;function Pa(t,e,n){for(n=n.child;n!==null;)j2(t,e,n),n=n.sibling}function j2(t,e,n){if(Pi&&typeof Pi.onCommitFiberUnmount=="function")try{Pi.onCommitFiberUnmount(av,n)}catch{}switch(n.tag){case 5:tr||Rc(n,e);case 6:var r=Hn,s=Ns;Hn=null,Pa(t,e,n),Hn=r,Ns=s,Hn!==null&&(Ns?(t=Hn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Hn.removeChild(n.stateNode));break;case 18:Hn!==null&&(Ns?(t=Hn,n=n.stateNode,t.nodeType===8?vy(t.parentNode,n):t.nodeType===1&&vy(t,n),Nh(t)):vy(Hn,n.stateNode));break;case 4:r=Hn,s=Ns,Hn=n.stateNode.containerInfo,Ns=!0,Pa(t,e,n),Hn=r,Ns=s;break;case 0:case 11:case 14:case 15:if(!tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&lb(n,e,o),s=s.next}while(s!==r)}Pa(t,e,n);break;case 1:if(!tr&&(Rc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){on(n,e,l)}Pa(t,e,n);break;case 21:Pa(t,e,n);break;case 22:n.mode&1?(tr=(r=tr)||n.memoizedState!==null,Pa(t,e,n),tr=r):Pa(t,e,n);break;default:Pa(t,e,n)}}function DC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KF),e.forEach(function(r){var s=s5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Hn=l.stateNode,Ns=!1;break e;case 3:Hn=l.stateNode.containerInfo,Ns=!0;break e;case 4:Hn=l.stateNode.containerInfo,Ns=!0;break e}l=l.return}if(Hn===null)throw Error(fe(160));j2(a,o,s),Hn=null,Ns=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){on(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)N2(e,t),e=e.sibling}function N2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gs(e,t),ci(t),r&4){try{lh(3,t,t.return),fv(3,t)}catch(w){on(t,t.return,w)}try{lh(5,t,t.return)}catch(w){on(t,t.return,w)}}break;case 1:gs(e,t),ci(t),r&512&&n!==null&&Rc(n,n.return);break;case 5:if(gs(e,t),ci(t),r&512&&n!==null&&Rc(n,n.return),t.flags&32){var s=t.stateNode;try{Ch(s,"")}catch(w){on(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&QN(s,a),Ox(l,o);var u=Ox(l,a);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?eT(s,p):h==="dangerouslySetInnerHTML"?XN(s,p):h==="children"?Ch(s,p):nw(s,h,p,u)}switch(l){case"input":Ax(s,a);break;case"textarea":YN(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?Uc(s,!!a.multiple,x,!1):m!==!!a.multiple&&(a.defaultValue!=null?Uc(s,!!a.multiple,a.defaultValue,!0):Uc(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ih]=a}catch(w){on(t,t.return,w)}}break;case 6:if(gs(e,t),ci(t),r&4){if(t.stateNode===null)throw Error(fe(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(w){on(t,t.return,w)}}break;case 3:if(gs(e,t),ci(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nh(e.containerInfo)}catch(w){on(t,t.return,w)}break;case 4:gs(e,t),ci(t);break;case 13:gs(e,t),ci(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Ow=fn())),r&4&&DC(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(tr=(u=tr)||h,gs(e,t),tr=u):gs(e,t),ci(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Ee=t,h=t.child;h!==null;){for(p=Ee=h;Ee!==null;){switch(m=Ee,x=m.child,m.tag){case 0:case 11:case 14:case 15:lh(4,m,m.return);break;case 1:Rc(m,m.return);var N=m.stateNode;if(typeof N.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(w){on(r,n,w)}}break;case 5:Rc(m,m.return);break;case 22:if(m.memoizedState!==null){FC(p);continue}}x!==null?(x.return=m,Ee=x):FC(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=JN("display",o))}catch(w){on(t,t.return,w)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(w){on(t,t.return,w)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gs(e,t),ci(t),r&4&&DC(t);break;case 21:break;default:gs(e,t),ci(t)}}function ci(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(E2(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ch(s,""),r.flags&=-33);var a=RC(t);ub(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=RC(t);db(t,l,o);break;default:throw Error(fe(161))}}catch(c){on(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YF(t,e,n){Ee=t,T2(t)}function T2(t,e,n){for(var r=(t.mode&1)!==0;Ee!==null;){var s=Ee,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Pf;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||tr;l=Pf;var u=tr;if(Pf=o,(tr=c)&&!u)for(Ee=s;Ee!==null;)o=Ee,c=o.child,o.tag===22&&o.memoizedState!==null?MC(s):c!==null?(c.return=o,Ee=c):MC(s);for(;a!==null;)Ee=a,T2(a),a=a.sibling;Ee=s,Pf=l,tr=u}OC(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Ee=a):OC(t)}}function OC(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tr||fv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:xs(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&xC(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xC(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Nh(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}tr||e.flags&512&&cb(e)}catch(m){on(e,e.return,m)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function FC(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function MC(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fv(4,e)}catch(c){on(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){on(e,s,c)}}var a=e.return;try{cb(e)}catch(c){on(e,a,c)}break;case 5:var o=e.return;try{cb(e)}catch(c){on(e,o,c)}}}catch(c){on(e,e.return,c)}if(e===t){Ee=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ee=l;break}Ee=e.return}}var ZF=Math.ceil,tg=ja.ReactCurrentDispatcher,Rw=ja.ReactCurrentOwner,os=ja.ReactCurrentBatchConfig,_t=0,Mn=null,Cn=null,qn=0,Lr=0,Dc=Ro(0),Pn=0,Lh=null,Il=0,mv=0,Dw=0,ch=null,kr=null,Ow=0,Bd=1/0,Ji=null,ng=!1,hb=null,fo=null,If=!1,ao=null,rg=0,dh=0,pb=null,fm=-1,mm=0;function xr(){return _t&6?fn():fm!==-1?fm:fm=fn()}function mo(t){return t.mode&1?_t&2&&qn!==0?qn&-qn:DF.transition!==null?(mm===0&&(mm=hT()),mm):(t=Dt,t!==0||(t=window.event,t=t===void 0?16:xT(t.type)),t):1}function Ws(t,e,n,r){if(50<dh)throw dh=0,pb=null,Error(fe(185));Fp(t,n,r),(!(_t&2)||t!==Mn)&&(t===Mn&&(!(_t&2)&&(mv|=n),Pn===4&&za(t,qn)),Rr(t,r),n===1&&_t===0&&!(e.mode&1)&&(Bd=fn()+500,uv&&Do()))}function Rr(t,e){var n=t.callbackNode;DO(t,e);var r=Um(t,t===Mn?qn:0);if(r===0)n!==null&&W_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&W_(n),e===1)t.tag===0?RF(LC.bind(null,t)):LT(LC.bind(null,t)),kF(function(){!(_t&6)&&Do()}),n=null;else{switch(pT(r)){case 1:n=ow;break;case 4:n=dT;break;case 16:n=$m;break;case 536870912:n=uT;break;default:n=$m}n=F2(n,k2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function k2(t,e){if(fm=-1,mm=0,_t&6)throw Error(fe(327));var n=t.callbackNode;if(qc()&&t.callbackNode!==n)return null;var r=Um(t,t===Mn?qn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sg(t,r);else{e=r;var s=_t;_t|=2;var a=P2();(Mn!==t||qn!==e)&&(Ji=null,Bd=fn()+500,Sl(t,e));do try{e5();break}catch(l){A2(t,l)}while(!0);bw(),tg.current=a,_t=s,Cn!==null?e=0:(Mn=null,qn=0,e=Pn)}if(e!==0){if(e===2&&(s=Ux(t),s!==0&&(r=s,e=fb(t,s))),e===1)throw n=Lh,Sl(t,0),za(t,r),Rr(t,fn()),n;if(e===6)za(t,r);else{if(s=t.current.alternate,!(r&30)&&!XF(s)&&(e=sg(t,r),e===2&&(a=Ux(t),a!==0&&(r=a,e=fb(t,a))),e===1))throw n=Lh,Sl(t,0),za(t,r),Rr(t,fn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:Wo(t,kr,Ji);break;case 3:if(za(t,r),(r&130023424)===r&&(e=Ow+500-fn(),10<e)){if(Um(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Kx(Wo.bind(null,t,kr,Ji),e);break}Wo(t,kr,Ji);break;case 4:if(za(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-qs(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZF(r/1960))-r,10<r){t.timeoutHandle=Kx(Wo.bind(null,t,kr,Ji),r);break}Wo(t,kr,Ji);break;case 5:Wo(t,kr,Ji);break;default:throw Error(fe(329))}}}return Rr(t,fn()),t.callbackNode===n?k2.bind(null,t):null}function fb(t,e){var n=ch;return t.current.memoizedState.isDehydrated&&(Sl(t,e).flags|=256),t=sg(t,e),t!==2&&(e=kr,kr=n,e!==null&&mb(e)),t}function mb(t){kr===null?kr=t:kr.push.apply(kr,t)}function XF(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Ks(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function za(t,e){for(e&=~Dw,e&=~mv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qs(e),r=1<<n;t[n]=-1,e&=~r}}function LC(t){if(_t&6)throw Error(fe(327));qc();var e=Um(t,0);if(!(e&1))return Rr(t,fn()),null;var n=sg(t,e);if(t.tag!==0&&n===2){var r=Ux(t);r!==0&&(e=r,n=fb(t,r))}if(n===1)throw n=Lh,Sl(t,0),za(t,e),Rr(t,fn()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wo(t,kr,Ji),Rr(t,fn()),null}function Fw(t,e){var n=_t;_t|=1;try{return t(e)}finally{_t=n,_t===0&&(Bd=fn()+500,uv&&Do())}}function Rl(t){ao!==null&&ao.tag===0&&!(_t&6)&&qc();var e=_t;_t|=1;var n=os.transition,r=Dt;try{if(os.transition=null,Dt=1,t)return t()}finally{Dt=r,os.transition=n,_t=e,!(_t&6)&&Do()}}function Mw(){Lr=Dc.current,Gt(Dc)}function Sl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TF(n)),Cn!==null)for(n=Cn.return;n!==null;){var r=n;switch(vw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qm();break;case 3:Ud(),Gt(Pr),Gt(sr),jw();break;case 5:Ew(r);break;case 4:Ud();break;case 13:Gt(tn);break;case 19:Gt(tn);break;case 10:ww(r.type._context);break;case 22:case 23:Mw()}n=n.return}if(Mn=t,Cn=t=go(t.current,null),qn=Lr=e,Pn=0,Lh=null,Dw=mv=Il=0,kr=ch=null,Xo!==null){for(e=0;e<Xo.length;e++)if(n=Xo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}Xo=null}return t}function A2(t,e){do{var n=Cn;try{if(bw(),um.current=eg,Jm){for(var r=nn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Jm=!1}if(Pl=0,Fn=Tn=nn=null,oh=!1,Oh=0,Rw.current=null,n===null||n.return===null){Pn=1,Lh=e,Cn=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=qn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=EC(o);if(x!==null){x.flags&=-257,jC(x,o,l,a,e),x.mode&1&&SC(a,u,e),e=x,c=u;var N=e.updateQueue;if(N===null){var w=new Set;w.add(c),e.updateQueue=w}else N.add(c);break e}else{if(!(e&1)){SC(a,u,e),Lw();break e}c=Error(fe(426))}}else if(Yt&&l.mode&1){var b=EC(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),jC(b,o,l,a,e),yw(zd(c,l));break e}}a=c=zd(c,l),Pn!==4&&(Pn=2),ch===null?ch=[a]:ch.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var S=p2(a,c,e);yC(a,S);break e;case 1:l=c;var v=a.type,T=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(fo===null||!fo.has(T)))){a.flags|=65536,e&=-e,a.lanes|=e;var I=f2(a,l,e);yC(a,I);break e}}a=a.return}while(a!==null)}R2(n)}catch(L){e=L,Cn===n&&n!==null&&(Cn=n=n.return);continue}break}while(!0)}function P2(){var t=tg.current;return tg.current=eg,t===null?eg:t}function Lw(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),Mn===null||!(Il&268435455)&&!(mv&268435455)||za(Mn,qn)}function sg(t,e){var n=_t;_t|=2;var r=P2();(Mn!==t||qn!==e)&&(Ji=null,Sl(t,e));do try{JF();break}catch(s){A2(t,s)}while(!0);if(bw(),_t=n,tg.current=r,Cn!==null)throw Error(fe(261));return Mn=null,qn=0,Pn}function JF(){for(;Cn!==null;)I2(Cn)}function e5(){for(;Cn!==null&&!EO();)I2(Cn)}function I2(t){var e=O2(t.alternate,t,Lr);t.memoizedProps=t.pendingProps,e===null?R2(t):Cn=e,Rw.current=null}function R2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=GF(n,e),n!==null){n.flags&=32767,Cn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pn=6,Cn=null;return}}else if(n=WF(n,e,Lr),n!==null){Cn=n;return}if(e=e.sibling,e!==null){Cn=e;return}Cn=e=t}while(e!==null);Pn===0&&(Pn=5)}function Wo(t,e,n){var r=Dt,s=os.transition;try{os.transition=null,Dt=1,t5(t,e,n,r)}finally{os.transition=s,Dt=r}return null}function t5(t,e,n,r){do qc();while(ao!==null);if(_t&6)throw Error(fe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(OO(t,a),t===Mn&&(Cn=Mn=null,qn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||If||(If=!0,F2($m,function(){return qc(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=os.transition,os.transition=null;var o=Dt;Dt=1;var l=_t;_t|=4,Rw.current=null,QF(t,n),N2(n,t),wF(Wx),zm=!!qx,Wx=qx=null,t.current=n,YF(n),jO(),_t=l,Dt=o,os.transition=a}else t.current=n;if(If&&(If=!1,ao=t,rg=s),a=t.pendingLanes,a===0&&(fo=null),kO(n.stateNode),Rr(t,fn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ng)throw ng=!1,t=hb,hb=null,t;return rg&1&&t.tag!==0&&qc(),a=t.pendingLanes,a&1?t===pb?dh++:(dh=0,pb=t):dh=0,Do(),null}function qc(){if(ao!==null){var t=pT(rg),e=os.transition,n=Dt;try{if(os.transition=null,Dt=16>t?16:t,ao===null)var r=!1;else{if(t=ao,ao=null,rg=0,_t&6)throw Error(fe(331));var s=_t;for(_t|=4,Ee=t.current;Ee!==null;){var a=Ee,o=a.child;if(Ee.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ee=u;Ee!==null;){var h=Ee;switch(h.tag){case 0:case 11:case 15:lh(8,h,a)}var p=h.child;if(p!==null)p.return=h,Ee=p;else for(;Ee!==null;){h=Ee;var m=h.sibling,x=h.return;if(S2(h),h===u){Ee=null;break}if(m!==null){m.return=x,Ee=m;break}Ee=x}}}var N=a.alternate;if(N!==null){var w=N.child;if(w!==null){N.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}Ee=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ee=o;else e:for(;Ee!==null;){if(a=Ee,a.flags&2048)switch(a.tag){case 0:case 11:case 15:lh(9,a,a.return)}var S=a.sibling;if(S!==null){S.return=a.return,Ee=S;break e}Ee=a.return}}var v=t.current;for(Ee=v;Ee!==null;){o=Ee;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Ee=T;else e:for(o=v;Ee!==null;){if(l=Ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fv(9,l)}}catch(L){on(l,l.return,L)}if(l===o){Ee=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,Ee=I;break e}Ee=l.return}}if(_t=s,Do(),Pi&&typeof Pi.onPostCommitFiberRoot=="function")try{Pi.onPostCommitFiberRoot(av,t)}catch{}r=!0}return r}finally{Dt=n,os.transition=e}}return!1}function $C(t,e,n){e=zd(n,e),e=p2(t,e,1),t=po(t,e,1),e=xr(),t!==null&&(Fp(t,1,e),Rr(t,e))}function on(t,e,n){if(t.tag===3)$C(t,t,n);else for(;e!==null;){if(e.tag===3){$C(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fo===null||!fo.has(r))){t=zd(n,t),t=f2(e,t,1),e=po(e,t,1),t=xr(),e!==null&&(Fp(e,1,t),Rr(e,t));break}}e=e.return}}function n5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xr(),t.pingedLanes|=t.suspendedLanes&n,Mn===t&&(qn&n)===n&&(Pn===4||Pn===3&&(qn&130023424)===qn&&500>fn()-Ow?Sl(t,0):Dw|=n),Rr(t,e)}function D2(t,e){e===0&&(t.mode&1?(e=_f,_f<<=1,!(_f&130023424)&&(_f=4194304)):e=1);var n=xr();t=ya(t,e),t!==null&&(Fp(t,e,n),Rr(t,n))}function r5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),D2(t,n)}function s5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),D2(t,n)}var O2;O2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pr.current)Ar=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ar=!1,qF(t,e,n);Ar=!!(t.flags&131072)}else Ar=!1,Yt&&e.flags&1048576&&$T(e,Km,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pm(t,e),t=e.pendingProps;var s=Md(e,sr.current);Hc(e,n),s=Tw(null,e,r,t,s,n);var a=kw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ir(r)?(a=!0,Wm(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cw(e),s.updater=pv,e.stateNode=s,s._reactInternals=e,tb(e,r,t,n),e=sb(null,e,r,!0,a,n)):(e.tag=0,Yt&&a&&gw(e),gr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pm(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=a5(r),t=xs(r,t),s){case 0:e=rb(null,e,r,t,n);break e;case 1:e=kC(null,e,r,t,n);break e;case 11:e=NC(null,e,r,t,n);break e;case 14:e=TC(null,e,r,xs(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xs(r,s),rb(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xs(r,s),kC(t,e,r,s,n);case 3:e:{if(y2(e),t===null)throw Error(fe(387));r=e.pendingProps,a=e.memoizedState,s=a.element,qT(t,e),Zm(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=zd(Error(fe(423)),e),e=AC(t,e,r,n,s);break e}else if(r!==s){s=zd(Error(fe(424)),e),e=AC(t,e,r,n,s);break e}else for(Br=ho(e.stateNode.containerInfo.firstChild),Vr=e,Yt=!0,Is=null,n=VT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ld(),r===s){e=xa(t,e,n);break e}gr(t,e,r,n)}e=e.child}return e;case 5:return WT(e),t===null&&Xx(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Gx(r,s)?o=null:a!==null&&Gx(r,a)&&(e.flags|=32),v2(t,e),gr(t,e,o,n),e.child;case 6:return t===null&&Xx(e),null;case 13:return x2(t,e,n);case 4:return Sw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$d(e,null,r,n):gr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xs(r,s),NC(t,e,r,s,n);case 7:return gr(t,e,e.pendingProps,n),e.child;case 8:return gr(t,e,e.pendingProps.children,n),e.child;case 12:return gr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Vt(Qm,r._currentValue),r._currentValue=o,a!==null)if(Ks(a.value,o)){if(a.children===s.children&&!Pr.current){e=xa(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=pa(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Jx(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(fe(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Jx(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}gr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Hc(e,n),s=ls(s),r=r(s),e.flags|=1,gr(t,e,r,n),e.child;case 14:return r=e.type,s=xs(r,e.pendingProps),s=xs(r.type,s),TC(t,e,r,s,n);case 15:return m2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xs(r,s),pm(t,e),e.tag=1,Ir(r)?(t=!0,Wm(e)):t=!1,Hc(e,n),h2(e,r,s),tb(e,r,s,n),sb(null,e,r,!0,t,n);case 19:return b2(t,e,n);case 22:return g2(t,e,n)}throw Error(fe(156,e.tag))};function F2(t,e){return cT(t,e)}function i5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(t,e,n,r){return new i5(t,e,n,r)}function $w(t){return t=t.prototype,!(!t||!t.isReactComponent)}function a5(t){if(typeof t=="function")return $w(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sw)return 11;if(t===iw)return 14}return 2}function go(t,e){var n=t.alternate;return n===null?(n=as(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gm(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")$w(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Sc:return El(n.children,s,a,e);case rw:o=8,s|=8;break;case Ex:return t=as(12,n,e,s|2),t.elementType=Ex,t.lanes=a,t;case jx:return t=as(13,n,e,s),t.elementType=jx,t.lanes=a,t;case Nx:return t=as(19,n,e,s),t.elementType=Nx,t.lanes=a,t;case WN:return gv(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HN:o=10;break e;case qN:o=9;break e;case sw:o=11;break e;case iw:o=14;break e;case La:o=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=as(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function El(t,e,n,r){return t=as(7,t,r,e),t.lanes=n,t}function gv(t,e,n,r){return t=as(22,t,r,e),t.elementType=WN,t.lanes=n,t.stateNode={isHidden:!1},t}function Ey(t,e,n){return t=as(6,t,null,e),t.lanes=n,t}function jy(t,e,n){return e=as(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function o5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ay(0),this.expirationTimes=ay(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ay(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uw(t,e,n,r,s,a,o,l,c){return t=new o5(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=as(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cw(a),t}function l5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function M2(t){if(!t)return wo;t=t._reactInternals;e:{if(Ql(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ir(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(Ir(n))return MT(t,n,e)}return e}function L2(t,e,n,r,s,a,o,l,c){return t=Uw(n,r,!0,t,s,a,o,l,c),t.context=M2(null),n=t.current,r=xr(),s=mo(n),a=pa(r,s),a.callback=e??null,po(n,a,s),t.current.lanes=s,Fp(t,s,r),Rr(t,r),t}function vv(t,e,n,r){var s=e.current,a=xr(),o=mo(s);return n=M2(n),e.context===null?e.context=n:e.pendingContext=n,e=pa(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=po(s,e,o),t!==null&&(Ws(t,s,o,a),dm(t,s,o)),o}function ig(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function UC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zw(t,e){UC(t,e),(t=t.alternate)&&UC(t,e)}function c5(){return null}var $2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bw(t){this._internalRoot=t}yv.prototype.render=Bw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));vv(t,e,null,null)};yv.prototype.unmount=Bw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rl(function(){vv(null,t,null,null)}),e[va]=null}};function yv(t){this._internalRoot=t}yv.prototype.unstable_scheduleHydration=function(t){if(t){var e=gT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ua.length&&e!==0&&e<Ua[n].priority;n++);Ua.splice(n,0,t),n===0&&yT(t)}};function Vw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zC(){}function d5(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=ig(o);a.call(u)}}var o=L2(e,r,t,0,null,!1,!1,"",zC);return t._reactRootContainer=o,t[va]=o.current,Ah(t.nodeType===8?t.parentNode:t),Rl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=ig(c);l.call(u)}}var c=Uw(t,0,!1,null,null,!1,!1,"",zC);return t._reactRootContainer=c,t[va]=c.current,Ah(t.nodeType===8?t.parentNode:t),Rl(function(){vv(e,c,n,r)}),c}function bv(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=ig(o);l.call(c)}}vv(e,o,t,s)}else o=d5(n,e,t,s,r);return ig(o)}fT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bu(e.pendingLanes);n!==0&&(lw(e,n|1),Rr(e,fn()),!(_t&6)&&(Bd=fn()+500,Do()))}break;case 13:Rl(function(){var r=ya(t,1);if(r!==null){var s=xr();Ws(r,t,1,s)}}),zw(t,1)}};cw=function(t){if(t.tag===13){var e=ya(t,134217728);if(e!==null){var n=xr();Ws(e,t,134217728,n)}zw(t,134217728)}};mT=function(t){if(t.tag===13){var e=mo(t),n=ya(t,e);if(n!==null){var r=xr();Ws(n,t,e,r)}zw(t,e)}};gT=function(){return Dt};vT=function(t,e){var n=Dt;try{return Dt=t,e()}finally{Dt=n}};Mx=function(t,e,n){switch(e){case"input":if(Ax(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=dv(r);if(!s)throw Error(fe(90));KN(r),Ax(r,s)}}}break;case"textarea":YN(t,n);break;case"select":e=n.value,e!=null&&Uc(t,!!n.multiple,e,!1)}};rT=Fw;sT=Rl;var u5={usingClientEntryPoint:!1,Events:[Lp,Tc,dv,tT,nT,Fw]},Eu={findFiberByHostInstance:Zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h5={bundleType:Eu.bundleType,version:Eu.version,rendererPackageName:Eu.rendererPackageName,rendererConfig:Eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oT(t),t===null?null:t.stateNode},findFiberByHostInstance:Eu.findFiberByHostInstance||c5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rf.isDisabled&&Rf.supportsFiber)try{av=Rf.inject(h5),Pi=Rf}catch{}}Gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u5;Gr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vw(e))throw Error(fe(200));return l5(t,e,null,n)};Gr.createRoot=function(t,e){if(!Vw(t))throw Error(fe(299));var n=!1,r="",s=$2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uw(t,1,!1,null,null,n,!1,r,s),t[va]=e.current,Ah(t.nodeType===8?t.parentNode:t),new Bw(e)};Gr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=oT(e),t=t===null?null:t.stateNode,t};Gr.flushSync=function(t){return Rl(t)};Gr.hydrate=function(t,e,n){if(!xv(e))throw Error(fe(200));return bv(null,t,e,!0,n)};Gr.hydrateRoot=function(t,e,n){if(!Vw(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=$2;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=L2(e,null,t,1,n??null,s,!1,a,o),t[va]=e.current,Ah(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new yv(e)};Gr.render=function(t,e,n){if(!xv(e))throw Error(fe(200));return bv(null,t,e,!1,n)};Gr.unmountComponentAtNode=function(t){if(!xv(t))throw Error(fe(40));return t._reactRootContainer?(Rl(function(){bv(null,null,t,!1,function(){t._reactRootContainer=null,t[va]=null})}),!0):!1};Gr.unstable_batchedUpdates=Fw;Gr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xv(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return bv(t,e,n,!1,r)};Gr.version="18.3.1-next-f1338f8080-20240426";function U2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U2)}catch(t){console.error(t)}}U2(),UN.exports=Gr;var Yl=UN.exports;const p5=Ea(Yl);var z2,BC=Yl;z2=BC.createRoot,BC.hydrateRoot;function f5(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,a,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),a=s.indexOf(".",1),o.push(s.substring(1,~r?r:~a?a:s.length)),l+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~r?"?":"")+"\\"+s.substring(a))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var B2={exports:{}},V2={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=y;function m5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var g5=typeof Object.is=="function"?Object.is:m5,v5=Vd.useState,y5=Vd.useEffect,x5=Vd.useLayoutEffect,b5=Vd.useDebugValue;function w5(t,e){var n=e(),r=v5({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return x5(function(){s.value=n,s.getSnapshot=e,Ny(s)&&a({inst:s})},[t,n,e]),y5(function(){return Ny(s)&&a({inst:s}),t(function(){Ny(s)&&a({inst:s})})},[t]),b5(n),n}function Ny(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!g5(t,n)}catch{return!0}}function _5(t,e){return e()}var C5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_5:w5;V2.useSyncExternalStore=Vd.useSyncExternalStore!==void 0?Vd.useSyncExternalStore:C5;B2.exports=V2;var S5=B2.exports;const E5=J0.useInsertionEffect,j5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N5=j5?y.useLayoutEffect:y.useEffect,T5=E5||N5,H2=t=>{const e=y.useRef([t,(...n)=>e[0](...n)]).current;return T5(()=>{e[0]=t}),e[1]},k5="popstate",Hw="pushState",qw="replaceState",A5="hashchange",VC=[k5,Hw,qw,A5],P5=t=>{for(const e of VC)addEventListener(e,t);return()=>{for(const e of VC)removeEventListener(e,t)}},q2=(t,e)=>S5.useSyncExternalStore(P5,t,e),I5=()=>location.search,R5=({ssrSearch:t=""}={})=>q2(I5,()=>t),HC=()=>location.pathname,D5=({ssrPath:t}={})=>q2(HC,t?()=>t:HC),O5=(t,{replace:e=!1,state:n=null}={})=>history[e?qw:Hw](n,"",t),F5=(t={})=>[D5(t),O5],qC=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[qC]>"u"){for(const t of[Hw,qw]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,qC,{value:!0})}const M5=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",W2=(t="")=>t==="/"?"":t,L5=(t,e)=>t[0]==="~"?t.slice(1):W2(e)+t,$5=(t="",e)=>M5(WC(W2(t)),WC(e)),WC=t=>{try{return decodeURI(t)}catch{return t}},G2={hook:F5,searchHook:R5,parser:f5,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},K2=y.createContext(G2),Up=()=>y.useContext(K2),Q2={},Y2=y.createContext(Q2),U5=()=>y.useContext(Y2),wv=t=>{const[e,n]=t.hook(t);return[$5(t.base,e),H2((r,s)=>n(L5(r,t.base),s))]},Z2=()=>wv(Up()),X2=(t,e,n,r)=>{const{pattern:s,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=a!==!1?Object.fromEntries(a.map((p,m)=>[p,c[m]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},z5=({children:t,...e})=>{var h,p;const n=Up(),r=e.hook?G2:n;let s=r;const[a,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=a),e.hrefs=e.hrefs??((p=e.hook)==null?void 0:p.hrefs);let l=y.useRef({}),c=l.current,u=c;for(let m in r){const x=m==="base"?r[m]+(e[m]||""):e[m]||r[m];c===u&&x!==u[m]&&(l.current=u={...u}),u[m]=x,x!==r[m]&&(s=u)}return y.createElement(K2.Provider,{value:s,children:t})},GC=({children:t,component:e},n)=>e?y.createElement(e,{params:n}):typeof t=="function"?t(n):t,B5=t=>{let e=y.useRef(Q2),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},ju=({path:t,nest:e,match:n,...r})=>{const s=Up(),[a]=wv(s),[o,l,c]=n??X2(s.parser,t,a,e),u=B5({...U5(),...l});if(!o)return null;const h=c?y.createElement(z5,{base:c},GC(r,u)):GC(r,u);return y.createElement(Y2.Provider,{value:u,children:h})},uh=y.forwardRef((t,e)=>{const n=Up(),[r,s]=wv(n),{to:a="",href:o=a,onClick:l,asChild:c,children:u,className:h,replace:p,state:m,...x}=t,N=H2(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(l==null||l(b),b.defaultPrevented||(b.preventDefault(),s(o,t)))}),w=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&y.isValidElement(u)?y.cloneElement(u,{onClick:N,href:w}):y.createElement("a",{...x,onClick:N,href:w,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),J2=t=>Array.isArray(t)?t.flatMap(e=>J2(e&&e.type===y.Fragment?e.props.children:e)):[t],V5=({children:t,location:e})=>{const n=Up(),[r]=wv(n);for(const s of J2(t)){let a=0;if(y.isValidElement(s)&&(a=X2(n.parser,s.props.path,e||r,s.props.nest))[0])return y.cloneElement(s,{match:a})}return null};var su=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Dl=typeof window>"u"||"Deno"in globalThis;function es(){}function H5(t,e){return typeof t=="function"?t(e):t}function gb(t){return typeof t=="number"&&t>=0&&t!==1/0}function ek(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Wc(t,e){return typeof t=="function"?t(e):t}function Rs(t,e){return typeof t=="function"?t(e):t}function KC(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==Ww(o,e.options))return!1}else if(!$h(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||a&&!a(e))}function QC(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Ol(e.options.mutationKey)!==Ol(a))return!1}else if(!$h(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Ww(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ol)(t)}function Ol(t){return JSON.stringify(t,(e,n)=>vb(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function $h(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!$h(t[n],e[n])):!1}function tk(t,e){if(t===e)return t;const n=YC(t)&&YC(e);if(n||vb(t)&&vb(e)){const r=n?t:Object.keys(t),s=r.length,a=n?e:Object.keys(e),o=a.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:a[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=tk(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function ag(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function YC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function vb(t){if(!ZC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!ZC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ZC(t){return Object.prototype.toString.call(t)==="[object Object]"}function q5(t){return new Promise(e=>{setTimeout(e,t)})}function yb(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?tk(t,e):e}function W5(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function G5(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Gw=Symbol();function nk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Gw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var al,Ga,rd,xN,K5=(xN=class extends su{constructor(){super();X(this,al);X(this,Ga);X(this,rd);re(this,rd,e=>{if(!Dl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){k(this,Ga)||this.setEventListener(k(this,rd))}onUnsubscribe(){var e;this.hasListeners()||((e=k(this,Ga))==null||e.call(this),re(this,Ga,void 0))}setEventListener(e){var n;re(this,rd,e),(n=k(this,Ga))==null||n.call(this),re(this,Ga,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){k(this,al)!==e&&(re(this,al,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof k(this,al)=="boolean"?k(this,al):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},al=new WeakMap,Ga=new WeakMap,rd=new WeakMap,xN),Kw=new K5,sd,Ka,id,bN,Q5=(bN=class extends su{constructor(){super();X(this,sd,!0);X(this,Ka);X(this,id);re(this,id,e=>{if(!Dl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){k(this,Ka)||this.setEventListener(k(this,id))}onUnsubscribe(){var e;this.hasListeners()||((e=k(this,Ka))==null||e.call(this),re(this,Ka,void 0))}setEventListener(e){var n;re(this,id,e),(n=k(this,Ka))==null||n.call(this),re(this,Ka,e(this.setOnline.bind(this)))}setOnline(e){k(this,sd)!==e&&(re(this,sd,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return k(this,sd)}},sd=new WeakMap,Ka=new WeakMap,id=new WeakMap,bN),og=new Q5;function xb(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Y5(t){return Math.min(1e3*2**t,3e4)}function rk(t){return(t??"online")==="online"?og.isOnline():!0}var sk=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ty(t){return t instanceof sk}function ik(t){let e=!1,n=0,r=!1,s;const a=xb(),o=w=>{var b;r||(m(new sk(w)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>Kw.isFocused()&&(t.networkMode==="always"||og.isOnline())&&t.canRun(),h=()=>rk(t.networkMode)&&t.canRun(),p=w=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,w),s==null||s(),a.resolve(w))},m=w=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,w),s==null||s(),a.reject(w))},x=()=>new Promise(w=>{var b;s=S=>{(r||u())&&w(S)},(b=t.onPause)==null||b.call(t)}).then(()=>{var w;s=void 0,r||(w=t.onContinue)==null||w.call(t)}),N=()=>{if(r)return;let w;const b=n===0?t.initialPromise:void 0;try{w=b??t.fn()}catch(S){w=Promise.reject(S)}Promise.resolve(w).then(p).catch(S=>{var R;if(r)return;const v=t.retry??(Dl?0:3),T=t.retryDelay??Y5,I=typeof T=="function"?T(n,S):T,L=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,S);if(e||!L){m(S);return}n++,(R=t.onFail)==null||R.call(t,n,S),q5(I).then(()=>u()?void 0:x()).then(()=>{e?m(S):N()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?N():x().then(N),a)}}function Z5(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const a=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var An=Z5(),ol,wN,ak=(wN=class{constructor(){X(this,ol)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gb(this.gcTime)&&re(this,ol,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Dl?1/0:5*60*1e3))}clearGcTimeout(){k(this,ol)&&(clearTimeout(k(this,ol)),re(this,ol,void 0))}},ol=new WeakMap,wN),ad,od,Xr,Jn,dp,ll,bs,Yi,_N,X5=(_N=class extends ak{constructor(n){super();X(this,bs);X(this,ad);X(this,od);X(this,Xr);X(this,Jn);X(this,dp);X(this,ll);re(this,ll,!1),re(this,dp,n.defaultOptions),this.setOptions(n.options),this.observers=[],re(this,Xr,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,re(this,ad,J5(this.options)),this.state=n.state??k(this,ad),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=k(this,Jn))==null?void 0:n.promise}setOptions(n){this.options={...k(this,dp),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&k(this,Xr).remove(this)}setData(n,r){const s=yb(this.state.data,n,this.options);return ae(this,bs,Yi).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){ae(this,bs,Yi).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=k(this,Jn))==null?void 0:s.promise;return(a=k(this,Jn))==null||a.cancel(n),r?r.then(es).catch(es):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(k(this,ad))}isActive(){return this.observers.some(n=>Rs(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!ek(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=k(this,Jn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=k(this,Jn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),k(this,Xr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(k(this,Jn)&&(k(this,ll)?k(this,Jn).cancel({revert:!0}):k(this,Jn).cancelRetry()),this.scheduleGc()),k(this,Xr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ae(this,bs,Yi).call(this,{type:"invalidate"})}fetch(n,r){var u,h,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(k(this,Jn))return k(this,Jn).continueRetry(),k(this,Jn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(x=>x.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(re(this,ll,!0),s.signal)})},o=()=>{const m=nk(this.options,r),x={queryKey:this.queryKey,meta:this.meta};return a(x),re(this,ll,!1),this.options.persister?this.options.persister(m,x,this):m(x)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};a(l),(u=this.options.behavior)==null||u.onFetch(l,this),re(this,od,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&ae(this,bs,Yi).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const c=m=>{var x,N,w,b;Ty(m)&&m.silent||ae(this,bs,Yi).call(this,{type:"error",error:m}),Ty(m)||((N=(x=k(this,Xr).config).onError)==null||N.call(x,m,this),(b=(w=k(this,Xr).config).onSettled)==null||b.call(w,this.state.data,m,this)),this.scheduleGc()};return re(this,Jn,ik({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var x,N,w,b;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(S){c(S);return}(N=(x=k(this,Xr).config).onSuccess)==null||N.call(x,m,this),(b=(w=k(this,Xr).config).onSettled)==null||b.call(w,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,x)=>{ae(this,bs,Yi).call(this,{type:"failed",failureCount:m,error:x})},onPause:()=>{ae(this,bs,Yi).call(this,{type:"pause"})},onContinue:()=>{ae(this,bs,Yi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),k(this,Jn).start()}},ad=new WeakMap,od=new WeakMap,Xr=new WeakMap,Jn=new WeakMap,dp=new WeakMap,ll=new WeakMap,bs=new WeakSet,Yi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...ok(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=n.error;return Ty(a)&&a.revert&&k(this,od)?{...k(this,od),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),An.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),k(this,Xr).notify({query:this,type:"updated",action:n})})},_N);function ok(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function J5(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var gi,CN,eM=(CN=class extends su{constructor(e={}){super();X(this,gi);this.config=e,re(this,gi,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??Ww(s,n);let o=this.get(a);return o||(o=new X5({cache:this,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){k(this,gi).has(e.queryHash)||(k(this,gi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=k(this,gi).get(e.queryHash);n&&(e.destroy(),n===e&&k(this,gi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){An.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return k(this,gi).get(e)}getAll(){return[...k(this,gi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>KC(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>KC(e,r)):n}notify(e){An.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){An.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){An.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},gi=new WeakMap,CN),vi,hr,cl,yi,Oa,SN,tM=(SN=class extends ak{constructor(e){super();X(this,yi);X(this,vi);X(this,hr);X(this,cl);this.mutationId=e.mutationId,re(this,hr,e.mutationCache),re(this,vi,[]),this.state=e.state||lk(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){k(this,vi).includes(e)||(k(this,vi).push(e),this.clearGcTimeout(),k(this,hr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){re(this,vi,k(this,vi).filter(n=>n!==e)),this.scheduleGc(),k(this,hr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){k(this,vi).length||(this.state.status==="pending"?this.scheduleGc():k(this,hr).remove(this))}continue(){var e;return((e=k(this,cl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,a,o,l,c,u,h,p,m,x,N,w,b,S,v,T,I,L,R,C;re(this,cl,ik({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(_,P)=>{ae(this,yi,Oa).call(this,{type:"failed",failureCount:_,error:P})},onPause:()=>{ae(this,yi,Oa).call(this,{type:"pause"})},onContinue:()=>{ae(this,yi,Oa).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,hr).canRun(this)}));const n=this.state.status==="pending",r=!k(this,cl).canStart();try{if(!n){ae(this,yi,Oa).call(this,{type:"pending",variables:e,isPaused:r}),await((a=(s=k(this,hr).config).onMutate)==null?void 0:a.call(s,e,this));const P=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));P!==this.state.context&&ae(this,yi,Oa).call(this,{type:"pending",context:P,variables:e,isPaused:r})}const _=await k(this,cl).start();return await((u=(c=k(this,hr).config).onSuccess)==null?void 0:u.call(c,_,e,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,_,e,this.state.context)),await((x=(m=k(this,hr).config).onSettled)==null?void 0:x.call(m,_,null,this.state.variables,this.state.context,this)),await((w=(N=this.options).onSettled)==null?void 0:w.call(N,_,null,e,this.state.context)),ae(this,yi,Oa).call(this,{type:"success",data:_}),_}catch(_){try{throw await((S=(b=k(this,hr).config).onError)==null?void 0:S.call(b,_,e,this.state.context,this)),await((T=(v=this.options).onError)==null?void 0:T.call(v,_,e,this.state.context)),await((L=(I=k(this,hr).config).onSettled)==null?void 0:L.call(I,void 0,_,this.state.variables,this.state.context,this)),await((C=(R=this.options).onSettled)==null?void 0:C.call(R,void 0,_,e,this.state.context)),_}finally{ae(this,yi,Oa).call(this,{type:"error",error:_})}}finally{k(this,hr).runNext(this)}}},vi=new WeakMap,hr=new WeakMap,cl=new WeakMap,yi=new WeakSet,Oa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),An.batch(()=>{k(this,vi).forEach(r=>{r.onMutationUpdate(e)}),k(this,hr).notify({mutation:this,type:"updated",action:e})})},SN);function lk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mr,up,EN,nM=(EN=class extends su{constructor(e={}){super();X(this,Mr);X(this,up);this.config=e,re(this,Mr,new Map),re(this,up,Date.now())}build(e,n,r){const s=new tM({mutationCache:this,mutationId:++mf(this,up)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Df(e),r=k(this,Mr).get(n)??[];r.push(e),k(this,Mr).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Df(e);if(k(this,Mr).has(n)){const s=(r=k(this,Mr).get(n))==null?void 0:r.filter(a=>a!==e);s&&(s.length===0?k(this,Mr).delete(n):k(this,Mr).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=k(this,Mr).get(Df(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=k(this,Mr).get(Df(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){An.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...k(this,Mr).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>QC(n,r))}findAll(e={}){return this.getAll().filter(n=>QC(e,n))}notify(e){An.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return An.batch(()=>Promise.all(e.map(n=>n.continue().catch(es))))}},Mr=new WeakMap,up=new WeakMap,EN);function Df(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function XC(t){return{onFetch:(e,n)=>{var h,p,m,x,N;const r=e.options,s=(m=(p=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:p.fetchMore)==null?void 0:m.direction,a=((x=e.state.data)==null?void 0:x.pages)||[],o=((N=e.state.data)==null?void 0:N.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let w=!1;const b=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},S=nk(e.options,e.fetchOptions),v=async(T,I,L)=>{if(w)return Promise.reject();if(I==null&&T.pages.length)return Promise.resolve(T);const R={queryKey:e.queryKey,pageParam:I,direction:L?"backward":"forward",meta:e.options.meta};b(R);const C=await S(R),{maxPages:_}=e.options,P=L?G5:W5;return{pages:P(T.pages,C,_),pageParams:P(T.pageParams,I,_)}};if(s&&a.length){const T=s==="backward",I=T?rM:JC,L={pages:a,pageParams:o},R=I(r,L);l=await v(L,R,T)}else{const T=t??a.length;do{const I=c===0?o[0]??r.initialPageParam:JC(r,l);if(c>0&&I==null)break;l=await v(l,I),c++}while(c<T)}return l};e.options.persister?e.fetchFn=()=>{var w,b;return(b=(w=e.options).persister)==null?void 0:b.call(w,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function JC(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function rM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var an,Qa,Ya,ld,cd,Za,dd,ud,jN,sM=(jN=class{constructor(t={}){X(this,an);X(this,Qa);X(this,Ya);X(this,ld);X(this,cd);X(this,Za);X(this,dd);X(this,ud);re(this,an,t.queryCache||new eM),re(this,Qa,t.mutationCache||new nM),re(this,Ya,t.defaultOptions||{}),re(this,ld,new Map),re(this,cd,new Map),re(this,Za,0)}mount(){mf(this,Za)._++,k(this,Za)===1&&(re(this,dd,Kw.subscribe(async t=>{t&&(await this.resumePausedMutations(),k(this,an).onFocus())})),re(this,ud,og.subscribe(async t=>{t&&(await this.resumePausedMutations(),k(this,an).onOnline())})))}unmount(){var t,e;mf(this,Za)._--,k(this,Za)===0&&((t=k(this,dd))==null||t.call(this),re(this,dd,void 0),(e=k(this,ud))==null||e.call(this),re(this,ud,void 0))}isFetching(t){return k(this,an).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return k(this,Qa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=k(this,an).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=k(this,an).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Wc(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return k(this,an).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=k(this,an).get(r.queryHash),a=s==null?void 0:s.state.data,o=H5(e,a);if(o!==void 0)return k(this,an).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return An.batch(()=>k(this,an).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=k(this,an).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=k(this,an);An.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=k(this,an),r={type:"active",...t};return An.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=An.batch(()=>k(this,an).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(es).catch(es)}invalidateQueries(t={},e={}){return An.batch(()=>{if(k(this,an).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=An.batch(()=>k(this,an).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(es)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(es)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=k(this,an).build(this,e);return n.isStaleByTime(Wc(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(es).catch(es)}fetchInfiniteQuery(t){return t.behavior=XC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(es).catch(es)}ensureInfiniteQueryData(t){return t.behavior=XC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return og.isOnline()?k(this,Qa).resumePausedMutations():Promise.resolve()}getQueryCache(){return k(this,an)}getMutationCache(){return k(this,Qa)}getDefaultOptions(){return k(this,Ya)}setDefaultOptions(t){re(this,Ya,t)}setQueryDefaults(t,e){k(this,ld).set(Ol(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...k(this,ld).values()];let n={};return e.forEach(r=>{$h(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){k(this,cd).set(Ol(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...k(this,cd).values()];let n={};return e.forEach(r=>{$h(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...k(this,Ya).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ww(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Gw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...k(this,Ya).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){k(this,an).clear(),k(this,Qa).clear()}},an=new WeakMap,Qa=new WeakMap,Ya=new WeakMap,ld=new WeakMap,cd=new WeakMap,Za=new WeakMap,dd=new WeakMap,ud=new WeakMap,jN),Nr,gt,hp,pr,dl,hd,Xa,xi,pp,pd,fd,ul,hl,Ja,md,kt,Hu,bb,wb,_b,Cb,Sb,Eb,jb,ck,NN,iM=(NN=class extends su{constructor(e,n){super();X(this,kt);X(this,Nr);X(this,gt);X(this,hp);X(this,pr);X(this,dl);X(this,hd);X(this,Xa);X(this,xi);X(this,pp);X(this,pd);X(this,fd);X(this,ul);X(this,hl);X(this,Ja);X(this,md,new Set);this.options=n,re(this,Nr,e),re(this,xi,null),re(this,Xa,xb()),this.options.experimental_prefetchInRender||k(this,Xa).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(k(this,gt).addObserver(this),eS(k(this,gt),this.options)?ae(this,kt,Hu).call(this):this.updateResult(),ae(this,kt,Cb).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Nb(k(this,gt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Nb(k(this,gt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ae(this,kt,Sb).call(this),ae(this,kt,Eb).call(this),k(this,gt).removeObserver(this)}setOptions(e,n){const r=this.options,s=k(this,gt);if(this.options=k(this,Nr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Rs(this.options.enabled,k(this,gt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ae(this,kt,jb).call(this),k(this,gt).setOptions(this.options),r._defaulted&&!ag(this.options,r)&&k(this,Nr).getQueryCache().notify({type:"observerOptionsUpdated",query:k(this,gt),observer:this});const a=this.hasListeners();a&&tS(k(this,gt),s,this.options,r)&&ae(this,kt,Hu).call(this),this.updateResult(n),a&&(k(this,gt)!==s||Rs(this.options.enabled,k(this,gt))!==Rs(r.enabled,k(this,gt))||Wc(this.options.staleTime,k(this,gt))!==Wc(r.staleTime,k(this,gt)))&&ae(this,kt,bb).call(this);const o=ae(this,kt,wb).call(this);a&&(k(this,gt)!==s||Rs(this.options.enabled,k(this,gt))!==Rs(r.enabled,k(this,gt))||o!==k(this,Ja))&&ae(this,kt,_b).call(this,o)}getOptimisticResult(e){const n=k(this,Nr).getQueryCache().build(k(this,Nr),e),r=this.createResult(n,e);return oM(this,r)&&(re(this,pr,r),re(this,hd,this.options),re(this,dl,k(this,gt).state)),r}getCurrentResult(){return k(this,pr)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){k(this,md).add(e)}getCurrentQuery(){return k(this,gt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=k(this,Nr).defaultQueryOptions(e),r=k(this,Nr).getQueryCache().build(k(this,Nr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return ae(this,kt,Hu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),k(this,pr)))}createResult(e,n){var _;const r=k(this,gt),s=this.options,a=k(this,pr),o=k(this,dl),l=k(this,hd),u=e!==r?e.state:k(this,hp),{state:h}=e;let p={...h},m=!1,x;if(n._optimisticResults){const P=this.hasListeners(),A=!P&&eS(e,n),F=P&&tS(e,r,n,s);(A||F)&&(p={...p,...ok(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:N,errorUpdatedAt:w,status:b}=p;if(n.select&&p.data!==void 0)if(a&&p.data===(o==null?void 0:o.data)&&n.select===k(this,pp))x=k(this,pd);else try{re(this,pp,n.select),x=n.select(p.data),x=yb(a==null?void 0:a.data,x,n),re(this,pd,x),re(this,xi,null)}catch(P){re(this,xi,P)}else x=p.data;if(n.placeholderData!==void 0&&x===void 0&&b==="pending"){let P;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))P=a.data;else if(P=typeof n.placeholderData=="function"?n.placeholderData((_=k(this,fd))==null?void 0:_.state.data,k(this,fd)):n.placeholderData,n.select&&P!==void 0)try{P=n.select(P),re(this,xi,null)}catch(A){re(this,xi,A)}P!==void 0&&(b="success",x=yb(a==null?void 0:a.data,P,n),m=!0)}k(this,xi)&&(N=k(this,xi),x=k(this,pd),w=Date.now(),b="error");const S=p.fetchStatus==="fetching",v=b==="pending",T=b==="error",I=v&&S,L=x!==void 0,C={status:b,fetchStatus:p.fetchStatus,isPending:v,isSuccess:b==="success",isError:T,isInitialLoading:I,isLoading:I,data:x,dataUpdatedAt:p.dataUpdatedAt,error:N,errorUpdatedAt:w,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:S,isRefetching:S&&!v,isLoadingError:T&&!L,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:T&&L,isStale:Qw(e,n),refetch:this.refetch,promise:k(this,Xa)};if(this.options.experimental_prefetchInRender){const P=D=>{C.status==="error"?D.reject(C.error):C.data!==void 0&&D.resolve(C.data)},A=()=>{const D=re(this,Xa,C.promise=xb());P(D)},F=k(this,Xa);switch(F.status){case"pending":e.queryHash===r.queryHash&&P(F);break;case"fulfilled":(C.status==="error"||C.data!==F.value)&&A();break;case"rejected":(C.status!=="error"||C.error!==F.reason)&&A();break}}return C}updateResult(e){const n=k(this,pr),r=this.createResult(k(this,gt),this.options);if(re(this,dl,k(this,gt).state),re(this,hd,this.options),k(this,dl).data!==void 0&&re(this,fd,k(this,gt)),ag(r,n))return;re(this,pr,r);const s={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!k(this,md).size)return!0;const c=new Set(l??k(this,md));return this.options.throwOnError&&c.add("error"),Object.keys(k(this,pr)).some(u=>{const h=u;return k(this,pr)[h]!==n[h]&&c.has(h)})};(e==null?void 0:e.listeners)!==!1&&a()&&(s.listeners=!0),ae(this,kt,ck).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ae(this,kt,Cb).call(this)}},Nr=new WeakMap,gt=new WeakMap,hp=new WeakMap,pr=new WeakMap,dl=new WeakMap,hd=new WeakMap,Xa=new WeakMap,xi=new WeakMap,pp=new WeakMap,pd=new WeakMap,fd=new WeakMap,ul=new WeakMap,hl=new WeakMap,Ja=new WeakMap,md=new WeakMap,kt=new WeakSet,Hu=function(e){ae(this,kt,jb).call(this);let n=k(this,gt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(es)),n},bb=function(){ae(this,kt,Sb).call(this);const e=Wc(this.options.staleTime,k(this,gt));if(Dl||k(this,pr).isStale||!gb(e))return;const r=ek(k(this,pr).dataUpdatedAt,e)+1;re(this,ul,setTimeout(()=>{k(this,pr).isStale||this.updateResult()},r))},wb=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(k(this,gt)):this.options.refetchInterval)??!1},_b=function(e){ae(this,kt,Eb).call(this),re(this,Ja,e),!(Dl||Rs(this.options.enabled,k(this,gt))===!1||!gb(k(this,Ja))||k(this,Ja)===0)&&re(this,hl,setInterval(()=>{(this.options.refetchIntervalInBackground||Kw.isFocused())&&ae(this,kt,Hu).call(this)},k(this,Ja)))},Cb=function(){ae(this,kt,bb).call(this),ae(this,kt,_b).call(this,ae(this,kt,wb).call(this))},Sb=function(){k(this,ul)&&(clearTimeout(k(this,ul)),re(this,ul,void 0))},Eb=function(){k(this,hl)&&(clearInterval(k(this,hl)),re(this,hl,void 0))},jb=function(){const e=k(this,Nr).getQueryCache().build(k(this,Nr),this.options);if(e===k(this,gt))return;const n=k(this,gt);re(this,gt,e),re(this,hp,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},ck=function(e){An.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(k(this,pr))}),k(this,Nr).getQueryCache().notify({query:k(this,gt),type:"observerResultsUpdated"})})},NN);function aM(t,e){return Rs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function eS(t,e){return aM(t,e)||t.state.data!==void 0&&Nb(t,e,e.refetchOnMount)}function Nb(t,e,n){if(Rs(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Qw(t,e)}return!1}function tS(t,e,n,r){return(t!==e||Rs(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Qw(t,n)}function Qw(t,e){return Rs(e.enabled,t)!==!1&&t.isStaleByTime(Wc(e.staleTime,t))}function oM(t,e){return!ag(t.getCurrentResult(),e)}var eo,to,Tr,na,ma,vm,Tb,TN,lM=(TN=class extends su{constructor(n,r){super();X(this,ma);X(this,eo);X(this,to);X(this,Tr);X(this,na);re(this,eo,n),this.setOptions(r),this.bindMethods(),ae(this,ma,vm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=k(this,eo).defaultMutationOptions(n),ag(this.options,r)||k(this,eo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:k(this,Tr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ol(r.mutationKey)!==Ol(this.options.mutationKey)?this.reset():((s=k(this,Tr))==null?void 0:s.state.status)==="pending"&&k(this,Tr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=k(this,Tr))==null||n.removeObserver(this)}onMutationUpdate(n){ae(this,ma,vm).call(this),ae(this,ma,Tb).call(this,n)}getCurrentResult(){return k(this,to)}reset(){var n;(n=k(this,Tr))==null||n.removeObserver(this),re(this,Tr,void 0),ae(this,ma,vm).call(this),ae(this,ma,Tb).call(this)}mutate(n,r){var s;return re(this,na,r),(s=k(this,Tr))==null||s.removeObserver(this),re(this,Tr,k(this,eo).getMutationCache().build(k(this,eo),this.options)),k(this,Tr).addObserver(this),k(this,Tr).execute(n)}},eo=new WeakMap,to=new WeakMap,Tr=new WeakMap,na=new WeakMap,ma=new WeakSet,vm=function(){var r;const n=((r=k(this,Tr))==null?void 0:r.state)??lk();re(this,to,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Tb=function(n){An.batch(()=>{var r,s,a,o,l,c,u,h;if(k(this,na)&&this.hasListeners()){const p=k(this,to).variables,m=k(this,to).context;(n==null?void 0:n.type)==="success"?((s=(r=k(this,na)).onSuccess)==null||s.call(r,n.data,p,m),(o=(a=k(this,na)).onSettled)==null||o.call(a,n.data,null,p,m)):(n==null?void 0:n.type)==="error"&&((c=(l=k(this,na)).onError)==null||c.call(l,n.error,p,m),(h=(u=k(this,na)).onSettled)==null||h.call(u,void 0,n.error,p,m))}this.listeners.forEach(p=>{p(k(this,to))})})},TN),dk=y.createContext(void 0),Zl=t=>{const e=y.useContext(dk);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},cM=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(dk.Provider,{value:t,children:e})),uk=y.createContext(!1),dM=()=>y.useContext(uk);uk.Provider;function uM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var hM=y.createContext(uM()),pM=()=>y.useContext(hM);function hk(t,e){return typeof t=="function"?t(...e):!!t}function kb(){}var fM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},mM=t=>{y.useEffect(()=>{t.clearReset()},[t])},gM=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&hk(n,[t.error,r]),vM=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},yM=(t,e)=>t.isLoading&&t.isFetching&&!e,xM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,nS=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function bM(t,e,n){var h,p,m,x,N;const r=Zl(),s=dM(),a=pM(),o=r.defaultQueryOptions(t);(p=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||p.call(h,o),o._optimisticResults=s?"isRestoring":"optimistic",vM(o),fM(o,a),mM(a);const l=!r.getQueryCache().get(o.queryHash),[c]=y.useState(()=>new e(r,o)),u=c.getOptimisticResult(o);if(y.useSyncExternalStore(y.useCallback(w=>{const b=s?kb:c.subscribe(An.batchCalls(w));return c.updateResult(),b},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),y.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),xM(o,u))throw nS(o,c,a);if(gM({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw u.error;if((x=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||x.call(m,o,u),o.experimental_prefetchInRender&&!Dl&&yM(u,s)){const w=l?nS(o,c,a):(N=r.getQueryCache().get(o.queryHash))==null?void 0:N.promise;w==null||w.catch(kb).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Qt(t,e){return bM(t,iM)}function jt(t,e){const n=Zl(),[r]=y.useState(()=>new lM(n,t));y.useEffect(()=>{r.setOptions(t)},[r,t]);const s=y.useSyncExternalStore(y.useCallback(o=>r.subscribe(An.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=y.useCallback((o,l)=>{r.mutate(o,l).catch(kb)},[r]);if(s.error&&hk(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}async function pk(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function Xt(t,e="GET",n){var s;const r=await fetch(t,{method:e,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await pk(r),(s=r.headers.get("content-type"))!=null&&s.includes("application/json")?await r.json():r}const wM=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await pk(n),await n.json())},_M=new sM({defaultOptions:{queries:{queryFn:wM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),CM=1,SM=1e6;let ky=0;function EM(){return ky=(ky+1)%Number.MAX_SAFE_INTEGER,ky.toString()}const Ay=new Map,rS=t=>{if(Ay.has(t))return;const e=setTimeout(()=>{Ay.delete(t),hh({type:"REMOVE_TOAST",toastId:t})},SM);Ay.set(t,e)},jM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,CM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?rS(n):t.toasts.forEach(r=>{rS(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},ym=[];let xm={toasts:[]};function hh(t){xm=jM(xm,t),ym.forEach(e=>{e(xm)})}function NM({...t}){const e=EM(),n=s=>hh({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>hh({type:"DISMISS_TOAST",toastId:e});return hh({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function ti(){const[t,e]=y.useState(xm);return y.useEffect(()=>(ym.push(e),()=>{const n=ym.indexOf(e);n>-1&&ym.splice(n,1)}),[t]),{...t,toast:NM,dismiss:n=>hh({type:"DISMISS_TOAST",toastId:n})}}function He(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function sS(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Yw(...t){return e=>{let n=!1;const r=t.map(s=>{const a=sS(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():sS(t[s],null)}}}}function Ft(...t){return y.useCallback(Yw(...t),t)}function TM(t,e){const n=y.createContext(e),r=a=>{const{children:o,...l}=a,c=y.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(a){const o=y.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function Na(t,e=[]){let n=[];function r(a,o){const l=y.createContext(o),c=n.length;n=[...n,o];const u=p=>{var S;const{scope:m,children:x,...N}=p,w=((S=m==null?void 0:m[t])==null?void 0:S[c])||l,b=y.useMemo(()=>N,Object.values(N));return i.jsx(w.Provider,{value:b,children:x})};u.displayName=a+"Provider";function h(p,m){var w;const x=((w=m==null?void 0:m[t])==null?void 0:w[c])||l,N=y.useContext(x);if(N)return N;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[u,h]}const s=()=>{const a=n.map(o=>y.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,kM(s,...e)]}function kM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const p=c(a)[`__scope${u}`];return{...l,...p}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Hd(t){const e=PM(t),n=y.forwardRef((r,s)=>{const{children:a,...o}=r,l=y.Children.toArray(a),c=l.find(RM);if(c){const u=c.props.children,h=l.map(p=>p===c?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:p);return i.jsx(e,{...o,ref:s,children:y.isValidElement(u)?y.cloneElement(u,void 0,h):null})}return i.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var AM=Hd("Slot");function PM(t){const e=y.forwardRef((n,r)=>{const{children:s,...a}=n;if(y.isValidElement(s)){const o=OM(s),l=DM(a,s.props);return s.type!==y.Fragment&&(l.ref=r?Yw(r,o):o),y.cloneElement(s,l)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var fk=Symbol("radix.slottable");function IM(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=fk,e}function RM(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===fk}function DM(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{a(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function OM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Zw(t){const e=t+"CollectionProvider",[n,r]=Na(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:b,children:S}=w,v=bn.useRef(null),T=bn.useRef(new Map).current;return i.jsx(s,{scope:b,itemMap:T,collectionRef:v,children:S})};o.displayName=e;const l=t+"CollectionSlot",c=Hd(l),u=bn.forwardRef((w,b)=>{const{scope:S,children:v}=w,T=a(l,S),I=Ft(b,T.collectionRef);return i.jsx(c,{ref:I,children:v})});u.displayName=l;const h=t+"CollectionItemSlot",p="data-radix-collection-item",m=Hd(h),x=bn.forwardRef((w,b)=>{const{scope:S,children:v,...T}=w,I=bn.useRef(null),L=Ft(b,I),R=a(h,S);return bn.useEffect(()=>(R.itemMap.set(I,{ref:I,...T}),()=>void R.itemMap.delete(I))),i.jsx(m,{[p]:"",ref:L,children:v})});x.displayName=h;function N(w){const b=a(t+"CollectionConsumer",w);return bn.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const T=Array.from(v.querySelectorAll(`[${p}]`));return Array.from(b.itemMap.values()).sort((R,C)=>T.indexOf(R.ref.current)-T.indexOf(C.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:x},N,r]}var FM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ct=FM.reduce((t,e)=>{const n=Hd(`Primitive.${e}`),r=y.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function mk(t,e){t&&Yl.flushSync(()=>t.dispatchEvent(e))}function Or(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function MM(t,e=globalThis==null?void 0:globalThis.document){const n=Or(t);y.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var LM="DismissableLayer",Ab="dismissableLayer.update",$M="dismissableLayer.pointerDownOutside",UM="dismissableLayer.focusOutside",iS,gk=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zp=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=y.useContext(gk),[h,p]=y.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=y.useState({}),N=Ft(e,C=>p(C)),w=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),S=w.indexOf(b),v=h?w.indexOf(h):-1,T=u.layersWithOutsidePointerEventsDisabled.size>0,I=v>=S,L=BM(C=>{const _=C.target,P=[...u.branches].some(A=>A.contains(_));!I||P||(s==null||s(C),o==null||o(C),C.defaultPrevented||l==null||l())},m),R=VM(C=>{const _=C.target;[...u.branches].some(A=>A.contains(_))||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},m);return MM(C=>{v===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},m),y.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(iS=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),aS(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=iS)}},[h,m,n,u]),y.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),aS())},[h,u]),y.useEffect(()=>{const C=()=>x({});return document.addEventListener(Ab,C),()=>document.removeEventListener(Ab,C)},[]),i.jsx(ct.div,{...c,ref:N,style:{pointerEvents:T?I?"auto":"none":void 0,...t.style},onFocusCapture:He(t.onFocusCapture,R.onFocusCapture),onBlurCapture:He(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:He(t.onPointerDownCapture,L.onPointerDownCapture)})});zp.displayName=LM;var zM="DismissableLayerBranch",vk=y.forwardRef((t,e)=>{const n=y.useContext(gk),r=y.useRef(null),s=Ft(e,r);return y.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(ct.div,{...t,ref:s})});vk.displayName=zM;function BM(t,e=globalThis==null?void 0:globalThis.document){const n=Or(t),r=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){yk($M,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function VM(t,e=globalThis==null?void 0:globalThis.document){const n=Or(t),r=y.useRef(!1);return y.useEffect(()=>{const s=a=>{a.target&&!r.current&&yk(UM,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function aS(){const t=new CustomEvent(Ab);document.dispatchEvent(t)}function yk(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?mk(s,a):s.dispatchEvent(a)}var HM=zp,qM=vk,Gn=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},WM="Portal",_v=y.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,a]=y.useState(!1);Gn(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?p5.createPortal(i.jsx(ct.div,{...r,ref:e}),o):null});_v.displayName=WM;function GM(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Xl=t=>{const{present:e,children:n}=t,r=KM(e),s=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),a=Ft(r.ref,QM(s));return typeof n=="function"||r.isPresent?y.cloneElement(s,{ref:a}):null};Xl.displayName="Presence";function KM(t){const[e,n]=y.useState(),r=y.useRef({}),s=y.useRef(t),a=y.useRef("none"),o=t?"mounted":"unmounted",[l,c]=GM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=Of(r.current);a.current=l==="mounted"?u:"none"},[l]),Gn(()=>{const u=r.current,h=s.current;if(h!==t){const m=a.current,x=Of(u);t?c("MOUNT"):x==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Gn(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,p=x=>{const w=Of(r.current).includes(x.animationName);if(x.target===e&&w&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=x=>{x.target===e&&(a.current=Of(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:y.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Of(t){return(t==null?void 0:t.animationName)||"none"}function QM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function qd({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=YM({defaultProp:e,onChange:n}),a=t!==void 0,o=a?t:r,l=Or(n),c=y.useCallback(u=>{if(a){const p=typeof u=="function"?u(t):u;p!==t&&l(p)}else s(u)},[a,t,s,l]);return[o,c]}function YM({defaultProp:t,onChange:e}){const n=y.useState(t),[r]=n,s=y.useRef(r),a=Or(e);return y.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),n}var ZM="VisuallyHidden",Bp=y.forwardRef((t,e)=>i.jsx(ct.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Bp.displayName=ZM;var XM=Bp,Xw="ToastProvider",[Jw,JM,e3]=Zw("Toast"),[xk,lJ]=Na("Toast",[e3]),[t3,Cv]=xk(Xw),bk=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=t,[l,c]=y.useState(null),[u,h]=y.useState(0),p=y.useRef(!1),m=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Xw}\`. Expected non-empty \`string\`.`),i.jsx(Jw.Provider,{scope:e,children:i.jsx(t3,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:y.useCallback(()=>h(x=>x+1),[]),onToastRemove:y.useCallback(()=>h(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:m,children:o})})};bk.displayName=Xw;var wk="ToastViewport",n3=["F8"],Pb="toast.viewportPause",Ib="toast.viewportResume",_k=y.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=n3,label:s="Notifications ({hotkey})",...a}=t,o=Cv(wk,n),l=JM(n),c=y.useRef(null),u=y.useRef(null),h=y.useRef(null),p=y.useRef(null),m=Ft(e,p,o.onViewportChange),x=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=o.toastCount>0;y.useEffect(()=>{const b=S=>{var T;r.length!==0&&r.every(I=>S[I]||S.code===I)&&((T=p.current)==null||T.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),y.useEffect(()=>{const b=c.current,S=p.current;if(N&&b&&S){const v=()=>{if(!o.isClosePausedRef.current){const R=new CustomEvent(Pb);S.dispatchEvent(R),o.isClosePausedRef.current=!0}},T=()=>{if(o.isClosePausedRef.current){const R=new CustomEvent(Ib);S.dispatchEvent(R),o.isClosePausedRef.current=!1}},I=R=>{!b.contains(R.relatedTarget)&&T()},L=()=>{b.contains(document.activeElement)||T()};return b.addEventListener("focusin",v),b.addEventListener("focusout",I),b.addEventListener("pointermove",v),b.addEventListener("pointerleave",L),window.addEventListener("blur",v),window.addEventListener("focus",T),()=>{b.removeEventListener("focusin",v),b.removeEventListener("focusout",I),b.removeEventListener("pointermove",v),b.removeEventListener("pointerleave",L),window.removeEventListener("blur",v),window.removeEventListener("focus",T)}}},[N,o.isClosePausedRef]);const w=y.useCallback(({tabbingDirection:b})=>{const v=l().map(T=>{const I=T.ref.current,L=[I,...m3(I)];return b==="forwards"?L:L.reverse()});return(b==="forwards"?v.reverse():v).flat()},[l]);return y.useEffect(()=>{const b=p.current;if(b){const S=v=>{var L,R,C;const T=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!T){const _=document.activeElement,P=v.shiftKey;if(v.target===b&&P){(L=u.current)==null||L.focus();return}const D=w({tabbingDirection:P?"backwards":"forwards"}),E=D.findIndex($=>$===_);Py(D.slice(E+1))?v.preventDefault():P?(R=u.current)==null||R.focus():(C=h.current)==null||C.focus()}};return b.addEventListener("keydown",S),()=>b.removeEventListener("keydown",S)}},[l,w]),i.jsxs(qM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&i.jsx(Rb,{ref:u,onFocusFromOutsideViewport:()=>{const b=w({tabbingDirection:"forwards"});Py(b)}}),i.jsx(Jw.Slot,{scope:n,children:i.jsx(ct.ol,{tabIndex:-1,...a,ref:m})}),N&&i.jsx(Rb,{ref:h,onFocusFromOutsideViewport:()=>{const b=w({tabbingDirection:"backwards"});Py(b)}})]})});_k.displayName=wk;var Ck="ToastFocusProxy",Rb=y.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,a=Cv(Ck,n);return i.jsx(Bp,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});Rb.displayName=Ck;var Sv="Toast",r3="toast.swipeStart",s3="toast.swipeMove",i3="toast.swipeCancel",a3="toast.swipeEnd",Sk=y.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...o}=t,[l=!0,c]=qd({prop:r,defaultProp:s,onChange:a});return i.jsx(Xl,{present:n||l,children:i.jsx(c3,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:Or(t.onPause),onResume:Or(t.onResume),onSwipeStart:He(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:He(t.onSwipeMove,u=>{const{x:h,y:p}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:He(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:He(t.onSwipeEnd,u=>{const{x:h,y:p}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),c(!1)})})})});Sk.displayName=Sv;var[o3,l3]=xk(Sv,{onClose(){}}),c3=y.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:p,onSwipeCancel:m,onSwipeEnd:x,...N}=t,w=Cv(Sv,n),[b,S]=y.useState(null),v=Ft(e,$=>S($)),T=y.useRef(null),I=y.useRef(null),L=s||w.duration,R=y.useRef(0),C=y.useRef(L),_=y.useRef(0),{onToastAdd:P,onToastRemove:A}=w,F=Or(()=>{var G;(b==null?void 0:b.contains(document.activeElement))&&((G=w.viewport)==null||G.focus()),o()}),D=y.useCallback($=>{!$||$===1/0||(window.clearTimeout(_.current),R.current=new Date().getTime(),_.current=window.setTimeout(F,$))},[F]);y.useEffect(()=>{const $=w.viewport;if($){const G=()=>{D(C.current),u==null||u()},se=()=>{const de=new Date().getTime()-R.current;C.current=C.current-de,window.clearTimeout(_.current),c==null||c()};return $.addEventListener(Pb,se),$.addEventListener(Ib,G),()=>{$.removeEventListener(Pb,se),$.removeEventListener(Ib,G)}}},[w.viewport,L,c,u,D]),y.useEffect(()=>{a&&!w.isClosePausedRef.current&&D(L)},[a,L,w.isClosePausedRef,D]),y.useEffect(()=>(P(),()=>A()),[P,A]);const E=y.useMemo(()=>b?Pk(b):null,[b]);return w.viewport?i.jsxs(i.Fragment,{children:[E&&i.jsx(d3,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:E}),i.jsx(o3,{scope:n,onClose:F,children:Yl.createPortal(i.jsx(Jw.ItemSlot,{scope:n,children:i.jsx(HM,{asChild:!0,onEscapeKeyDown:He(l,()=>{w.isFocusedToastEscapeKeyDownRef.current||F(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(ct.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":w.swipeDirection,...N,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:He(t.onKeyDown,$=>{$.key==="Escape"&&(l==null||l($.nativeEvent),$.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:He(t.onPointerDown,$=>{$.button===0&&(T.current={x:$.clientX,y:$.clientY})}),onPointerMove:He(t.onPointerMove,$=>{if(!T.current)return;const G=$.clientX-T.current.x,se=$.clientY-T.current.y,de=!!I.current,Q=["left","right"].includes(w.swipeDirection),ce=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,ue=Q?ce(0,G):0,we=Q?0:ce(0,se),$e=$.pointerType==="touch"?10:2,B={x:ue,y:we},me={originalEvent:$,delta:B};de?(I.current=B,Ff(s3,p,me,{discrete:!1})):oS(B,w.swipeDirection,$e)?(I.current=B,Ff(r3,h,me,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(G)>$e||Math.abs(se)>$e)&&(T.current=null)}),onPointerUp:He(t.onPointerUp,$=>{const G=I.current,se=$.target;if(se.hasPointerCapture($.pointerId)&&se.releasePointerCapture($.pointerId),I.current=null,T.current=null,G){const de=$.currentTarget,Q={originalEvent:$,delta:G};oS(G,w.swipeDirection,w.swipeThreshold)?Ff(a3,x,Q,{discrete:!0}):Ff(i3,m,Q,{discrete:!0}),de.addEventListener("click",ce=>ce.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),d3=t=>{const{__scopeToast:e,children:n,...r}=t,s=Cv(Sv,e),[a,o]=y.useState(!1),[l,c]=y.useState(!1);return p3(()=>o(!0)),y.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(_v,{asChild:!0,children:i.jsx(Bp,{...r,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},u3="ToastTitle",Ek=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(ct.div,{...r,ref:e})});Ek.displayName=u3;var h3="ToastDescription",jk=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(ct.div,{...r,ref:e})});jk.displayName=h3;var Nk="ToastAction",Tk=y.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?i.jsx(Ak,{altText:n,asChild:!0,children:i.jsx(e1,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Nk}\`. Expected non-empty \`string\`.`),null)});Tk.displayName=Nk;var kk="ToastClose",e1=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=l3(kk,n);return i.jsx(Ak,{asChild:!0,children:i.jsx(ct.button,{type:"button",...r,ref:e,onClick:He(t.onClick,s.onClose)})})});e1.displayName=kk;var Ak=y.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return i.jsx(ct.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Pk(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),f3(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Pk(r))}}),e}function Ff(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?mk(s,a):s.dispatchEvent(a)}var oS=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),a=r>s;return e==="left"||e==="right"?a&&r>n:!a&&s>n};function p3(t=()=>{}){const e=Or(t);Gn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function f3(t){return t.nodeType===t.ELEMENT_NODE}function m3(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Py(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var g3=bk,Ik=_k,Rk=Sk,Dk=Ek,Ok=jk,Fk=Tk,Mk=e1;function Lk(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Lk(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $k(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Lk(t))&&(r&&(r+=" "),r+=e);return r}const lS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,cS=$k,Ev=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return cS(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],p=a==null?void 0:a[u];if(h===null)return null;const m=lS(h)||lS(p);return s[u][m]}),l=n&&Object.entries(n).reduce((u,h)=>{let[p,m]=h;return m===void 0||(u[p]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:p,className:m,...x}=h;return Object.entries(x).every(N=>{let[w,b]=N;return Array.isArray(b)?b.includes({...a,...l}[w]):{...a,...l}[w]===b})?[...u,p,m]:u},[]);return cS(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Uk=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var y3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},c)=>y.createElement("svg",{ref:c,...y3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Uk("lucide",s),...l},[...o.map(([u,h])=>y.createElement(u,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(t,e)=>{const n=y.forwardRef(({className:r,...s},a)=>y.createElement(x3,{ref:a,iconNode:e,className:Uk(`lucide-${v3(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=dt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=dt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=dt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=dt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=dt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=dt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=dt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=dt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=dt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=dt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=dt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=dt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=dt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=dt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=dt("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=dt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=dt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=dt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=dt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=dt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=dt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=dt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=dt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=dt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=dt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=dt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=dt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=dt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=dt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=dt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=dt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=dt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=dt("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=dt("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=dt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=dt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),t1="-",k3=t=>{const e=P3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(t1);return l[0]===""&&l.length!==1&&l.shift(),Hk(l,e)||A3(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},Hk=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?Hk(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(t1);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},fS=/^\[(.+)\]$/,A3=t=>{if(fS.test(t)){const e=fS.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},P3=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return R3(Object.entries(t.classGroups),n).forEach(([a,o])=>{Lb(o,r,a,e)}),r},Lb=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:mS(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(I3(s)){Lb(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{Lb(o,mS(e,a),n,r)})})},mS=(t,e)=>{let n=t;return e.split(t1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},I3=t=>t.isThemeGetter,R3=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,s]}):t,D3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},qk="!",O3=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,o=l=>{const c=[];let u=0,h=0,p;for(let b=0;b<l.length;b++){let S=l[b];if(u===0){if(S===s&&(r||l.slice(b,b+a)===e)){c.push(l.slice(h,b)),h=b+a;continue}if(S==="/"){p=b;continue}}S==="["?u++:S==="]"&&u--}const m=c.length===0?l:l.substring(h),x=m.startsWith(qk),N=x?m.substring(1):m,w=p&&p>h?p-h:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:N,maybePostfixModifierPosition:w}};return n?l=>n({className:l,parseClassName:o}):o},F3=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},M3=t=>({cache:D3(t.cacheSize),parseClassName:O3(t),...k3(t)}),L3=/\s+/,$3=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(L3);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:x}=n(u);let N=!!x,w=r(N?m.substring(0,x):m);if(!w){if(!N){l=u+(l.length>0?" "+l:l);continue}if(w=r(m),!w){l=u+(l.length>0?" "+l:l);continue}N=!1}const b=F3(h).join(":"),S=p?b+qk:b,v=S+w;if(a.includes(v))continue;a.push(v);const T=s(w,N);for(let I=0;I<T.length;++I){const L=T[I];a.push(S+L)}l=u+(l.length>0?" "+l:l)}return l};function U3(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Wk(e))&&(r&&(r+=" "),r+=n);return r}const Wk=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Wk(t[r]))&&(n&&(n+=" "),n+=e);return n};function z3(t,...e){let n,r,s,a=o;function o(c){const u=e.reduce((h,p)=>p(h),t());return n=M3(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=$3(c,n);return s(c,h),h}return function(){return a(U3.apply(null,arguments))}}const qt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Gk=/^\[(?:([a-z-]+):)?(.+)\]$/i,B3=/^\d+\/\d+$/,V3=new Set(["px","full","screen"]),H3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,q3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,W3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,G3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,K3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ki=t=>Kc(t)||V3.has(t)||B3.test(t),Ia=t=>iu(t,"length",nL),Kc=t=>!!t&&!Number.isNaN(Number(t)),Iy=t=>iu(t,"number",Kc),Nu=t=>!!t&&Number.isInteger(Number(t)),Q3=t=>t.endsWith("%")&&Kc(t.slice(0,-1)),nt=t=>Gk.test(t),Ra=t=>H3.test(t),Y3=new Set(["length","size","percentage"]),Z3=t=>iu(t,Y3,Kk),X3=t=>iu(t,"position",Kk),J3=new Set(["image","url"]),eL=t=>iu(t,J3,sL),tL=t=>iu(t,"",rL),Tu=()=>!0,iu=(t,e,n)=>{const r=Gk.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},nL=t=>q3.test(t)&&!W3.test(t),Kk=()=>!1,rL=t=>G3.test(t),sL=t=>K3.test(t),iL=()=>{const t=qt("colors"),e=qt("spacing"),n=qt("blur"),r=qt("brightness"),s=qt("borderColor"),a=qt("borderRadius"),o=qt("borderSpacing"),l=qt("borderWidth"),c=qt("contrast"),u=qt("grayscale"),h=qt("hueRotate"),p=qt("invert"),m=qt("gap"),x=qt("gradientColorStops"),N=qt("gradientColorStopPositions"),w=qt("inset"),b=qt("margin"),S=qt("opacity"),v=qt("padding"),T=qt("saturate"),I=qt("scale"),L=qt("sepia"),R=qt("skew"),C=qt("space"),_=qt("translate"),P=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",nt,e],D=()=>[nt,e],E=()=>["",Ki,Ia],$=()=>["auto",Kc,nt],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>["start","end","center","between","around","evenly","stretch"],ce=()=>["","0",nt],ue=()=>["auto","avoid","all","avoid-page","page","left","right","column"],we=()=>[Kc,nt];return{cacheSize:500,separator:":",theme:{colors:[Tu],spacing:[Ki,Ia],blur:["none","",Ra,nt],brightness:we(),borderColor:[t],borderRadius:["none","","full",Ra,nt],borderSpacing:D(),borderWidth:E(),contrast:we(),grayscale:ce(),hueRotate:we(),invert:ce(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[Q3,Ia],inset:F(),margin:F(),opacity:we(),padding:D(),saturate:we(),scale:we(),sepia:ce(),skew:we(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",nt]}],container:["container"],columns:[{columns:[Ra]}],"break-after":[{"break-after":ue()}],"break-before":[{"break-before":ue()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),nt]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Nu,nt]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",nt]}],grow:[{grow:ce()}],shrink:[{shrink:ce()}],order:[{order:["first","last","none",Nu,nt]}],"grid-cols":[{"grid-cols":[Tu]}],"col-start-end":[{col:["auto",{span:["full",Nu,nt]},nt]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Tu]}],"row-start-end":[{row:["auto",{span:[Nu,nt]},nt]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",nt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",nt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...Q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",nt,e]}],"min-w":[{"min-w":[nt,e,"min","max","fit"]}],"max-w":[{"max-w":[nt,e,"none","full","min","max","fit","prose",{screen:[Ra]},Ra]}],h:[{h:[nt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[nt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ra,Ia]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Iy]}],"font-family":[{font:[Tu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",nt]}],"line-clamp":[{"line-clamp":["none",Kc,Iy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ki,nt]}],"list-image":[{"list-image":["none",nt]}],"list-style-type":[{list:["none","disc","decimal",nt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ki,Ia]}],"underline-offset":[{"underline-offset":["auto",Ki,nt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),X3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Z3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},eL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:se()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[Ki,nt]}],"outline-w":[{outline:[Ki,Ia]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[Ki,Ia]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ra,tL]}],"shadow-color":[{shadow:[Tu]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...de(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":de()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ra,nt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[T]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",nt]}],duration:[{duration:we()}],ease:[{ease:["linear","in","out","in-out",nt]}],delay:[{delay:we()}],animate:[{animate:["none","spin","ping","pulse","bounce",nt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Nu,nt]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",nt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ki,Ia,Iy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},aL=z3(iL);function mt(...t){return aL($k(t))}const oL=g3,Qk=y.forwardRef(({className:t,...e},n)=>i.jsx(Ik,{ref:n,className:mt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Qk.displayName=Ik.displayName;const lL=Ev("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Yk=y.forwardRef(({className:t,variant:e,...n},r)=>i.jsx(Rk,{ref:r,className:mt(lL({variant:e}),t),...n}));Yk.displayName=Rk.displayName;const cL=y.forwardRef(({className:t,...e},n)=>i.jsx(Fk,{ref:n,className:mt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));cL.displayName=Fk.displayName;const Zk=y.forwardRef(({className:t,...e},n)=>i.jsx(Mk,{ref:n,className:mt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx(jv,{className:"h-4 w-4"})}));Zk.displayName=Mk.displayName;const Xk=y.forwardRef(({className:t,...e},n)=>i.jsx(Dk,{ref:n,className:mt("text-sm font-semibold",t),...e}));Xk.displayName=Dk.displayName;const Jk=y.forwardRef(({className:t,...e},n)=>i.jsx(Ok,{ref:n,className:mt("text-sm opacity-90",t),...e}));Jk.displayName=Ok.displayName;function dL(){const{toasts:t}=ti();return i.jsxs(oL,{children:[t.map(function({id:e,title:n,description:r,action:s,...a}){return i.jsxs(Yk,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(Xk,{children:n}),r&&i.jsx(Jk,{children:r})]}),s,i.jsx(Zk,{})]},e)}),i.jsx(Qk,{})]})}var uL=J0[" useId ".trim().toString()]||(()=>{}),hL=0;function vo(t){const[e,n]=y.useState(uL());return Gn(()=>{n(r=>r??String(hL++))},[t]),e?`radix-${e}`:""}const pL=["top","right","bottom","left"],_o=Math.min,Ur=Math.max,ug=Math.round,Mf=Math.floor,Ri=t=>({x:t,y:t}),fL={left:"right",right:"left",bottom:"top",top:"bottom"},mL={start:"end",end:"start"};function $b(t,e,n){return Ur(t,_o(e,n))}function ba(t,e){return typeof t=="function"?t(e):t}function wa(t){return t.split("-")[0]}function au(t){return t.split("-")[1]}function n1(t){return t==="x"?"y":"x"}function r1(t){return t==="y"?"height":"width"}function Co(t){return["top","bottom"].includes(wa(t))?"y":"x"}function s1(t){return n1(Co(t))}function gL(t,e,n){n===void 0&&(n=!1);const r=au(t),s=s1(t),a=r1(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=hg(o)),[o,hg(o)]}function vL(t){const e=hg(t);return[Ub(t),e,Ub(e)]}function Ub(t){return t.replace(/start|end/g,e=>mL[e])}function yL(t,e,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?a:o;default:return[]}}function xL(t,e,n,r){const s=au(t);let a=yL(wa(t),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(Ub)))),a}function hg(t){return t.replace(/left|right|bottom|top/g,e=>fL[e])}function bL(t){return{top:0,right:0,bottom:0,left:0,...t}}function eA(t){return typeof t!="number"?bL(t):{top:t,right:t,bottom:t,left:t}}function pg(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function gS(t,e,n){let{reference:r,floating:s}=t;const a=Co(e),o=s1(e),l=r1(o),c=wa(e),u=a==="y",h=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let x;switch(c){case"top":x={x:h,y:r.y-s.height};break;case"bottom":x={x:h,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:p};break;case"left":x={x:r.x-s.width,y:p};break;default:x={x:r.x,y:r.y}}switch(au(e)){case"start":x[o]-=m*(n&&u?-1:1);break;case"end":x[o]+=m*(n&&u?-1:1);break}return x}const wL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:p}=gS(u,r,c),m=r,x={},N=0;for(let w=0;w<l.length;w++){const{name:b,fn:S}=l[w],{x:v,y:T,data:I,reset:L}=await S({x:h,y:p,initialPlacement:r,placement:m,strategy:s,middlewareData:x,rects:u,platform:o,elements:{reference:t,floating:e}});h=v??h,p=T??p,x={...x,[b]:{...x[b],...I}},L&&N<=50&&(N++,typeof L=="object"&&(L.placement&&(m=L.placement),L.rects&&(u=L.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:h,y:p}=gS(u,m,c)),w=-1)}return{x:h,y:p,placement:m,strategy:s,middlewareData:x}};async function Uh(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:m=!1,padding:x=0}=ba(e,t),N=eA(x),b=l[m?p==="floating"?"reference":"floating":p],S=pg(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),v=p==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),I=await(a.isElement==null?void 0:a.isElement(T))?await(a.getScale==null?void 0:a.getScale(T))||{x:1,y:1}:{x:1,y:1},L=pg(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:T,strategy:c}):v);return{top:(S.top-L.top+N.top)/I.y,bottom:(L.bottom-S.bottom+N.bottom)/I.y,left:(S.left-L.left+N.left)/I.x,right:(L.right-S.right+N.right)/I.x}}const _L=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=ba(t,e)||{};if(u==null)return{};const p=eA(h),m={x:n,y:r},x=s1(s),N=r1(x),w=await o.getDimensions(u),b=x==="y",S=b?"top":"left",v=b?"bottom":"right",T=b?"clientHeight":"clientWidth",I=a.reference[N]+a.reference[x]-m[x]-a.floating[N],L=m[x]-a.reference[x],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=R?R[T]:0;(!C||!await(o.isElement==null?void 0:o.isElement(R)))&&(C=l.floating[T]||a.floating[N]);const _=I/2-L/2,P=C/2-w[N]/2-1,A=_o(p[S],P),F=_o(p[v],P),D=A,E=C-w[N]-F,$=C/2-w[N]/2+_,G=$b(D,$,E),se=!c.arrow&&au(s)!=null&&$!==G&&a.reference[N]/2-($<D?A:F)-w[N]/2<0,de=se?$<D?$-D:$-E:0;return{[x]:m[x]+de,data:{[x]:G,centerOffset:$-G-de,...se&&{alignmentOffset:de}},reset:se}}}),CL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:w=!0,...b}=ba(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const S=wa(s),v=Co(l),T=wa(l)===l,I=await(c.isRTL==null?void 0:c.isRTL(u.floating)),L=m||(T||!w?[hg(l)]:vL(l)),R=N!=="none";!m&&R&&L.push(...xL(l,w,N,I));const C=[l,...L],_=await Uh(e,b),P=[];let A=((r=a.flip)==null?void 0:r.overflows)||[];if(h&&P.push(_[S]),p){const $=gL(s,o,I);P.push(_[$[0]],_[$[1]])}if(A=[...A,{placement:s,overflows:P}],!P.every($=>$<=0)){var F,D;const $=(((F=a.flip)==null?void 0:F.index)||0)+1,G=C[$];if(G)return{data:{index:$,overflows:A},reset:{placement:G}};let se=(D=A.filter(de=>de.overflows[0]<=0).sort((de,Q)=>de.overflows[1]-Q.overflows[1])[0])==null?void 0:D.placement;if(!se)switch(x){case"bestFit":{var E;const de=(E=A.filter(Q=>{if(R){const ce=Co(Q.placement);return ce===v||ce==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(ce=>ce>0).reduce((ce,ue)=>ce+ue,0)]).sort((Q,ce)=>Q[1]-ce[1])[0])==null?void 0:E[0];de&&(se=de);break}case"initialPlacement":se=l;break}if(s!==se)return{reset:{placement:se}}}return{}}}};function vS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function yS(t){return pL.some(e=>t[e]>=0)}const SL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ba(t,e);switch(r){case"referenceHidden":{const a=await Uh(e,{...s,elementContext:"reference"}),o=vS(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:yS(o)}}}case"escaped":{const a=await Uh(e,{...s,altBoundary:!0}),o=vS(a,n.floating);return{data:{escapedOffsets:o,escaped:yS(o)}}}default:return{}}}}};async function EL(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=wa(n),l=au(n),c=Co(n)==="y",u=["left","top"].includes(o)?-1:1,h=a&&c?-1:1,p=ba(e,t);let{mainAxis:m,crossAxis:x,alignmentAxis:N}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof N=="number"&&(x=l==="end"?N*-1:N),c?{x:x*h,y:m*u}:{x:m*u,y:x*h}}const jL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=e,c=await EL(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},NL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:S,y:v}=b;return{x:S,y:v}}},...c}=ba(t,e),u={x:n,y:r},h=await Uh(e,c),p=Co(wa(s)),m=n1(p);let x=u[m],N=u[p];if(a){const b=m==="y"?"top":"left",S=m==="y"?"bottom":"right",v=x+h[b],T=x-h[S];x=$b(v,x,T)}if(o){const b=p==="y"?"top":"left",S=p==="y"?"bottom":"right",v=N+h[b],T=N-h[S];N=$b(v,N,T)}const w=l.fn({...e,[m]:x,[p]:N});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:a,[p]:o}}}}}},TL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ba(t,e),h={x:n,y:r},p=Co(s),m=n1(p);let x=h[m],N=h[p];const w=ba(l,e),b=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const T=m==="y"?"height":"width",I=a.reference[m]-a.floating[T]+b.mainAxis,L=a.reference[m]+a.reference[T]-b.mainAxis;x<I?x=I:x>L&&(x=L)}if(u){var S,v;const T=m==="y"?"width":"height",I=["top","left"].includes(wa(s)),L=a.reference[p]-a.floating[T]+(I&&((S=o.offset)==null?void 0:S[p])||0)+(I?0:b.crossAxis),R=a.reference[p]+a.reference[T]+(I?0:((v=o.offset)==null?void 0:v[p])||0)-(I?b.crossAxis:0);N<L?N=L:N>R&&(N=R)}return{[m]:x,[p]:N}}}},kL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=ba(t,e),h=await Uh(e,u),p=wa(s),m=au(s),x=Co(s)==="y",{width:N,height:w}=a.floating;let b,S;p==="top"||p==="bottom"?(b=p,S=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(S=p,b=m==="end"?"top":"bottom");const v=w-h.top-h.bottom,T=N-h.left-h.right,I=_o(w-h[b],v),L=_o(N-h[S],T),R=!e.middlewareData.shift;let C=I,_=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(_=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=v),R&&!m){const A=Ur(h.left,0),F=Ur(h.right,0),D=Ur(h.top,0),E=Ur(h.bottom,0);x?_=N-2*(A!==0||F!==0?A+F:Ur(h.left,h.right)):C=w-2*(D!==0||E!==0?D+E:Ur(h.top,h.bottom))}await c({...e,availableWidth:_,availableHeight:C});const P=await o.getDimensions(l.floating);return N!==P.width||w!==P.height?{reset:{rects:!0}}:{}}}};function Nv(){return typeof window<"u"}function ou(t){return tA(t)?(t.nodeName||"").toLowerCase():"#document"}function Hr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Bi(t){var e;return(e=(tA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function tA(t){return Nv()?t instanceof Node||t instanceof Hr(t).Node:!1}function Qs(t){return Nv()?t instanceof Element||t instanceof Hr(t).Element:!1}function Li(t){return Nv()?t instanceof HTMLElement||t instanceof Hr(t).HTMLElement:!1}function xS(t){return!Nv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Hr(t).ShadowRoot}function Vp(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ys(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function AL(t){return["table","td","th"].includes(ou(t))}function Tv(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function i1(t){const e=a1(),n=Qs(t)?Ys(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function PL(t){let e=So(t);for(;Li(e)&&!Gd(e);){if(i1(e))return e;if(Tv(e))return null;e=So(e)}return null}function a1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Gd(t){return["html","body","#document"].includes(ou(t))}function Ys(t){return Hr(t).getComputedStyle(t)}function kv(t){return Qs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function So(t){if(ou(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xS(t)&&t.host||Bi(t);return xS(e)?e.host:e}function nA(t){const e=So(t);return Gd(e)?t.ownerDocument?t.ownerDocument.body:t.body:Li(e)&&Vp(e)?e:nA(e)}function zh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=nA(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),o=Hr(s);if(a){const l=zb(o);return e.concat(o,o.visualViewport||[],Vp(s)?s:[],l&&n?zh(l):[])}return e.concat(s,zh(s,[],n))}function zb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function rA(t){const e=Ys(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Li(t),a=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=ug(n)!==a||ug(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function o1(t){return Qs(t)?t:t.contextElement}function Qc(t){const e=o1(t);if(!Li(e))return Ri(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=rA(e);let o=(a?ug(n.width):n.width)/r,l=(a?ug(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const IL=Ri(0);function sA(t){const e=Hr(t);return!a1()||!e.visualViewport?IL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function RL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Hr(t)?!1:e}function Fl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=o1(t);let o=Ri(1);e&&(r?Qs(r)&&(o=Qc(r)):o=Qc(t));const l=RL(a,n,r)?sA(a):Ri(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,p=s.height/o.y;if(a){const m=Hr(a),x=r&&Qs(r)?Hr(r):r;let N=m,w=zb(N);for(;w&&r&&x!==N;){const b=Qc(w),S=w.getBoundingClientRect(),v=Ys(w),T=S.left+(w.clientLeft+parseFloat(v.paddingLeft))*b.x,I=S.top+(w.clientTop+parseFloat(v.paddingTop))*b.y;c*=b.x,u*=b.y,h*=b.x,p*=b.y,c+=T,u+=I,N=Hr(w),w=zb(N)}}return pg({width:h,height:p,x:c,y:u})}function l1(t,e){const n=kv(t).scrollLeft;return e?e.left+n:Fl(Bi(t)).left+n}function iA(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:l1(t,r)),a=r.top+e.scrollTop;return{x:s,y:a}}function DL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",o=Bi(r),l=e?Tv(e.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Ri(1);const h=Ri(0),p=Li(r);if((p||!p&&!a)&&((ou(r)!=="body"||Vp(o))&&(c=kv(r)),Li(r))){const x=Fl(r);u=Qc(r),h.x=x.x+r.clientLeft,h.y=x.y+r.clientTop}const m=o&&!p&&!a?iA(o,c,!0):Ri(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+m.x,y:n.y*u.y-c.scrollTop*u.y+h.y+m.y}}function OL(t){return Array.from(t.getClientRects())}function FL(t){const e=Bi(t),n=kv(t),r=t.ownerDocument.body,s=Ur(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Ur(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+l1(t);const l=-n.scrollTop;return Ys(r).direction==="rtl"&&(o+=Ur(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function ML(t,e){const n=Hr(t),r=Bi(t),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=a1();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}function LL(t,e){const n=Fl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=Li(t)?Qc(t):Ri(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function bS(t,e,n){let r;if(e==="viewport")r=ML(t,n);else if(e==="document")r=FL(Bi(t));else if(Qs(e))r=LL(e,n);else{const s=sA(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return pg(r)}function aA(t,e){const n=So(t);return n===e||!Qs(n)||Gd(n)?!1:Ys(n).position==="fixed"||aA(n,e)}function $L(t,e){const n=e.get(t);if(n)return n;let r=zh(t,[],!1).filter(l=>Qs(l)&&ou(l)!=="body"),s=null;const a=Ys(t).position==="fixed";let o=a?So(t):t;for(;Qs(o)&&!Gd(o);){const l=Ys(o),c=i1(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Vp(o)&&!c&&aA(t,o))?r=r.filter(h=>h!==o):s=l,o=So(o)}return e.set(t,r),r}function UL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Tv(e)?[]:$L(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const p=bS(e,h,s);return u.top=Ur(p.top,u.top),u.right=_o(p.right,u.right),u.bottom=_o(p.bottom,u.bottom),u.left=Ur(p.left,u.left),u},bS(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function zL(t){const{width:e,height:n}=rA(t);return{width:e,height:n}}function BL(t,e,n){const r=Li(e),s=Bi(e),a=n==="fixed",o=Fl(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=Ri(0);if(r||!r&&!a)if((ou(e)!=="body"||Vp(s))&&(l=kv(e)),r){const m=Fl(e,!0,a,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&(c.x=l1(s));const u=s&&!r&&!a?iA(s,l):Ri(0),h=o.left+l.scrollLeft-c.x-u.x,p=o.top+l.scrollTop-c.y-u.y;return{x:h,y:p,width:o.width,height:o.height}}function Ry(t){return Ys(t).position==="static"}function wS(t,e){if(!Li(t)||Ys(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Bi(t)===n&&(n=n.ownerDocument.body),n}function oA(t,e){const n=Hr(t);if(Tv(t))return n;if(!Li(t)){let s=So(t);for(;s&&!Gd(s);){if(Qs(s)&&!Ry(s))return s;s=So(s)}return n}let r=wS(t,e);for(;r&&AL(r)&&Ry(r);)r=wS(r,e);return r&&Gd(r)&&Ry(r)&&!i1(r)?n:r||PL(t)||n}const VL=async function(t){const e=this.getOffsetParent||oA,n=this.getDimensions,r=await n(t.floating);return{reference:BL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function HL(t){return Ys(t).direction==="rtl"}const qL={convertOffsetParentRelativeRectToViewportRelativeRect:DL,getDocumentElement:Bi,getClippingRect:UL,getOffsetParent:oA,getElementRects:VL,getClientRects:OL,getDimensions:zL,getScale:Qc,isElement:Qs,isRTL:HL};function lA(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function WL(t,e){let n=null,r;const s=Bi(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=t.getBoundingClientRect(),{left:h,top:p,width:m,height:x}=u;if(l||e(),!m||!x)return;const N=Mf(p),w=Mf(s.clientWidth-(h+m)),b=Mf(s.clientHeight-(p+x)),S=Mf(h),T={rootMargin:-N+"px "+-w+"px "+-b+"px "+-S+"px",threshold:Ur(0,_o(1,c))||1};let I=!0;function L(R){const C=R[0].intersectionRatio;if(C!==c){if(!I)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!lA(u,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(L,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,T)}n.observe(t)}return o(!0),a}function GL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=o1(t),h=s||a?[...u?zh(u):[],...zh(e)]:[];h.forEach(S=>{s&&S.addEventListener("scroll",n,{passive:!0}),a&&S.addEventListener("resize",n)});const p=u&&l?WL(u,n):null;let m=-1,x=null;o&&(x=new ResizeObserver(S=>{let[v]=S;v&&v.target===u&&x&&(x.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var T;(T=x)==null||T.observe(e)})),n()}),u&&!c&&x.observe(u),x.observe(e));let N,w=c?Fl(t):null;c&&b();function b(){const S=Fl(t);w&&!lA(w,S)&&n(),w=S,N=requestAnimationFrame(b)}return n(),()=>{var S;h.forEach(v=>{s&&v.removeEventListener("scroll",n),a&&v.removeEventListener("resize",n)}),p==null||p(),(S=x)==null||S.disconnect(),x=null,c&&cancelAnimationFrame(N)}}const KL=jL,QL=NL,YL=CL,ZL=kL,XL=SL,_S=_L,JL=TL,e6=(t,e,n)=>{const r=new Map,s={platform:qL,...n},a={...s.platform,_c:r};return wL(t,e,{...s,platform:a})};var wm=typeof document<"u"?y.useLayoutEffect:y.useEffect;function fg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!fg(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!fg(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function cA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function CS(t,e){const n=cA(t);return Math.round(e*n)/n}function Dy(t){const e=y.useRef(t);return wm(()=>{e.current=t}),e}function t6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,p]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,x]=y.useState(r);fg(m,r)||x(r);const[N,w]=y.useState(null),[b,S]=y.useState(null),v=y.useCallback(Q=>{Q!==R.current&&(R.current=Q,w(Q))},[]),T=y.useCallback(Q=>{Q!==C.current&&(C.current=Q,S(Q))},[]),I=a||N,L=o||b,R=y.useRef(null),C=y.useRef(null),_=y.useRef(h),P=c!=null,A=Dy(c),F=Dy(s),D=Dy(u),E=y.useCallback(()=>{if(!R.current||!C.current)return;const Q={placement:e,strategy:n,middleware:m};F.current&&(Q.platform=F.current),e6(R.current,C.current,Q).then(ce=>{const ue={...ce,isPositioned:D.current!==!1};$.current&&!fg(_.current,ue)&&(_.current=ue,Yl.flushSync(()=>{p(ue)}))})},[m,e,n,F,D]);wm(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,p(Q=>({...Q,isPositioned:!1})))},[u]);const $=y.useRef(!1);wm(()=>($.current=!0,()=>{$.current=!1}),[]),wm(()=>{if(I&&(R.current=I),L&&(C.current=L),I&&L){if(A.current)return A.current(I,L,E);E()}},[I,L,E,A,P]);const G=y.useMemo(()=>({reference:R,floating:C,setReference:v,setFloating:T}),[v,T]),se=y.useMemo(()=>({reference:I,floating:L}),[I,L]),de=y.useMemo(()=>{const Q={position:n,left:0,top:0};if(!se.floating)return Q;const ce=CS(se.floating,h.x),ue=CS(se.floating,h.y);return l?{...Q,transform:"translate("+ce+"px, "+ue+"px)",...cA(se.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ce,top:ue}},[n,l,se.floating,h.x,h.y]);return y.useMemo(()=>({...h,update:E,refs:G,elements:se,floatingStyles:de}),[h,E,G,se,de])}const n6=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?_S({element:r.current,padding:s}).fn(n):{}:r?_S({element:r,padding:s}).fn(n):{}}}},r6=(t,e)=>({...KL(t),options:[t,e]}),s6=(t,e)=>({...QL(t),options:[t,e]}),i6=(t,e)=>({...JL(t),options:[t,e]}),a6=(t,e)=>({...YL(t),options:[t,e]}),o6=(t,e)=>({...ZL(t),options:[t,e]}),l6=(t,e)=>({...XL(t),options:[t,e]}),c6=(t,e)=>({...n6(t),options:[t,e]});var d6="Arrow",dA=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return i.jsx(ct.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});dA.displayName=d6;var u6=dA;function uA(t){const[e,n]=y.useState(void 0);return Gn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var c1="Popper",[hA,Av]=Na(c1),[h6,pA]=hA(c1),fA=t=>{const{__scopePopper:e,children:n}=t,[r,s]=y.useState(null);return i.jsx(h6,{scope:e,anchor:r,onAnchorChange:s,children:n})};fA.displayName=c1;var mA="PopperAnchor",gA=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=pA(mA,n),o=y.useRef(null),l=Ft(e,o);return y.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(ct.div,{...s,ref:l})});gA.displayName=mA;var d1="PopperContent",[p6,f6]=hA(d1),vA=y.forwardRef((t,e)=>{var ye,Xe,Ye,Je,Ve,Ke;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:x="optimized",onPlaced:N,...w}=t,b=pA(d1,n),[S,v]=y.useState(null),T=Ft(e,At=>v(At)),[I,L]=y.useState(null),R=uA(I),C=(R==null?void 0:R.width)??0,_=(R==null?void 0:R.height)??0,P=r+(a!=="center"?"-"+a:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},F=Array.isArray(u)?u:[u],D=F.length>0,E={padding:A,boundary:F.filter(g6),altBoundary:D},{refs:$,floatingStyles:G,placement:se,isPositioned:de,middlewareData:Q}=t6({strategy:"fixed",placement:P,whileElementsMounted:(...At)=>GL(...At,{animationFrame:x==="always"}),elements:{reference:b.anchor},middleware:[r6({mainAxis:s+_,alignmentAxis:o}),c&&s6({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?i6():void 0,...E}),c&&a6({...E}),o6({...E,apply:({elements:At,rects:Re,availableWidth:Pt,availableHeight:ln})=>{const{width:sn,height:st}=Re.reference,et=At.floating.style;et.setProperty("--radix-popper-available-width",`${Pt}px`),et.setProperty("--radix-popper-available-height",`${ln}px`),et.setProperty("--radix-popper-anchor-width",`${sn}px`),et.setProperty("--radix-popper-anchor-height",`${st}px`)}}),I&&c6({element:I,padding:l}),v6({arrowWidth:C,arrowHeight:_}),m&&l6({strategy:"referenceHidden",...E})]}),[ce,ue]=bA(se),we=Or(N);Gn(()=>{de&&(we==null||we())},[de,we]);const $e=(ye=Q.arrow)==null?void 0:ye.x,B=(Xe=Q.arrow)==null?void 0:Xe.y,me=((Ye=Q.arrow)==null?void 0:Ye.centerOffset)!==0,[ve,Ge]=y.useState();return Gn(()=>{S&&Ge(window.getComputedStyle(S).zIndex)},[S]),i.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:de?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Je=Q.transformOrigin)==null?void 0:Je.x,(Ve=Q.transformOrigin)==null?void 0:Ve.y].join(" "),...((Ke=Q.hide)==null?void 0:Ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(p6,{scope:n,placedSide:ce,onArrowChange:L,arrowX:$e,arrowY:B,shouldHideArrow:me,children:i.jsx(ct.div,{"data-side":ce,"data-align":ue,...w,ref:T,style:{...w.style,animation:de?void 0:"none"}})})})});vA.displayName=d1;var yA="PopperArrow",m6={top:"bottom",right:"left",bottom:"top",left:"right"},xA=y.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=f6(yA,r),o=m6[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(u6,{...s,ref:n,style:{...s.style,display:"block"}})})});xA.displayName=yA;function g6(t){return t!==null}var v6=t=>({name:"transformOrigin",options:t,fn(e){var b,S,v;const{placement:n,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=bA(n),p={start:"0%",center:"50%",end:"100%"}[h],m=(((S=s.arrow)==null?void 0:S.x)??0)+l/2,x=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let N="",w="";return u==="bottom"?(N=o?p:`${m}px`,w=`${-c}px`):u==="top"?(N=o?p:`${m}px`,w=`${r.floating.height+c}px`):u==="right"?(N=`${-c}px`,w=o?p:`${x}px`):u==="left"&&(N=`${r.floating.width+c}px`,w=o?p:`${x}px`),{data:{x:N,y:w}}}});function bA(t){const[e,n="center"]=t.split("-");return[e,n]}var y6=fA,wA=gA,_A=vA,CA=xA,[Pv,cJ]=Na("Tooltip",[Av]),u1=Av(),SA="TooltipProvider",x6=700,SS="tooltip.open",[b6,EA]=Pv(SA),jA=t=>{const{__scopeTooltip:e,delayDuration:n=x6,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,o=y.useRef(!0),l=y.useRef(!1),c=y.useRef(0);return y.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(b6,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:y.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};jA.displayName=SA;var NA="Tooltip",[dJ,Iv]=Pv(NA),Bb="TooltipTrigger",w6=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Iv(Bb,n),a=EA(Bb,n),o=u1(n),l=y.useRef(null),c=Ft(e,l,s.onTriggerChange),u=y.useRef(!1),h=y.useRef(!1),p=y.useCallback(()=>u.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),i.jsx(wA,{asChild:!0,...o,children:i.jsx(ct.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:He(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:He(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:He(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:He(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:He(t.onBlur,s.onClose),onClick:He(t.onClick,s.onClose)})})});w6.displayName=Bb;var _6="TooltipPortal",[uJ,C6]=Pv(_6,{forceMount:void 0}),Kd="TooltipContent",TA=y.forwardRef((t,e)=>{const n=C6(Kd,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=t,o=Iv(Kd,t.__scopeTooltip);return i.jsx(Xl,{present:r||o.open,children:o.disableHoverableContent?i.jsx(kA,{side:s,...a,ref:e}):i.jsx(S6,{side:s,...a,ref:e})})}),S6=y.forwardRef((t,e)=>{const n=Iv(Kd,t.__scopeTooltip),r=EA(Kd,t.__scopeTooltip),s=y.useRef(null),a=Ft(e,s),[o,l]=y.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:p}=r,m=y.useCallback(()=>{l(null),p(!1)},[p]),x=y.useCallback((N,w)=>{const b=N.currentTarget,S={x:N.clientX,y:N.clientY},v=k6(S,b.getBoundingClientRect()),T=A6(S,v),I=P6(w.getBoundingClientRect()),L=R6([...T,...I]);l(L),p(!0)},[p]);return y.useEffect(()=>()=>m(),[m]),y.useEffect(()=>{if(c&&h){const N=b=>x(b,h),w=b=>x(b,c);return c.addEventListener("pointerleave",N),h.addEventListener("pointerleave",w),()=>{c.removeEventListener("pointerleave",N),h.removeEventListener("pointerleave",w)}}},[c,h,x,m]),y.useEffect(()=>{if(o){const N=w=>{const b=w.target,S={x:w.clientX,y:w.clientY},v=(c==null?void 0:c.contains(b))||(h==null?void 0:h.contains(b)),T=!I6(S,o);v?m():T&&(m(),u())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[c,h,o,u,m]),i.jsx(kA,{...t,ref:a})}),[E6,j6]=Pv(NA,{isInside:!1}),N6=IM("TooltipContent"),kA=y.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,c=Iv(Kd,n),u=u1(n),{onClose:h}=c;return y.useEffect(()=>(document.addEventListener(SS,h),()=>document.removeEventListener(SS,h)),[h]),y.useEffect(()=>{if(c.trigger){const p=m=>{const x=m.target;x!=null&&x.contains(c.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[c.trigger,h]),i.jsx(zp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:i.jsxs(_A,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(N6,{children:r}),i.jsx(E6,{scope:n,isInside:!0,children:i.jsx(XM,{id:c.contentId,role:"tooltip",children:s||r})})]})})});TA.displayName=Kd;var AA="TooltipArrow",T6=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=u1(n);return j6(AA,n).isInside?null:i.jsx(CA,{...s,...r,ref:e})});T6.displayName=AA;function k6(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function A6(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function P6(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function I6(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a].x,c=e[a].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function R6(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),D6(e)}function D6(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var O6=jA,PA=TA;const F6=O6,M6=y.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(PA,{ref:r,sideOffset:e,className:mt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));M6.displayName=PA.displayName;const L6=()=>{};var ES={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},$6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},RA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=a>>2,p=(a&3)<<4|l>>4;let m=(l&15)<<2|u>>6,x=u&63;c||(x=64,o||(m=64)),r.push(n[h],n[p],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||u==null||p==null)throw new U6;const m=a<<2|l>>4;if(r.push(m),u!==64){const x=l<<4&240|u>>2;if(r.push(x),p!==64){const N=u<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class U6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z6=function(t){const e=IA(t);return RA.encodeByteArray(e,!0)},mg=function(t){return z6(t).replace(/\./g,"")},DA=function(t){try{return RA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=()=>B6().__FIREBASE_DEFAULTS__,H6=()=>{if(typeof process>"u"||typeof ES>"u")return;const t=ES.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},q6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DA(t[1]);return e&&JSON.parse(e)},h1=()=>{try{return L6()||V6()||H6()||q6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OA=t=>{var e,n;return(n=(e=h1())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},FA=t=>{const e=OA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},MA=()=>{var t;return(t=h1())==null?void 0:t.config},LA=t=>{var e;return(e=h1())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function p1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[mg(JSON.stringify(n)),mg(JSON.stringify(o)),""].join(".")}const ph={};function G6(){const t={prod:[],emulator:[]};for(const e of Object.keys(ph))ph[e]?t.emulator.push(e):t.prod.push(e);return t}function K6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jS=!1;function f1(t,e){if(typeof window>"u"||typeof document>"u"||!lu(window.location.host)||ph[t]===e||ph[t]||jS)return;ph[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=G6().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,x){m.setAttribute("width","24"),m.setAttribute("id",x),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{jS=!0,o()},m}function h(m,x){m.setAttribute("id",x),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=K6(r),x=n("text"),N=document.getElementById(x)||document.createElement("span"),w=n("learnmore"),b=document.getElementById(w)||document.createElement("a"),S=n("preprendIcon"),v=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const T=m.element;l(T),h(b,w);const I=u();c(v,S),T.append(v,N,b,I),document.body.appendChild(T)}a?(N.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(br())}function Y6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Z6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function X6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function J6(){const t=br();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function e$(){try{return typeof indexedDB=="object"}catch{return!1}}function t$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$="FirebaseError";class Vi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=n$,Object.setPrototypeOf(this,Vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hp.prototype.create)}}class Hp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?r$(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Vi(s,l,r)}}function r$(t,e){return t.replace(s$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const s$=/\{\$([^}]+)}/g;function i$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ml(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(NS(a)&&NS(o)){if(!Ml(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function NS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Gu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function a$(t,e){const n=new o$(t,e);return n.subscribe.bind(n)}class o${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");l$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Oy),s.error===void 0&&(s.error=Oy),s.complete===void 0&&(s.complete=Oy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Oy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t){return t&&t._delegate?t._delegate:t}class Eo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new W6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u$(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Go){return this.instances.has(e)}getOptions(e=Go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:d$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Go){return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function d$(t){return t===Go?void 0:t}function u$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Nt||(Nt={}));const p$={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},f$=Nt.INFO,m$={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},g$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=m$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m1{constructor(e){this.name=e,this._logLevel=f$,this._logHandler=g$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...e),this._logHandler(this,Nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...e),this._logHandler(this,Nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...e),this._logHandler(this,Nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...e),this._logHandler(this,Nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...e),this._logHandler(this,Nt.ERROR,...e)}}const v$=(t,e)=>e.some(n=>t instanceof n);let TS,kS;function y$(){return TS||(TS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x$(){return kS||(kS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UA=new WeakMap,Vb=new WeakMap,zA=new WeakMap,Fy=new WeakMap,g1=new WeakMap;function b$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(yo(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&UA.set(n,t)}).catch(()=>{}),g1.set(e,t),e}function w$(t){if(Vb.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Vb.set(t,e)}let Hb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _$(t){Hb=t(Hb)}function C$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(My(this),e,...n);return zA.set(r,e.sort?e.sort():[e]),yo(r)}:x$().includes(t)?function(...e){return t.apply(My(this),e),yo(UA.get(this))}:function(...e){return yo(t.apply(My(this),e))}}function S$(t){return typeof t=="function"?C$(t):(t instanceof IDBTransaction&&w$(t),v$(t,y$())?new Proxy(t,Hb):t)}function yo(t){if(t instanceof IDBRequest)return b$(t);if(Fy.has(t))return Fy.get(t);const e=S$(t);return e!==t&&(Fy.set(t,e),g1.set(e,t)),e}const My=t=>g1.get(t);function E$(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=yo(o);return r&&o.addEventListener("upgradeneeded",c=>{r(yo(o.result),c.oldVersion,c.newVersion,yo(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const j$=["get","getKey","getAll","getAllKeys","count"],N$=["put","add","delete","clear"],Ly=new Map;function AS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ly.get(e))return Ly.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=N$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||j$.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Ly.set(e,a),a}_$(t=>({...t,get:(e,n,r)=>AS(e,n)||t.get(e,n,r),has:(e,n)=>!!AS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(k$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function k$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qb="@firebase/app",PS="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new m1("@firebase/app"),A$="@firebase/app-compat",P$="@firebase/analytics-compat",I$="@firebase/analytics",R$="@firebase/app-check-compat",D$="@firebase/app-check",O$="@firebase/auth",F$="@firebase/auth-compat",M$="@firebase/database",L$="@firebase/data-connect",$$="@firebase/database-compat",U$="@firebase/functions",z$="@firebase/functions-compat",B$="@firebase/installations",V$="@firebase/installations-compat",H$="@firebase/messaging",q$="@firebase/messaging-compat",W$="@firebase/performance",G$="@firebase/performance-compat",K$="@firebase/remote-config",Q$="@firebase/remote-config-compat",Y$="@firebase/storage",Z$="@firebase/storage-compat",X$="@firebase/firestore",J$="@firebase/ai",e8="@firebase/firestore-compat",t8="firebase",n8="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="[DEFAULT]",r8={[qb]:"fire-core",[A$]:"fire-core-compat",[I$]:"fire-analytics",[P$]:"fire-analytics-compat",[D$]:"fire-app-check",[R$]:"fire-app-check-compat",[O$]:"fire-auth",[F$]:"fire-auth-compat",[M$]:"fire-rtdb",[L$]:"fire-data-connect",[$$]:"fire-rtdb-compat",[U$]:"fire-fn",[z$]:"fire-fn-compat",[B$]:"fire-iid",[V$]:"fire-iid-compat",[H$]:"fire-fcm",[q$]:"fire-fcm-compat",[W$]:"fire-perf",[G$]:"fire-perf-compat",[K$]:"fire-rc",[Q$]:"fire-rc-compat",[Y$]:"fire-gcs",[Z$]:"fire-gcs-compat",[X$]:"fire-fst",[e8]:"fire-fst-compat",[J$]:"fire-vertex","fire-js":"fire-js",[t8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=new Map,s8=new Map,Gb=new Map;function IS(t,e){try{t.container.addComponent(e)}catch(n){_a.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ll(t){const e=t.name;if(Gb.has(e))return _a.debug(`There were multiple attempts to register component ${e}.`),!1;Gb.set(e,t);for(const n of gg.values())IS(n,t);for(const n of s8.values())IS(n,t);return!0}function Rv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xo=new Hp("app","Firebase",i8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=n8;function BA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Wb,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw xo.create("bad-app-name",{appName:String(s)});if(n||(n=MA()),!n)throw xo.create("no-options");const a=gg.get(s);if(a){if(Ml(n,a.options)&&Ml(r,a.config))return a;throw xo.create("duplicate-app",{appName:s})}const o=new h$(s);for(const c of Gb.values())o.addComponent(c);const l=new a8(n,r,o);return gg.set(s,l),l}function v1(t=Wb){const e=gg.get(t);if(!e&&t===Wb&&MA())return BA();if(!e)throw xo.create("no-app",{appName:t});return e}function Di(t,e,n){let r=r8[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_a.warn(o.join(" "));return}Ll(new Eo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8="firebase-heartbeat-database",l8=1,Bh="firebase-heartbeat-store";let $y=null;function VA(){return $y||($y=E$(o8,l8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bh)}catch(n){console.warn(n)}}}}).catch(t=>{throw xo.create("idb-open",{originalErrorMessage:t.message})})),$y}async function c8(t){try{const n=(await VA()).transaction(Bh),r=await n.objectStore(Bh).get(HA(t));return await n.done,r}catch(e){if(e instanceof Vi)_a.warn(e.message);else{const n=xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_a.warn(n.message)}}}async function RS(t,e){try{const r=(await VA()).transaction(Bh,"readwrite");await r.objectStore(Bh).put(e,HA(t)),await r.done}catch(n){if(n instanceof Vi)_a.warn(n.message);else{const r=xo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_a.warn(r.message)}}}function HA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=1024,u8=30;class h8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=DS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>u8){const o=m8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_a.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=DS(),{heartbeatsToSend:r,unsentEntries:s}=p8(this._heartbeatsCache.heartbeats),a=mg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return _a.warn(n),""}}}function DS(){return new Date().toISOString().substring(0,10)}function p8(t,e=d8){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),OS(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),OS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class f8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return e$()?t$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await c8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return RS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return RS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function OS(t){return mg(JSON.stringify({version:2,heartbeats:t})).length}function m8(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t){Ll(new Eo("platform-logger",e=>new T$(e),"PRIVATE")),Ll(new Eo("heartbeat",e=>new h8(e),"PRIVATE")),Di(qb,PS,t),Di(qb,PS,"esm2020"),Di("fire-js","")}g8("");var v8="firebase",y8="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di(v8,y8,"app");function qA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x8=qA,WA=new Hp("auth","Firebase",qA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=new m1("@firebase/auth");function b8(t,...e){vg.logLevel<=Nt.WARN&&vg.warn(`Auth (${Jl}): ${t}`,...e)}function _m(t,...e){vg.logLevel<=Nt.ERROR&&vg.error(`Auth (${Jl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t,...e){throw y1(t,...e)}function Oi(t,...e){return y1(t,...e)}function GA(t,e,n){const r={...x8(),[e]:n};return new Hp("auth","Firebase",r).create(e,{appName:t.name})}function fa(t){return GA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return WA.create(t,...e)}function qe(t,e,...n){if(!t)throw y1(e,...n)}function ua(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _m(e),new Error(e)}function Ca(t,e){t||ua(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function w8(){return FS()==="http:"||FS()==="https:"}function FS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w8()||Z6()||"connection"in navigator)?navigator.onLine:!0}function C8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ca(n>e,"Short delay should be less than long delay!"),this.isMobile=Q6()||X6()}get(){return _8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t,e){Ca(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ua("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ua("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ua("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],j8=new Wp(3e4,6e4);function Oo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Fo(t,e,n,r,s={}){return QA(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=qp({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return Y6()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&lu(t.emulatorConfig.host)&&(u.credentials="include"),KA.fetch()(await YA(t,t.config.apiHost,n,l),u)})}async function QA(t,e,n){t._canInitEmulator=!1;const r={...S8,...e};try{const s=new T8(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Lf(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Lf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Lf(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw GA(t,h,u);Zs(t,h)}}catch(s){if(s instanceof Vi)throw s;Zs(t,"network-request-failed",{message:String(s)})}}async function Gp(t,e,n,r,s={}){const a=await Fo(t,e,n,r,s);return"mfaPendingCredential"in a&&Zs(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function YA(t,e,n,r){const s=`${e}${n}?${r}`,a=t,o=a.config.emulator?x1(t.config,s):`${t.config.apiScheme}://${s}`;return E8.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function N8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class T8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Oi(this.auth,"network-request-failed")),j8.get())})}}function Lf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Oi(t,e,r);return s.customData._tokenResponse=n,s}function MS(t){return t!==void 0&&t.enterprise!==void 0}class k8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return N8(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function A8(t,e){return Fo(t,"GET","/v2/recaptchaConfig",Oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P8(t,e){return Fo(t,"POST","/v1/accounts:delete",e)}async function yg(t,e){return Fo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function I8(t,e=!1){const n=Hi(t),r=await n.getIdToken(e),s=b1(r);qe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:fh(Uy(s.auth_time)),issuedAtTime:fh(Uy(s.iat)),expirationTime:fh(Uy(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Uy(t){return Number(t)*1e3}function b1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _m("JWT malformed, contained fewer than 3 sections"),null;try{const s=DA(n);return s?JSON.parse(s):(_m("Failed to decode base64 JWT payload"),null)}catch(s){return _m("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function LS(t){const e=b1(t);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vi&&R8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function R8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fh(this.lastLoginAt),this.creationTime=fh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xg(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Vh(t,yg(e,{idToken:n}));qe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(p=s.providerUserInfo)!=null&&p.length?ZA(s.providerUserInfo):[],o=F8(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Qb(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function O8(t){const e=Hi(t);await xg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function F8(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ZA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M8(t,e){const n=await QA(t,{},async()=>{const r=qp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=await YA(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&lu(t.emulatorConfig.host)&&(c.credentials="include"),KA.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function L8(t,e){return Fo(t,"POST","/v2/accounts:revokeToken",Oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const n=LS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await M8(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new Yc;return r&&(qe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(qe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(qe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yc,this.toJSON())}_performRefresh(){return ua("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t,e){qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Us{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new D8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Vh(this,this.stsTokenManager.getToken(this.auth,e));return qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return I8(this,e)}reload(){return O8(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Us({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zr(this.auth.app))return Promise.reject(fa(this.auth));const e=await this.getIdToken();return await Vh(this,P8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:x,providerData:N,stsTokenManager:w}=n;qe(p&&w,e,"internal-error");const b=Yc.fromJSON(this.name,w);qe(typeof p=="string",e,"internal-error"),Da(r,e.name),Da(s,e.name),qe(typeof m=="boolean",e,"internal-error"),qe(typeof x=="boolean",e,"internal-error"),Da(a,e.name),Da(o,e.name),Da(l,e.name),Da(c,e.name),Da(u,e.name),Da(h,e.name);const S=new Us({uid:p,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:b,createdAt:u,lastLoginAt:h});return N&&Array.isArray(N)&&(S.providerData=N.map(v=>({...v}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Yc;s.updateFromServerResponse(n);const a=new Us({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xg(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];qe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?ZA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new Yc;l.updateFromIdToken(r);const c=new Us({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Qb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new Map;function ha(t){Ca(t instanceof Function,"Expected a class definition");let e=$S.get(t);return e?(Ca(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$S.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}XA.type="NONE";const US=XA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t,e,n){return`firebase:${t}:${e}:${n}`}class Zc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Cm(this.userKey,s.apiKey,a),this.fullPersistenceKey=Cm("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await yg(this.auth,{idToken:e}).catch(()=>{});return n?Us._fromGetAccountInfoResponse(this.auth,n,e):null}return Us._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zc(ha(US),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||ha(US);const o=Cm(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let p;if(typeof h=="string"){const m=await yg(e,{idToken:h}).catch(()=>{});if(!m)break;p=await Us._fromGetAccountInfoResponse(e,m,h)}else p=Us._fromJSON(e,h);u!==a&&(l=p),a=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Zc(a,e,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new Zc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sP(e))return"Blackberry";if(iP(e))return"Webos";if(eP(e))return"Safari";if((e.includes("chrome/")||tP(e))&&!e.includes("edge/"))return"Chrome";if(rP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function JA(t=br()){return/firefox\//i.test(t)}function eP(t=br()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tP(t=br()){return/crios\//i.test(t)}function nP(t=br()){return/iemobile/i.test(t)}function rP(t=br()){return/android/i.test(t)}function sP(t=br()){return/blackberry/i.test(t)}function iP(t=br()){return/webos/i.test(t)}function w1(t=br()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $8(t=br()){var e;return w1(t)&&!!((e=window.navigator)!=null&&e.standalone)}function U8(){return J6()&&document.documentMode===10}function aP(t=br()){return w1(t)||rP(t)||iP(t)||sP(t)||/windows phone/i.test(t)||nP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t,e=[]){let n;switch(t){case"Browser":n=zS(br());break;case"Worker":n=`${zS(br())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B8(t,e={}){return Fo(t,"GET","/v2/passwordPolicy",Oo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=6;class H8{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??V8,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BS(this),this.idTokenSubscription=new BS(this),this.beforeStateQueue=new z8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ha(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Zc.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yg(this,{idToken:e}),r=await Us._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(zr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=C8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zr(this.app))return Promise.reject(fa(this));const n=e?Hi(e):null;return n&&qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zr(this.app)?Promise.reject(fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zr(this.app)?Promise.reject(fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ha(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await B8(this),n=new H8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await L8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ha(e)||this._popupRedirectResolver;qe(n,this,"argument-error"),this.redirectPersistenceManager=await Zc.create(this,[ha(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&b8(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ec(t){return Hi(t)}class BS{constructor(e){this.auth=e,this.observer=null,this.addObserver=a$(n=>this.observer=n)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W8(t){Dv=t}function lP(t){return Dv.loadJS(t)}function G8(){return Dv.recaptchaEnterpriseScript}function K8(){return Dv.gapiScript}function Q8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Y8{constructor(){this.enterprise=new Z8}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Z8{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const X8="recaptcha-enterprise",cP="NO_RECAPTCHA";class J8{constructor(e){this.type=X8,this.auth=ec(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{A8(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new k8(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(a,o,l){const c=window.grecaptcha;MS(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(cP)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Y8().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&MS(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=G8();c.length!==0&&(c+=l),lP(c).then(()=>{s(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function VS(t,e,n,r=!1,s=!1){const a=new J8(t);let o;if(s)o=cP;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Yb(t,e,n,r,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await VS(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await VS(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(t,e){const n=Rv(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Ml(a,e??{}))return s;Zs(s,"already-initialized")}return n.initialize({options:e})}function tU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ha);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function nU(t,e,n){const r=ec(t);qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),a=dP(e),{host:o,port:l}=rU(e),c=l===null?"":`:${l}`,u={url:`${a}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qe(Ml(u,r.config.emulator)&&Ml(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,lu(o)?(p1(`${a}//${o}${c}`),f1("Auth",!0)):sU()}function dP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rU(t){const e=dP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:HS(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:HS(o)}}}function HS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ua("not implemented")}_getIdTokenResponse(e){return ua("not implemented")}_linkToIdToken(e,n){return ua("not implemented")}_getReauthenticationResolver(e){return ua("not implemented")}}async function iU(t,e){return Fo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aU(t,e){return Gp(t,"POST","/v1/accounts:signInWithPassword",Oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oU(t,e){return Gp(t,"POST","/v1/accounts:signInWithEmailLink",Oo(t,e))}async function lU(t,e){return Gp(t,"POST","/v1/accounts:signInWithEmailLink",Oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends _1{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Hh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Hh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yb(e,n,"signInWithPassword",aU);case"emailLink":return oU(e,{email:this._email,oobCode:this._password});default:Zs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yb(e,r,"signUpPassword",iU);case"emailLink":return lU(e,{idToken:n,email:this._email,oobCode:this._password});default:Zs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(t,e){return Gp(t,"POST","/v1/accounts:signInWithIdp",Oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU="http://localhost";class $l extends _1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $l(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const o=new $l(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xc(e,n)}buildRequest(){const e={requestUri:cU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qp(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uU(t){const e=Wu(Gu(t)).link,n=e?Wu(Gu(e)).deep_link_id:null,r=Wu(Gu(t)).deep_link_id;return(r?Wu(Gu(r)).link:null)||r||n||e||t}class C1{constructor(e){const n=Wu(Gu(e)),r=n.apiKey??null,s=n.oobCode??null,a=dU(n.mode??null);qe(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=uU(e);try{return new C1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this.providerId=cu.PROVIDER_ID}static credential(e,n){return Hh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=C1.parseLink(n);return qe(r,"argument-error"),Hh._fromEmailAndCode(e,r.code,r.tenantId)}}cu.PROVIDER_ID="password";cu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends uP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends Kp{constructor(){super("facebook.com")}static credential(e){return $l._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ba.credential(e.oauthAccessToken)}catch{return null}}}Ba.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ba.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends Kp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $l._fromParams({providerId:Va.PROVIDER_ID,signInMethod:Va.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Va.credentialFromTaggedObject(e)}static credentialFromError(e){return Va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Va.credential(n,r)}catch{return null}}}Va.GOOGLE_SIGN_IN_METHOD="google.com";Va.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends Kp{constructor(){super("github.com")}static credential(e){return $l._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ha.credentialFromTaggedObject(e)}static credentialFromError(e){return Ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ha.credential(e.oauthAccessToken)}catch{return null}}}Ha.GITHUB_SIGN_IN_METHOD="github.com";Ha.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends Kp{constructor(){super("twitter.com")}static credential(e,n){return $l._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qa.credential(n,r)}catch{return null}}}qa.TWITTER_SIGN_IN_METHOD="twitter.com";qa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(t,e){return Gp(t,"POST","/v1/accounts:signUp",Oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Us._fromIdTokenResponse(e,r,s),o=qS(r);return new Ul({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=qS(r);return new Ul({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function qS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg extends Vi{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new bg(e,n,r,s)}}function hP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?bg._fromErrorAndOperation(t,a,e,r):a})}async function pU(t,e,n=!1){const r=await Vh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ul._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(t,e,n=!1){const{auth:r}=t;if(zr(r.app))return Promise.reject(fa(r));const s="reauthenticate";try{const a=await Vh(t,hP(r,s,e,t),n);qe(a.idToken,r,"internal-error");const o=b1(a.idToken);qe(o,r,"internal-error");const{sub:l}=o;return qe(t.uid===l,r,"user-mismatch"),Ul._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Zs(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(t,e,n=!1){if(zr(t.app))return Promise.reject(fa(t));const r="signIn",s=await hP(t,r,e),a=await Ul._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function mU(t,e){return pP(ec(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(t){const e=ec(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gU(t,e,n){if(zr(t.app))return Promise.reject(fa(t));const r=ec(t),o=await Yb(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hU).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&fP(t),c}),l=await Ul._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function vU(t,e,n){return zr(t.app)?Promise.reject(fa(t)):mU(Hi(t),cu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&fP(t),r})}function yU(t,e,n,r){return Hi(t).onIdTokenChanged(e,n,r)}function xU(t,e,n){return Hi(t).beforeAuthStateChanged(e,n)}function bU(t,e,n,r){return Hi(t).onAuthStateChanged(e,n,r)}function wU(t){return Hi(t).signOut()}const wg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wg,"1"),this.storage.removeItem(wg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=1e3,CU=10;class gP extends mP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);U8()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,CU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_U)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gP.type="LOCAL";const SU=gP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP extends mP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vP.type="SESSION";const yP=vP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ov(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,a)),c=await EU(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ov.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=S1("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(h),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return window}function NU(t){Fi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function TU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function AU(){return xP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="firebaseLocalStorageDb",PU=1,_g="firebaseLocalStorage",wP="fbase_key";class Qp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fv(t,e){return t.transaction([_g],e?"readwrite":"readonly").objectStore(_g)}function IU(){const t=indexedDB.deleteDatabase(bP);return new Qp(t).toPromise()}function Zb(){const t=indexedDB.open(bP,PU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_g,{keyPath:wP})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_g)?e(r):(r.close(),await IU(),e(await Zb()))})})}async function WS(t,e,n){const r=Fv(t,!0).put({[wP]:e,value:n});return new Qp(r).toPromise()}async function RU(t,e){const n=Fv(t,!1).get(e),r=await new Qp(n).toPromise();return r===void 0?null:r.value}function GS(t,e){const n=Fv(t,!0).delete(e);return new Qp(n).toPromise()}const DU=800,OU=3;class _P{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zb(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>OU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ov._getInstance(AU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await TU(),!this.activeServiceWorker)return;this.sender=new jU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zb();return await WS(e,wg,"1"),await GS(e,wg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>WS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>GS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Fv(s,!1).getAll();return new Qp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_P.type="LOCAL";const FU=_P;new Wp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(t,e){return e?ha(e):(qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1 extends _1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LU(t){return pP(t.auth,new E1(t),t.bypassAuthState)}function $U(t){const{auth:e,user:n}=t;return qe(n,e,"internal-error"),fU(n,new E1(t),t.bypassAuthState)}async function UU(t){const{auth:e,user:n}=t;return qe(n,e,"internal-error"),pU(n,new E1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LU;case"linkViaPopup":case"linkViaRedirect":return UU;case"reauthViaPopup":case"reauthViaRedirect":return $U;default:Zs(this.auth,"internal-error")}}resolve(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=new Wp(2e3,1e4);class Mc extends CP{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Mc.currentPopupAction&&Mc.currentPopupAction.cancel(),Mc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Ca(this.filter.length===1,"Popup operations only handle one event");const e=S1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zU.get())};e()}}Mc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU="pendingRedirect",Sm=new Map;class VU extends CP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sm.get(this.auth._key());if(!e){try{const r=await HU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sm.set(this.auth._key(),e)}return this.bypassAuthState||Sm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HU(t,e){const n=GU(e),r=WU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function qU(t,e){Sm.set(t._key(),e)}function WU(t){return ha(t._redirectPersistence)}function GU(t){return Cm(BU,t.config.apiKey,t.name)}async function KU(t,e,n=!1){if(zr(t.app))return Promise.reject(fa(t));const r=ec(t),s=MU(r,e),o=await new VU(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=10*60*1e3;class YU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!SP(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Oi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QU&&this.cachedEventUids.clear(),this.cachedEventUids.has(KS(e))}saveEventToCache(e){this.cachedEventUids.add(KS(e)),this.lastProcessedEventTime=Date.now()}}function KS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(t,e={}){return Fo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e9=/^https?/;async function t9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XU(t);for(const n of e)try{if(n9(n))return}catch{}Zs(t,"unauthorized-domain")}function n9(t){const e=Kb(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!e9.test(n))return!1;if(JU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=new Wp(3e4,6e4);function QS(){const t=Fi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function s9(t){return new Promise((e,n)=>{var s,a,o;function r(){QS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QS(),n(Oi(t,"network-request-failed"))},timeout:r9.get()})}if((a=(s=Fi().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=Fi().gapi)!=null&&o.load)r();else{const l=Q8("iframefcb");return Fi()[l]=()=>{gapi.load?r():n(Oi(t,"network-request-failed"))},lP(`${K8()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Em=null,e})}let Em=null;function i9(t){return Em=Em||s9(t),Em}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=new Wp(5e3,15e3),o9="__/auth/iframe",l9="emulator/auth/iframe",c9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u9(t){const e=t.config;qe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?x1(e,l9):`https://${t.config.authDomain}/${o9}`,r={apiKey:e.apiKey,appName:t.name,v:Jl},s=d9.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${qp(r).slice(1)}`}async function h9(t){const e=await i9(t),n=Fi().gapi;return qe(n,t,"internal-error"),e.open({where:document.body,url:u9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c9,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=Oi(t,"network-request-failed"),l=Fi().setTimeout(()=>{a(o)},a9.get());function c(){Fi().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f9=500,m9=600,g9="_blank",v9="http://localhost";class YS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function y9(t,e,n,r=f9,s=m9){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...p9,width:r.toString(),height:s.toString(),top:a,left:o},u=br().toLowerCase();n&&(l=tP(u)?g9:n),JA(u)&&(e=e||v9,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[x,N])=>`${m}${x}=${N},`,"");if($8(u)&&l!=="_self")return x9(e||"",l),new YS(null);const p=window.open(e||"",l,h);qe(p,t,"popup-blocked");try{p.focus()}catch{}return new YS(p)}function x9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9="__/auth/handler",w9="emulator/auth/handler",_9=encodeURIComponent("fac");async function ZS(t,e,n,r,s,a){qe(t.config.authDomain,t,"auth-domain-config-required"),qe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Jl,eventId:s};if(e instanceof uP){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",i$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Kp){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${_9}=${encodeURIComponent(c)}`:"";return`${C9(t)}?${qp(l).slice(1)}${u}`}function C9({config:t}){return t.emulator?x1(t,w9):`https://${t.authDomain}/${b9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="webStorageSupport";class S9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yP,this._completeRedirectFn=KU,this._overrideRedirectResult=qU}async _openPopup(e,n,r,s){var o;Ca((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await ZS(e,n,r,Kb(),s);return y9(e,a,S1())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await ZS(e,n,r,Kb(),s);return NU(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Ca(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await h9(e),r=new YU(e);return n.register("authEvent",s=>(qe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zy,{type:zy},s=>{var o;const a=(o=s==null?void 0:s[0])==null?void 0:o[zy];a!==void 0&&n(!!a),Zs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=t9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return aP()||eP()||w1()}}const E9=S9;var XS="@firebase/auth",JS="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T9(t){Ll(new Eo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;qe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oP(t)},u=new q8(r,s,a,c);return tU(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ll(new Eo("auth-internal",e=>{const n=ec(e.getProvider("auth").getImmediate());return(r=>new j9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(XS,JS,N9(t)),Di(XS,JS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=5*60,A9=LA("authIdTokenMaxAge")||k9;let eE=null;const P9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>A9)return;const s=n==null?void 0:n.token;eE!==s&&(eE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function I9(t=v1()){const e=Rv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eU(t,{popupRedirectResolver:E9,persistence:[FU,SU,yP]}),r=LA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=P9(a.toString());xU(n,o,()=>o(n.currentUser)),yU(n,l=>o(l))}}const s=OA("auth");return s&&nU(n,`http://${s}`),n}function R9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}W8({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Oi("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",R9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T9("Browser");var tE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,_){function P(){}P.prototype=_.prototype,C.D=_.prototype,C.prototype=new P,C.prototype.constructor=C,C.C=function(A,F,D){for(var E=Array(arguments.length-2),$=2;$<arguments.length;$++)E[$-2]=arguments[$];return _.prototype[F].apply(A,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,_,P){P||(P=0);var A=Array(16);if(typeof _=="string")for(var F=0;16>F;++F)A[F]=_.charCodeAt(P++)|_.charCodeAt(P++)<<8|_.charCodeAt(P++)<<16|_.charCodeAt(P++)<<24;else for(F=0;16>F;++F)A[F]=_[P++]|_[P++]<<8|_[P++]<<16|_[P++]<<24;_=C.g[0],P=C.g[1],F=C.g[2];var D=C.g[3],E=_+(D^P&(F^D))+A[0]+3614090360&4294967295;_=P+(E<<7&4294967295|E>>>25),E=D+(F^_&(P^F))+A[1]+3905402710&4294967295,D=_+(E<<12&4294967295|E>>>20),E=F+(P^D&(_^P))+A[2]+606105819&4294967295,F=D+(E<<17&4294967295|E>>>15),E=P+(_^F&(D^_))+A[3]+3250441966&4294967295,P=F+(E<<22&4294967295|E>>>10),E=_+(D^P&(F^D))+A[4]+4118548399&4294967295,_=P+(E<<7&4294967295|E>>>25),E=D+(F^_&(P^F))+A[5]+1200080426&4294967295,D=_+(E<<12&4294967295|E>>>20),E=F+(P^D&(_^P))+A[6]+2821735955&4294967295,F=D+(E<<17&4294967295|E>>>15),E=P+(_^F&(D^_))+A[7]+4249261313&4294967295,P=F+(E<<22&4294967295|E>>>10),E=_+(D^P&(F^D))+A[8]+1770035416&4294967295,_=P+(E<<7&4294967295|E>>>25),E=D+(F^_&(P^F))+A[9]+2336552879&4294967295,D=_+(E<<12&4294967295|E>>>20),E=F+(P^D&(_^P))+A[10]+4294925233&4294967295,F=D+(E<<17&4294967295|E>>>15),E=P+(_^F&(D^_))+A[11]+2304563134&4294967295,P=F+(E<<22&4294967295|E>>>10),E=_+(D^P&(F^D))+A[12]+1804603682&4294967295,_=P+(E<<7&4294967295|E>>>25),E=D+(F^_&(P^F))+A[13]+4254626195&4294967295,D=_+(E<<12&4294967295|E>>>20),E=F+(P^D&(_^P))+A[14]+2792965006&4294967295,F=D+(E<<17&4294967295|E>>>15),E=P+(_^F&(D^_))+A[15]+1236535329&4294967295,P=F+(E<<22&4294967295|E>>>10),E=_+(F^D&(P^F))+A[1]+4129170786&4294967295,_=P+(E<<5&4294967295|E>>>27),E=D+(P^F&(_^P))+A[6]+3225465664&4294967295,D=_+(E<<9&4294967295|E>>>23),E=F+(_^P&(D^_))+A[11]+643717713&4294967295,F=D+(E<<14&4294967295|E>>>18),E=P+(D^_&(F^D))+A[0]+3921069994&4294967295,P=F+(E<<20&4294967295|E>>>12),E=_+(F^D&(P^F))+A[5]+3593408605&4294967295,_=P+(E<<5&4294967295|E>>>27),E=D+(P^F&(_^P))+A[10]+38016083&4294967295,D=_+(E<<9&4294967295|E>>>23),E=F+(_^P&(D^_))+A[15]+3634488961&4294967295,F=D+(E<<14&4294967295|E>>>18),E=P+(D^_&(F^D))+A[4]+3889429448&4294967295,P=F+(E<<20&4294967295|E>>>12),E=_+(F^D&(P^F))+A[9]+568446438&4294967295,_=P+(E<<5&4294967295|E>>>27),E=D+(P^F&(_^P))+A[14]+3275163606&4294967295,D=_+(E<<9&4294967295|E>>>23),E=F+(_^P&(D^_))+A[3]+4107603335&4294967295,F=D+(E<<14&4294967295|E>>>18),E=P+(D^_&(F^D))+A[8]+1163531501&4294967295,P=F+(E<<20&4294967295|E>>>12),E=_+(F^D&(P^F))+A[13]+2850285829&4294967295,_=P+(E<<5&4294967295|E>>>27),E=D+(P^F&(_^P))+A[2]+4243563512&4294967295,D=_+(E<<9&4294967295|E>>>23),E=F+(_^P&(D^_))+A[7]+1735328473&4294967295,F=D+(E<<14&4294967295|E>>>18),E=P+(D^_&(F^D))+A[12]+2368359562&4294967295,P=F+(E<<20&4294967295|E>>>12),E=_+(P^F^D)+A[5]+4294588738&4294967295,_=P+(E<<4&4294967295|E>>>28),E=D+(_^P^F)+A[8]+2272392833&4294967295,D=_+(E<<11&4294967295|E>>>21),E=F+(D^_^P)+A[11]+1839030562&4294967295,F=D+(E<<16&4294967295|E>>>16),E=P+(F^D^_)+A[14]+4259657740&4294967295,P=F+(E<<23&4294967295|E>>>9),E=_+(P^F^D)+A[1]+2763975236&4294967295,_=P+(E<<4&4294967295|E>>>28),E=D+(_^P^F)+A[4]+1272893353&4294967295,D=_+(E<<11&4294967295|E>>>21),E=F+(D^_^P)+A[7]+4139469664&4294967295,F=D+(E<<16&4294967295|E>>>16),E=P+(F^D^_)+A[10]+3200236656&4294967295,P=F+(E<<23&4294967295|E>>>9),E=_+(P^F^D)+A[13]+681279174&4294967295,_=P+(E<<4&4294967295|E>>>28),E=D+(_^P^F)+A[0]+3936430074&4294967295,D=_+(E<<11&4294967295|E>>>21),E=F+(D^_^P)+A[3]+3572445317&4294967295,F=D+(E<<16&4294967295|E>>>16),E=P+(F^D^_)+A[6]+76029189&4294967295,P=F+(E<<23&4294967295|E>>>9),E=_+(P^F^D)+A[9]+3654602809&4294967295,_=P+(E<<4&4294967295|E>>>28),E=D+(_^P^F)+A[12]+3873151461&4294967295,D=_+(E<<11&4294967295|E>>>21),E=F+(D^_^P)+A[15]+530742520&4294967295,F=D+(E<<16&4294967295|E>>>16),E=P+(F^D^_)+A[2]+3299628645&4294967295,P=F+(E<<23&4294967295|E>>>9),E=_+(F^(P|~D))+A[0]+4096336452&4294967295,_=P+(E<<6&4294967295|E>>>26),E=D+(P^(_|~F))+A[7]+1126891415&4294967295,D=_+(E<<10&4294967295|E>>>22),E=F+(_^(D|~P))+A[14]+2878612391&4294967295,F=D+(E<<15&4294967295|E>>>17),E=P+(D^(F|~_))+A[5]+4237533241&4294967295,P=F+(E<<21&4294967295|E>>>11),E=_+(F^(P|~D))+A[12]+1700485571&4294967295,_=P+(E<<6&4294967295|E>>>26),E=D+(P^(_|~F))+A[3]+2399980690&4294967295,D=_+(E<<10&4294967295|E>>>22),E=F+(_^(D|~P))+A[10]+4293915773&4294967295,F=D+(E<<15&4294967295|E>>>17),E=P+(D^(F|~_))+A[1]+2240044497&4294967295,P=F+(E<<21&4294967295|E>>>11),E=_+(F^(P|~D))+A[8]+1873313359&4294967295,_=P+(E<<6&4294967295|E>>>26),E=D+(P^(_|~F))+A[15]+4264355552&4294967295,D=_+(E<<10&4294967295|E>>>22),E=F+(_^(D|~P))+A[6]+2734768916&4294967295,F=D+(E<<15&4294967295|E>>>17),E=P+(D^(F|~_))+A[13]+1309151649&4294967295,P=F+(E<<21&4294967295|E>>>11),E=_+(F^(P|~D))+A[4]+4149444226&4294967295,_=P+(E<<6&4294967295|E>>>26),E=D+(P^(_|~F))+A[11]+3174756917&4294967295,D=_+(E<<10&4294967295|E>>>22),E=F+(_^(D|~P))+A[2]+718787259&4294967295,F=D+(E<<15&4294967295|E>>>17),E=P+(D^(F|~_))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(F+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+F&4294967295,C.g[3]=C.g[3]+D&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var P=_-this.blockSize,A=this.B,F=this.h,D=0;D<_;){if(F==0)for(;D<=P;)s(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<_;)if(A[F++]=C.charCodeAt(D++),F==this.blockSize){s(this,A),F=0;break}}else for(;D<_;)if(A[F++]=C[D++],F==this.blockSize){s(this,A),F=0;break}}this.h=F,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var P=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=P&255,P/=256;for(this.u(C),C=Array(16),_=P=0;4>_;++_)for(var A=0;32>A;A+=8)C[P++]=this.g[_]>>>A&255;return C};function a(C,_){var P=l;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=_(C)}function o(C,_){this.h=_;for(var P=[],A=!0,F=C.length-1;0<=F;F--){var D=C[F]|0;A&&D==_||(P[F]=D,A=!1)}this.g=P}var l={};function c(C){return-128<=C&&128>C?a(C,function(_){return new o([_|0],0>_?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return b(u(-C));for(var _=[],P=1,A=0;C>=P;A++)_[A]=C/P|0,P*=4294967296;return new o(_,0)}function h(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return b(h(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=u(Math.pow(_,8)),A=p,F=0;F<C.length;F+=8){var D=Math.min(8,C.length-F),E=parseInt(C.substring(F,F+D),_);8>D?(D=u(Math.pow(_,D)),A=A.j(D).add(u(E))):(A=A.j(P),A=A.add(u(E)))}return A}var p=c(0),m=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-b(this).m();for(var C=0,_=1,P=0;P<this.g.length;P++){var A=this.i(P);C+=(0<=A?A:4294967296+A)*_,_*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(N(this))return"0";if(w(this))return"-"+b(this).toString(C);for(var _=u(Math.pow(C,6)),P=this,A="";;){var F=I(P,_).g;P=S(P,F.j(_));var D=((0<P.g.length?P.g[0]:P.h)>>>0).toString(C);if(P=F,N(P))return D+A;for(;6>D.length;)D="0"+D;A=D+A}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function N(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function w(C){return C.h==-1}t.l=function(C){return C=S(this,C),w(C)?-1:N(C)?0:1};function b(C){for(var _=C.g.length,P=[],A=0;A<_;A++)P[A]=~C.g[A];return new o(P,~C.h).add(m)}t.abs=function(){return w(this)?b(this):this},t.add=function(C){for(var _=Math.max(this.g.length,C.g.length),P=[],A=0,F=0;F<=_;F++){var D=A+(this.i(F)&65535)+(C.i(F)&65535),E=(D>>>16)+(this.i(F)>>>16)+(C.i(F)>>>16);A=E>>>16,D&=65535,E&=65535,P[F]=E<<16|D}return new o(P,P[P.length-1]&-2147483648?-1:0)};function S(C,_){return C.add(b(_))}t.j=function(C){if(N(this)||N(C))return p;if(w(this))return w(C)?b(this).j(b(C)):b(b(this).j(C));if(w(C))return b(this.j(b(C)));if(0>this.l(x)&&0>C.l(x))return u(this.m()*C.m());for(var _=this.g.length+C.g.length,P=[],A=0;A<2*_;A++)P[A]=0;for(A=0;A<this.g.length;A++)for(var F=0;F<C.g.length;F++){var D=this.i(A)>>>16,E=this.i(A)&65535,$=C.i(F)>>>16,G=C.i(F)&65535;P[2*A+2*F]+=E*G,v(P,2*A+2*F),P[2*A+2*F+1]+=D*G,v(P,2*A+2*F+1),P[2*A+2*F+1]+=E*$,v(P,2*A+2*F+1),P[2*A+2*F+2]+=D*$,v(P,2*A+2*F+2)}for(A=0;A<_;A++)P[A]=P[2*A+1]<<16|P[2*A];for(A=_;A<2*_;A++)P[A]=0;return new o(P,0)};function v(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function T(C,_){this.g=C,this.h=_}function I(C,_){if(N(_))throw Error("division by zero");if(N(C))return new T(p,p);if(w(C))return _=I(b(C),_),new T(b(_.g),b(_.h));if(w(_))return _=I(C,b(_)),new T(b(_.g),_.h);if(30<C.g.length){if(w(C)||w(_))throw Error("slowDivide_ only works with positive integers.");for(var P=m,A=_;0>=A.l(C);)P=L(P),A=L(A);var F=R(P,1),D=R(A,1);for(A=R(A,2),P=R(P,2);!N(A);){var E=D.add(A);0>=E.l(C)&&(F=F.add(P),D=E),A=R(A,1),P=R(P,1)}return _=S(C,F.j(_)),new T(F,_)}for(F=p;0<=C.l(_);){for(P=Math.max(1,Math.floor(C.m()/_.m())),A=Math.ceil(Math.log(P)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),D=u(P),E=D.j(_);w(E)||0<E.l(C);)P-=A,D=u(P),E=D.j(_);N(D)&&(D=m),F=F.add(D),C=S(C,E)}return new T(F,C)}t.A=function(C){return I(this,C).h},t.and=function(C){for(var _=Math.max(this.g.length,C.g.length),P=[],A=0;A<_;A++)P[A]=this.i(A)&C.i(A);return new o(P,this.h&C.h)},t.or=function(C){for(var _=Math.max(this.g.length,C.g.length),P=[],A=0;A<_;A++)P[A]=this.i(A)|C.i(A);return new o(P,this.h|C.h)},t.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),P=[],A=0;A<_;A++)P[A]=this.i(A)^C.i(A);return new o(P,this.h^C.h)};function L(C){for(var _=C.g.length+1,P=[],A=0;A<_;A++)P[A]=C.i(A)<<1|C.i(A-1)>>>31;return new o(P,C.h)}function R(C,_){var P=_>>5;_%=32;for(var A=C.g.length-P,F=[],D=0;D<A;D++)F[D]=0<_?C.i(D+P)>>>_|C.i(D+P+1)<<32-_:C.i(D+P);return new o(F,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,j1=o}).apply(typeof tE<"u"?tE:typeof self<"u"?self:typeof window<"u"?window:{});var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,j){return d==Array.prototype||d==Object.prototype||(d[g]=j.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof $f=="object"&&$f];for(var g=0;g<d.length;++g){var j=d[g];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=n(this);function s(d,g){if(g)e:{var j=r;d=d.split(".");for(var O=0;O<d.length-1;O++){var q=d[O];if(!(q in j))break e;j=j[q]}d=d[d.length-1],O=j[d],g=g(O),g!=O&&g!=null&&e(j,d,{configurable:!0,writable:!0,value:g})}}function a(d,g){d instanceof String&&(d+="");var j=0,O=!1,q={next:function(){if(!O&&j<d.length){var te=j++;return{value:g(te,d[te]),done:!1}}return O=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(d){return d||function(){return a(this,function(g,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function h(d,g,j){return d.call.apply(d.bind,arguments)}function p(d,g,j){if(!d)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,O),d.apply(g,q)}}return function(){return d.apply(g,arguments)}}function m(d,g,j){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function x(d,g){var j=Array.prototype.slice.call(arguments,1);return function(){var O=j.slice();return O.push.apply(O,arguments),d.apply(this,O)}}function N(d,g){function j(){}j.prototype=g.prototype,d.aa=g.prototype,d.prototype=new j,d.prototype.constructor=d,d.Qb=function(O,q,te){for(var be=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)be[Ut-2]=arguments[Ut];return g.prototype[q].apply(O,be)}}function w(d){const g=d.length;if(0<g){const j=Array(g);for(let O=0;O<g;O++)j[O]=d[O];return j}return[]}function b(d,g){for(let j=1;j<arguments.length;j++){const O=arguments[j];if(c(O)){const q=d.length||0,te=O.length||0;d.length=q+te;for(let be=0;be<te;be++)d[q+be]=O[be]}else d.push(O)}}class S{constructor(g,j){this.i=g,this.j=j,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(d){return/^[\s\xa0]*$/.test(d)}function T(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function I(d){return I[" "](d),d}I[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function R(d,g,j){for(const O in d)g.call(j,d[O],O,d)}function C(d,g){for(const j in d)g.call(void 0,d[j],j,d)}function _(d){const g={};for(const j in d)g[j]=d[j];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,g){let j,O;for(let q=1;q<arguments.length;q++){O=arguments[q];for(j in O)d[j]=O[j];for(let te=0;te<P.length;te++)j=P[te],Object.prototype.hasOwnProperty.call(O,j)&&(d[j]=O[j])}}function F(d){var g=1;d=d.split(":");const j=[];for(;0<g&&d.length;)j.push(d.shift()),g--;return d.length&&j.push(d.join(":")),j}function D(d){l.setTimeout(()=>{throw d},0)}function E(){var d=ce;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class ${constructor(){this.h=this.g=null}add(g,j){const O=G.get();O.set(g,j),this.h?this.h.next=O:this.g=O,this.h=O}}var G=new S(()=>new se,d=>d.reset());class se{constructor(){this.next=this.g=this.h=null}set(g,j){this.h=g,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let de,Q=!1,ce=new $,ue=()=>{const d=l.Promise.resolve(void 0);de=()=>{d.then(we)}};var we=()=>{for(var d;d=E();){try{d.h.call(d.g)}catch(j){D(j)}var g=G;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}Q=!1};function $e(){this.s=this.s,this.C=this.C}$e.prototype.s=!1,$e.prototype.ma=function(){this.s||(this.s=!0,this.N())},$e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const j=()=>{};l.addEventListener("test",j,g),l.removeEventListener("test",j,g)}catch{}return d}();function ve(d,g){if(B.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var j=this.type=d.type,O=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(L){e:{try{I(g.nodeName);var q=!0;break e}catch{}q=!1}q||(g=null)}}else j=="mouseover"?g=d.fromElement:j=="mouseout"&&(g=d.toElement);this.relatedTarget=g,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ge[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ve.aa.h.call(this)}}N(ve,B);var Ge={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function Ye(d,g,j,O,q){this.listener=d,this.proxy=null,this.src=g,this.type=j,this.capture=!!O,this.ha=q,this.key=++Xe,this.da=this.fa=!1}function Je(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ve(d){this.src=d,this.g={},this.h=0}Ve.prototype.add=function(d,g,j,O,q){var te=d.toString();d=this.g[te],d||(d=this.g[te]=[],this.h++);var be=At(d,g,O,q);return-1<be?(g=d[be],j||(g.fa=!1)):(g=new Ye(g,this.src,te,!!O,q),g.fa=j,d.push(g)),g};function Ke(d,g){var j=g.type;if(j in d.g){var O=d.g[j],q=Array.prototype.indexOf.call(O,g,void 0),te;(te=0<=q)&&Array.prototype.splice.call(O,q,1),te&&(Je(g),d.g[j].length==0&&(delete d.g[j],d.h--))}}function At(d,g,j,O){for(var q=0;q<d.length;++q){var te=d[q];if(!te.da&&te.listener==g&&te.capture==!!j&&te.ha==O)return q}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),Pt={};function ln(d,g,j,O,q){if(Array.isArray(g)){for(var te=0;te<g.length;te++)ln(d,g[te],j,O,q);return null}return j=xe(j),d&&d[ye]?d.K(g,j,u(O)?!!O.capture:!!O,q):sn(d,g,j,!1,O,q)}function sn(d,g,j,O,q,te){if(!g)throw Error("Invalid event type");var be=u(q)?!!q.capture:!!q,Ut=H(d);if(Ut||(d[Re]=Ut=new Ve(d)),j=Ut.add(g,j,O,be,te),j.proxy)return j;if(O=st(),j.proxy=O,O.src=d,O.listener=j,d.addEventListener)me||(q=be),q===void 0&&(q=!1),d.addEventListener(g.toString(),O,q);else if(d.attachEvent)d.attachEvent(En(g.toString()),O);else if(d.addListener&&d.removeListener)d.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return j}function st(){function d(j){return g.call(d.src,d.listener,j)}const g=U;return d}function et(d,g,j,O,q){if(Array.isArray(g))for(var te=0;te<g.length;te++)et(d,g[te],j,O,q);else O=u(O)?!!O.capture:!!O,j=xe(j),d&&d[ye]?(d=d.i,g=String(g).toString(),g in d.g&&(te=d.g[g],j=At(te,j,O,q),-1<j&&(Je(te[j]),Array.prototype.splice.call(te,j,1),te.length==0&&(delete d.g[g],d.h--)))):d&&(d=H(d))&&(g=d.g[g.toString()],d=-1,g&&(d=At(g,j,O,q)),(j=-1<d?g[d]:null)&&gn(j))}function gn(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ye])Ke(g.i,d);else{var j=d.type,O=d.proxy;g.removeEventListener?g.removeEventListener(j,O,d.capture):g.detachEvent?g.detachEvent(En(j),O):g.addListener&&g.removeListener&&g.removeListener(O),(j=H(g))?(Ke(j,d),j.h==0&&(j.src=null,g[Re]=null)):Je(d)}}}function En(d){return d in Pt?Pt[d]:Pt[d]="on"+d}function U(d,g){if(d.da)d=!0;else{g=new ve(g,this);var j=d.listener,O=d.ha||d.src;d.fa&&gn(d),d=j.call(O,g)}return d}function H(d){return d=d[Re],d instanceof Ve?d:null}var ne="__closure_events_fn_"+(1e9*Math.random()>>>0);function xe(d){return typeof d=="function"?d:(d[ne]||(d[ne]=function(g){return d.handleEvent(g)}),d[ne])}function le(){$e.call(this),this.i=new Ve(this),this.M=this,this.F=null}N(le,$e),le.prototype[ye]=!0,le.prototype.removeEventListener=function(d,g,j,O){et(this,d,g,j,O)};function K(d,g){var j,O=d.F;if(O)for(j=[];O;O=O.F)j.push(O);if(d=d.M,O=g.type||g,typeof g=="string")g=new B(g,d);else if(g instanceof B)g.target=g.target||d;else{var q=g;g=new B(O,d),A(g,q)}if(q=!0,j)for(var te=j.length-1;0<=te;te--){var be=g.g=j[te];q=ge(be,O,!0,g)&&q}if(be=g.g=d,q=ge(be,O,!0,g)&&q,q=ge(be,O,!1,g)&&q,j)for(te=0;te<j.length;te++)be=g.g=j[te],q=ge(be,O,!1,g)&&q}le.prototype.N=function(){if(le.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var j=d.g[g],O=0;O<j.length;O++)Je(j[O]);delete d.g[g],d.h--}}this.F=null},le.prototype.K=function(d,g,j,O){return this.i.add(String(d),g,!1,j,O)},le.prototype.L=function(d,g,j,O){return this.i.add(String(d),g,!0,j,O)};function ge(d,g,j,O){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var q=!0,te=0;te<g.length;++te){var be=g[te];if(be&&!be.da&&be.capture==j){var Ut=be.listener,Vn=be.ha||be.src;be.fa&&Ke(d.i,be),q=Ut.call(Vn,O)!==!1&&q}}return q&&!O.defaultPrevented}function it(d,g,j){if(typeof d=="function")j&&(d=m(d,j));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(d,g||0)}function It(d){d.g=it(()=>{d.g=null,d.i&&(d.i=!1,It(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Mt extends $e{constructor(g,j){super(),this.m=g,this.l=j,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ar(d){$e.call(this),this.h=d,this.g={}}N(ar,$e);var Un=[];function vn(d){R(d.g,function(g,j){this.g.hasOwnProperty(j)&&gn(g)},d),d.g={}}ar.prototype.N=function(){ar.aa.N.call(this),vn(this)},ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pe=l.JSON.stringify,Ht=l.JSON.parse,at=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function cn(){}cn.prototype.h=null;function Ct(d){return d.h||(d.h=d.i())}function In(){}var zt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zn(){B.call(this,"d")}N(zn,B);function Zt(){B.call(this,"c")}N(Zt,B);var Bn={},Kt=null;function wt(){return Kt=Kt||new le}Bn.La="serverreachability";function Qr(d){B.call(this,Bn.La,d)}N(Qr,B);function hs(d){const g=wt();K(g,new Qr(g))}Bn.STAT_EVENT="statevent";function ri(d,g){B.call(this,Bn.STAT_EVENT,d),this.stat=g}N(ri,B);function dn(d){const g=wt();K(g,new ri(g,d))}Bn.Ma="timingevent";function ot(d,g){B.call(this,Bn.Ma,d),this.size=g}N(ot,B);function Rn(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},g)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function si(d,g,j,O,q,te){d.info(function(){if(d.g)if(te)for(var be="",Ut=te.split("&"),Vn=0;Vn<Ut.length;Vn++){var St=Ut[Vn].split("=");if(1<St.length){var Kn=St[0];St=St[1];var Qn=Kn.split("_");be=2<=Qn.length&&Qn[1]=="type"?be+(Kn+"="+St+"&"):be+(Kn+"=redacted&")}}else be=null;else be=te;return"XMLHTTP REQ ("+O+") [attempt "+q+"]: "+g+`
`+j+`
`+be})}function tc(d,g,j,O,q,te,be){d.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+q+"]: "+g+`
`+j+`
`+te+" "+be})}function ps(d,g,j,O){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+nc(d,j)+(O?" "+O:"")})}function $o(d,g){d.info(function(){return"TIMEOUT: "+g})}Dn.prototype.info=function(){};function nc(d,g){if(!d.g)return g;if(!g)return null;try{var j=JSON.parse(g);if(j){for(d=0;d<j.length;d++)if(Array.isArray(j[d])){var O=j[d];if(!(2>O.length)){var q=O[1];if(Array.isArray(q)&&!(1>q.length)){var te=q[0];if(te!="noop"&&te!="stop"&&te!="close")for(var be=1;be<q.length;be++)q[be]=""}}}}return Pe(j)}catch{return g}}var or={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ta;function ii(){}N(ii,cn),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},Ta=new ii;function lr(d,g,j,O){this.j=d,this.i=g,this.l=j,this.R=O||1,this.U=new ar(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sc}function sc(){this.i=null,this.g="",this.h=!1}var Te={},z={};function he(d,g,j){d.L=1,d.v=uc(Fr(g)),d.m=j,d.P=!0,je(d,null)}function je(d,g){d.F=Date.now(),Bt(d),d.A=Fr(d.v);var j=d.A,O=d.R;Array.isArray(O)||(O=[String(O)]),li(j.i,"t",O),d.C=0,j=d.j.J,d.h=new sc,d.g=k_(d.j,j?g:null,!d.m),0<d.O&&(d.M=new Mt(m(d.Y,d,d.g),d.O)),g=d.U,j=d.g,O=d.ca;var q="readystatechange";Array.isArray(q)||(q&&(Un[0]=q.toString()),q=Un);for(var te=0;te<q.length;te++){var be=ln(j,q[te],O||g.handleEvent,!1,g.h||g);if(!be)break;g.g[be.key]=be}g=d.H?_(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),hs(),si(d.i,d.u,d.A,d.l,d.R,d.m)}lr.prototype.ca=function(d){d=d.target;const g=this.M;g&&Gi(d)==3?g.j():this.Y(d)},lr.prototype.Y=function(d){try{if(d==this.g)e:{const Qn=Gi(this.g);var g=this.g.Ba();const fc=this.g.Z();if(!(3>Qn)&&(Qn!=3||this.g&&(this.h.h||this.g.oa()||y_(this.g)))){this.J||Qn!=4||g==7||(g==8||0>=fc?hs(3):hs(2)),cr(this);var j=this.g.Z();this.X=j;t:if(Rt(this)){var O=y_(this.g);d="";var q=O.length,te=Gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yr(this),jr(this);var be="";break t}this.h.i=new l.TextDecoder}for(g=0;g<q;g++)this.h.h=!0,d+=this.h.i.decode(O[g],{stream:!(te&&g==q-1)});O.length=0,this.h.g+=d,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=j==200,tc(this.i,this.u,this.A,this.l,this.R,Qn,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Ut,Vn=this.g;if((Ut=Vn.g?Vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ut)){var St=Ut;break t}}St=null}if(j=St)ps(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ie(this,j);else{this.o=!1,this.s=3,dn(12),Yr(this),jr(this);break e}}if(this.P){j=!0;let ms;for(;!this.J&&this.C<be.length;)if(ms=yn(this,be),ms==z){Qn==4&&(this.s=4,dn(14),j=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(ms==Te){this.s=4,dn(15),ps(this.i,this.l,be,"[Invalid Chunk]"),j=!1;break}else ps(this.i,this.l,ms,null),Ie(this,ms);if(Rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qn!=4||be.length!=0||this.h.h||(this.s=1,dn(16),j=!1),this.o=this.o&&j,!j)ps(this.i,this.l,be,"[Invalid Chunked Response]"),Yr(this),jr(this);else if(0<be.length&&!this.W){this.W=!0;var Kn=this.j;Kn.g==this&&Kn.ba&&!Kn.M&&(Kn.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),Xv(Kn),Kn.M=!0,dn(11))}}else ps(this.i,this.l,be,null),Ie(this,be);Qn==4&&Yr(this),this.o&&!this.J&&(Qn==4?E_(this.j,this):(this.o=!1,Bt(this)))}else M4(this.g),j==400&&0<be.indexOf("Unknown SID")?(this.s=3,dn(12)):(this.s=0,dn(13)),Yr(this),jr(this)}}}catch{}finally{}};function Rt(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function yn(d,g){var j=d.C,O=g.indexOf(`
`,j);return O==-1?z:(j=Number(g.substring(j,O)),isNaN(j)?Te:(O+=1,O+j>g.length?z:(g=g.slice(O,O+j),d.C=O+j,g)))}lr.prototype.cancel=function(){this.J=!0,Yr(this)};function Bt(d){d.S=Date.now()+d.I,jn(d,d.I)}function jn(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Rn(m(d.ba,d),g)}function cr(d){d.B&&(l.clearTimeout(d.B),d.B=null)}lr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?($o(this.i,this.A),this.L!=2&&(hs(),dn(17)),Yr(this),this.s=2,jr(this)):jn(this,this.S-d)};function jr(d){d.j.G==0||d.J||E_(d.j,d)}function Yr(d){cr(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,vn(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Ie(d,g){try{var j=d.j;if(j.G!=0&&(j.g==d||zo(j.h,d))){if(!d.K&&zo(j.h,d)&&j.G==3){try{var O=j.Da.g.parse(g)}catch{O=null}if(Array.isArray(O)&&O.length==3){var q=O;if(q[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<d.F)pf(j),uf(j);else break e;Zv(j),dn(18)}}else j.za=q[1],0<j.za-j.T&&37500>q[2]&&j.F&&j.v==0&&!j.C&&(j.C=Rn(m(j.Za,j),6e3));if(1>=Uo(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else Ho(j,11)}else if((d.K||j.g==d)&&pf(j),!v(g))for(q=j.Da.g.parse(g),g=0;g<q.length;g++){let St=q[g];if(j.T=St[0],St=St[1],j.G==2)if(St[0]=="c"){j.K=St[1],j.ia=St[2];const Kn=St[3];Kn!=null&&(j.la=Kn,j.j.info("VER="+j.la));const Qn=St[4];Qn!=null&&(j.Aa=Qn,j.j.info("SVER="+j.Aa));const fc=St[5];fc!=null&&typeof fc=="number"&&0<fc&&(O=1.5*fc,j.L=O,j.j.info("backChannelRequestTimeoutMs_="+O)),O=j;const ms=d.g;if(ms){const ff=ms.g?ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ff){var te=O.h;te.g||ff.indexOf("spdy")==-1&&ff.indexOf("quic")==-1&&ff.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(ac(te,te.h),te.h=null))}if(O.D){const Jv=ms.g?ms.g.getResponseHeader("X-HTTP-Session-Id"):null;Jv&&(O.ya=Jv,Lt(O.I,O.D,Jv))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-d.F,j.j.info("Handshake RTT: "+j.R+"ms")),O=j;var be=d;if(O.qa=T_(O,O.J?O.ia:null,O.W),be.K){oi(O.h,be);var Ut=be,Vn=O.L;Vn&&(Ut.I=Vn),Ut.B&&(cr(Ut),Bt(Ut)),O.g=be}else C_(O);0<j.i.length&&hf(j)}else St[0]!="stop"&&St[0]!="close"||Ho(j,7);else j.G==3&&(St[0]=="stop"||St[0]=="close"?St[0]=="stop"?Ho(j,7):Yv(j):St[0]!="noop"&&j.l&&j.l.ta(St),j.v=0)}}hs(4)}catch{}}var ic=class{constructor(d,g){this.g=d,this.map=g}};function ai(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wi(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Uo(d){return d.h?1:d.g?d.g.size:0}function zo(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function ac(d,g){d.g?d.g.add(g):d.h=g}function oi(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}ai.prototype.cancel=function(){if(this.i=oc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function oc(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const j of d.g.values())g=g.concat(j.D);return g}return w(d.i)}function uu(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],j=d.length,O=0;O<j;O++)g.push(d[O]);return g}g=[],j=0;for(O in d)g[j++]=d[O];return g}function hu(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var j=0;j<d;j++)g.push(j);return g}g=[],j=0;for(const O in d)g[j++]=O;return g}}}function af(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var j=hu(d),O=uu(d),q=O.length,te=0;te<q;te++)g.call(void 0,O[te],j&&j[te],d)}var lc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pu(d,g){if(d){d=d.split("&");for(var j=0;j<d.length;j++){var O=d[j].indexOf("="),q=null;if(0<=O){var te=d[j].substring(0,O);q=d[j].substring(O+1)}else te=d[j];g(te,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function fs(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof fs){this.h=d.h,cc(this,d.j),this.o=d.o,this.g=d.g,dc(this,d.s),this.l=d.l;var g=d.i,j=new Ce;j.i=g.i,g.g&&(j.g=new Map(g.g),j.h=g.h),of(this,j),this.m=d.m}else d&&(g=String(d).match(lc))?(this.h=!1,cc(this,g[1]||"",!0),this.o=Bo(g[2]||""),this.g=Bo(g[3]||"",!0),dc(this,g[4]),this.l=Bo(g[5]||"",!0),of(this,g[6]||"",!0),this.m=Bo(g[7]||"")):(this.h=!1,this.i=new Ce(null,this.h))}fs.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Vo(g,hc,!0),":");var j=this.g;return(j||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Vo(g,hc,!0),"@"),d.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&d.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&d.push("/"),d.push(Vo(j,j.charAt(0)=="/"?V:f,!0))),(j=this.i.toString())&&d.push("?",j),(j=this.m)&&d.push("#",Vo(j,oe)),d.join("")};function Fr(d){return new fs(d)}function cc(d,g,j){d.j=j?Bo(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function dc(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function of(d,g,j){g instanceof Ce?(d.i=g,A4(d.i,d.h)):(j||(g=Vo(g,ie)),d.i=new Ce(g,d.h))}function Lt(d,g,j){d.i.set(g,j)}function uc(d){return Lt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Bo(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Vo(d,g,j){return typeof d=="string"?(d=encodeURI(d).replace(g,Kv),j&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Kv(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var hc=/[#\/\?@]/g,f=/[#\?:]/g,V=/[#\?]/g,ie=/[#\?@]/g,oe=/#/g;function Ce(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Ze(d){d.g||(d.g=new Map,d.h=0,d.i&&pu(d.i,function(g,j){d.add(decodeURIComponent(g.replace(/\+/g," ")),j)}))}t=Ce.prototype,t.add=function(d,g){Ze(this),this.i=null,d=ka(this,d);var j=this.g.get(d);return j||this.g.set(d,j=[]),j.push(g),this.h+=1,this};function ut(d,g){Ze(d),g=ka(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function $t(d,g){return Ze(d),g=ka(d,g),d.g.has(g)}t.forEach=function(d,g){Ze(this),this.g.forEach(function(j,O){j.forEach(function(q){d.call(g,q,O,this)},this)},this)},t.na=function(){Ze(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),j=[];for(let O=0;O<g.length;O++){const q=d[O];for(let te=0;te<q.length;te++)j.push(g[O])}return j},t.V=function(d){Ze(this);let g=[];if(typeof d=="string")$t(this,d)&&(g=g.concat(this.g.get(ka(this,d))));else{d=Array.from(this.g.values());for(let j=0;j<d.length;j++)g=g.concat(d[j])}return g},t.set=function(d,g){return Ze(this),this.i=null,d=ka(this,d),$t(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function li(d,g,j){ut(d,g),0<j.length&&(d.i=null,d.g.set(ka(d,g),w(j)),d.h+=j.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var j=0;j<g.length;j++){var O=g[j];const te=encodeURIComponent(String(O)),be=this.V(O);for(O=0;O<be.length;O++){var q=te;be[O]!==""&&(q+="="+encodeURIComponent(String(be[O]))),d.push(q)}}return this.i=d.join("&")};function ka(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function A4(d,g){g&&!d.j&&(Ze(d),d.i=null,d.g.forEach(function(j,O){var q=O.toLowerCase();O!=q&&(ut(this,O),li(this,q,j))},d)),d.j=g}function P4(d,g){const j=new Dn;if(l.Image){const O=new Image;O.onload=x(Aa,j,"TestLoadImage: loaded",!0,g,O),O.onerror=x(Aa,j,"TestLoadImage: error",!1,g,O),O.onabort=x(Aa,j,"TestLoadImage: abort",!1,g,O),O.ontimeout=x(Aa,j,"TestLoadImage: timeout",!1,g,O),l.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=d}else g(!1)}function I4(d,g){const j=new Dn,O=new AbortController,q=setTimeout(()=>{O.abort(),Aa(j,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:O.signal}).then(te=>{clearTimeout(q),te.ok?Aa(j,"TestPingServer: ok",!0,g):Aa(j,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(q),Aa(j,"TestPingServer: error",!1,g)})}function Aa(d,g,j,O,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),O(j)}catch{}}function R4(){this.g=new at}function D4(d,g,j){const O=j||"";try{af(d,function(q,te){let be=q;u(q)&&(be=Pe(q)),g.push(O+te+"="+encodeURIComponent(be))})}catch(q){throw g.push(O+"type="+encodeURIComponent("_badmap")),q}}function lf(d){this.l=d.Ub||null,this.j=d.eb||!1}N(lf,cn),lf.prototype.g=function(){return new cf(this.l,this.j)},lf.prototype.i=function(d){return function(){return d}}({});function cf(d,g){le.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(cf,le),t=cf.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,mu(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fu(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,mu(this)),this.g&&(this.readyState=3,mu(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;h_(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function h_(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?fu(this):mu(this),this.readyState==3&&h_(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,fu(this))},t.Qa=function(d){this.g&&(this.response=d,fu(this))},t.ga=function(){this.g&&fu(this)};function fu(d){d.readyState=4,d.l=null,d.j=null,d.v=null,mu(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var j=g.next();!j.done;)j=j.value,d.push(j[0]+": "+j[1]),j=g.next();return d.join(`\r
`)};function mu(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(cf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function p_(d){let g="";return R(d,function(j,O){g+=O,g+=":",g+=j,g+=`\r
`}),g}function Qv(d,g,j){e:{for(O in j){var O=!1;break e}O=!0}O||(j=p_(j),typeof d=="string"?j!=null&&encodeURIComponent(String(j)):Lt(d,g,j))}function un(d){le.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(un,le);var O4=/^https?$/i,F4=["POST","PUT"];t=un.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,j,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ta.g(),this.v=this.o?Ct(this.o):Ct(Ta),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(te){f_(this,te);return}if(d=j||"",j=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var q in O)j.set(q,O[q]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const te of O.keys())j.set(te,O.get(te));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(j.keys()).find(te=>te.toLowerCase()=="content-type"),q=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(F4,g,void 0))||O||q||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,be]of j)this.g.setRequestHeader(te,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{v_(this),this.u=!0,this.g.send(d),this.u=!1}catch(te){f_(this,te)}};function f_(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,m_(d),df(d)}function m_(d){d.A||(d.A=!0,K(d,"complete"),K(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,K(this,"complete"),K(this,"abort"),df(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),df(this,!0)),un.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?g_(this):this.bb())},t.bb=function(){g_(this)};function g_(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Gi(d)!=4||d.Z()!=2)){if(d.u&&Gi(d)==4)it(d.Ea,0,d);else if(K(d,"readystatechange"),Gi(d)==4){d.h=!1;try{const be=d.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var j;if(!(j=g)){var O;if(O=be===0){var q=String(d.D).match(lc)[1]||null;!q&&l.self&&l.self.location&&(q=l.self.location.protocol.slice(0,-1)),O=!O4.test(q?q.toLowerCase():"")}j=O}if(j)K(d,"complete"),K(d,"success");else{d.m=6;try{var te=2<Gi(d)?d.g.statusText:""}catch{te=""}d.l=te+" ["+d.Z()+"]",m_(d)}}finally{df(d)}}}}function df(d,g){if(d.g){v_(d);const j=d.g,O=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||K(d,"ready");try{j.onreadystatechange=O}catch{}}}function v_(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Gi(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Gi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Ht(g)}};function y_(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function M4(d){const g={};d=(d.g&&2<=Gi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<d.length;O++){if(v(d[O]))continue;var j=F(d[O]);const q=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const te=g[q]||[];g[q]=te,te.push(j)}C(g,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gu(d,g,j){return j&&j.internalChannelParams&&j.internalChannelParams[d]||g}function x_(d){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gu("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gu("baseRetryDelayMs",5e3,d),this.cb=gu("retryDelaySeedMs",1e4,d),this.Wa=gu("forwardChannelMaxRetries",2,d),this.wa=gu("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new ai(d&&d.concurrentRequestLimit),this.Da=new R4,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=x_.prototype,t.la=8,t.G=1,t.connect=function(d,g,j,O){dn(0),this.W=d,this.H=g||{},j&&O!==void 0&&(this.H.OSID=j,this.H.OAID=O),this.F=this.X,this.I=T_(this,null,this.W),hf(this)};function Yv(d){if(b_(d),d.G==3){var g=d.U++,j=Fr(d.I);if(Lt(j,"SID",d.K),Lt(j,"RID",g),Lt(j,"TYPE","terminate"),vu(d,j),g=new lr(d,d.j,g),g.L=2,g.v=uc(Fr(j)),j=!1,l.navigator&&l.navigator.sendBeacon)try{j=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!j&&l.Image&&(new Image().src=g.v,j=!0),j||(g.g=k_(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Bt(g)}N_(d)}function uf(d){d.g&&(Xv(d),d.g.cancel(),d.g=null)}function b_(d){uf(d),d.u&&(l.clearTimeout(d.u),d.u=null),pf(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function hf(d){if(!Wi(d.h)&&!d.s){d.s=!0;var g=d.Ga;de||ue(),Q||(de(),Q=!0),ce.add(g,d),d.B=0}}function L4(d,g){return Uo(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Rn(m(d.Ga,d,g),j_(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const q=new lr(this,this.j,d);let te=this.o;if(this.S&&(te?(te=_(te),A(te,this.S)):te=this.S),this.m!==null||this.O||(q.H=te,te=null),this.P)e:{for(var g=0,j=0;j<this.i.length;j++){t:{var O=this.i[j];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(g+=O,4096<g){g=j;break e}if(g===4096||j===this.i.length-1){g=j+1;break e}}g=1e3}else g=1e3;g=__(this,q,g),j=Fr(this.I),Lt(j,"RID",d),Lt(j,"CVER",22),this.D&&Lt(j,"X-HTTP-Session-Id",this.D),vu(this,j),te&&(this.O?g="headers="+encodeURIComponent(String(p_(te)))+"&"+g:this.m&&Qv(j,this.m,te)),ac(this.h,q),this.Ua&&Lt(j,"TYPE","init"),this.P?(Lt(j,"$req",g),Lt(j,"SID","null"),q.T=!0,he(q,j,null)):he(q,j,g),this.G=2}}else this.G==3&&(d?w_(this,d):this.i.length==0||Wi(this.h)||w_(this))};function w_(d,g){var j;g?j=g.l:j=d.U++;const O=Fr(d.I);Lt(O,"SID",d.K),Lt(O,"RID",j),Lt(O,"AID",d.T),vu(d,O),d.m&&d.o&&Qv(O,d.m,d.o),j=new lr(d,d.j,j,d.B+1),d.m===null&&(j.H=d.o),g&&(d.i=g.D.concat(d.i)),g=__(d,j,1e3),j.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ac(d.h,j),he(j,O,g)}function vu(d,g){d.H&&R(d.H,function(j,O){Lt(g,O,j)}),d.l&&af({},function(j,O){Lt(g,O,j)})}function __(d,g,j){j=Math.min(d.i.length,j);var O=d.l?m(d.l.Na,d.l,d):null;e:{var q=d.i;let te=-1;for(;;){const be=["count="+j];te==-1?0<j?(te=q[0].g,be.push("ofs="+te)):te=0:be.push("ofs="+te);let Ut=!0;for(let Vn=0;Vn<j;Vn++){let St=q[Vn].g;const Kn=q[Vn].map;if(St-=te,0>St)te=Math.max(0,q[Vn].g-100),Ut=!1;else try{D4(Kn,be,"req"+St+"_")}catch{O&&O(Kn)}}if(Ut){O=be.join("&");break e}}}return d=d.i.splice(0,j),g.D=d,O}function C_(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;de||ue(),Q||(de(),Q=!0),ce.add(g,d),d.v=0}}function Zv(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Rn(m(d.Fa,d),j_(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,S_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Rn(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dn(10),uf(this),S_(this))};function Xv(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function S_(d){d.g=new lr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Fr(d.qa);Lt(g,"RID","rpc"),Lt(g,"SID",d.K),Lt(g,"AID",d.T),Lt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Lt(g,"TO",d.ja),Lt(g,"TYPE","xmlhttp"),vu(d,g),d.m&&d.o&&Qv(g,d.m,d.o),d.L&&(d.g.I=d.L);var j=d.g;d=d.ia,j.L=1,j.v=uc(Fr(g)),j.m=null,j.P=!0,je(j,d)}t.Za=function(){this.C!=null&&(this.C=null,uf(this),Zv(this),dn(19))};function pf(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function E_(d,g){var j=null;if(d.g==g){pf(d),Xv(d),d.g=null;var O=2}else if(zo(d.h,g))j=g.D,oi(d.h,g),O=1;else return;if(d.G!=0){if(g.o)if(O==1){j=g.m?g.m.length:0,g=Date.now()-g.F;var q=d.B;O=wt(),K(O,new ot(O,j)),hf(d)}else C_(d);else if(q=g.s,q==3||q==0&&0<g.X||!(O==1&&L4(d,g)||O==2&&Zv(d)))switch(j&&0<j.length&&(g=d.h,g.i=g.i.concat(j)),q){case 1:Ho(d,5);break;case 4:Ho(d,10);break;case 3:Ho(d,6);break;default:Ho(d,2)}}}function j_(d,g){let j=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(j*=2),j*g}function Ho(d,g){if(d.j.info("Error code "+g),g==2){var j=m(d.fb,d),O=d.Xa;const q=!O;O=new fs(O||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||cc(O,"https"),uc(O),q?P4(O.toString(),j):I4(O.toString(),j)}else dn(2);d.G=0,d.l&&d.l.sa(g),N_(d),b_(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function N_(d){if(d.G=0,d.ka=[],d.l){const g=oc(d.h);(g.length!=0||d.i.length!=0)&&(b(d.ka,g),b(d.ka,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.ra()}}function T_(d,g,j){var O=j instanceof fs?Fr(j):new fs(j);if(O.g!="")g&&(O.g=g+"."+O.g),dc(O,O.s);else{var q=l.location;O=q.protocol,g=g?g+"."+q.hostname:q.hostname,q=+q.port;var te=new fs(null);O&&cc(te,O),g&&(te.g=g),q&&dc(te,q),j&&(te.l=j),O=te}return j=d.D,g=d.ya,j&&g&&Lt(O,j,g),Lt(O,"VER",d.la),vu(d,O),O}function k_(d,g,j){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new un(new lf({eb:j})):new un(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function A_(){}t=A_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zr(d,g){le.call(this),this.g=new x_(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!v(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new pc(this)}N(Zr,le),Zr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zr.prototype.close=function(){Yv(this.g)},Zr.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var j={};j.__data__=d,d=j}else this.u&&(j={},j.__data__=Pe(d),d=j);g.i.push(new ic(g.Ya++,d)),g.G==3&&hf(g)},Zr.prototype.N=function(){this.g.l=null,delete this.j,Yv(this.g),delete this.g,Zr.aa.N.call(this)};function P_(d){zn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const j in g){d=j;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}N(P_,zn);function I_(){Zt.call(this),this.status=1}N(I_,Zt);function pc(d){this.g=d}N(pc,A_),pc.prototype.ua=function(){K(this.g,"a")},pc.prototype.ta=function(d){K(this.g,new P_(d))},pc.prototype.sa=function(d){K(this.g,new I_)},pc.prototype.ra=function(){K(this.g,"b")},Zr.prototype.send=Zr.prototype.o,Zr.prototype.open=Zr.prototype.m,Zr.prototype.close=Zr.prototype.close,or.NO_ERROR=0,or.TIMEOUT=8,or.HTTP_ERROR=6,rc.COMPLETE="complete",In.EventType=zt,zt.OPEN="a",zt.CLOSE="b",zt.ERROR="c",zt.MESSAGE="d",le.prototype.listen=le.prototype.K,un.prototype.listenOnce=un.prototype.L,un.prototype.getLastError=un.prototype.Ka,un.prototype.getLastErrorCode=un.prototype.Ba,un.prototype.getStatus=un.prototype.Z,un.prototype.getResponseJson=un.prototype.Oa,un.prototype.getResponseText=un.prototype.oa,un.prototype.send=un.prototype.ea,un.prototype.setWithCredentials=un.prototype.Ha}).apply(typeof $f<"u"?$f:typeof self<"u"?self:typeof window<"u"?window:{});const nE="@firebase/firestore",rE="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=new m1("@firebase/firestore");function zs(t,...e){if(Qd.logLevel<=Nt.DEBUG){const n=e.map(N1);Qd.debug(`Firestore (${Yp}): ${t}`,...n)}}function EP(t,...e){if(Qd.logLevel<=Nt.ERROR){const n=e.map(N1);Qd.error(`Firestore (${Yp}): ${t}`,...n)}}function D9(t,...e){if(Qd.logLevel<=Nt.WARN){const n=e.map(N1);Qd.warn(`Firestore (${Yp}): ${t}`,...n)}}function N1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,jP(t,r,n)}function jP(t,e,n){let r=`FIRESTORE (${Yp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw EP(r),new Error(r)}function mh(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||jP(e,s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Vi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vr.UNAUTHENTICATED))}shutdown(){}}class F9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class M9{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){mh(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new gh;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new gh,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{zs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(zs("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new gh)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(zs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mh(typeof r.accessToken=="string",31837,{l:r}),new NP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mh(e===null||typeof e=="string",2055,{h:e}),new vr(e)}}class L9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new L9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){mh(this.o===void 0,3512);const r=a=>{a.error!=null&&zs("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,zs("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{zs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):zs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(mh(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=z9(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function jo(t,e){return t<e?-1:t>e?1:0}function V9(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return By(s)===By(a)?jo(s,a):By(s)?1:-1}return jo(t.length,e.length)}const H9=55296,q9=57343;function By(t){const e=t.charCodeAt(0);return e>=H9&&e<=q9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="__name__";class fi{constructor(e,n,r){n===void 0?n=0:n>e.length&&qh(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&qh(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=fi.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return jo(e.length,n.length)}static compareSegments(e,n){const r=fi.isNumericId(e),s=fi.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?fi.extractNumericId(e).compare(fi.extractNumericId(n)):V9(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return j1.fromString(e.substring(4,e.length-2))}}class Ds extends fi{construct(e,n,r){return new Ds(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new bt(xt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ds(n)}static emptyPath(){return new Ds([])}}const W9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qo extends fi{construct(e,n,r){return new Qo(e,n,r)}static isValidIdentifier(e){return W9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iE}static keyField(){return new Qo([iE])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new bt(xt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new bt(xt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new bt(xt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new bt(xt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qo(n)}static emptyPath(){return new Qo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.path=e}static fromPath(e){return new nl(Ds.fromString(e))}static fromName(e){return new nl(Ds.fromString(e).popFirst(5))}static empty(){return new nl(Ds.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ds.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ds.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nl(new Ds(e.slice()))}}function G9(t,e,n,r){if(e===!0&&r===!0)throw new bt(xt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function K9(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Q9(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":qh(12329,{type:typeof t})}function Y9(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new bt(xt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Q9(t);throw new bt(xt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Zp(t,e){if(!K9(t))throw new bt(xt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new bt(xt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=-62135596800,oE=1e6;class Si{static now(){return Si.fromMillis(Date.now())}static fromDate(e){return Si.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*oE);return new Si(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new bt(xt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(xt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<aE)throw new bt(xt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bt(xt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oE}_compareTo(e){return this.seconds===e.seconds?jo(this.nanoseconds,e.nanoseconds):jo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Si._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zp(e,Si._jsonSchema))return new Si(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-aE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Si._jsonSchemaVersion="firestore/timestamp/1.0",Si._jsonSchema={type:Sn("string",Si._jsonSchemaVersion),seconds:Sn("number"),nanoseconds:Sn("number")};function Z9(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new X9("Invalid base64 string: "+a):a}}(e);return new zl(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new zl(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zl.EMPTY_BYTE_STRING=new zl("");const Xb="(default)";class Cg{constructor(e,n){this.projectId=e,this.database=n||Xb}static empty(){return new Cg("","")}get isDefaultDatabase(){return this.database===Xb}isEqual(e){return e instanceof Cg&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function e7(t){return new J9(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lE,vt;(vt=lE||(lE={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new j1([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7=1048576;function Vy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&zs("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new gh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new T1(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(xt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var cE,dE;(dE=cE||(cE={})).Ma="default",dE.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="firestore.googleapis.com",hE=!0;class pE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new bt(xt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TP,this.ssl=hE}else this.host=e.host,this.ssl=e.ssl??hE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=t7;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n7)throw new bt(xt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s7(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new bt(xt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new bt(xt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new bt(xt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kP{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new bt(xt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new bt(xt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new O9;switch(r.type){case"firstParty":return new $9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(xt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=uE.get(n);r&&(zs("ComponentProvider","Removing Datastore"),uE.delete(n),r.terminate())}(this),Promise.resolve()}}function i7(t,e,n,r={}){var u;t=Y9(t,kP);const s=lu(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(p1(`https://${l}`),f1("Firestore",!0)),a.host!==TP&&a.host!==l&&D9("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:s,emulatorOptions:r};if(!Ml(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=vr.MOCK_USER;else{h=$A(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new bt(xt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new vr(m)}t._authCredentials=new F9(new NP(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new k1(this.firestore,e,this._query)}}class Ti{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new A1(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ti(this.firestore,e,this._key)}toJSON(){return{type:Ti._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Zp(n,Ti._jsonSchema))return new Ti(e,r||null,new nl(Ds.fromString(n.referencePath)))}}Ti._jsonSchemaVersion="firestore/documentReference/1.0",Ti._jsonSchema={type:Sn("string",Ti._jsonSchemaVersion),referencePath:Sn("string")};class A1 extends k1{constructor(e,n,r){super(e,n,e7(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ti(this.firestore,null,new nl(e))}withConverter(e){return new A1(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="AsyncQueue";class mE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new r7(this,"async_queue_retry"),this._c=()=>{const r=Vy();r&&zs(fE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Vy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Vy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new gh;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Z9(e))throw e;zs(fE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,EP("INTERNAL UNHANDLED ERROR: ",gE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=T1.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&qh(47125,{Pc:gE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function gE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class a7 extends kP{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new mE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mE(e),this._firestoreClient=void 0,await e}}}function o7(t,e){const n=typeof t=="object"?t:v1(),r=typeof t=="string"?t:Xb,s=Rv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=FA("firestore");a&&i7(s,...a)}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this._byteString=e}static fromBase64String(e){try{return new la(zl.fromBase64String(e))}catch(n){throw new bt(xt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new la(zl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:la._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zp(e,la._jsonSchema))return la.fromBase64String(e.bytes)}}la._jsonSchemaVersion="firestore/bytes/1.0",la._jsonSchema={type:Sn("string",la._jsonSchemaVersion),bytes:Sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new bt(xt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qo(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new bt(xt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new bt(xt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return jo(this._lat,e._lat)||jo(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jl._jsonSchemaVersion}}static fromJSON(e){if(Zp(e,jl._jsonSchema))return new jl(e.latitude,e.longitude)}}jl._jsonSchemaVersion="firestore/geoPoint/1.0",jl._jsonSchema={type:Sn("string",jl._jsonSchemaVersion),latitude:Sn("number"),longitude:Sn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zp(e,Nl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nl(e.vectorValues);throw new bt(xt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nl._jsonSchemaVersion="firestore/vectorValue/1.0",Nl._jsonSchema={type:Sn("string",Nl._jsonSchemaVersion),vectorValues:Sn("object")};const l7=new RegExp("[~\\*/\\[\\]]");function c7(t,e,n){if(e.search(l7)>=0)throw vE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new AP(...e.split("."))._internalPath}catch{throw vE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function vE(t,e,n,r,s){let a=`Function ${e}() called with invalid data`;a+=". ";let o="";return new bt(xt.INVALID_ARGUMENT,a+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(IP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class d7 extends PP{data(){return super.data()}}function IP(t,e){return typeof e=="string"?c7(t,e):e instanceof AP?e._internalPath:e._delegate._internalPath}class Uf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jc extends PP{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(IP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new bt(xt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Jc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Jc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jc._jsonSchema={type:Sn("string",Jc._jsonSchemaVersion),bundleSource:Sn("string","DocumentSnapshot"),bundleName:Sn("string"),bundle:Sn("string")};class jm extends Jc{data(e={}){return super.data(e)}}class vh{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Uf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jm(this._firestore,this._userDataWriter,r.key,r,new Uf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(xt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new jm(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Uf(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new jm(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Uf(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:u7(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new bt(xt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=B9.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function u7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qh(61501,{type:t})}}vh._jsonSchemaVersion="firestore/querySnapshot/1.0",vh._jsonSchema={type:Sn("string",vh._jsonSchemaVersion),bundleSource:Sn("string","QuerySnapshot"),bundleName:Sn("string"),bundle:Sn("string")};(function(e,n=!0){(function(s){Yp=s})(Jl),Ll(new Eo("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new a7(new M9(r.getProvider("auth-internal")),new U9(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new bt(xt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cg(u.options.projectId,h)}(o,s),o);return a={useFetchStreams:n,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Di(nE,rE,e),Di(nE,rE,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="firebasestorage.googleapis.com",h7="storageBucket",p7=2*60*1e3,f7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Vi{constructor(e,n,r=0){super(Hy(e),`Firebase Storage: ${n} (${Hy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $i;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($i||($i={}));function Hy(t){return"storage/"+t}function m7(){const t="An unknown error occurred, please check the error payload for server response.";return new qi($i.UNKNOWN,t)}function g7(){return new qi($i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v7(){return new qi($i.CANCELED,"User canceled the upload/download.")}function y7(t){return new qi($i.INVALID_URL,"Invalid URL '"+t+"'.")}function x7(t){return new qi($i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yE(t){return new qi($i.INVALID_ARGUMENT,t)}function DP(){return new qi($i.APP_DELETED,"The Firebase app was deleted.")}function b7(t){return new qi($i.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Bs.makeFromUrl(e,n)}catch{return new Bs(e,"")}if(r.path==="")return r;throw x7(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",x=new RegExp(`^https?://${p}/${h}/b/${s}/o${m}`,"i"),N={bucket:1,path:3},w=n===RP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",S=new RegExp(`^https?://${w}/${s}/${b}`,"i"),T=[{regex:l,indices:c,postModify:a},{regex:x,indices:N,postModify:u},{regex:S,indices:{bucket:1,path:2},postModify:u}];for(let I=0;I<T.length;I++){const L=T[I],R=L.regex.exec(e);if(R){const C=R[L.indices.bucket];let _=R[L.indices.path];_||(_=""),r=new Bs(C,_),L.postModify(r);break}}if(r==null)throw y7(e);return r}}class w7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function h(...b){u||(u=!0,e.apply(null,b))}function p(b){s=setTimeout(()=>{s=null,t(x,c())},b)}function m(){a&&clearTimeout(a)}function x(b,...S){if(u){m();return}if(b){m(),h.call(null,b,...S);return}if(c()||o){m(),h.call(null,b,...S);return}r<64&&(r*=2);let T;l===1?(l=2,T=0):T=(r+Math.random())*1e3,p(T)}let N=!1;function w(b){N||(N=!0,m(),!u&&(s!==null?(b||(l=2),clearTimeout(s),p(0)):b||(l=1)))}return p(0),a=setTimeout(()=>{o=!0,w(!0)},n),w}function C7(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t){return t!==void 0}function xE(t,e,n,r){if(r<e)throw yE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw yE(`Invalid value for '${t}'. Expected ${n} or less.`)}function E7(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Sg;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Sg||(Sg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,n,r,s,a,o,l,c,u,h,p,m=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,w)=>{this.resolve_=N,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new zf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Sg.NO_ERROR,c=a.getStatus();if(!l||j7(c,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===Sg.ABORT;r(!1,new zf(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new zf(u,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());S7(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=m7();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?DP():v7();o(c)}else{const c=g7();o(c)}};this.canceled_?n(!1,new zf(!1,null,!0)):this.backoffId_=_7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&C7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function T7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function k7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function A7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function P7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function I7(t,e,n,r,s,a,o=!0,l=!1){const c=E7(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return A7(h,e),T7(h,n),k7(h,a),P7(h,r),new N7(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function D7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){this._service=e,n instanceof Bs?this._location=n:this._location=Bs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Eg(e,n)}get root(){const e=new Bs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return D7(this._location.path)}get storage(){return this._service}get parent(){const e=R7(this._location.path);if(e===null)return null;const n=new Bs(this._location.bucket,e);return new Eg(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw b7(e)}}function bE(t,e){const n=e==null?void 0:e[h7];return n==null?null:Bs.makeFromBucketSpec(n,t)}function O7(t,e,n,r={}){t.host=`${e}:${n}`;const s=lu(e);s&&(p1(`https://${t.host}/b`),f1("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:$A(a,t.app.options.projectId))}class F7{constructor(e,n,r,s,a,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=RP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p7,this._maxUploadRetryTime=f7,this._requests=new Set,s!=null?this._bucket=Bs.makeFromBucketSpec(s,this._host):this._bucket=bE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bs.makeFromBucketSpec(this._url,e):this._bucket=bE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Eg(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new w7(DP());{const o=I7(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const wE="@firebase/storage",_E="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="storage";function M7(t=v1(),e){t=Hi(t);const r=Rv(t,OP).getImmediate({identifier:e}),s=FA("storage");return s&&L7(r,...s),r}function L7(t,e,n,r={}){O7(t,e,n,r)}function $7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new F7(n,r,s,e,Jl)}function U7(){Ll(new Eo(OP,$7,"PUBLIC").setMultipleInstances(!0)),Di(wE,_E,""),Di(wE,_E,"esm2020")}U7();const Os={apiKey:"AIzaSyBrYOiaa_skDuvRDD_zMZvUBknfwmTyDko",authDomain:"ale-veterinaria.firebaseapp.com",projectId:"ale-veterinaria",storageBucket:"ale-veterinaria.firebasestorage.app",appId:"1:87862276548:web:a55b3154a31e4c6948b491"};if(!Os.apiKey||!Os.projectId||!Os.appId)throw console.error("Firebase credentials missing:",{apiKey:Os.apiKey?"present":"missing",projectId:Os.projectId?"present":"missing",appId:Os.appId?"present":"missing"}),new Error("Firebase credentials are not properly configured. Please check your environment variables.");console.log("Initializing Firebase with config:",{projectId:Os.projectId,authDomain:Os.authDomain,hasApiKey:!!Os.apiKey,hasAppId:!!Os.appId});const P1=BA(Os),Xp=I9(P1);o7(P1);M7(P1);Xp.onAuthStateChanged(t=>{t?console.log("Firebase Auth: Usuario autenticado",t.uid):console.log("Firebase Auth: No hay usuario autenticado")});const z7=async(t,e)=>{var n;try{console.log("Attempting to sign in user:",t);const r=await vU(Xp,t,e);return console.log("Sign in successful:",(n=r.user)==null?void 0:n.uid),await new Promise(s=>setTimeout(s,100)),r}catch(r){throw console.error("Sign in error:",r),r.code==="auth/user-not-found"?new Error("No existe una cuenta con este email. Verifica que el usuario esté registrado."):r.code==="auth/wrong-password"?new Error("Contraseña incorrecta. Verifica tus credenciales."):r.code==="auth/invalid-email"?new Error("Email inválido. Verifica el formato del email."):r.code==="auth/network-request-failed"?new Error("Error de red. Verifica tu conexión a internet."):r}},B7=async(t,e)=>{var n;try{console.log("Creating new user:",t);const r=await gU(Xp,t,e);return console.log("User creation successful:",(n=r.user)==null?void 0:n.uid),r}catch(r){throw console.error("User creation error:",r),r.code==="auth/email-already-in-use"?new Error("Ya existe una cuenta con este email."):r.code==="auth/weak-password"?new Error("La contraseña debe tener al menos 6 caracteres."):r}},V7=async()=>{try{await wU(Xp),console.log("Sign out successful")}catch(t){throw console.error("Sign out error:",t),t}},H7=t=>bU(Xp,e=>{console.log("Auth state changed:",e?e.uid:"No user"),t(e)}),FP=y.createContext(void 0),q7=({children:t})=>{const[e,n]=y.useState(null),[r,s]=y.useState(!0);y.useEffect(()=>H7(c=>{n(c),s(!1)}),[]);const o={user:e,loading:r,signOut:async()=>{await V7()}};return i.jsx(FP.Provider,{value:o,children:t})},MP=()=>{const t=y.useContext(FP);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};var qy="focusScope.autoFocusOnMount",Wy="focusScope.autoFocusOnUnmount",CE={bubbles:!1,cancelable:!0},W7="FocusScope",I1=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=y.useState(null),u=Or(s),h=Or(a),p=y.useRef(null),m=Ft(e,w=>c(w)),x=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let w=function(T){if(x.paused||!l)return;const I=T.target;l.contains(I)?p.current=I:Fa(p.current,{select:!0})},b=function(T){if(x.paused||!l)return;const I=T.relatedTarget;I!==null&&(l.contains(I)||Fa(p.current,{select:!0}))},S=function(T){if(document.activeElement===document.body)for(const L of T)L.removedNodes.length>0&&Fa(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",b);const v=new MutationObserver(S);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",b),v.disconnect()}}},[r,l,x.paused]),y.useEffect(()=>{if(l){EE.add(x);const w=document.activeElement;if(!l.contains(w)){const S=new CustomEvent(qy,CE);l.addEventListener(qy,u),l.dispatchEvent(S),S.defaultPrevented||(G7(X7(LP(l)),{select:!0}),document.activeElement===w&&Fa(l))}return()=>{l.removeEventListener(qy,u),setTimeout(()=>{const S=new CustomEvent(Wy,CE);l.addEventListener(Wy,h),l.dispatchEvent(S),S.defaultPrevented||Fa(w??document.body,{select:!0}),l.removeEventListener(Wy,h),EE.remove(x)},0)}}},[l,u,h,x]);const N=y.useCallback(w=>{if(!n&&!r||x.paused)return;const b=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,S=document.activeElement;if(b&&S){const v=w.currentTarget,[T,I]=K7(v);T&&I?!w.shiftKey&&S===I?(w.preventDefault(),n&&Fa(T,{select:!0})):w.shiftKey&&S===T&&(w.preventDefault(),n&&Fa(I,{select:!0})):S===v&&w.preventDefault()}},[n,r,x.paused]);return i.jsx(ct.div,{tabIndex:-1,...o,ref:m,onKeyDown:N})});I1.displayName=W7;function G7(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Fa(r,{select:e}),document.activeElement!==n)return}function K7(t){const e=LP(t),n=SE(e,t),r=SE(e.reverse(),t);return[n,r]}function LP(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function SE(t,e){for(const n of t)if(!Q7(n,{upTo:e}))return n}function Q7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Y7(t){return t instanceof HTMLInputElement&&"select"in t}function Fa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Y7(t)&&e&&t.select()}}var EE=Z7();function Z7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=jE(t,e),t.unshift(e)},remove(e){var n;t=jE(t,e),(n=t[0])==null||n.resume()}}}function jE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function X7(t){return t.filter(e=>e.tagName!=="A")}var Gy=0;function $P(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??NE()),document.body.insertAdjacentElement("beforeend",t[1]??NE()),Gy++,()=>{Gy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Gy--}},[])}function NE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ni=function(){return Ni=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ni.apply(this,arguments)};function UP(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function J7(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var Nm="right-scroll-bar-position",Tm="width-before-scroll-bar",ez="with-scroll-bars-hidden",tz="--removed-body-scroll-bar-size";function Ky(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function nz(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var rz=typeof window<"u"?y.useLayoutEffect:y.useEffect,TE=new WeakMap;function sz(t,e){var n=nz(null,function(r){return t.forEach(function(s){return Ky(s,r)})});return rz(function(){var r=TE.get(n);if(r){var s=new Set(r),a=new Set(t),o=n.current;s.forEach(function(l){a.has(l)||Ky(l,null)}),a.forEach(function(l){s.has(l)||Ky(l,o)})}TE.set(n,t)},[t]),n}function iz(t){return t}function az(t,e){e===void 0&&(e=iz);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var h=o;o=[],h.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function oz(t){t===void 0&&(t={});var e=az(null);return e.options=Ni({async:!0,ssr:!1},t),e}var zP=function(t){var e=t.sideCar,n=UP(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,Ni({},n))};zP.isSideCarExport=!0;function lz(t,e){return t.useMedium(e),zP}var BP=oz(),Qy=function(){},Mv=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:Qy,onWheelCapture:Qy,onTouchMoveCapture:Qy}),s=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,p=t.shards,m=t.sideCar,x=t.noIsolation,N=t.inert,w=t.allowPinchZoom,b=t.as,S=b===void 0?"div":b,v=t.gapMode,T=UP(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=m,L=sz([n,e]),R=Ni(Ni({},T),s);return y.createElement(y.Fragment,null,h&&y.createElement(I,{sideCar:BP,removeScrollBar:u,shards:p,noIsolation:x,inert:N,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:v}),o?y.cloneElement(y.Children.only(l),Ni(Ni({},R),{ref:L})):y.createElement(S,Ni({},R,{className:c,ref:L}),l))});Mv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Mv.classNames={fullWidth:Tm,zeroRight:Nm};var cz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function dz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=cz();return e&&t.setAttribute("nonce",e),t}function uz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function hz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var pz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=dz())&&(uz(e,n),hz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},fz=function(){var t=pz();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},VP=function(){var t=fz(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},mz={left:0,top:0,right:0,gap:0},Yy=function(t){return parseInt(t||"",10)||0},gz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Yy(n),Yy(r),Yy(s)]},vz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return mz;var e=gz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},yz=VP(),ed="data-scroll-locked",xz=function(t,e,n,r){var s=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(ez,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(ed,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Nm,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Tm,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Nm," .").concat(Nm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Tm," .").concat(Tm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ed,`] {
    `).concat(tz,": ").concat(l,`px;
  }
`)},kE=function(){var t=parseInt(document.body.getAttribute(ed)||"0",10);return isFinite(t)?t:0},bz=function(){y.useEffect(function(){return document.body.setAttribute(ed,(kE()+1).toString()),function(){var t=kE()-1;t<=0?document.body.removeAttribute(ed):document.body.setAttribute(ed,t.toString())}},[])},wz=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;bz();var a=y.useMemo(function(){return vz(s)},[s]);return y.createElement(yz,{styles:xz(a,!e,s,n?"":"!important")})},Jb=!1;if(typeof window<"u")try{var Bf=Object.defineProperty({},"passive",{get:function(){return Jb=!0,!0}});window.addEventListener("test",Bf,Bf),window.removeEventListener("test",Bf,Bf)}catch{Jb=!1}var gc=Jb?{passive:!1}:!1,_z=function(t){return t.tagName==="TEXTAREA"},HP=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_z(t)&&n[e]==="visible")},Cz=function(t){return HP(t,"overflowY")},Sz=function(t){return HP(t,"overflowX")},AE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=qP(t,r);if(s){var a=WP(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Ez=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},jz=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},qP=function(t,e){return t==="v"?Cz(e):Sz(e)},WP=function(t,e){return t==="v"?Ez(e):jz(e)},Nz=function(t,e){return t==="h"&&e==="rtl"?-1:1},Tz=function(t,e,n,r,s){var a=Nz(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),u=!1,h=o>0,p=0,m=0;do{var x=WP(t,l),N=x[0],w=x[1],b=x[2],S=w-b-a*N;(N||S)&&qP(t,l)&&(p+=S,m+=N),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(p)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(u=!0),u},Vf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},PE=function(t){return[t.deltaX,t.deltaY]},IE=function(t){return t&&"current"in t?t.current:t},kz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Az=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Pz=0,vc=[];function Iz(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),s=y.useState(Pz++)[0],a=y.useState(VP)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var w=J7([t.lockRef.current],(t.shards||[]).map(IE),!0).filter(Boolean);return w.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=y.useCallback(function(w,b){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var S=Vf(w),v=n.current,T="deltaX"in w?w.deltaX:v[0]-S[0],I="deltaY"in w?w.deltaY:v[1]-S[1],L,R=w.target,C=Math.abs(T)>Math.abs(I)?"h":"v";if("touches"in w&&C==="h"&&R.type==="range")return!1;var _=AE(C,R);if(!_)return!0;if(_?L=C:(L=C==="v"?"h":"v",_=AE(C,R)),!_)return!1;if(!r.current&&"changedTouches"in w&&(T||I)&&(r.current=L),!L)return!0;var P=r.current||L;return Tz(P,b,w,P==="h"?T:I,!0)},[]),c=y.useCallback(function(w){var b=w;if(!(!vc.length||vc[vc.length-1]!==a)){var S="deltaY"in b?PE(b):Vf(b),v=e.current.filter(function(L){return L.name===b.type&&(L.target===b.target||b.target===L.shadowParent)&&kz(L.delta,S)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var T=(o.current.shards||[]).map(IE).filter(Boolean).filter(function(L){return L.contains(b.target)}),I=T.length>0?l(b,T[0]):!o.current.noIsolation;I&&b.cancelable&&b.preventDefault()}}},[]),u=y.useCallback(function(w,b,S,v){var T={name:w,delta:b,target:S,should:v,shadowParent:Rz(S)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(I){return I!==T})},1)},[]),h=y.useCallback(function(w){n.current=Vf(w),r.current=void 0},[]),p=y.useCallback(function(w){u(w.type,PE(w),w.target,l(w,t.lockRef.current))},[]),m=y.useCallback(function(w){u(w.type,Vf(w),w.target,l(w,t.lockRef.current))},[]);y.useEffect(function(){return vc.push(a),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",c,gc),document.addEventListener("touchmove",c,gc),document.addEventListener("touchstart",h,gc),function(){vc=vc.filter(function(w){return w!==a}),document.removeEventListener("wheel",c,gc),document.removeEventListener("touchmove",c,gc),document.removeEventListener("touchstart",h,gc)}},[]);var x=t.removeScrollBar,N=t.inert;return y.createElement(y.Fragment,null,N?y.createElement(a,{styles:Az(s)}):null,x?y.createElement(wz,{gapMode:t.gapMode}):null)}function Rz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Dz=lz(BP,Iz);var R1=y.forwardRef(function(t,e){return y.createElement(Mv,Ni({},t,{ref:e,sideCar:Dz}))});R1.classNames=Mv.classNames;var Oz=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},yc=new WeakMap,Hf=new WeakMap,qf={},Zy=0,GP=function(t){return t&&(t.host||GP(t.parentNode))},Fz=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=GP(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Mz=function(t,e,n,r){var s=Fz(e,Array.isArray(t)?t:[t]);qf[n]||(qf[n]=new WeakMap);var a=qf[n],o=[],l=new Set,c=new Set(s),u=function(p){!p||l.has(p)||(l.add(p),u(p.parentNode))};s.forEach(u);var h=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(m){if(l.has(m))h(m);else try{var x=m.getAttribute(r),N=x!==null&&x!=="false",w=(yc.get(m)||0)+1,b=(a.get(m)||0)+1;yc.set(m,w),a.set(m,b),o.push(m),w===1&&N&&Hf.set(m,!0),b===1&&m.setAttribute(n,"true"),N||m.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",m,S)}})};return h(e),l.clear(),Zy++,function(){o.forEach(function(p){var m=yc.get(p)-1,x=a.get(p)-1;yc.set(p,m),a.set(p,x),m||(Hf.has(p)||p.removeAttribute(r),Hf.delete(p)),x||p.removeAttribute(n)}),Zy--,Zy||(yc=new WeakMap,yc=new WeakMap,Hf=new WeakMap,qf={})}},KP=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Oz(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Mz(r,s,n,"aria-hidden")):function(){return null}},D1="Dialog",[QP,hJ]=Na(D1),[Lz,ni]=QP(D1),YP=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=y.useRef(null),c=y.useRef(null),[u=!1,h]=qd({prop:r,defaultProp:s,onChange:a});return i.jsx(Lz,{scope:e,triggerRef:l,contentRef:c,contentId:vo(),titleId:vo(),descriptionId:vo(),open:u,onOpenChange:h,onOpenToggle:y.useCallback(()=>h(p=>!p),[h]),modal:o,children:n})};YP.displayName=D1;var ZP="DialogTrigger",XP=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ni(ZP,n),a=Ft(e,s.triggerRef);return i.jsx(ct.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":M1(s.open),...r,ref:a,onClick:He(t.onClick,s.onOpenToggle)})});XP.displayName=ZP;var O1="DialogPortal",[$z,JP]=QP(O1,{forceMount:void 0}),eI=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=ni(O1,e);return i.jsx($z,{scope:e,forceMount:n,children:y.Children.map(r,o=>i.jsx(Xl,{present:n||a.open,children:i.jsx(_v,{asChild:!0,container:s,children:o})}))})};eI.displayName=O1;var jg="DialogOverlay",tI=y.forwardRef((t,e)=>{const n=JP(jg,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=ni(jg,t.__scopeDialog);return a.modal?i.jsx(Xl,{present:r||a.open,children:i.jsx(zz,{...s,ref:e})}):null});tI.displayName=jg;var Uz=Hd("DialogOverlay.RemoveScroll"),zz=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ni(jg,n);return i.jsx(R1,{as:Uz,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(ct.div,{"data-state":M1(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Bl="DialogContent",nI=y.forwardRef((t,e)=>{const n=JP(Bl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=ni(Bl,t.__scopeDialog);return i.jsx(Xl,{present:r||a.open,children:a.modal?i.jsx(Bz,{...s,ref:e}):i.jsx(Vz,{...s,ref:e})})});nI.displayName=Bl;var Bz=y.forwardRef((t,e)=>{const n=ni(Bl,t.__scopeDialog),r=y.useRef(null),s=Ft(e,n.contentRef,r);return y.useEffect(()=>{const a=r.current;if(a)return KP(a)},[]),i.jsx(rI,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:He(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:He(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:He(t.onFocusOutside,a=>a.preventDefault())})}),Vz=y.forwardRef((t,e)=>{const n=ni(Bl,t.__scopeDialog),r=y.useRef(!1),s=y.useRef(!1);return i.jsx(rI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),rI=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=ni(Bl,n),c=y.useRef(null),u=Ft(e,c);return $P(),i.jsxs(i.Fragment,{children:[i.jsx(I1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(zp,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":M1(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Hz,{titleId:l.titleId}),i.jsx(Wz,{contentRef:c,descriptionId:l.descriptionId})]})]})}),F1="DialogTitle",sI=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ni(F1,n);return i.jsx(ct.h2,{id:s.titleId,...r,ref:e})});sI.displayName=F1;var iI="DialogDescription",aI=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ni(iI,n);return i.jsx(ct.p,{id:s.descriptionId,...r,ref:e})});aI.displayName=iI;var oI="DialogClose",lI=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ni(oI,n);return i.jsx(ct.button,{type:"button",...r,ref:e,onClick:He(t.onClick,()=>s.onOpenChange(!1))})});lI.displayName=oI;function M1(t){return t?"open":"closed"}var cI="DialogTitleWarning",[pJ,dI]=TM(cI,{contentName:Bl,titleName:F1,docsSlug:"dialog"}),Hz=({titleId:t})=>{const e=dI(cI),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},qz="DialogDescriptionWarning",Wz=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${dI(qz).contentName}}.`;return y.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Gz=YP,Kz=XP,Qz=eI,uI=tI,hI=nI,pI=sI,fI=aI,Yz=lI;const L1=Gz,Zz=Kz,Xz=Qz,mI=y.forwardRef(({className:t,...e},n)=>i.jsx(uI,{ref:n,className:mt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));mI.displayName=uI.displayName;const Lv=y.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(Xz,{children:[i.jsx(mI,{}),i.jsxs(hI,{ref:r,className:mt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(Yz,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(jv,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Lv.displayName=hI.displayName;const $v=({className:t,...e})=>i.jsx("div",{className:mt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});$v.displayName="DialogHeader";const Uv=y.forwardRef(({className:t,...e},n)=>i.jsx(pI,{ref:n,className:mt("text-lg font-semibold leading-none tracking-tight",t),...e}));Uv.displayName=pI.displayName;const Jz=y.forwardRef(({className:t,...e},n)=>i.jsx(fI,{ref:n,className:mt("text-sm text-muted-foreground",t),...e}));Jz.displayName=fI.displayName;const eB=Ev("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ee=y.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const o=r?AM:"button";return i.jsx(o,{className:mt(eB({variant:e,size:n,className:t})),ref:a,...s})});ee.displayName="Button";const J=y.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:mt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));J.displayName="Input";var tB="Label",gI=y.forwardRef((t,e)=>i.jsx(ct.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));gI.displayName=tB;var vI=gI;const nB=Ev("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Y=y.forwardRef(({className:t,...e},n)=>i.jsx(vI,{ref:n,className:mt(nB(),t),...e}));Y.displayName=vI.displayName;const rB=({isOpen:t,onClose:e,type:n})=>{const[r,s]=y.useState(""),[a,o]=y.useState(""),[l,c]=y.useState(""),[u,h]=y.useState(""),[p,m]=y.useState(!1),{toast:x}=ti(),N=async b=>{b.preventDefault(),m(!0);try{const S=await B7(r,a);try{await Xt("/api/users",{method:"POST",body:JSON.stringify({id:S.user.uid,email:r,name:l,phone:u||null,role:n==="tutor"?"owner":"veterinarian",password:"firebase_auth"}),headers:{"Content-Type":"application/json"}})}catch{console.log("User might already exist in PostgreSQL, continuing...")}x({title:"Cuenta creada exitosamente",description:`Tu cuenta ${n==="tutor"?"de tutor":"profesional"} ha sido creada correctamente`}),e()}catch(S){console.error("Account creation error:",S),x({title:"Error al crear cuenta",description:S.message||"No se pudo crear la cuenta",variant:"destructive"})}finally{m(!1)}},w=()=>{s(""),o(""),c(""),h(""),e()};return i.jsx(L1,{open:t,onOpenChange:w,children:i.jsxs(Lv,{className:"sm:max-w-md",children:[i.jsx($v,{children:i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("i",{className:"fas fa-user-plus text-4xl text-mint mb-4"}),i.jsxs(Uv,{className:"text-2xl font-poppins font-bold text-darkgray",children:["Crear Cuenta ",n==="tutor"?"de Tutor":"Profesional"]})]})}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{htmlFor:"name",children:"Nombre completo"}),i.jsx(J,{id:"name",type:"text",value:l,onChange:b=>c(b.target.value),required:!0,className:"border-mint/50 focus:border-mint"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{htmlFor:"email",children:"Email"}),i.jsx(J,{id:"email",type:"email",value:r,onChange:b=>s(b.target.value),required:!0,className:"border-mint/50 focus:border-mint"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{htmlFor:"password",children:"Contraseña"}),i.jsx(J,{id:"password",type:"password",value:a,onChange:b=>o(b.target.value),required:!0,minLength:6,className:"border-mint/50 focus:border-mint"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{htmlFor:"phone",children:"Teléfono"}),i.jsx(J,{id:"phone",type:"tel",value:u,onChange:b=>h(b.target.value),placeholder:"+56 9 1234 5678",className:"border-mint/50 focus:border-mint"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ee,{type:"button",onClick:w,variant:"outline",className:"flex-1",children:"Cancelar"}),i.jsx(ee,{type:"submit",disabled:p,className:"flex-1 bg-gradient-to-r from-mint to-turquoise text-darkgray hover:shadow-lg",children:p?"Creando...":"Crear Cuenta"})]})]})]})})},yI=({isOpen:t,onClose:e,type:n})=>{const[r,s]=y.useState(""),[a,o]=y.useState(""),[l,c]=y.useState(!1),[u,h]=y.useState(!1),[,p]=Z2(),{toast:m}=ti(),x=async w=>{w.preventDefault(),c(!0);try{const b=await z7(r,a);s(""),o(""),m({title:"Acceso exitoso",description:`Bienvenido al portal ${n==="tutor"?"del tutor":"profesional"}`}),e(),setTimeout(()=>{p(n==="tutor"?"/portal/tutor":"/portal/profesional")},300)}catch(b){console.error("Login error:",b),m({title:"Error de acceso",description:b.message||"Error de conexión. Verifica tus credenciales e intenta nuevamente.",variant:"destructive"})}finally{c(!1)}},N=()=>{s(""),o(""),e()};return i.jsxs(L1,{open:t,onOpenChange:N,children:[i.jsxs(Lv,{className:"sm:max-w-md",children:[i.jsx($v,{children:i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("i",{className:"fas fa-user-circle text-4xl text-mint mb-4"}),i.jsx(Uv,{className:"text-2xl font-poppins font-bold text-darkgray",children:n==="tutor"?"Portal del Tutor":"Portal Profesional"}),i.jsx("p",{className:"text-gray-600 font-lato mt-2",children:n==="tutor"?"Accede al historial de tus mascotas":"Gestiona fichas clínicas y certificados"})]})}),i.jsxs("form",{onSubmit:x,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"email",className:"text-darkgray font-poppins font-medium",children:"Email"}),i.jsx(J,{id:"email",type:"email",value:r,onChange:w=>s(w.target.value),placeholder:"tu@email.com",className:"mt-2 p-4 rounded-xl border-2 border-gray-200 focus:border-mint",required:!0})]}),i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"password",className:"text-darkgray font-poppins font-medium",children:"Contraseña"}),i.jsx(J,{id:"password",type:"password",value:a,onChange:w=>o(w.target.value),placeholder:"••••••••",className:"mt-2 p-4 rounded-xl border-2 border-gray-200 focus:border-lavender",required:!0})]}),i.jsx(ee,{type:"submit",disabled:l,className:"w-full bg-mint text-darkgray py-4 px-8 rounded-xl font-poppins font-semibold hover:shadow-lg transition-all",children:l?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Iniciando..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Iniciar Sesión"]})})]}),n!=="profesional"&&i.jsxs("div",{className:"mt-4 text-center",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"¿No tienes cuenta?"}),i.jsxs(ee,{type:"button",variant:"outline",onClick:()=>h(!0),className:"w-full border-mint text-mint hover:bg-mint/10",children:["Crear cuenta ",n==="tutor"?"de tutor":"profesional"]})]})]}),i.jsx(rB,{isOpen:u,onClose:()=>h(!1),type:n})]})},sB=()=>{const[t,e]=y.useState(!1),[n,r]=y.useState(!1),[s,a]=y.useState("tutor"),{user:o,signOut:l}=MP(),c=u=>{const h=document.getElementById(u);h&&h.scrollIntoView({behavior:"smooth"}),e(!1)};return i.jsxs(i.Fragment,{children:[i.jsx("nav",{className:"bg-white shadow-lg fixed w-full top-0 z-50",id:"navbar",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex justify-between items-center py-4",children:[i.jsxs(uh,{href:"/",className:"flex items-center space-x-3",children:[i.jsx("img",{src:"/assets/logo.png",alt:"Ale Veterinaria Logo",className:"w-10 h-10"}),i.jsxs("h1",{className:"text-2xl font-poppins font-bold text-darkgray",children:[i.jsx("span",{className:"text-mint",children:"Ale"})," Veterinaria"]})]}),i.jsxs("div",{className:"hidden lg:flex items-center space-x-6",children:[i.jsx("button",{onClick:()=>c("inicio"),className:"text-darkgray hover:text-mint font-medium transition-colors",children:"Inicio"}),i.jsx("button",{onClick:()=>c("quien-soy"),className:"text-darkgray hover:text-mint font-medium transition-colors",children:"Quién Soy"}),i.jsx("button",{onClick:()=>c("servicios"),className:"text-darkgray hover:text-mint font-medium transition-colors",children:"Servicios"}),i.jsx("button",{onClick:()=>c("agendar"),className:"text-darkgray hover:text-mint font-medium transition-colors",children:"Agendar Cita"}),i.jsx("button",{onClick:()=>c("faq"),className:"text-darkgray hover:text-mint font-medium transition-colors",children:"FAQ"}),i.jsx("button",{onClick:()=>c("recursos"),className:"text-darkgray hover:text-mint font-medium transition-colors",children:"Recursos"}),i.jsx("button",{onClick:()=>c("contacto"),className:"text-darkgray hover:text-mint font-medium transition-colors",children:"Contacto"})]}),i.jsx("div",{className:"hidden lg:flex items-center",children:o?i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("span",{className:"text-darkgray",children:["Hola, ",o.email]}),i.jsx("button",{onClick:l,className:"bg-destructive text-white px-4 py-2 rounded-lg hover:bg-opacity-80 transition-all",children:"Cerrar Sesión"})]}):null}),i.jsx("button",{className:"lg:hidden text-darkgray",onClick:()=>e(!t),children:i.jsx("i",{className:"fas fa-bars text-2xl"})})]}),t&&i.jsx("div",{className:"lg:hidden",children:i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsx("button",{onClick:()=>c("inicio"),className:"block text-darkgray hover:text-mint font-medium w-full text-left",children:"Inicio"}),i.jsx("button",{onClick:()=>c("quien-soy"),className:"block text-darkgray hover:text-mint font-medium w-full text-left",children:"Quién Soy"}),i.jsx("button",{onClick:()=>c("servicios"),className:"block text-darkgray hover:text-mint font-medium w-full text-left",children:"Servicios"}),i.jsx("button",{onClick:()=>c("agendar"),className:"block text-darkgray hover:text-mint font-medium w-full text-left",children:"Agendar Cita"}),i.jsx("button",{onClick:()=>c("faq"),className:"block text-darkgray hover:text-mint font-medium w-full text-left",children:"FAQ"}),i.jsx("button",{onClick:()=>c("recursos"),className:"block text-darkgray hover:text-mint font-medium w-full text-left",children:"Recursos"}),i.jsx("button",{onClick:()=>c("contacto"),className:"block text-darkgray hover:text-mint font-medium w-full text-left",children:"Contacto"}),o?i.jsxs("div",{className:"pt-4 space-y-3",children:[i.jsxs("p",{className:"text-darkgray",children:["Hola, ",o.email]}),i.jsx("button",{onClick:l,className:"w-full bg-destructive text-white px-4 py-2 rounded-lg",children:"Cerrar Sesión"})]}):null]})})]})}),i.jsx(yI,{isOpen:n,onClose:()=>r(!1),type:s})]})},iB="/assets/FF%20Certified%20Professional%20Logo%20jpg_1755132258911-CcjPC0td.jpg",aB=()=>{const t=e=>{const n=document.getElementById(e);n&&n.scrollIntoView({behavior:"smooth"})};return i.jsx("section",{id:"inicio",className:"relative bg-[#F4EDE6]",children:i.jsx("div",{className:"mx-auto max-w-7xl px-6 py-16 lg:py-24",children:i.jsxs("div",{className:"grid items-center gap-12 lg:grid-cols-2",children:[i.jsxs("div",{className:"order-2 lg:order-1",children:[i.jsxs("h1",{className:"text-4xl/tight font-extrabold text-neutral-800 sm:text-5xl",children:["Dra. Alejandra",i.jsx("br",{className:"hidden sm:block"})," Cautín Bastías"]}),i.jsxs("p",{className:"mt-4 text-lg text-neutral-700",children:["Atención veterinaria ",i.jsx("span",{className:"text-emerald-700 font-semibold",children:"a domicilio"}),", con enfoque",i.jsx("span",{className:"text-emerald-700 font-semibold",children:" Fear Free"})," para reducir el estrés y cuidar con evidencia."]}),i.jsx("p",{className:"mt-4 italic text-neutral-600",children:'"Cuidar no es solo curar; es acompañar con conciencia."'}),i.jsxs("div",{className:"mt-8 flex flex-wrap items-center gap-4",children:[i.jsxs("button",{onClick:()=>t("agendar"),className:`inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-6 py-3 text-white font-semibold shadow-lg
                          ring-emerald-700/30 hover:bg-emerald-700 hover:shadow-xl focus:outline-none focus:ring-4 transition`,children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M16 2v2H8V2H6v2H5a2 2 0 0 0-2 2v3h18V6a2 2 0 0 0-2-2h-1V2h-2zM3 20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V11H3v9z"})}),"Agendar Consulta"]}),i.jsx("button",{onClick:()=>t("servicios"),className:`inline-flex items-center gap-2 rounded-xl border-2 border-emerald-600 px-6 py-3 font-semibold text-emerald-700
                          hover:bg-emerald-50 focus:outline-none focus:ring-4 focus:ring-emerald-700/20 transition`,children:"Ver Servicios"}),i.jsxs("button",{onClick:()=>t("portales"),className:`inline-flex items-center gap-2 rounded-xl bg-lavender px-6 py-3 font-semibold text-darkgray
                          hover:bg-opacity-80 focus:outline-none focus:ring-4 focus:ring-lavender/20 transition shadow-lg`,children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Acceder a Portal"]}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-sm text-neutral-600",children:[i.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full bg-emerald-500"}),"Atención en tu hogar · Región Metropolitana"]})]})]}),i.jsx("div",{className:"order-1 lg:order-2",children:i.jsxs("div",{className:"relative mx-auto max-w-xl",children:[i.jsx("img",{src:"https://images.unsplash.com/photo-1507146426996-ef05306b995a?q=80&w=1400&auto=format&fit=crop",alt:"Perro pequeño feliz en pasto, tranquilo durante su consulta a domicilio",className:"aspect-[4/3] w-full rounded-3xl object-cover shadow-[0_20px_80px_-20px_rgba(0,0,0,0.3)]"}),i.jsx("div",{className:"absolute -bottom-6 right-6",children:i.jsx("div",{className:"rounded-2xl bg-white/90 backdrop-blur p-3 shadow-lg ring-1 ring-black/5",children:i.jsx("img",{src:iB,alt:"Fear Free Certified Professional",className:"h-8 w-auto object-contain"})})})]})})]})})})},oB=()=>{const[t,e]=y.useState(null),n=s=>{e(t===s?null:s)},r=[{icon:"fas fa-stethoscope",title:"Consulta General",description:"Evaluación completa del estado de salud de tu mascota, diagnóstico de enfermedades y recomendación de tratamientos.",features:["Examen físico sistemático completo","Evaluación de signos vitales","Diagnóstico de enfermedades","Recomendación de tratamientos","Historia clínica detallada","Plan de seguimiento personalizado"],gradient:"from-mint to-turquoise",textColor:"text-white"},{icon:"fas fa-syringe",title:"Vacunaciones",description:"Aplicación de vacunas esenciales para proteger a tu mascota contra enfermedades infecciosas comunes.",features:["Vacunas esenciales según especie","Protección contra enfermedades infecciosas","Protocolos de inmunización","Certificados de vacunación","Calendario de refuerzos","Asesoría sobre inmunización"],gradient:"from-lavender to-palerose",textColor:"text-darkgray"},{icon:"fas fa-microchip",title:"Implantación de Microchip",description:"Aplicación subcutánea de un microchip de identificación estándar, un método seguro y permanente para registrar a tu mascota.",features:["Microchip de identificación estándar","Aplicación subcutánea segura","Registro permanente de mascota","Procedimiento rápido y seguro","Certificado de implantación","Actualización de base de datos"],gradient:"from-turquoise to-mint",textColor:"text-darkgray"},{icon:"fas fa-tint",title:"Exámenes de Sangre",description:"Toma de muestras para perfiles bioquímicos, hemogramas y otros análisis para una evaluación interna completa.",features:["Perfiles bioquímicos completos","Hemogramas detallados","Análisis hormonales","Evaluación interna completa","Toma profesional de muestras","Interpretación de resultados"],gradient:"from-palerose to-lavender",textColor:"text-darkgray"},{icon:"fas fa-heart",title:"Toma de Presión Arterial",description:"Medición no invasiva de la presión arterial, crucial para el monitoreo de pacientes con enfermedades cardíacas, renales o de la tercera edad.",features:["Medición no invasiva","Monitoreo cardíaco especializado","Control de enfermedades renales","Seguimiento en tercera edad","Equipos especializados","Interpretación profesional"],gradient:"from-mint to-palerose",textColor:"text-darkgray"},{icon:"fas fa-file-medical",title:"Certificados de Salud para Viajes",description:"Emisión de certificados de salud necesarios para viajes nacionales e internacionales, asegurando que tu mascota cumple con todos los requisitos.",features:["Certificados para viajes nacionales","Documentación internacional","Cumplimiento de requisitos","Validación veterinaria oficial","Asesoría en normativas","Gestión de documentación"],gradient:"from-lavender to-turquoise",textColor:"text-darkgray"},{icon:"fas fa-pills",title:"Desparasitaciones",description:"Administración de tratamientos para el control de parásitos internos y externos, fundamental para la salud de tu mascota y tu familia.",features:["Control de parásitos internos","Tratamiento de parásitos externos","Protección familiar","Calendarios preventivos","Medicamentos especializados","Educación sobre prevención"],gradient:"from-palerose to-turquoise",textColor:"text-darkgray"},{icon:"fas fa-heart-broken",title:"Acompañamiento y Homenaje Final",description:"Un servicio compasivo y respetuoso para acompañarte en el difícil momento de la despedida, asegurando un final tranquilo y digno para tu fiel compañero.",features:["Acompañamiento compasivo","Servicio respetuoso","Final tranquilo y digno","Apoyo emocional","Procedimiento humanizado","Memoria de tu compañero"],gradient:"from-gray-400 to-gray-600",textColor:"text-white"}];return i.jsx("section",{id:"servicios",className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-poppins font-bold text-darkgray mb-4",children:"Servicios"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-4xl mx-auto",children:"Atención veterinaria personalizada en la comodidad de tu hogar"}),i.jsxs("div",{className:"mt-6 flex justify-center items-center space-x-8 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("i",{className:"fas fa-home text-mint mr-2"}),i.jsx("span",{children:"Atención domiciliaria"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("i",{className:"fas fa-heart text-lavender mr-2"}),i.jsx("span",{children:"Sin estrés para tu mascota"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("i",{className:"fas fa-user-md text-turquoise mr-2"}),i.jsx("span",{children:"Dra. Alejandra Cautín"})]})]})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((s,a)=>i.jsx("div",{className:`bg-gradient-to-br ${s.gradient} p-8 rounded-2xl shadow-lg hover:shadow-xl transition-all cursor-pointer`,onClick:()=>n(a),children:i.jsxs("div",{className:`${s.textColor}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("i",{className:`${s.icon} text-4xl`}),i.jsx("i",{className:`fas fa-chevron-${t===a?"up":"down"} text-xl transition-transform`})]}),i.jsx("h3",{className:"text-2xl font-poppins font-semibold mb-4",children:s.title}),t===a&&i.jsx("div",{className:"mt-4 border-t border-white/20 pt-4",children:i.jsx("p",{className:"font-lato leading-relaxed",children:s.description})})]})},a))})]})})},lB=()=>i.jsx("section",{id:"quien-soy",className:"py-20 bg-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-4xl font-poppins font-bold text-darkgray mb-6",children:"Dra. Alejandra Cautin"}),i.jsx("p",{className:"text-lg text-gray-600 font-lato leading-relaxed",children:"Me especializo en atención domiciliaria porque creo que las mascotas se sienten más cómodas y seguras en su hogar."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"bg-mint p-3 rounded-full",children:i.jsx("i",{className:"fas fa-graduation-cap text-darkgray text-xl"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-poppins font-semibold text-darkgray",children:"Veterinaria Universidad de Chile"}),i.jsx("p",{className:"text-gray-600 font-lato",children:"Titulada con distinción"})]})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"bg-lavender p-3 rounded-full",children:i.jsx("i",{className:"fas fa-certificate text-darkgray text-xl"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-poppins font-semibold text-darkgray",children:"Certificada en Manejo Fear Free"}),i.jsx("p",{className:"text-gray-600 font-lato",children:"Técnicas libres de estrés para mascotas"})]})]})]})]}),i.jsx("div",{className:"relative",children:i.jsx("img",{src:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&h=600",alt:"Dra. María González veterinaria",className:"rounded-3xl shadow-2xl w-full h-auto"})})]})})}),Ae=y.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:mt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ae.displayName="Card";const Le=y.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:mt("flex flex-col space-y-1.5 p-6",t),...e}));Le.displayName="CardHeader";const Be=y.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:mt("text-2xl font-semibold leading-none tracking-tight",t),...e}));Be.displayName="CardTitle";const Jt=y.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:mt("text-sm text-muted-foreground",t),...e}));Jt.displayName="CardDescription";const De=y.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:mt("p-6 pt-0",t),...e}));De.displayName="CardContent";const cB=y.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:mt("flex items-center p-6 pt-0",t),...e}));cB.displayName="CardFooter";function RE(t,[e,n]){return Math.min(n,Math.max(e,t))}var dB=y.createContext(void 0);function $1(t){const e=y.useContext(dB);return t||e||"ltr"}function xI(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var uB=[" ","Enter","ArrowUp","ArrowDown"],hB=[" ","Enter"],Jp="Select",[zv,Bv,pB]=Zw(Jp),[du,fJ]=Na(Jp,[pB,Av]),Vv=Av(),[fB,Mo]=du(Jp),[mB,gB]=du(Jp),bI=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:p,disabled:m,required:x,form:N}=t,w=Vv(e),[b,S]=y.useState(null),[v,T]=y.useState(null),[I,L]=y.useState(!1),R=$1(u),[C=!1,_]=qd({prop:r,defaultProp:s,onChange:a}),[P,A]=qd({prop:o,defaultProp:l,onChange:c}),F=y.useRef(null),D=b?N||!!b.closest("form"):!0,[E,$]=y.useState(new Set),G=Array.from(E).map(se=>se.props.value).join(";");return i.jsx(y6,{...w,children:i.jsxs(fB,{required:x,scope:e,trigger:b,onTriggerChange:S,valueNode:v,onValueNodeChange:T,valueNodeHasChildren:I,onValueNodeHasChildrenChange:L,contentId:vo(),value:P,onValueChange:A,open:C,onOpenChange:_,dir:R,triggerPointerDownPosRef:F,disabled:m,children:[i.jsx(zv.Provider,{scope:e,children:i.jsx(mB,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(se=>{$(de=>new Set(de).add(se))},[]),onNativeOptionRemove:y.useCallback(se=>{$(de=>{const Q=new Set(de);return Q.delete(se),Q})},[]),children:n})}),D?i.jsxs(qI,{"aria-hidden":!0,required:x,tabIndex:-1,name:h,autoComplete:p,value:P,onChange:se=>A(se.target.value),disabled:m,form:N,children:[P===void 0?i.jsx("option",{value:""}):null,Array.from(E)]},G):null]})})};bI.displayName=Jp;var wI="SelectTrigger",_I=y.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=Vv(n),o=Mo(wI,n),l=o.disabled||r,c=Ft(e,o.onTriggerChange),u=Bv(n),h=y.useRef("touch"),[p,m,x]=WI(w=>{const b=u().filter(T=>!T.disabled),S=b.find(T=>T.value===o.value),v=GI(b,w,S);v!==void 0&&o.onValueChange(v.value)}),N=w=>{l||(o.onOpenChange(!0),x()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return i.jsx(wA,{asChild:!0,...a,children:i.jsx(ct.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":HI(o.value)?"":void 0,...s,ref:c,onClick:He(s.onClick,w=>{w.currentTarget.focus(),h.current!=="mouse"&&N(w)}),onPointerDown:He(s.onPointerDown,w=>{h.current=w.pointerType;const b=w.target;b.hasPointerCapture(w.pointerId)&&b.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(N(w),w.preventDefault())}),onKeyDown:He(s.onKeyDown,w=>{const b=p.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(b&&w.key===" ")&&uB.includes(w.key)&&(N(),w.preventDefault())})})})});_I.displayName=wI;var CI="SelectValue",SI=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=t,c=Mo(CI,n),{onValueNodeHasChildrenChange:u}=c,h=a!==void 0,p=Ft(e,c.onValueNodeChange);return Gn(()=>{u(h)},[u,h]),i.jsx(ct.span,{...l,ref:p,style:{pointerEvents:"none"},children:HI(c.value)?i.jsx(i.Fragment,{children:o}):a})});SI.displayName=CI;var vB="SelectIcon",EI=y.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(ct.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});EI.displayName=vB;var yB="SelectPortal",jI=t=>i.jsx(_v,{asChild:!0,...t});jI.displayName=yB;var Vl="SelectContent",NI=y.forwardRef((t,e)=>{const n=Mo(Vl,t.__scopeSelect),[r,s]=y.useState();if(Gn(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Yl.createPortal(i.jsx(TI,{scope:t.__scopeSelect,children:i.jsx(zv.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(kI,{...t,ref:e})});NI.displayName=Vl;var vs=10,[TI,Lo]=du(Vl),xB="SelectContentImpl",bB=Hd("SelectContent.RemoveScroll"),kI=y.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:m,collisionPadding:x,sticky:N,hideWhenDetached:w,avoidCollisions:b,...S}=t,v=Mo(Vl,n),[T,I]=y.useState(null),[L,R]=y.useState(null),C=Ft(e,ye=>I(ye)),[_,P]=y.useState(null),[A,F]=y.useState(null),D=Bv(n),[E,$]=y.useState(!1),G=y.useRef(!1);y.useEffect(()=>{if(T)return KP(T)},[T]),$P();const se=y.useCallback(ye=>{const[Xe,...Ye]=D().map(Ke=>Ke.ref.current),[Je]=Ye.slice(-1),Ve=document.activeElement;for(const Ke of ye)if(Ke===Ve||(Ke==null||Ke.scrollIntoView({block:"nearest"}),Ke===Xe&&L&&(L.scrollTop=0),Ke===Je&&L&&(L.scrollTop=L.scrollHeight),Ke==null||Ke.focus(),document.activeElement!==Ve))return},[D,L]),de=y.useCallback(()=>se([_,T]),[se,_,T]);y.useEffect(()=>{E&&de()},[E,de]);const{onOpenChange:Q,triggerPointerDownPosRef:ce}=v;y.useEffect(()=>{if(T){let ye={x:0,y:0};const Xe=Je=>{var Ve,Ke;ye={x:Math.abs(Math.round(Je.pageX)-(((Ve=ce.current)==null?void 0:Ve.x)??0)),y:Math.abs(Math.round(Je.pageY)-(((Ke=ce.current)==null?void 0:Ke.y)??0))}},Ye=Je=>{ye.x<=10&&ye.y<=10?Je.preventDefault():T.contains(Je.target)||Q(!1),document.removeEventListener("pointermove",Xe),ce.current=null};return ce.current!==null&&(document.addEventListener("pointermove",Xe),document.addEventListener("pointerup",Ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Xe),document.removeEventListener("pointerup",Ye,{capture:!0})}}},[T,Q,ce]),y.useEffect(()=>{const ye=()=>Q(!1);return window.addEventListener("blur",ye),window.addEventListener("resize",ye),()=>{window.removeEventListener("blur",ye),window.removeEventListener("resize",ye)}},[Q]);const[ue,we]=WI(ye=>{const Xe=D().filter(Ve=>!Ve.disabled),Ye=Xe.find(Ve=>Ve.ref.current===document.activeElement),Je=GI(Xe,ye,Ye);Je&&setTimeout(()=>Je.ref.current.focus())}),$e=y.useCallback((ye,Xe,Ye)=>{const Je=!G.current&&!Ye;(v.value!==void 0&&v.value===Xe||Je)&&(P(ye),Je&&(G.current=!0))},[v.value]),B=y.useCallback(()=>T==null?void 0:T.focus(),[T]),me=y.useCallback((ye,Xe,Ye)=>{const Je=!G.current&&!Ye;(v.value!==void 0&&v.value===Xe||Je)&&F(ye)},[v.value]),ve=r==="popper"?e0:AI,Ge=ve===e0?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:m,collisionPadding:x,sticky:N,hideWhenDetached:w,avoidCollisions:b}:{};return i.jsx(TI,{scope:n,content:T,viewport:L,onViewportChange:R,itemRefCallback:$e,selectedItem:_,onItemLeave:B,itemTextRefCallback:me,focusSelectedItem:de,selectedItemText:A,position:r,isPositioned:E,searchRef:ue,children:i.jsx(R1,{as:bB,allowPinchZoom:!0,children:i.jsx(I1,{asChild:!0,trapped:v.open,onMountAutoFocus:ye=>{ye.preventDefault()},onUnmountAutoFocus:He(s,ye=>{var Xe;(Xe=v.trigger)==null||Xe.focus({preventScroll:!0}),ye.preventDefault()}),children:i.jsx(zp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ye=>ye.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:i.jsx(ve,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:ye=>ye.preventDefault(),...S,...Ge,onPlaced:()=>$(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:He(S.onKeyDown,ye=>{const Xe=ye.ctrlKey||ye.altKey||ye.metaKey;if(ye.key==="Tab"&&ye.preventDefault(),!Xe&&ye.key.length===1&&we(ye.key),["ArrowUp","ArrowDown","Home","End"].includes(ye.key)){let Je=D().filter(Ve=>!Ve.disabled).map(Ve=>Ve.ref.current);if(["ArrowUp","End"].includes(ye.key)&&(Je=Je.slice().reverse()),["ArrowUp","ArrowDown"].includes(ye.key)){const Ve=ye.target,Ke=Je.indexOf(Ve);Je=Je.slice(Ke+1)}setTimeout(()=>se(Je)),ye.preventDefault()}})})})})})})});kI.displayName=xB;var wB="SelectItemAlignedPosition",AI=y.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=Mo(Vl,n),o=Lo(Vl,n),[l,c]=y.useState(null),[u,h]=y.useState(null),p=Ft(e,C=>h(C)),m=Bv(n),x=y.useRef(!1),N=y.useRef(!0),{viewport:w,selectedItem:b,selectedItemText:S,focusSelectedItem:v}=o,T=y.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&w&&b&&S){const C=a.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),P=a.valueNode.getBoundingClientRect(),A=S.getBoundingClientRect();if(a.dir!=="rtl"){const Ve=A.left-_.left,Ke=P.left-Ve,At=C.left-Ke,Re=C.width+At,Pt=Math.max(Re,_.width),ln=window.innerWidth-vs,sn=RE(Ke,[vs,Math.max(vs,ln-Pt)]);l.style.minWidth=Re+"px",l.style.left=sn+"px"}else{const Ve=_.right-A.right,Ke=window.innerWidth-P.right-Ve,At=window.innerWidth-C.right-Ke,Re=C.width+At,Pt=Math.max(Re,_.width),ln=window.innerWidth-vs,sn=RE(Ke,[vs,Math.max(vs,ln-Pt)]);l.style.minWidth=Re+"px",l.style.right=sn+"px"}const F=m(),D=window.innerHeight-vs*2,E=w.scrollHeight,$=window.getComputedStyle(u),G=parseInt($.borderTopWidth,10),se=parseInt($.paddingTop,10),de=parseInt($.borderBottomWidth,10),Q=parseInt($.paddingBottom,10),ce=G+se+E+Q+de,ue=Math.min(b.offsetHeight*5,ce),we=window.getComputedStyle(w),$e=parseInt(we.paddingTop,10),B=parseInt(we.paddingBottom,10),me=C.top+C.height/2-vs,ve=D-me,Ge=b.offsetHeight/2,ye=b.offsetTop+Ge,Xe=G+se+ye,Ye=ce-Xe;if(Xe<=me){const Ve=F.length>0&&b===F[F.length-1].ref.current;l.style.bottom="0px";const Ke=u.clientHeight-w.offsetTop-w.offsetHeight,At=Math.max(ve,Ge+(Ve?B:0)+Ke+de),Re=Xe+At;l.style.height=Re+"px"}else{const Ve=F.length>0&&b===F[0].ref.current;l.style.top="0px";const At=Math.max(me,G+w.offsetTop+(Ve?$e:0)+Ge)+Ye;l.style.height=At+"px",w.scrollTop=Xe-me+w.offsetTop}l.style.margin=`${vs}px 0`,l.style.minHeight=ue+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>x.current=!0)}},[m,a.trigger,a.valueNode,l,u,w,b,S,a.dir,r]);Gn(()=>T(),[T]);const[I,L]=y.useState();Gn(()=>{u&&L(window.getComputedStyle(u).zIndex)},[u]);const R=y.useCallback(C=>{C&&N.current===!0&&(T(),v==null||v(),N.current=!1)},[T,v]);return i.jsx(CB,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:R,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:i.jsx(ct.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});AI.displayName=wB;var _B="SelectPopperPosition",e0=y.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=vs,...a}=t,o=Vv(n);return i.jsx(_A,{...o,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});e0.displayName=_B;var[CB,U1]=du(Vl,{}),t0="SelectViewport",PI=y.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=Lo(t0,n),o=U1(t0,n),l=Ft(e,a.onViewportChange),c=y.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(zv.Slot,{scope:n,children:i.jsx(ct.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:He(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&p){const x=Math.abs(c.current-h.scrollTop);if(x>0){const N=window.innerHeight-vs*2,w=parseFloat(p.style.minHeight),b=parseFloat(p.style.height),S=Math.max(w,b);if(S<N){const v=S+x,T=Math.min(N,v),I=v-T;p.style.height=T+"px",p.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,p.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});PI.displayName=t0;var II="SelectGroup",[SB,EB]=du(II),jB=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=vo();return i.jsx(SB,{scope:n,id:s,children:i.jsx(ct.div,{role:"group","aria-labelledby":s,...r,ref:e})})});jB.displayName=II;var RI="SelectLabel",DI=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=EB(RI,n);return i.jsx(ct.div,{id:s.id,...r,ref:e})});DI.displayName=RI;var Ng="SelectItem",[NB,OI]=du(Ng),FI=y.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=t,l=Mo(Ng,n),c=Lo(Ng,n),u=l.value===r,[h,p]=y.useState(a??""),[m,x]=y.useState(!1),N=Ft(e,v=>{var T;return(T=c.itemRefCallback)==null?void 0:T.call(c,v,r,s)}),w=vo(),b=y.useRef("touch"),S=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(NB,{scope:n,value:r,disabled:s,textId:w,isSelected:u,onItemTextChange:y.useCallback(v=>{p(T=>T||((v==null?void 0:v.textContent)??"").trim())},[]),children:i.jsx(zv.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:i.jsx(ct.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:N,onFocus:He(o.onFocus,()=>x(!0)),onBlur:He(o.onBlur,()=>x(!1)),onClick:He(o.onClick,()=>{b.current!=="mouse"&&S()}),onPointerUp:He(o.onPointerUp,()=>{b.current==="mouse"&&S()}),onPointerDown:He(o.onPointerDown,v=>{b.current=v.pointerType}),onPointerMove:He(o.onPointerMove,v=>{var T;b.current=v.pointerType,s?(T=c.onItemLeave)==null||T.call(c):b.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:He(o.onPointerLeave,v=>{var T;v.currentTarget===document.activeElement&&((T=c.onItemLeave)==null||T.call(c))}),onKeyDown:He(o.onKeyDown,v=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&v.key===" "||(hB.includes(v.key)&&S(),v.key===" "&&v.preventDefault())})})})})});FI.displayName=Ng;var Ku="SelectItemText",MI=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,o=Mo(Ku,n),l=Lo(Ku,n),c=OI(Ku,n),u=gB(Ku,n),[h,p]=y.useState(null),m=Ft(e,S=>p(S),c.onItemTextChange,S=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,S,c.value,c.disabled)}),x=h==null?void 0:h.textContent,N=y.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:w,onNativeOptionRemove:b}=u;return Gn(()=>(w(N),()=>b(N)),[w,b,N]),i.jsxs(i.Fragment,{children:[i.jsx(ct.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Yl.createPortal(a.children,o.valueNode):null]})});MI.displayName=Ku;var LI="SelectItemIndicator",$I=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return OI(LI,n).isSelected?i.jsx(ct.span,{"aria-hidden":!0,...r,ref:e}):null});$I.displayName=LI;var n0="SelectScrollUpButton",UI=y.forwardRef((t,e)=>{const n=Lo(n0,t.__scopeSelect),r=U1(n0,t.__scopeSelect),[s,a]=y.useState(!1),o=Ft(e,r.onScrollButtonChange);return Gn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(BI,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});UI.displayName=n0;var r0="SelectScrollDownButton",zI=y.forwardRef((t,e)=>{const n=Lo(r0,t.__scopeSelect),r=U1(r0,t.__scopeSelect),[s,a]=y.useState(!1),o=Ft(e,r.onScrollButtonChange);return Gn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;a(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(BI,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});zI.displayName=r0;var BI=y.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=Lo("SelectScrollButton",n),o=y.useRef(null),l=Bv(n),c=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),Gn(()=>{var h;const u=l().find(p=>p.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),i.jsx(ct.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:He(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:He(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:He(s.onPointerLeave,()=>{c()})})}),TB="SelectSeparator",VI=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(ct.div,{"aria-hidden":!0,...r,ref:e})});VI.displayName=TB;var s0="SelectArrow",kB=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Vv(n),a=Mo(s0,n),o=Lo(s0,n);return a.open&&o.position==="popper"?i.jsx(CA,{...s,...r,ref:e}):null});kB.displayName=s0;function HI(t){return t===""||t===void 0}var qI=y.forwardRef((t,e)=>{const{value:n,...r}=t,s=y.useRef(null),a=Ft(e,s),o=xI(n);return y.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const p=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(p)}},[o,n]),i.jsx(Bp,{asChild:!0,children:i.jsx("select",{...r,ref:a,defaultValue:n})})});qI.displayName="BubbleSelect";function WI(t){const e=Or(t),n=y.useRef(""),r=y.useRef(0),s=y.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function GI(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=AB(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function AB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var PB=bI,KI=_I,IB=SI,RB=EI,DB=jI,QI=NI,OB=PI,YI=DI,ZI=FI,FB=MI,MB=$I,XI=UI,JI=zI,eR=VI;const Ue=PB,ze=IB,Fe=y.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(KI,{ref:r,className:mt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(RB,{asChild:!0,children:i.jsx(Fc,{className:"h-4 w-4 opacity-50"})})]}));Fe.displayName=KI.displayName;const tR=y.forwardRef(({className:t,...e},n)=>i.jsx(XI,{ref:n,className:mt("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(qu,{className:"h-4 w-4"})}));tR.displayName=XI.displayName;const nR=y.forwardRef(({className:t,...e},n)=>i.jsx(JI,{ref:n,className:mt("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Fc,{className:"h-4 w-4"})}));nR.displayName=JI.displayName;const Me=y.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(DB,{children:i.jsxs(QI,{ref:s,className:mt("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(tR,{}),i.jsx(OB,{className:mt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(nR,{})]})}));Me.displayName=QI.displayName;const LB=y.forwardRef(({className:t,...e},n)=>i.jsx(YI,{ref:n,className:mt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));LB.displayName=YI.displayName;const W=y.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(ZI,{ref:r,className:mt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(MB,{children:i.jsx(b3,{className:"h-4 w-4"})})}),i.jsx(FB,{children:e})]}));W.displayName=ZI.displayName;const $B=y.forwardRef(({className:t,...e},n)=>i.jsx(eR,{ref:n,className:mt("-mx-1 my-1 h-px bg-muted",t),...e}));$B.displayName=eR.displayName;const ks=t=>{if(!t)return"";const e=typeof t=="string"?new Date(t):t;if(isNaN(e.getTime()))return"";const n=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getFullYear();return`${n}/${r}/${s}`},UB=t=>{if(!t)return"";const e=t.split("-");if(e.length!==3)return"";const[n,r,s]=e;return`${s}/${r}/${n}`},zB=t=>{if(!t)return"";const e=typeof t=="string"?new Date(t):t;if(isNaN(e.getTime()))return"";const n=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getFullYear(),a=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0");return`${n}/${r}/${s} ${a}:${o}`},rR={"Región de Arica y Parinacota":["Arica","Camarones","Putre","General Lagos"],"Región de Tarapacá":["Iquique","Alto Hospicio","Pozo Almonte","Camiña","Colchane","Huara","Pica"],"Región de Antofagasta":["Antofagasta","Mejillones","Sierra Gorda","Taltal","Calama","Ollagüe","San Pedro de Atacama","Tocopilla","María Elena"],"Región de Atacama":["Copiapó","Caldera","Tierra Amarilla","Chañaral","Diego de Almagro","Vallenar","Alto del Carmen","Freirina","Huasco"],"Región de Coquimbo":["La Serena","Coquimbo","Andacollo","La Higuera","Paiguano","Vicuña","Illapel","Canela","Los Vilos","Salamanca","Ovalle","Combarbalá","Monte Patria","Punitaqui","Río Hurtado"],"Región de Valparaíso":["Valparaíso","Viña del Mar","Concón","Quintero","Puchuncaví","Casablanca","Juan Fernández","San Antonio","Santo Domingo","Cartagena","El Tabo","El Quisco","Algarrobo","San Felipe","Llaillay","Putaendo","Santa María","Panquehue","Catemu","Los Andes","Calle Larga","Rinconada","San Esteban","La Ligua","Cabildo","Papudo","Zapallar","Petorca","Chincolco","Hijuelas","La Calera","La Cruz","Limache","Nogales","Olmué","Quillota"],"Región Metropolitana":["Santiago","Cerrillos","Cerro Navia","Conchalí","El Bosque","Estación Central","Huechuraba","Independencia","La Cisterna","La Florida","La Granja","La Pintana","La Reina","Las Condes","Lo Barnechea","Lo Espejo","Lo Prado","Macul","Maipú","Ñuñoa","Pedro Aguirre Cerda","Peñalolén","Providencia","Pudahuel","Quilicura","Quinta Normal","Recoleta","Renca","San Joaquín","San Miguel","San Ramón","Vitacura","Puente Alto","Pirque","San José de Maipo","Colina","Lampa","Tiltil","San Bernardo","Buin","Calera de Tango","Paine","Melipilla","Alhué","Curacaví","María Pinto","San Pedro","Talagante","El Monte","Isla de Maipo","Padre Hurtado","Peñaflor"],"Región del Libertador General Bernardo O'Higgins":["Rancagua","Codegua","Coinco","Coltauco","Doñihue","Graneros","Las Cabras","Machalí","Malloa","Mostazal","Olivar","Peumo","Pichidegua","Quinta de Tilcoco","Rengo","Requínoa","San Vicente","Pichilemu","La Estrella","Litueche","Marchihue","Navidad","Paredones","San Fernando","Chépica","Chimbarongo","Lolol","Nancagua","Palmilla","Peralillo","Placilla","Pumanque","Santa Cruz"],"Región del Maule":["Talca","Constitución","Curepto","Empedrado","Maule","Pelarco","Pencahue","Río Claro","San Clemente","San Rafael","Cauquenes","Chanco","Pelluhue","Curicó","Hualañé","Licantén","Molina","Rauco","Romeral","Sagrada Familia","Teno","Vichuquén","Linares","Colbún","Longaví","Parral","Retiro","San Javier","Villa Alegre","Yerbas Buenas"],"Región de Ñuble":["Chillán","Bulnes","Chillán Viejo","El Carmen","Pemuco","Pinto","Quillón","San Ignacio","Yungay","Cobquecura","Coelemu","Ninhue","Portezuelo","Quirihue","Ránquil","Treguaco","San Carlos","Coihueco","Ñiquén","San Fabián","San Nicolás"],"Región del Biobío":["Concepción","Coronel","Chiguayante","Florida","Hualqui","Lota","Penco","San Pedro de la Paz","Santa Juana","Talcahuano","Tomé","Hualpén","Lebu","Arauco","Cañete","Contulmo","Curanilahue","Los Álamos","Tirúa","Los Ángeles","Antuco","Cabrero","Laja","Mulchén","Nacimiento","Negrete","Quilaco","Quilleco","San Rosendo","Santa Bárbara","Tucapel","Yumbel","Alto Biobío"],"Región de La Araucanía":["Temuco","Carahue","Cunco","Curarrehue","Freire","Galvarino","Gorbea","Lautaro","Loncoche","Melipeuco","Nueva Imperial","Padre las Casas","Perquenco","Pitrufquén","Pucón","Saavedra","Teodoro Schmidt","Toltén","Vilcún","Villarrica","Cholchol","Angol","Collipulli","Curacautín","Ercilla","Lonquimay","Los Sauces","Lumaco","Purén","Renaico","Traiguén","Victoria"],"Región de Los Ríos":["Valdivia","Corral","Lanco","Los Lagos","Máfil","Mariquina","Paillaco","Panguipulli","La Unión","Futrono","Lago Ranco","Río Bueno"],"Región de Los Lagos":["Puerto Montt","Calbuco","Cochamó","Fresia","Frutillar","Los Muermos","Llanquihue","Maullín","Puerto Varas","Castro","Ancud","Chonchi","Curaco de Vélez","Dalcahue","Puqueldón","Queilén","Quellón","Quemchi","Quinchao","Osorno","Puerto Octay","Purranque","Puyehue","Río Negro","San Juan de la Costa","San Pablo","Chaitén","Futaleufú","Hualaihué","Palena"],"Región Aisén del General Carlos Ibáñez del Campo":["Coyhaique","Lago Verde","Aisén","Cisnes","Guaitecas","Cochrane","O'Higgins","Tortel","Chile Chico","Río Ibáñez"],"Región de Magallanes y de la Antártica Chilena":["Punta Arenas","Laguna Blanca","Río Verde","San Gregorio","Puerto Natales","Torres del Paine","Porvenir","Primavera","Timaukel","Cabo de Hornos (Ex Navarino)","Antártica"]},i0=()=>Object.keys(rR),a0=t=>rR[t]||[],BB=[{name:"Consulta General",duration:60,color:"#5FA98D"},{name:"Control Médico",duration:45,color:"#8B93C7"},{name:"Toma de Exámenes",duration:30,color:"#87CEEB"},{name:"Vacunación",duration:30,color:"#98D8C8"},{name:"Desparasitación",duration:30,color:"#FFB6C1"},{name:"Control Anual",duration:60,color:"#DDA0DD"},{name:"Certificado de Salud",duration:30,color:"#F0E68C"}],VB=()=>BB.map(t=>t.name),DE=VB();function z1({tutorRut:t,pets:e}){const[n,r]=y.useState(new Date),[s,a]=y.useState(""),[o,l]=y.useState(""),[c,u]=y.useState(""),[h,p]=y.useState({name:"",phone:"",email:"",region:"",comuna:"",address:"",houseNumber:"",apartmentNumber:""}),[m,x]=y.useState(""),[N,w]=y.useState(!1),[b,S]=y.useState(!0),[v,T]=y.useState(null),[I,L]=y.useState(null),{toast:R}=ti(),C=Zl();y.useEffect(()=>{if(e&&e.length>0){const B=e[0],me=B.tutorName||B.ownerName||"",ve=B.tutorPhone||B.ownerPhone||"",Ge=B.tutorEmail||B.ownerEmail||"",ye=B.tutorAddress||B.ownerAddress||"";(me||ve||Ge||ye)&&p(Xe=>({...Xe,name:me,phone:ve,email:Ge,address:ye}))}},[e]);const{data:_=[]}=Qt({queryKey:["/api/appointments/tutor",t]}),{data:P=[]}=Qt({queryKey:["/api/schedule/availability",n==null?void 0:n.toISOString().split("T")[0],o],queryFn:async()=>{const B=n==null?void 0:n.toISOString().split("T")[0],me=new URLSearchParams;o&&me.append("serviceType",o);const ve=await fetch(`/api/schedule/availability/${B}?${me.toString()}`);if(!ve.ok)throw new Error("Failed to fetch availability");return ve.json()},enabled:!!n}),A=jt({mutationFn:async B=>{const me=await fetch("/api/appointments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});if(!me.ok)throw new Error("Failed to create appointment");return me.json()},onSuccess:()=>{R({title:"Cita Agendada",description:"Tu cita ha sido agendada exitosamente. Recibirás confirmación por email y WhatsApp."}),r(new Date),a(""),l(""),u(""),x(""),C.invalidateQueries({queryKey:["/api/appointments/tutor",t]})},onError:B=>{console.error("Error creating appointment:",B),R({title:"Error",description:"No se pudo agendar la cita. Por favor intenta nuevamente.",variant:"destructive"})}}),F=jt({mutationFn:async B=>{const me=await fetch(`/api/appointments/${B}/cancel`,{method:"PATCH",headers:{"Content-Type":"application/json"}});if(!me.ok)throw new Error("Failed to cancel appointment");return me.json()},onSuccess:()=>{R({title:"Cita Cancelada",description:"Tu cita ha sido cancelada exitosamente."}),C.invalidateQueries({queryKey:["/api/appointments/tutor",t]})}}),D=jt({mutationFn:async({appointmentId:B,data:me})=>{const ve=await fetch(`/api/appointments/${B}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)});if(!ve.ok){const Ge=await ve.json().catch(()=>({error:"Failed to update appointment"}));throw new Error(Ge.error||"Failed to update appointment")}return ve.json()},onSuccess:()=>{R({title:"Cita Actualizada",description:"Tu cita ha sido actualizada exitosamente."}),T(null),L(null),C.invalidateQueries({queryKey:["/api/appointments/tutor",t]})},onError:B=>{R({title:"Error al actualizar",description:B.message||"No se pudo actualizar la cita",variant:"destructive"})}}),E=jt({mutationFn:async B=>{const me=await fetch(`/api/appointments/${B}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!me.ok){const ve=await me.json().catch(()=>({error:"Failed to delete appointment"}));throw new Error(ve.error||"Failed to delete appointment")}return me.json()},onSuccess:()=>{R({title:"Cita Eliminada",description:"La cita cancelada ha sido eliminada permanentemente."}),C.invalidateQueries({queryKey:["/api/appointments/tutor",t]})},onError:B=>{R({title:"Error",description:B.message||"No se pudo eliminar la cita",variant:"destructive"})}}),$=()=>{if(!n||!s||!o||!c||!h.name||!h.phone||!h.email||!h.region||!h.comuna||!h.address||!h.houseNumber){R({title:"Información Incompleta",description:"Por favor completa todos los campos requeridos.",variant:"destructive"});return}const B=e.find(ve=>ve.id===c),me={petId:c,tutorRut:t.replace(/\D/g,""),appointmentDate:n.toISOString().split("T")[0],appointmentTime:s,duration:60,serviceType:o,status:"scheduled",notes:m,address:`${h.address} ${h.houseNumber}${h.apartmentNumber?", Depto "+h.apartmentNumber:""}, ${h.comuna}, ${h.region}`,tutorPhone:h.phone,tutorName:h.name,tutorEmail:h.email,petName:(B==null?void 0:B.name)||""};A.mutate(me)},G=B=>{window.confirm("¿Estás seguro de que deseas cancelar esta cita?")&&F.mutate(B)},se=B=>{window.confirm("¿Estás seguro de que deseas eliminar permanentemente esta cita cancelada?")&&E.mutate(B)},de=B=>{T(B.id),L({serviceType:B.serviceType,appointmentDate:B.appointmentDate,appointmentTime:B.appointmentTime,notes:B.notes,address:B.address,tutorPhone:B.tutorPhone,tutorName:B.tutorName,tutorEmail:B.tutorEmail||""})},Q=B=>{if(!I){R({title:"Error",description:"No hay datos de edición disponibles.",variant:"destructive"});return}D.mutate({appointmentId:B,data:I})},ce=({selectedDate:B,onDateSelect:me,serviceType:ve,editingAppointmentId:Ge})=>{const[ye,Xe]=y.useState(new Date),[Ye,Je]=y.useState("week"),Ve=Ye==="week"?new Date(ye.getTime()-ye.getDay()*24*60*60*1e3):new Date(ye.getFullYear(),ye.getMonth(),1),Ke=Ye==="week"?new Date(Ve.getTime()+6*24*60*60*1e3):new Date(ye.getFullYear(),ye.getMonth()+1,0),{data:At={}}=Qt({queryKey:["/api/schedule/availability","period",Ve.toISOString().split("T")[0],Ke.toISOString().split("T")[0],ve,Ge],queryFn:async()=>{const st={},et=new Date(Ve);for(;et<=Ke;){const gn=et.toISOString().split("T")[0];if(et>=new Date)try{const En=new URLSearchParams;ve&&En.append("serviceType",ve),En.append("editingAppointment",Ge);const U=await fetch(`/api/schedule/availability/${gn}?${En}`);U.ok?st[gn]=await U.json():st[gn]=[]}catch{st[gn]=[]}else st[gn]=[];et.setDate(et.getDate()+1)}return st},enabled:!0}),Re=()=>{const st=[],et=new Date(Ve);for(;et<=Ke;)st.push(new Date(et)),et.setDate(et.getDate()+1);return st},Pt=st=>{const et=new Date(ye);Ye==="week"?et.setDate(et.getDate()+(st==="next"?7:-7)):et.setMonth(et.getMonth()+(st==="next"?1:-1)),Xe(et)},ln=()=>{if(Ye==="week"){const st=new Date(Ve.getTime()+5184e5);return`${Ve.getDate()}/${Ve.getMonth()+1} - ${st.getDate()}/${st.getMonth()+1}/${st.getFullYear()}`}else return ye.toLocaleDateString("es-CL",{month:"long",year:"numeric"})},sn=st=>{const et=st.toISOString().split("T")[0],gn=At[et]||[];return gn.length===0?"bg-red-100 text-red-800":gn.length<=2?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return i.jsxs("div",{className:"bg-white border rounded-lg p-4 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h4",{className:"text-lg font-semibold",children:"Disponibilidad"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ee,{size:"sm",variant:Ye==="week"?"default":"outline",onClick:()=>Je("week"),children:"Semana"}),i.jsx(ee,{size:"sm",variant:Ye==="month"?"default":"outline",onClick:()=>Je("month"),children:"Mes"})]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(ee,{size:"sm",variant:"outline",onClick:()=>Pt("prev"),children:"← Anterior"}),i.jsx("span",{className:"font-medium",children:ln()}),i.jsx(ee,{size:"sm",variant:"outline",onClick:()=>Pt("next"),children:"Siguiente →"})]}),i.jsxs("div",{className:"grid gap-2 grid-cols-7",children:[Ye==="month"&&["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(st=>i.jsx("div",{className:"text-center text-sm font-medium text-gray-500 p-2",children:st},st)),Re().map(st=>{const et=st.toISOString().split("T")[0],gn=B===et,En=new Date().toISOString().split("T")[0]===et,U=st<new Date,H=At[et]||[];return i.jsxs("div",{className:`p-2 text-center border rounded cursor-pointer transition-colors ${U?"bg-gray-100 text-gray-400 cursor-not-allowed":gn?"bg-blue-500 text-white border-blue-500":En?"border-blue-400 bg-blue-50":sn(st)}`,onClick:()=>!U&&me(et),children:[i.jsx("div",{className:"font-medium text-sm",children:st.getDate()}),!U&&i.jsx("div",{className:"text-xs mt-1",children:H.length>0?`${H.length} slots`:"Sin slots"})]},et)})]}),i.jsxs("div",{className:"flex gap-4 text-xs",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 bg-green-100 border rounded"}),i.jsx("span",{children:"Muchos slots"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 bg-yellow-100 border rounded"}),i.jsx("span",{children:"Pocos slots"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 bg-red-100 border rounded"}),i.jsx("span",{children:"Sin disponibilidad"})]})]})]})},ue=({selectedDate:B,selectedService:me,currentAppointmentId:ve,selectedTime:Ge,onTimeChange:ye})=>{const{data:Xe=[]}=Qt({queryKey:["/api/schedule/availability",B,me,"edit",ve],queryFn:async()=>{if(!B)return[];const Ye=new URLSearchParams;me&&Ye.append("serviceType",me),Ye.append("editingAppointment",ve);const Je=await fetch(`/api/schedule/availability/${B}?${Ye}`);if(!Je.ok)throw new Error("Failed to fetch availability");return Je.json()},enabled:!!B});return i.jsxs("div",{children:[i.jsx(Y,{children:"Hora de la Cita"}),i.jsxs(Ue,{value:Ge,onValueChange:ye,children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona una hora"})}),i.jsx(Me,{children:Xe.map(Ye=>i.jsx(W,{value:Ye,children:Ye},Ye))})]})]})},$e=(B=>{const me=[],ve=new Date(B);ve.setDate(ve.getDate()-ve.getDay());for(let Ge=0;Ge<7;Ge++){const ye=new Date(ve);ye.setDate(ve.getDate()+Ge),me.push(ye)}return me})(n||new Date);return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsxs(Be,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(nr,{className:"h-5 w-5"}),"Agendar Nueva Cita"]}),i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>S(!b),children:b?"Vista Diaria":"Vista Semanal"})]})}),i.jsxs(De,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{htmlFor:"pet-select",children:"Mascota *"}),i.jsxs(Ue,{value:c,onValueChange:u,children:[i.jsx(Fe,{"data-testid":"pet-select",children:i.jsx(ze,{placeholder:"Selecciona una mascota"})}),i.jsx(Me,{children:e==null?void 0:e.map(B=>i.jsxs(W,{value:B.id,children:[B.name," - ",B.species]},B.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{htmlFor:"service-select",children:"Tipo de Servicio *"}),i.jsxs(Ue,{value:o,onValueChange:l,children:[i.jsx(Fe,{"data-testid":"service-select",children:i.jsx(ze,{placeholder:"Selecciona un servicio"})}),i.jsx(Me,{children:DE.map(B=>i.jsx(W,{value:B,children:B},B))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{htmlFor:"appointment-date",children:"Fecha *"}),b?i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(B=>i.jsx("div",{className:"text-center text-xs font-medium p-1",children:B},B))}),i.jsx("div",{className:"grid grid-cols-7 gap-1",children:$e.map(B=>{const me=(n==null?void 0:n.toDateString())===B.toDateString(),ve=new Date().toDateString()===B.toDateString(),Ge=B<new Date(new Date().setHours(0,0,0,0));return i.jsx(ee,{variant:me?"default":"outline",size:"sm",className:`h-12 p-1 text-xs ${ve?"ring-2 ring-blue-500":""} ${Ge?"opacity-50":""}`,onClick:()=>r(B),disabled:Ge,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-medium",children:B.getDate()}),i.jsxs("div",{className:"text-xs opacity-60",children:[B.getMonth()+1,"/",B.getDate()]})]})},B.toISOString())})}),i.jsxs("div",{className:"flex justify-between items-center mt-2",children:[i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{const B=new Date(n||new Date);B.setDate(B.getDate()-7),r(B)},children:"← Semana Anterior"}),i.jsx("span",{className:"text-sm text-gray-600",children:$e[0].toLocaleDateString("es-CL",{month:"long",year:"numeric"})}),i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{const B=new Date(n||new Date);B.setDate(B.getDate()+7),r(B)},children:"Semana Siguiente →"})]})]}):i.jsx(J,{id:"appointment-date",type:"date",min:new Date().toISOString().split("T")[0],value:(n==null?void 0:n.toISOString().split("T")[0])||"",onChange:B=>r(new Date(B.target.value+"T00:00:00")),className:"w-full","data-testid":"date-picker"})]}),n&&P.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Hora Disponible *"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:P.map(B=>i.jsx(ee,{variant:s===B?"default":"outline",size:"sm",onClick:()=>a(B),"data-testid":`time-slot-${B}`,children:B},B))})]}),i.jsxs("div",{className:"border-t pt-4 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-medium",children:"Información del Tutor"}),i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>w(!N),children:N?"Cancelar":"Editar"})]}),N?i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Nombre Completo *"}),i.jsx(J,{value:h.name,onChange:B=>p(me=>({...me,name:B.target.value})),placeholder:"Nombre del tutor"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Teléfono *"}),i.jsx(J,{value:h.phone,onChange:B=>p(me=>({...me,phone:B.target.value})),placeholder:"+56 9 1234 5678"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Email *"}),i.jsx(J,{type:"email",value:h.email,onChange:B=>p(me=>({...me,email:B.target.value})),placeholder:"email@ejemplo.com"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Región *"}),i.jsxs(Ue,{value:h.region,onValueChange:B=>{p(me=>({...me,region:B,comuna:""}))},children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona región"})}),i.jsx(Me,{children:i0().map(B=>i.jsx(W,{value:B,children:B},B))})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Comuna *"}),i.jsxs(Ue,{value:h.comuna,onValueChange:B=>p(me=>({...me,comuna:B})),disabled:!h.region,children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona comuna"})}),i.jsx(Me,{children:h.region&&a0(h.region).map(B=>i.jsx(W,{value:B,children:B},B))})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Dirección *"}),i.jsx(J,{value:h.address,onChange:B=>p(me=>({...me,address:B.target.value})),placeholder:"Calle principal"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Número de Casa *"}),i.jsx(J,{value:h.houseNumber,onChange:B=>p(me=>({...me,houseNumber:B.target.value})),placeholder:"123"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Número de Departamento"}),i.jsx(J,{value:h.apartmentNumber,onChange:B=>p(me=>({...me,apartmentNumber:B.target.value})),placeholder:"Opcional"})]})]}):i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Nombre:"})," ",h.name||"No especificado"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Teléfono:"})," ",h.phone||"No especificado"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",h.email||"No especificado"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Región:"})," ",h.region||"No especificada"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Comuna:"})," ",h.comuna||"No especificada"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Dirección:"})," ",h.address&&h.houseNumber?`${h.address} ${h.houseNumber}${h.apartmentNumber?", Depto "+h.apartmentNumber:""}`:"No especificada"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{htmlFor:"notes",children:"Notas Adicionales"}),i.jsx(J,{id:"notes",value:m,onChange:B=>x(B.target.value),placeholder:"Información adicional sobre la cita"})]}),i.jsx(ee,{onClick:$,disabled:A.isPending||!n||!s||!o||!c,className:"w-full","data-testid":"schedule-button",children:A.isPending?"Agendando...":"Agendar Cita"})]})]}),i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(Bk,{className:"h-5 w-5"}),"Mis Citas"]})}),i.jsx(De,{children:_.length===0?i.jsx("p",{className:"text-center text-gray-500 py-8",children:"No tienes citas agendadas"}):i.jsx("div",{className:"space-y-4",children:_.map(B=>i.jsx("div",{className:"border rounded-lg p-4",children:v===B.id?i.jsxs(i.Fragment,{children:[i.jsx("h4",{className:"font-medium text-lg mb-4",children:"Editar Cita"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Tipo de Servicio"}),i.jsxs(Ue,{value:(I==null?void 0:I.serviceType)||"",onValueChange:me=>L(ve=>({...ve,serviceType:me})),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsx(Me,{children:DE.map(me=>i.jsx(W,{value:me,children:me},me))})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Fecha de la Cita"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(J,{type:"date",value:(I==null?void 0:I.appointmentDate)||"",onChange:me=>L(ve=>({...ve,appointmentDate:me.target.value})),min:new Date().toISOString().split("T")[0]}),i.jsx(ce,{selectedDate:(I==null?void 0:I.appointmentDate)||"",onDateSelect:me=>L(ve=>({...ve,appointmentDate:me})),serviceType:I==null?void 0:I.serviceType,editingAppointmentId:B.id})]})]}),i.jsx(ue,{selectedDate:I==null?void 0:I.appointmentDate,selectedService:I==null?void 0:I.serviceType,currentAppointmentId:B.id,selectedTime:(I==null?void 0:I.appointmentTime)||"",onTimeChange:me=>L(ve=>({...ve,appointmentTime:me}))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ee,{size:"sm",onClick:()=>Q(B.id),disabled:D.isPending,children:D.isPending?"Guardando...":"Guardar"}),i.jsx(ee,{size:"sm",variant:"outline",onClick:()=>{T(null),L(null)},children:"Cancelar"})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"space-y-1 flex-1",children:[i.jsx("p",{className:"font-medium",children:B.serviceType}),i.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[i.jsx(is,{className:"h-3 w-3"}),B.petName]}),i.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[i.jsx(nr,{className:"h-3 w-3"}),ks(B.appointmentDate)]}),i.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[i.jsx(Wd,{className:"h-3 w-3"}),B.appointmentTime]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${B.status==="scheduled"?"bg-blue-100 text-blue-800":B.status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:B.status==="scheduled"?"Agendada":B.status==="completed"?"Completada":"Cancelada"}),B.status==="scheduled"&&i.jsxs("div",{className:"flex gap-1",children:[i.jsx(ee,{size:"sm",variant:"outline",onClick:()=>de(B),children:i.jsx(lg,{className:"h-3 w-3"})}),i.jsx(ee,{size:"sm",variant:"destructive",onClick:()=>G(B.id),disabled:F.isPending,children:i.jsx(jv,{className:"h-3 w-3"})})]}),B.status==="cancelled"&&i.jsx("div",{className:"flex gap-1",children:i.jsx(ee,{size:"sm",variant:"destructive",onClick:()=>se(B.id),disabled:E.isPending,className:"bg-red-600 hover:bg-red-700",children:E.isPending?"Eliminando...":"Eliminar"})})]})]}),B.notes&&i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[i.jsx("strong",{children:"Notas:"})," ",B.notes]})]})},B.id))})})]})]})})}const sR=[{id:"labrador",name:"Labrador Retriever",species:"Canino"},{id:"golden",name:"Golden Retriever",species:"Canino"},{id:"german_shepherd",name:"Pastor Alemán",species:"Canino"},{id:"bulldog",name:"Bulldog Francés",species:"Canino"},{id:"poodle",name:"Poodle",species:"Canino"},{id:"beagle",name:"Beagle",species:"Canino"},{id:"rottweiler",name:"Rottweiler",species:"Canino"},{id:"yorkshire",name:"Yorkshire Terrier",species:"Canino"},{id:"chihuahua",name:"Chihuahua",species:"Canino"},{id:"border_collie",name:"Border Collie",species:"Canino"},{id:"siberian_husky",name:"Husky Siberiano",species:"Canino"},{id:"boxer",name:"Boxer",species:"Canino"},{id:"cocker_spaniel",name:"Cocker Spaniel",species:"Canino"},{id:"dachshund",name:"Teckel",species:"Canino"},{id:"mastiff",name:"Mastín",species:"Canino"},{id:"akita",name:"Akita",species:"Canino"},{id:"shih_tzu",name:"Shih Tzu",species:"Canino"},{id:"maltese",name:"Maltés",species:"Canino"},{id:"pug",name:"Pug",species:"Canino"},{id:"mixed_dog",name:"Mestizo",species:"Canino"},{id:"persian",name:"Persa",species:"Felino"},{id:"siamese",name:"Siamés",species:"Felino"},{id:"maine_coon",name:"Maine Coon",species:"Felino"},{id:"british_shorthair",name:"British Shorthair",species:"Felino"},{id:"ragdoll",name:"Ragdoll",species:"Felino"},{id:"bengal",name:"Bengal",species:"Felino"},{id:"russian_blue",name:"Azul Ruso",species:"Felino"},{id:"abyssinian",name:"Abisinio",species:"Felino"},{id:"scottish_fold",name:"Scottish Fold",species:"Felino"},{id:"norwegian_forest",name:"Bosque de Noruega",species:"Felino"},{id:"sphynx",name:"Sphynx",species:"Felino"},{id:"oriental",name:"Oriental",species:"Felino"},{id:"birman",name:"Birmano",species:"Felino"},{id:"domestic_shorthair",name:"Pelo Corto Doméstico",species:"Felino"},{id:"domestic_longhair",name:"Pelo Largo Doméstico",species:"Felino"},{id:"mixed_cat",name:"Mestizo",species:"Felino"}],o0=t=>sR.filter(e=>e.species===t),rl=t=>{const e=t.replace(/[^0-9kK]/g,"");if(e.length<2)return e;const n=e.slice(0,-1),r=e.slice(-1).toUpperCase();return`${n.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${r}`},Tg=t=>{try{const e=t.replace(/[^0-9kK]/g,"");if(e.length<2)return{isValid:!1,formatted:t,message:"RUT debe tener al menos 2 caracteres",error:"RUT debe tener al menos 2 caracteres"};const n=e.slice(0,-1),r=e.slice(-1).toUpperCase();if(!/^\d+$/.test(n))return{isValid:!1,formatted:rl(t),message:"El cuerpo del RUT debe ser numérico",error:"El cuerpo del RUT debe ser numérico"};if(n.length<7||n.length>8)return{isValid:!1,formatted:rl(t),message:"RUT debe tener entre 7 y 8 dígitos más el dígito verificador",error:"RUT debe tener entre 7 y 8 dígitos más el dígito verificador"};const s=HB(n);return r!==s?{isValid:!1,formatted:rl(t),message:"Dígito verificador inválido",error:"Dígito verificador inválido"}:{isValid:!0,formatted:rl(t),message:"RUT válido"}}catch{return{isValid:!1,formatted:t,message:"Error al validar RUT",error:"Error al validar RUT"}}},HB=t=>{let e=0,n=2;for(let a=t.length-1;a>=0;a--)e+=parseInt(t[a])*n,n=n===7?2:n+1;const s=11-e%11;return s===11?"0":s===10?"K":s.toString()};function B1(t){const e=new Date(t),n=new Date;let r=n.getFullYear()-e.getFullYear(),s=n.getMonth()-e.getMonth(),a=n.getDate()-e.getDate();if(a<0){s--;const l=new Date(n.getFullYear(),n.getMonth(),0);a+=l.getDate()}s<0&&(r--,s+=12);const o=V1({years:r,months:s,days:a});return{years:r,months:s,days:a,formatted:o}}function V1(t){const{years:e,months:n,days:r}=t;if(e>0)return n>0?`${e} año${e!==1?"s":""} y ${n} mes${n!==1?"es":""}`:`${e} año${e!==1?"s":""}`;if(n>0)return r>7?`${n} mes${n!==1?"es":""} y ${Math.floor(r/7)} semana${Math.floor(r/7)!==1?"s":""}`:`${n} mes${n!==1?"es":""}`;if(r>0)if(r>=7){const s=Math.floor(r/7),a=r%7;return a>0?`${s} semana${s!==1?"s":""} y ${a} día${a!==1?"s":""}`:`${s} semana${s!==1?"s":""}`}else return`${r} día${r!==1?"s":""}`;else return"Recién nacido"}const qB=()=>{const[t,e]=y.useState(!1),[n,r]=y.useState(""),[s,a]=y.useState(null),[o,l]=y.useState(!1),[c,u]=y.useState({tutorName:"",tutorRut:n,tutorPhone:"",tutorEmail:"",tutorCity:"",tutorAddress:"",name:"",species:"Canino",breed:"",birthDate:"",sex:"Macho",weight:"",colorMarkings:"",microchip:"",reproductiveStatus:"Entero"}),[h,p]=y.useState({isValid:!0,message:""}),[m,x]=y.useState({isValid:!0,message:""}),[N,w]=y.useState(sR.filter(R=>R.species==="Canino"));y.useEffect(()=>{u(R=>({...R,tutorRut:n}))},[n]),y.useEffect(()=>{const R=o0(c.species);w(R),c.breed&&!R.find(C=>C.name===c.breed)&&u(C=>({...C,breed:""}))},[c.species]);const b=R=>{const C=rl(R),_=Tg(C);u(P=>({...P,tutorRut:C})),p(_)},S=R=>{const C=new Date(R),_=new Date,P=new Date;P.setFullYear(_.getFullYear()-20);let A={isValid:!0,message:""};C>_?A={isValid:!1,message:"La fecha de nacimiento no puede ser futura"}:C<P&&(A={isValid:!1,message:"La fecha parece demasiado antigua. Verifica el año."}),u(F=>({...F,birthDate:R})),x(A)},v=R=>R?V1(B1(R)):"",T=async()=>{if(!n){alert("Por favor ingresa tu RUT");return}try{let R=await fetch(`/api/pets/rut/${n}`),C=[];if(R.ok&&(C=await R.json()),!C||C.length===0){const _=await fetch(`/api/pets/firebase/tutor/${n}`);_.ok&&(C=await _.json())}C&&C.length>0?(a({pets:C}),e(!0)):l(!0)}catch(R){console.error("Error fetching pets:",R),alert("Error al buscar información. Intenta nuevamente.")}},I=async()=>{if(!c.tutorName||!c.name||!c.tutorRut){alert("Por favor completa los campos obligatorios: Nombre del tutor, RUT y nombre de la mascota");return}if(!h.isValid){alert("Por favor ingresa un RUT válido");return}if(!c.breed){alert("Por favor selecciona una raza");return}if(!m.isValid){alert("Por favor corrige la fecha de nacimiento");return}try{const R=await fetch("/api/pets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ownerId:c.tutorRut,name:c.name,species:c.species,breed:c.breed,sex:c.sex,birthDate:c.birthDate||null,weight:c.weight?parseFloat(c.weight):null,colorMarkings:c.colorMarkings||null,microchip:c.microchip||null,reproductiveStatus:c.reproductiveStatus||null,tutorName:c.tutorName,tutorPhone:c.tutorPhone||null,tutorEmail:c.tutorEmail||null,tutorCity:c.tutorCity||null,tutorAddress:c.tutorAddress||null})});if(R.ok){const C=await R.json();a({pets:[C]}),l(!1),e(!0),alert("¡Ficha creada exitosamente! Ahora puedes agendar tu cita.")}else{const C=await R.json();if(console.error("Error response from server:",C),Array.isArray(C.error)){const _=C.error.map(P=>{var A;return`${((A=P.path)==null?void 0:A.join("."))||"Campo"}: ${P.message}`}).join(`
`);alert(`Error de validación:
${_}`)}else typeof C.error=="string"?alert(`Error al crear la ficha: ${C.error}`):alert("Error al crear la ficha. Por favor verifica los datos e intenta nuevamente.")}}catch(R){console.error("Error creating patient:",R),alert("Error al crear la ficha. Verifica tu conexión e intenta nuevamente.")}},L=[{icon:"fas fa-credit-card",label:"Tarjetas",color:"text-mint"},{icon:"fas fa-university",label:"Transferencia",color:"text-lavender"},{icon:"fas fa-money-bill-wave",label:"Efectivo",color:"text-turquoise"},{icon:"fas fa-mobile-alt",label:"Red Compra",color:"text-palerose"}];return i.jsx("section",{id:"agendar",className:"py-20 bg-gradient-to-br from-mint to-turquoise",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[i.jsx("h2",{className:"text-4xl font-poppins font-bold text-white mb-6",children:"Agenda tu Cita"}),i.jsx("p",{className:"text-xl text-white font-lato mb-12 max-w-3xl mx-auto",children:"Selecciona el día y hora que mejor te convenga. Nos pondremos en contacto contigo para confirmar los detalles."}),i.jsx("div",{className:"bg-white p-8 rounded-3xl shadow-2xl max-w-4xl mx-auto",children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx("i",{className:"fas fa-calendar-alt text-6xl text-mint mb-6"}),i.jsx("h3",{className:"text-2xl font-poppins font-semibold text-darkgray mb-4",children:"Calendario de Reservas"}),i.jsx("p",{className:"text-gray-600 font-lato mb-8",children:"Ingresa tu RUT para verificar si ya tienes mascotas registradas o crear una nueva ficha"}),i.jsx("div",{className:"space-y-6 mb-8",children:i.jsx("div",{className:"bg-gradient-to-r from-mint to-turquoise p-6 rounded-2xl text-white",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center",children:[i.jsx("input",{type:"text",placeholder:"Ingresa tu RUT (12345678-9)",value:n,onChange:R=>r(R.target.value),className:"px-4 py-3 rounded-xl text-darkgray flex-1 min-w-0 font-lato focus:ring-2 focus:ring-white focus:outline-none","data-testid":"input-tutor-rut"}),i.jsxs("button",{onClick:T,className:"bg-white text-mint px-8 py-3 rounded-xl font-poppins font-semibold hover:shadow-lg transition-all","data-testid":"button-search-schedule",children:[i.jsx("i",{className:"fas fa-search mr-2"}),"Buscar y Agendar"]})]})})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Después de agendar, recibirás un enlace para completar el cuestionario pre-visita Fear Free®"}),i.jsxs("a",{href:"/cuestionario",className:"inline-flex items-center text-mint hover:text-turquoise font-medium","data-testid":"questionnaire-link",children:[i.jsx("i",{className:"fas fa-clipboard-list mr-2"}),"Completar Cuestionario Pre-Visita"]})]})]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-xl max-w-5xl max-h-[95vh] overflow-y-auto w-full shadow-2xl",children:i.jsxs(Ae,{className:"border-0 shadow-none",children:[i.jsx(Le,{className:"border-b bg-gradient-to-r from-mint to-turquoise text-white",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs(Be,{className:"flex items-center gap-2 text-white text-xl",children:[i.jsx(Ts,{size:24}),"Crear Nueva Ficha de Paciente"]}),i.jsxs(Jt,{className:"text-white/90",children:["RUT: ",n," - Complete la información para crear la ficha y agendar"]})]}),i.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"text-white hover:bg-white/20 p-2",children:i.jsx(jv,{size:20})})]})}),i.jsx(De,{className:"p-6",children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-mint flex items-center gap-2",children:[i.jsx(is,{size:20}),"Datos del Tutor"]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Nombre Completo *"}),i.jsx(J,{value:c.tutorName,onChange:R=>u(C=>({...C,tutorName:R.target.value})),placeholder:"Juan Pérez",className:"focus:ring-2 focus:ring-mint",required:!0})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"RUT *"}),i.jsx(J,{value:c.tutorRut,onChange:R=>b(R.target.value),placeholder:"12345678-9",className:`focus:ring-2 focus:ring-mint ${h.isValid?"":"border-red-500"}`}),!h.isValid&&i.jsxs("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[i.jsx(ji,{size:14}),h.message]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Teléfono Principal"}),i.jsx(J,{value:c.tutorPhone,onChange:R=>u(C=>({...C,tutorPhone:R.target.value})),placeholder:"+56 9 1234 5678",className:"focus:ring-2 focus:ring-mint"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Email"}),i.jsx(J,{type:"email",value:c.tutorEmail,onChange:R=>u(C=>({...C,tutorEmail:R.target.value})),placeholder:"juan@email.com",className:"focus:ring-2 focus:ring-mint"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Ciudad"}),i.jsx(J,{value:c.tutorCity,onChange:R=>u(C=>({...C,tutorCity:R.target.value})),placeholder:"Santiago",className:"focus:ring-2 focus:ring-mint"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Dirección"}),i.jsx(J,{value:c.tutorAddress,onChange:R=>u(C=>({...C,tutorAddress:R.target.value})),placeholder:"Av. Providencia 123, Santiago",className:"focus:ring-2 focus:ring-mint"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-mint",children:"Datos del Paciente"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Nombre *"}),i.jsx(J,{value:c.name,onChange:R=>u(C=>({...C,name:R.target.value})),placeholder:"Max",className:"focus:ring-2 focus:ring-mint",required:!0})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Especie"}),i.jsxs(Ue,{value:c.species,onValueChange:R=>u(C=>({...C,species:R})),children:[i.jsx(Fe,{className:"focus:ring-2 focus:ring-mint",children:i.jsx(ze,{placeholder:"Selecciona especie"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Canino",children:"Canino"}),i.jsx(W,{value:"Felino",children:"Felino"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Raza *"}),i.jsxs(Ue,{value:c.breed,onValueChange:R=>u(C=>({...C,breed:R})),children:[i.jsx(Fe,{className:"focus:ring-2 focus:ring-mint",children:i.jsx(ze,{placeholder:"Selecciona una raza"})}),i.jsx(Me,{children:N.map(R=>i.jsx(W,{value:R.name,children:R.name},R.id))})]}),!c.breed&&i.jsxs("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[i.jsx(ji,{size:14}),"Selecciona una raza para continuar"]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Sexo"}),i.jsxs(Ue,{value:c.sex,onValueChange:R=>u(C=>({...C,sex:R})),children:[i.jsx(Fe,{className:"focus:ring-2 focus:ring-mint",children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Macho",children:"Macho"}),i.jsx(W,{value:"Hembra",children:"Hembra"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Fecha de Nacimiento"}),i.jsx(J,{type:"date",value:c.birthDate,onChange:R=>S(R.target.value),className:`focus:ring-2 focus:ring-mint ${m.isValid?"":"border-red-500"}`}),c.birthDate&&m.isValid&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Edad: ",v(c.birthDate)]}),!m.isValid&&i.jsxs("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[i.jsx(ji,{size:14}),m.message]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Peso"}),i.jsx(J,{value:c.weight,onChange:R=>u(C=>({...C,weight:R.target.value})),placeholder:"3.5 kg",className:"focus:ring-2 focus:ring-mint"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Color/Marcas"}),i.jsx(J,{value:c.colorMarkings,onChange:R=>u(C=>({...C,colorMarkings:R.target.value})),placeholder:"Dorado con mancha blanca en pecho",className:"focus:ring-2 focus:ring-mint"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Estado Reproductivo"}),i.jsxs(Ue,{value:c.reproductiveStatus,onValueChange:R=>u(C=>({...C,reproductiveStatus:R})),children:[i.jsx(Fe,{className:"focus:ring-2 focus:ring-mint",children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Entero",children:"Entero"}),i.jsx(W,{value:"Castrado",children:"Castrado"}),i.jsx(W,{value:"Esterilizado",children:"Esterilizado"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Microchip"}),i.jsx(J,{value:c.microchip,onChange:R=>u(C=>({...C,microchip:R.target.value})),placeholder:"123456789012345",className:"focus:ring-2 focus:ring-mint"})]})]})]}),i.jsxs("div",{className:"flex gap-4 pt-6 border-t",children:[i.jsx(ee,{type:"button",variant:"outline",onClick:()=>l(!1),className:"flex-1",children:"Cancelar"}),i.jsxs(ee,{onClick:I,className:"flex-1 bg-mint hover:bg-mint-dark text-white",disabled:!c.tutorName||!c.name||!h.isValid||!c.breed,children:[i.jsx(Ts,{className:"mr-2",size:16}),"Crear Ficha y Agendar"]})]})]})})]})})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-6xl max-h-[90vh] overflow-y-auto w-full",children:[i.jsx("div",{className:"p-6 border-b",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Agendar Cita"}),i.jsx("button",{onClick:()=>e(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]})}),i.jsx("div",{className:"p-6",children:s&&i.jsx(z1,{tutorRut:n,pets:s.pets})})]})}),i.jsxs("div",{className:"mt-16",children:[i.jsx("h3",{className:"text-2xl font-poppins font-semibold text-white mb-8",children:"Métodos de Pago"}),i.jsx("div",{className:"grid md:grid-cols-4 gap-6 max-w-4xl mx-auto",children:L.map((R,C)=>i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[i.jsx("i",{className:`${R.icon} text-3xl ${R.color} mb-3`}),i.jsx("p",{className:"font-poppins font-medium text-darkgray",children:R.label})]},C))})]})]})})},WB=()=>{const[t,e]=y.useState(null),n=s=>{e(t===s?null:s)},r=[{question:"¿Cuándo debo solicitar una visita a domicilio?",answer:"Cuando tu mascota necesite chequeo general, vacunación, desparasitación, control de tratamiento, toma de muestras, certificados de salud o acompañamiento en cuidados paliativos. También para revisiones preventivas en cachorros, animales senior o mascotas que se estresan en la clínica.",gradient:"from-turquoise to-mint",textColor:"text-darkgray"},{question:"¿Cuándo se considera una emergencia y debo acudir a una clínica?",answer:"Es una emergencia si presenta: dificultad respiratoria o asfixia, sangrado abundante o hemorragia que no cede, convulsiones o pérdida de conciencia, envenenamiento o ingestión de objetos peligrosos, fracturas expuestas o trauma grave. En estos casos, acude de inmediato a una clínica veterinaria 24/7.",gradient:"from-lavender to-palerose",textColor:"text-darkgray"},{question:"¿Qué ventajas tiene la atención a domicilio?",answer:"Evita el transporte y la sala de espera, reduce el estrés, y permite atender en el entorno seguro de tu mascota, favoreciendo una revisión más completa y tranquila.",gradient:"from-palerose to-turquoise",textColor:"text-darkgray"},{question:"¿Qué es el manejo Fear Free y cómo lo aplica?",answer:"Es un enfoque para reducir el miedo, la ansiedad y el estrés durante la atención veterinaria. Utilizamos movimientos suaves, evitamos el contacto brusco, ofrecemos snacks seguros, feromonas y permitimos que la mascota marque el ritmo de la interacción. Además, Fear Free también busca proteger el bienestar y la seguridad del equipo veterinario, asegurando que la atención se realice en un entorno seguro y respetuoso para todos.",gradient:"from-mint to-lavender",textColor:"text-darkgray"},{question:"¿Qué es la premedicación y cuándo se usa?",answer:"En algunos pacientes nerviosos, agresivos o muy ansiosos, se recomienda administrar previamente un medicamento suave para disminuir el estrés y facilitar la atención sin poner en riesgo su bienestar ni el del equipo. Esto se indica solo tras una evaluación profesional y con la dosis adecuada.",gradient:"from-turquoise to-palerose",textColor:"text-darkgray"},{question:"¿Debo pagar un abono previo para agendar?",answer:"Sí. Para confirmar tu cita solicitamos un abono que se descuenta del valor total de la consulta. Este pago asegura tu hora y nos permite reservar el tiempo y los insumos necesarios para tu mascota.",gradient:"from-lavender to-turquoise",textColor:"text-darkgray"},{question:"¿Cuál es la política de cancelación?",answer:"Si cancelas con al menos 24 horas de anticipación, puedes reagendar tu visita sin costo. Cancelaciones con menos de 24 horas o inasistencias implican la pérdida del abono.",gradient:"from-mint to-palerose",textColor:"text-darkgray"},{question:"¿Cómo debo preparar a mi mascota para la visita?",answer:"Mantenerla en un espacio tranquilo y seguro. En gatos, usar transportadora o habitación cerrada. Tener carnet de vacunas y antecedentes médicos. Seguir las indicaciones previas, como ayuno si se tomarán muestras.",gradient:"from-palerose to-lavender",textColor:"text-darkgray"},{question:"¿Qué pasa si mi mascota se pone muy nerviosa o agresiva?",answer:"Aplicamos técnicas Fear Free. Si no es posible continuar, podemos reagendar o sugerir premedicación para una futura visita, siempre priorizando la seguridad y el bienestar de todos.",gradient:"from-turquoise to-mint",textColor:"text-darkgray"},{question:"¿Atienden a más de una mascota en la misma visita?",answer:"Sí, siempre que lo indiques al agendar, para llevar el material necesario y ajustar el tiempo de atención.",gradient:"from-lavender to-mint",textColor:"text-darkgray"},{question:"¿Qué formas de pago aceptan?",answer:"Transferencia bancaria, efectivo y algunos métodos electrónicos. El pago se realiza al finalizar la atención, descontando el abono previo.",gradient:"from-mint to-turquoise",textColor:"text-darkgray"}];return i.jsx("section",{id:"faq",className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-poppins font-bold text-darkgray mb-4",children:"Preguntas Frecuentes"}),i.jsx("p",{className:"text-xl text-gray-600",children:"Resolvemos las dudas más comunes sobre nuestros servicios veterinarios a domicilio"})]}),i.jsx("div",{className:"space-y-6",children:r.map((s,a)=>i.jsxs("div",{className:`bg-gradient-to-r ${s.gradient} p-6 rounded-xl shadow-lg`,children:[i.jsxs("button",{className:"w-full text-left flex justify-between items-center focus:outline-none",onClick:()=>n(a),"data-testid":`faq-question-${a}`,children:[i.jsx("h3",{className:`text-xl font-poppins font-semibold ${s.textColor}`,children:s.question}),i.jsx("i",{className:`fas fa-chevron-down ${s.textColor} transform transition-transform ${t===a?"rotate-180":""}`})]}),t===a&&i.jsx("div",{className:`mt-4 ${s.textColor} font-lato leading-relaxed`,children:s.answer})]},a))}),i.jsx("div",{className:"mt-12 text-center",children:i.jsxs("div",{className:"bg-elegant-surface p-6 rounded-2xl border border-elegant-accent/20",children:[i.jsx("h3",{className:"text-xl font-poppins font-semibold text-elegant-main mb-3",children:"¿Tienes más preguntas?"}),i.jsx("p",{className:"text-elegant-muted mb-4",children:"Contáctanos directamente para resolver cualquier duda específica sobre tu mascota"}),i.jsxs("a",{href:"https://wa.me/56976040797?text=Hola,%20tengo%20una%20pregunta%20sobre%20los%20servicios%20veterinarios",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center bg-green-500 text-white px-6 py-3 rounded-xl font-medium hover:bg-green-600 transition-colors","data-testid":"contact-whatsapp",children:[i.jsx("i",{className:"fab fa-whatsapp mr-2"}),"Preguntar por WhatsApp"]})]})})]})})},GB=()=>{const t=[{title:"Administrar Medicación",description:"Guía para dar medicamentos a tu mascota usando premios y técnicas Fear Free",icon:"fas fa-pills",color:"text-lavender",file:"/darle-medicacion-a-tu-animal.pdf"},{title:"Lenguaje Corporal",description:"Identifica signos de miedo, ansiedad y estrés en perros y gatos",icon:"fas fa-eye",color:"text-turquoise",file:"/lenguaje-corporal-miedo-ansiedad.pdf"},{title:"Perro Feliz y Satisfecho",description:"Cómo satisfacer las necesidades físicas, sociales y exploratorias de tu perro",icon:"fas fa-heart",color:"text-palerose",file:"/perro-satisfecho-es-perro-feliz.pdf"}],e=[{title:"COLMEVET",description:"Colegio Médico Veterinario de Chile",icon:"fas fa-graduation-cap",color:"text-mint",url:"https://www.colmevet.cl/"},{title:"SAG Chile",description:"Servicio Agrícola y Ganadero",icon:"fas fa-shield-alt",color:"text-turquoise",url:"https://www.sag.cl/"},{title:"ISFM",description:"International Society of Feline Medicine - iCatCare Veterinary Society",icon:"fas fa-cat",color:"text-lavender",url:"https://icatcare.org/veterinary/isfm/"},{title:"Fear Free",description:"Técnicas de manejo libre de estrés para mascotas",icon:"fas fa-heart",color:"text-palerose",url:"https://www.fearfreehappyhomes.com/"},{title:"WSAVA",description:"World Small Animal Veterinary Association",icon:"fas fa-globe",color:"text-mint",url:"https://www.wsava.org/"}];return i.jsx("section",{id:"recursos",className:"py-20 bg-warmbeige",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-poppins font-bold text-darkgray mb-4",children:"Recursos para Tutores"}),i.jsx("p",{className:"text-xl text-gray-600",children:"Guías Fear Free y enlaces profesionales para el cuidado de tu mascota"})]}),i.jsxs("div",{className:"mb-16",children:[i.jsx("h3",{className:"text-2xl font-poppins font-semibold text-darkgray mb-8 text-center",children:"Guías Descargables Fear Free"}),i.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:t.map((n,r)=>i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center",children:i.jsx("i",{className:`${n.icon} text-2xl ${n.color}`})}),i.jsx("h4",{className:"text-lg font-poppins font-semibold text-darkgray mb-2",children:n.title}),i.jsx("p",{className:"text-sm text-gray-600 font-lato mb-4",children:n.description})]}),i.jsxs("a",{href:n.file,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center justify-center w-full ${n.color} font-poppins font-medium hover:underline`,"data-testid":`pdf-download-${r}`,children:[i.jsx("i",{className:"fas fa-download mr-2"}),"Descargar PDF"]})]},r))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-poppins font-semibold text-darkgray mb-8 text-center",children:"Enlaces Profesionales"}),i.jsx("div",{className:"grid md:grid-cols-3 lg:grid-cols-5 gap-6",children:e.map((n,r)=>i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all text-center",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center",children:i.jsx("i",{className:`${n.icon} text-2xl ${n.color}`})}),i.jsx("h4",{className:"text-lg font-poppins font-semibold text-darkgray mb-2",children:n.title}),i.jsx("p",{className:"text-sm text-gray-600 font-lato mb-4",children:n.description}),i.jsxs("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center ${n.color} font-poppins font-medium hover:underline`,"data-testid":`external-link-${r}`,children:[i.jsx("i",{className:"fas fa-external-link-alt mr-2"}),"Visitar sitio"]})]},r))})]})]})})};class KB{static openWhatsApp(e,n){const r=encodeURIComponent(n),s=`https://wa.me/${e.replace(/\+/g,"")}?text=${r}`;window.open(s,"_blank")}}const QB=()=>{const[t,e]=y.useState({name:"",email:"",phone:"",message:""}),[n,r]=y.useState(!1),[s,a]=y.useState(""),o=y.useRef(null),l=y.useRef(""),{toast:c}=ti(),u=N=>{a(N)};bn.useEffect(()=>{if(typeof window<"u"&&(window.location.hostname.includes("replit.dev")||window.location.hostname==="localhost"||!1)){console.log("🔧 Modo desarrollo: simulando verificación Turnstile"),setTimeout(()=>{a("dev-token-simulation")},2e3);return}if(window.turnstile){console.log("Turnstile ya está cargado"),o.current&&(l.current=window.turnstile.render(o.current,{sitekey:"0x4AAAAAABuFJd3CiyJcNpi7",callback:u,"error-callback":()=>{console.warn("Error en Turnstile, usando modo fallback"),a("fallback-token")},theme:"light",size:"normal"}));return}const w=document.createElement("script");return w.src="https://challenges.cloudflare.com/turnstile/v0/api.js?onload=onloadTurnstileCallback",w.async=!0,w.defer=!0,window.onloadTurnstileCallback=()=>{if(window.handleTurnstile=u,o.current&&window.turnstile)try{l.current=window.turnstile.render(o.current,{sitekey:"0x4AAAAAABuFJd3CiyJcNpi7",callback:u,"error-callback":()=>{console.warn("Error en Turnstile, usando modo fallback"),a("fallback-token")},theme:"light",size:"normal"})}catch(b){console.warn("Error renderizando Turnstile, usando modo fallback:",b),a("fallback-token")}},w.onerror=()=>{console.warn("Error cargando Turnstile, usando modo fallback"),a("fallback-token")},document.head.appendChild(w),()=>{try{document.head.removeChild(w),delete window.onloadTurnstileCallback,delete window.handleTurnstile}catch{}}},[]);const h=async N=>{if(N.preventDefault(),!t.name||!t.email||!t.message){c({title:"Error",description:"Por favor completa todos los campos requeridos",variant:"destructive"});return}if(!s){c({title:"Error",description:"Por favor completa la verificación de seguridad",variant:"destructive"});return}r(!0);try{const w=await fetch("/api/contact/send-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,turnstileToken:s})}),b=await w.json();if(w.ok)c({title:"Mensaje enviado",description:"Tu mensaje ha sido enviado a contacto@aleveterinaria.cl. Nos pondremos en contacto contigo pronto."}),e({name:"",email:"",phone:"",message:""}),a(""),l.current&&window.turnstile&&window.turnstile.reset(l.current);else throw new Error(b.error||"Error al enviar el mensaje")}catch(w){console.error("Contact form error:",w),c({title:"Error al enviar",description:w.message||"No se pudo enviar el mensaje. Verifica que la configuración SMTP esté configurada.",variant:"destructive"}),l.current&&window.turnstile&&window.turnstile.reset(l.current),a("")}finally{r(!1)}},p=N=>{e({...t,[N.target.name]:N.target.value})},x=[{icon:"fab fa-whatsapp",title:"WhatsApp",value:"+56 9 7604 0797",color:"bg-green-500",action:()=>{KB.openWhatsApp("+56976040797",`Hola! Me gustaría obtener más información sobre los servicios veterinarios a domicilio de Ale Veterinaria.

¿Podrían ayudarme con:
- Información sobre servicios disponibles
- Precios y horarios
- Agendar una consulta

Muchas gracias!`)}},{icon:"fas fa-envelope",title:"Email",value:"contacto@aleveterinaria.cl",color:"bg-elegant-secondary",action:()=>window.open("mailto:contacto@aleveterinaria.cl")},{icon:"fab fa-instagram",title:"Instagram",value:"@aleveterinaria",color:"bg-elegant-highlight",action:()=>window.open("https://instagram.com/aleveterinaria")}];return i.jsx("section",{id:"contacto",className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-poppins font-bold text-darkgray mb-4",children:"Contacto"}),i.jsx("p",{className:"text-xl text-gray-600",children:"Estamos aquí para ayudarte y resolver tus dudas"})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[i.jsx("div",{className:"space-y-8",children:x.map((N,w)=>i.jsxs("div",{className:`flex items-center space-x-4 ${N.action?"cursor-pointer hover:scale-105 transition-transform":""}`,onClick:N.action||void 0,children:[i.jsx("div",{className:`${N.color} p-4 rounded-full ${N.action?"hover:shadow-lg":""}`,children:i.jsx("i",{className:`${N.icon} text-white text-2xl`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-poppins font-semibold text-darkgray text-xl",children:N.title}),i.jsx("p",{className:"text-gray-600 font-lato",children:N.value}),N.title==="WhatsApp"&&i.jsx("p",{className:"text-sm text-green-600 font-lato mt-1",children:"¡Haz clic para chatear!"})]})]},w))}),i.jsxs("div",{className:"bg-gradient-to-br from-warmbeige to-white p-8 rounded-3xl shadow-lg",children:[i.jsx("h3",{className:"text-2xl font-poppins font-semibold text-darkgray mb-6",children:"Envíanos un Mensaje"}),i.jsxs("form",{onSubmit:h,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-darkgray font-poppins font-medium mb-2",children:"Nombre completo *"}),i.jsx("input",{type:"text",name:"name",value:t.name,onChange:p,className:"w-full p-4 rounded-xl border-2 border-gray-200 focus:border-mint focus:outline-none font-lato",placeholder:"Tu nombre",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-darkgray font-poppins font-medium mb-2",children:"Email *"}),i.jsx("input",{type:"email",name:"email",value:t.email,onChange:p,className:"w-full p-4 rounded-xl border-2 border-gray-200 focus:border-lavender focus:outline-none font-lato",placeholder:"tu@email.com",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-darkgray font-poppins font-medium mb-2",children:"Teléfono"}),i.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:p,className:"w-full p-4 rounded-xl border-2 border-gray-200 focus:border-turquoise focus:outline-none font-lato",placeholder:"+56 9 1234 5678"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-darkgray font-poppins font-medium mb-2",children:"Mensaje *"}),i.jsx("textarea",{rows:4,name:"message",value:t.message,onChange:p,className:"w-full p-4 rounded-xl border-2 border-gray-200 focus:border-palerose focus:outline-none font-lato",placeholder:"Cuéntanos sobre tu mascota y cómo podemos ayudarte",required:!0})]}),i.jsx("div",{className:"flex justify-center",children:typeof window<"u"&&(window.location.hostname.includes("replit.dev")||window.location.hostname==="localhost"||!1)?i.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg text-center",children:[i.jsx("i",{className:"fas fa-shield-alt text-blue-500 mr-2"}),i.jsx("span",{className:"text-blue-700 text-sm",children:"Modo desarrollo - Verificación simulada"}),s&&i.jsx("i",{className:"fas fa-check text-green-500 ml-2"})]}):i.jsx("div",{ref:o,className:"cf-turnstile","data-sitekey":"0x4AAAAAABuFJd3CiyJcNpi7","data-callback":"handleTurnstile","data-theme":"light"})}),i.jsx("button",{type:"submit",disabled:n||!s,className:"w-full bg-mint text-darkgray py-4 px-8 rounded-xl font-poppins font-semibold hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:n?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Enviando..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fas fa-paper-plane mr-2"}),"Enviar Mensaje"]})})]})]})]})]})})},YB=()=>{const[t,e]=y.useState(!1),[n,r]=y.useState("tutor"),s=o=>{r(o),e(!0)},a=[{name:"Las Condes",color:"text-mint"},{name:"Vitacura",color:"text-lavender"},{name:"Providencia",color:"text-turquoise"},{name:"Ñuñoa",color:"text-palerose"},{name:"Santiago Centro",color:"text-mint"},{name:"La Reina",color:"text-lavender"},{name:"Macul",color:"text-turquoise"},{name:"Peñalolén",color:"text-palerose"}];return i.jsxs("div",{className:"bg-warmbeige font-lato",children:[i.jsx(sB,{}),i.jsx(aB,{}),i.jsx(lB,{}),i.jsx(oB,{}),i.jsx("section",{className:"py-20 bg-gradient-to-r from-warmbeige to-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-poppins font-bold text-darkgray mb-4",children:"Zonas de Cobertura"}),i.jsx("p",{className:"text-xl text-gray-600",children:"Atendemos en las siguientes comunas de Santiago"})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map((o,l)=>i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center",children:[i.jsx("i",{className:`fas fa-map-marker-alt ${o.color} text-3xl mb-4`}),i.jsx("h3",{className:"font-poppins font-semibold text-darkgray text-lg",children:o.name})]},l))})]})}),i.jsx(qB,{}),i.jsx(WB,{}),i.jsx(GB,{}),i.jsx("section",{id:"portales",className:"py-16 bg-gradient-to-r from-mint to-turquoise",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[i.jsx("h2",{className:"text-3xl font-poppins font-bold text-white mb-6",children:"Acceso a Portales"}),i.jsx("p",{className:"text-xl text-white font-lato mb-8",children:"Accede a tu portal para gestionar la información de tus mascotas o pacientes"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-2xl",children:[i.jsx("i",{className:"fas fa-user-md text-4xl text-mint mb-4"}),i.jsx("h3",{className:"text-2xl font-poppins font-semibold text-darkgray mb-4",children:"Portal Profesional"}),i.jsx("p",{className:"text-gray-600 font-lato mb-4",children:"Gestión completa de fichas clínicas, vacunación, certificados y más"}),i.jsx("div",{className:"bg-mint/10 p-4 rounded-lg mb-4",children:i.jsxs("p",{className:"text-sm text-darkgray",children:[i.jsx("strong",{children:"Solo para profesionales registrados"})," - Las cuentas son creadas y gestionadas directamente por administración"]})}),i.jsxs("button",{onClick:()=>s("profesional"),className:"bg-mint text-darkgray px-6 py-3 rounded-xl font-poppins font-semibold hover:shadow-lg transition-all w-full",children:[i.jsx("i",{className:"fas fa-sign-in-alt mr-2"}),"Acceder al Portal"]})]}),i.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-2xl",children:[i.jsx("i",{className:"fas fa-heart text-4xl text-lavender mb-4"}),i.jsx("h3",{className:"text-2xl font-poppins font-semibold text-darkgray mb-4",children:"Portal del Tutor"}),i.jsx("p",{className:"text-gray-600 font-lato mb-4",children:"Consulta recetas, certificados, vacunas y carnet digital de tus mascotas"}),i.jsx("div",{className:"bg-lavender/10 p-4 rounded-lg mb-4",children:i.jsxs("p",{className:"text-sm text-darkgray",children:[i.jsx("strong",{children:"Solo necesitas tu RUT"})," - Sin registro de cuenta requerido"]})}),i.jsxs("a",{href:"/portal/tutor",className:"block bg-lavender text-darkgray px-6 py-3 rounded-xl font-poppins font-semibold hover:shadow-lg transition-all w-full text-center","data-testid":"link-portal-tutor",children:[i.jsx("i",{className:"fas fa-id-card mr-2"}),"Acceder con RUT"]})]})]})]})}),i.jsx(QB,{}),i.jsx("footer",{className:"bg-darkgray text-white py-12",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[i.jsx("img",{src:"/assets/logo.png",alt:"Ale Veterinaria Logo",className:"w-8 h-8"}),i.jsx("h3",{className:"text-xl font-poppins font-bold",children:"Ale Veterinaria"})]}),i.jsx("p",{className:"text-gray-300 font-lato leading-relaxed",children:"Atención veterinaria a domicilio. Cuido a tu mascota con amor y dedicación en Santiago, Chile."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-poppins font-semibold mb-4",children:"Enlaces Rápidos"}),i.jsxs("ul",{className:"space-y-2 text-gray-300 font-lato",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>{var o;return(o=document.getElementById("servicios"))==null?void 0:o.scrollIntoView({behavior:"smooth"})},className:"hover:text-mint transition-colors",children:"Servicios"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>{var o;return(o=document.getElementById("agendar"))==null?void 0:o.scrollIntoView({behavior:"smooth"})},className:"hover:text-lavender transition-colors",children:"Agendar Cita"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>{var o;return(o=document.getElementById("faq"))==null?void 0:o.scrollIntoView({behavior:"smooth"})},className:"hover:text-turquoise transition-colors",children:"FAQ"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>{var o;return(o=document.getElementById("contacto"))==null?void 0:o.scrollIntoView({behavior:"smooth"})},className:"hover:text-palerose transition-colors",children:"Contacto"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-poppins font-semibold mb-4",children:"Contacto"}),i.jsxs("ul",{className:"space-y-2 text-gray-300 font-lato",children:[i.jsxs("li",{children:[i.jsx("i",{className:"fab fa-whatsapp mr-2"}),"+56 9 7604 0797"]}),i.jsxs("li",{children:[i.jsx("i",{className:"fas fa-envelope mr-2"}),"contacto@aleveterinaria.cl"]}),i.jsxs("li",{children:[i.jsx("i",{className:"fab fa-instagram mr-2"}),"@aleveterinaria"]}),i.jsxs("li",{children:[i.jsx("i",{className:"fas fa-map-marker-alt mr-2"}),"Santiago, Chile"]})]})]})]}),i.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center text-gray-400 font-lato",children:i.jsx("p",{children:"© 2025 Ale Veterinaria Chile. Todos los derechos reservados."})})]})}),i.jsx(yI,{isOpen:t,onClose:()=>e(!1),type:n})]})},ZB="modulepreload",XB=function(t){return"/"+t},OE={},FE=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=XB(c),c in OE)return;OE[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":ZB,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((m,x)=>{p.addEventListener("load",m),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:iR,setPrototypeOf:ME,isFrozen:JB,getPrototypeOf:eV,getOwnPropertyDescriptor:tV}=Object;let{freeze:wr,seal:ds,create:aR}=Object,{apply:l0,construct:c0}=typeof Reflect<"u"&&Reflect;wr||(wr=function(e){return e});ds||(ds=function(e){return e});l0||(l0=function(e,n,r){return e.apply(n,r)});c0||(c0=function(e,n){return new e(...n)});const Wf=_r(Array.prototype.forEach),nV=_r(Array.prototype.lastIndexOf),LE=_r(Array.prototype.pop),ku=_r(Array.prototype.push),rV=_r(Array.prototype.splice),km=_r(String.prototype.toLowerCase),Xy=_r(String.prototype.toString),$E=_r(String.prototype.match),Au=_r(String.prototype.replace),sV=_r(String.prototype.indexOf),iV=_r(String.prototype.trim),ys=_r(Object.prototype.hasOwnProperty),dr=_r(RegExp.prototype.test),Pu=aV(TypeError);function _r(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return l0(t,e,r)}}function aV(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return c0(t,n)}}function ht(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:km;ME&&ME(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const a=n(s);a!==s&&(JB(e)||(e[r]=a),s=a)}t[s]=!0}return t}function oV(t){for(let e=0;e<t.length;e++)ys(t,e)||(t[e]=null);return t}function Zi(t){const e=aR(null);for(const[n,r]of iR(t))ys(t,n)&&(Array.isArray(r)?e[n]=oV(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Zi(r):e[n]=r);return e}function Iu(t,e){for(;t!==null;){const r=tV(t,e);if(r){if(r.get)return _r(r.get);if(typeof r.value=="function")return _r(r.value)}t=eV(t)}function n(){return null}return n}const UE=wr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Jy=wr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ex=wr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),lV=wr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),tx=wr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),cV=wr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zE=wr(["#text"]),BE=wr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),nx=wr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),VE=wr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Gf=wr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),dV=ds(/\{\{[\w\W]*|[\w\W]*\}\}/gm),uV=ds(/<%[\w\W]*|[\w\W]*%>/gm),hV=ds(/\$\{[\w\W]*/gm),pV=ds(/^data-[\-\w.\u00B7-\uFFFF]+$/),fV=ds(/^aria-[\-\w]+$/),oR=ds(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mV=ds(/^(?:\w+script|data):/i),gV=ds(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),lR=ds(/^html$/i),vV=ds(/^[a-z][.\w]*(-[.\w]+)+$/i);var HE=Object.freeze({__proto__:null,ARIA_ATTR:fV,ATTR_WHITESPACE:gV,CUSTOM_ELEMENT:vV,DATA_ATTR:pV,DOCTYPE_NAME:lR,ERB_EXPR:uV,IS_ALLOWED_URI:oR,IS_SCRIPT_OR_DATA:mV,MUSTACHE_EXPR:dV,TMPLIT_EXPR:hV});const Ru={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},yV=function(){return typeof window>"u"?null:window},xV=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const a="dompurify"+(r?"#"+r:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},qE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function cR(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yV();const e=Te=>cR(Te);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Ru.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:u,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:m,trustedTypes:x}=t,N=c.prototype,w=Iu(N,"cloneNode"),b=Iu(N,"remove"),S=Iu(N,"nextSibling"),v=Iu(N,"childNodes"),T=Iu(N,"parentNode");if(typeof o=="function"){const Te=n.createElement("template");Te.content&&Te.content.ownerDocument&&(n=Te.content.ownerDocument)}let I,L="";const{implementation:R,createNodeIterator:C,createDocumentFragment:_,getElementsByTagName:P}=n,{importNode:A}=r;let F=qE();e.isSupported=typeof iR=="function"&&typeof T=="function"&&R&&R.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:D,ERB_EXPR:E,TMPLIT_EXPR:$,DATA_ATTR:G,ARIA_ATTR:se,IS_SCRIPT_OR_DATA:de,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:ce}=HE;let{IS_ALLOWED_URI:ue}=HE,we=null;const $e=ht({},[...UE,...Jy,...ex,...tx,...zE]);let B=null;const me=ht({},[...BE,...nx,...VE,...Gf]);let ve=Object.seal(aR(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ge=null,ye=null,Xe=!0,Ye=!0,Je=!1,Ve=!0,Ke=!1,At=!0,Re=!1,Pt=!1,ln=!1,sn=!1,st=!1,et=!1,gn=!0,En=!1;const U="user-content-";let H=!0,ne=!1,xe={},le=null;const K=ht({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ge=null;const it=ht({},["audio","video","img","source","image","track"]);let It=null;const Mt=ht({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ar="http://www.w3.org/1998/Math/MathML",Un="http://www.w3.org/2000/svg",vn="http://www.w3.org/1999/xhtml";let Pe=vn,Ht=!1,at=null;const cn=ht({},[ar,Un,vn],Xy);let Ct=ht({},["mi","mo","mn","ms","mtext"]),In=ht({},["annotation-xml"]);const zt=ht({},["title","style","font","a","script"]);let zn=null;const Zt=["application/xhtml+xml","text/html"],Bn="text/html";let Kt=null,wt=null;const Qr=n.createElement("form"),hs=function(z){return z instanceof RegExp||z instanceof Function},ri=function(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(wt&&wt===z)){if((!z||typeof z!="object")&&(z={}),z=Zi(z),zn=Zt.indexOf(z.PARSER_MEDIA_TYPE)===-1?Bn:z.PARSER_MEDIA_TYPE,Kt=zn==="application/xhtml+xml"?Xy:km,we=ys(z,"ALLOWED_TAGS")?ht({},z.ALLOWED_TAGS,Kt):$e,B=ys(z,"ALLOWED_ATTR")?ht({},z.ALLOWED_ATTR,Kt):me,at=ys(z,"ALLOWED_NAMESPACES")?ht({},z.ALLOWED_NAMESPACES,Xy):cn,It=ys(z,"ADD_URI_SAFE_ATTR")?ht(Zi(Mt),z.ADD_URI_SAFE_ATTR,Kt):Mt,ge=ys(z,"ADD_DATA_URI_TAGS")?ht(Zi(it),z.ADD_DATA_URI_TAGS,Kt):it,le=ys(z,"FORBID_CONTENTS")?ht({},z.FORBID_CONTENTS,Kt):K,Ge=ys(z,"FORBID_TAGS")?ht({},z.FORBID_TAGS,Kt):Zi({}),ye=ys(z,"FORBID_ATTR")?ht({},z.FORBID_ATTR,Kt):Zi({}),xe=ys(z,"USE_PROFILES")?z.USE_PROFILES:!1,Xe=z.ALLOW_ARIA_ATTR!==!1,Ye=z.ALLOW_DATA_ATTR!==!1,Je=z.ALLOW_UNKNOWN_PROTOCOLS||!1,Ve=z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ke=z.SAFE_FOR_TEMPLATES||!1,At=z.SAFE_FOR_XML!==!1,Re=z.WHOLE_DOCUMENT||!1,sn=z.RETURN_DOM||!1,st=z.RETURN_DOM_FRAGMENT||!1,et=z.RETURN_TRUSTED_TYPE||!1,ln=z.FORCE_BODY||!1,gn=z.SANITIZE_DOM!==!1,En=z.SANITIZE_NAMED_PROPS||!1,H=z.KEEP_CONTENT!==!1,ne=z.IN_PLACE||!1,ue=z.ALLOWED_URI_REGEXP||oR,Pe=z.NAMESPACE||vn,Ct=z.MATHML_TEXT_INTEGRATION_POINTS||Ct,In=z.HTML_INTEGRATION_POINTS||In,ve=z.CUSTOM_ELEMENT_HANDLING||{},z.CUSTOM_ELEMENT_HANDLING&&hs(z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ve.tagNameCheck=z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),z.CUSTOM_ELEMENT_HANDLING&&hs(z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ve.attributeNameCheck=z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),z.CUSTOM_ELEMENT_HANDLING&&typeof z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ve.allowCustomizedBuiltInElements=z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ke&&(Ye=!1),st&&(sn=!0),xe&&(we=ht({},zE),B=[],xe.html===!0&&(ht(we,UE),ht(B,BE)),xe.svg===!0&&(ht(we,Jy),ht(B,nx),ht(B,Gf)),xe.svgFilters===!0&&(ht(we,ex),ht(B,nx),ht(B,Gf)),xe.mathMl===!0&&(ht(we,tx),ht(B,VE),ht(B,Gf))),z.ADD_TAGS&&(we===$e&&(we=Zi(we)),ht(we,z.ADD_TAGS,Kt)),z.ADD_ATTR&&(B===me&&(B=Zi(B)),ht(B,z.ADD_ATTR,Kt)),z.ADD_URI_SAFE_ATTR&&ht(It,z.ADD_URI_SAFE_ATTR,Kt),z.FORBID_CONTENTS&&(le===K&&(le=Zi(le)),ht(le,z.FORBID_CONTENTS,Kt)),H&&(we["#text"]=!0),Re&&ht(we,["html","head","body"]),we.table&&(ht(we,["tbody"]),delete Ge.tbody),z.TRUSTED_TYPES_POLICY){if(typeof z.TRUSTED_TYPES_POLICY.createHTML!="function")throw Pu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof z.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Pu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');I=z.TRUSTED_TYPES_POLICY,L=I.createHTML("")}else I===void 0&&(I=xV(x,s)),I!==null&&typeof L=="string"&&(L=I.createHTML(""));wr&&wr(z),wt=z}},dn=ht({},[...Jy,...ex,...lV]),ot=ht({},[...tx,...cV]),Rn=function(z){let he=T(z);(!he||!he.tagName)&&(he={namespaceURI:Pe,tagName:"template"});const je=km(z.tagName),Rt=km(he.tagName);return at[z.namespaceURI]?z.namespaceURI===Un?he.namespaceURI===vn?je==="svg":he.namespaceURI===ar?je==="svg"&&(Rt==="annotation-xml"||Ct[Rt]):!!dn[je]:z.namespaceURI===ar?he.namespaceURI===vn?je==="math":he.namespaceURI===Un?je==="math"&&In[Rt]:!!ot[je]:z.namespaceURI===vn?he.namespaceURI===Un&&!In[Rt]||he.namespaceURI===ar&&!Ct[Rt]?!1:!ot[je]&&(zt[je]||!dn[je]):!!(zn==="application/xhtml+xml"&&at[z.namespaceURI]):!1},Dn=function(z){ku(e.removed,{element:z});try{T(z).removeChild(z)}catch{b(z)}},si=function(z,he){try{ku(e.removed,{attribute:he.getAttributeNode(z),from:he})}catch{ku(e.removed,{attribute:null,from:he})}if(he.removeAttribute(z),z==="is")if(sn||st)try{Dn(he)}catch{}else try{he.setAttribute(z,"")}catch{}},tc=function(z){let he=null,je=null;if(ln)z="<remove></remove>"+z;else{const Bt=$E(z,/^[\r\n\t ]+/);je=Bt&&Bt[0]}zn==="application/xhtml+xml"&&Pe===vn&&(z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+z+"</body></html>");const Rt=I?I.createHTML(z):z;if(Pe===vn)try{he=new m().parseFromString(Rt,zn)}catch{}if(!he||!he.documentElement){he=R.createDocument(Pe,"template",null);try{he.documentElement.innerHTML=Ht?L:Rt}catch{}}const yn=he.body||he.documentElement;return z&&je&&yn.insertBefore(n.createTextNode(je),yn.childNodes[0]||null),Pe===vn?P.call(he,Re?"html":"body")[0]:Re?he.documentElement:yn},ps=function(z){return C.call(z.ownerDocument||z,z,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},$o=function(z){return z instanceof p&&(typeof z.nodeName!="string"||typeof z.textContent!="string"||typeof z.removeChild!="function"||!(z.attributes instanceof h)||typeof z.removeAttribute!="function"||typeof z.setAttribute!="function"||typeof z.namespaceURI!="string"||typeof z.insertBefore!="function"||typeof z.hasChildNodes!="function")},nc=function(z){return typeof l=="function"&&z instanceof l};function or(Te,z,he){Wf(Te,je=>{je.call(e,z,he,wt)})}const rc=function(z){let he=null;if(or(F.beforeSanitizeElements,z,null),$o(z))return Dn(z),!0;const je=Kt(z.nodeName);if(or(F.uponSanitizeElement,z,{tagName:je,allowedTags:we}),At&&z.hasChildNodes()&&!nc(z.firstElementChild)&&dr(/<[/\w!]/g,z.innerHTML)&&dr(/<[/\w!]/g,z.textContent)||z.nodeType===Ru.progressingInstruction||At&&z.nodeType===Ru.comment&&dr(/<[/\w]/g,z.data))return Dn(z),!0;if(!we[je]||Ge[je]){if(!Ge[je]&&ii(je)&&(ve.tagNameCheck instanceof RegExp&&dr(ve.tagNameCheck,je)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(je)))return!1;if(H&&!le[je]){const Rt=T(z)||z.parentNode,yn=v(z)||z.childNodes;if(yn&&Rt){const Bt=yn.length;for(let jn=Bt-1;jn>=0;--jn){const cr=w(yn[jn],!0);cr.__removalCount=(z.__removalCount||0)+1,Rt.insertBefore(cr,S(z))}}}return Dn(z),!0}return z instanceof c&&!Rn(z)||(je==="noscript"||je==="noembed"||je==="noframes")&&dr(/<\/no(script|embed|frames)/i,z.innerHTML)?(Dn(z),!0):(Ke&&z.nodeType===Ru.text&&(he=z.textContent,Wf([D,E,$],Rt=>{he=Au(he,Rt," ")}),z.textContent!==he&&(ku(e.removed,{element:z.cloneNode()}),z.textContent=he)),or(F.afterSanitizeElements,z,null),!1)},Ta=function(z,he,je){if(gn&&(he==="id"||he==="name")&&(je in n||je in Qr))return!1;if(!(Ye&&!ye[he]&&dr(G,he))){if(!(Xe&&dr(se,he))){if(!B[he]||ye[he]){if(!(ii(z)&&(ve.tagNameCheck instanceof RegExp&&dr(ve.tagNameCheck,z)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(z))&&(ve.attributeNameCheck instanceof RegExp&&dr(ve.attributeNameCheck,he)||ve.attributeNameCheck instanceof Function&&ve.attributeNameCheck(he))||he==="is"&&ve.allowCustomizedBuiltInElements&&(ve.tagNameCheck instanceof RegExp&&dr(ve.tagNameCheck,je)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(je))))return!1}else if(!It[he]){if(!dr(ue,Au(je,Q,""))){if(!((he==="src"||he==="xlink:href"||he==="href")&&z!=="script"&&sV(je,"data:")===0&&ge[z])){if(!(Je&&!dr(de,Au(je,Q,"")))){if(je)return!1}}}}}}return!0},ii=function(z){return z!=="annotation-xml"&&$E(z,ce)},lr=function(z){or(F.beforeSanitizeAttributes,z,null);const{attributes:he}=z;if(!he||$o(z))return;const je={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B,forceKeepAttr:void 0};let Rt=he.length;for(;Rt--;){const yn=he[Rt],{name:Bt,namespaceURI:jn,value:cr}=yn,jr=Kt(Bt),Yr=cr;let Ie=Bt==="value"?Yr:iV(Yr);if(je.attrName=jr,je.attrValue=Ie,je.keepAttr=!0,je.forceKeepAttr=void 0,or(F.uponSanitizeAttribute,z,je),Ie=je.attrValue,En&&(jr==="id"||jr==="name")&&(si(Bt,z),Ie=U+Ie),At&&dr(/((--!?|])>)|<\/(style|title)/i,Ie)){si(Bt,z);continue}if(je.forceKeepAttr)continue;if(!je.keepAttr){si(Bt,z);continue}if(!Ve&&dr(/\/>/i,Ie)){si(Bt,z);continue}Ke&&Wf([D,E,$],ai=>{Ie=Au(Ie,ai," ")});const ic=Kt(z.nodeName);if(!Ta(ic,jr,Ie)){si(Bt,z);continue}if(I&&typeof x=="object"&&typeof x.getAttributeType=="function"&&!jn)switch(x.getAttributeType(ic,jr)){case"TrustedHTML":{Ie=I.createHTML(Ie);break}case"TrustedScriptURL":{Ie=I.createScriptURL(Ie);break}}if(Ie!==Yr)try{jn?z.setAttributeNS(jn,Bt,Ie):z.setAttribute(Bt,Ie),$o(z)?Dn(z):LE(e.removed)}catch{si(Bt,z)}}or(F.afterSanitizeAttributes,z,null)},sc=function Te(z){let he=null;const je=ps(z);for(or(F.beforeSanitizeShadowDOM,z,null);he=je.nextNode();)or(F.uponSanitizeShadowNode,he,null),rc(he),lr(he),he.content instanceof a&&Te(he.content);or(F.afterSanitizeShadowDOM,z,null)};return e.sanitize=function(Te){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},he=null,je=null,Rt=null,yn=null;if(Ht=!Te,Ht&&(Te="<!-->"),typeof Te!="string"&&!nc(Te))if(typeof Te.toString=="function"){if(Te=Te.toString(),typeof Te!="string")throw Pu("dirty is not a string, aborting")}else throw Pu("toString is not a function");if(!e.isSupported)return Te;if(Pt||ri(z),e.removed=[],typeof Te=="string"&&(ne=!1),ne){if(Te.nodeName){const cr=Kt(Te.nodeName);if(!we[cr]||Ge[cr])throw Pu("root node is forbidden and cannot be sanitized in-place")}}else if(Te instanceof l)he=tc("<!---->"),je=he.ownerDocument.importNode(Te,!0),je.nodeType===Ru.element&&je.nodeName==="BODY"||je.nodeName==="HTML"?he=je:he.appendChild(je);else{if(!sn&&!Ke&&!Re&&Te.indexOf("<")===-1)return I&&et?I.createHTML(Te):Te;if(he=tc(Te),!he)return sn?null:et?L:""}he&&ln&&Dn(he.firstChild);const Bt=ps(ne?Te:he);for(;Rt=Bt.nextNode();)rc(Rt),lr(Rt),Rt.content instanceof a&&sc(Rt.content);if(ne)return Te;if(sn){if(st)for(yn=_.call(he.ownerDocument);he.firstChild;)yn.appendChild(he.firstChild);else yn=he;return(B.shadowroot||B.shadowrootmode)&&(yn=A.call(r,yn,!0)),yn}let jn=Re?he.outerHTML:he.innerHTML;return Re&&we["!doctype"]&&he.ownerDocument&&he.ownerDocument.doctype&&he.ownerDocument.doctype.name&&dr(lR,he.ownerDocument.doctype.name)&&(jn="<!DOCTYPE "+he.ownerDocument.doctype.name+`>
`+jn),Ke&&Wf([D,E,$],cr=>{jn=Au(jn,cr," ")}),I&&et?I.createHTML(jn):jn},e.setConfig=function(){let Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ri(Te),Pt=!0},e.clearConfig=function(){wt=null,Pt=!1},e.isValidAttribute=function(Te,z,he){wt||ri({});const je=Kt(Te),Rt=Kt(z);return Ta(je,Rt,he)},e.addHook=function(Te,z){typeof z=="function"&&ku(F[Te],z)},e.removeHook=function(Te,z){if(z!==void 0){const he=nV(F[Te],z);return he===-1?void 0:rV(F[Te],he,1)[0]}return LE(F[Te])},e.removeHooks=function(Te){F[Te]=[]},e.removeAllHooks=function(){F=qE()},e}var kg=cR();const mJ=Object.freeze(Object.defineProperty({__proto__:null,default:kg},Symbol.toStringTag,{value:"Module"})),Et=y.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:mt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Et.displayName="Textarea";const bV=Ev("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $r({className:t,variant:e,...n}){return i.jsx("div",{className:mt(bV({variant:e}),t),...n})}var rx="rovingFocusGroup.onEntryFocus",wV={bubbles:!1,cancelable:!0},Hv="RovingFocusGroup",[d0,dR,_V]=Zw(Hv),[CV,uR]=Na(Hv,[_V]),[SV,EV]=CV(Hv),hR=y.forwardRef((t,e)=>i.jsx(d0.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(d0.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(jV,{...t,ref:e})})}));hR.displayName=Hv;var jV=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...p}=t,m=y.useRef(null),x=Ft(e,m),N=$1(a),[w=null,b]=qd({prop:o,defaultProp:l,onChange:c}),[S,v]=y.useState(!1),T=Or(u),I=dR(n),L=y.useRef(!1),[R,C]=y.useState(0);return y.useEffect(()=>{const _=m.current;if(_)return _.addEventListener(rx,T),()=>_.removeEventListener(rx,T)},[T]),i.jsx(SV,{scope:n,orientation:r,dir:N,loop:s,currentTabStopId:w,onItemFocus:y.useCallback(_=>b(_),[b]),onItemShiftTab:y.useCallback(()=>v(!0),[]),onFocusableItemAdd:y.useCallback(()=>C(_=>_+1),[]),onFocusableItemRemove:y.useCallback(()=>C(_=>_-1),[]),children:i.jsx(ct.div,{tabIndex:S||R===0?-1:0,"data-orientation":r,...p,ref:x,style:{outline:"none",...t.style},onMouseDown:He(t.onMouseDown,()=>{L.current=!0}),onFocus:He(t.onFocus,_=>{const P=!L.current;if(_.target===_.currentTarget&&P&&!S){const A=new CustomEvent(rx,wV);if(_.currentTarget.dispatchEvent(A),!A.defaultPrevented){const F=I().filter(se=>se.focusable),D=F.find(se=>se.active),E=F.find(se=>se.id===w),G=[D,E,...F].filter(Boolean).map(se=>se.ref.current);mR(G,h)}}L.current=!1}),onBlur:He(t.onBlur,()=>v(!1))})})}),pR="RovingFocusGroupItem",fR=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,...o}=t,l=vo(),c=a||l,u=EV(pR,n),h=u.currentTabStopId===c,p=dR(n),{onFocusableItemAdd:m,onFocusableItemRemove:x}=u;return y.useEffect(()=>{if(r)return m(),()=>x()},[r,m,x]),i.jsx(d0.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:i.jsx(ct.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:He(t.onMouseDown,N=>{r?u.onItemFocus(c):N.preventDefault()}),onFocus:He(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:He(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){u.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const w=kV(N,u.orientation,u.dir);if(w!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let S=p().filter(v=>v.focusable).map(v=>v.ref.current);if(w==="last")S.reverse();else if(w==="prev"||w==="next"){w==="prev"&&S.reverse();const v=S.indexOf(N.currentTarget);S=u.loop?AV(S,v+1):S.slice(v+1)}setTimeout(()=>mR(S))}})})})});fR.displayName=pR;var NV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function TV(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function kV(t,e,n){const r=TV(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return NV[r]}function mR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function AV(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var PV=hR,IV=fR,H1="Tabs",[RV,gJ]=Na(H1,[uR]),gR=uR(),[DV,q1]=RV(H1),vR=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=$1(l),[p,m]=qd({prop:r,onChange:s,defaultProp:a});return i.jsx(DV,{scope:n,baseId:vo(),value:p,onValueChange:m,orientation:o,dir:h,activationMode:c,children:i.jsx(ct.div,{dir:h,"data-orientation":o,...u,ref:e})})});vR.displayName=H1;var yR="TabsList",xR=y.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=q1(yR,n),o=gR(n);return i.jsx(PV,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(ct.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});xR.displayName=yR;var bR="TabsTrigger",wR=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,o=q1(bR,n),l=gR(n),c=SR(o.baseId,r),u=ER(o.baseId,r),h=r===o.value;return i.jsx(IV,{asChild:!0,...l,focusable:!s,active:h,children:i.jsx(ct.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:e,onMouseDown:He(t.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?o.onValueChange(r):p.preventDefault()}),onKeyDown:He(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(r)}),onFocus:He(t.onFocus,()=>{const p=o.activationMode!=="manual";!h&&!s&&p&&o.onValueChange(r)})})})});wR.displayName=bR;var _R="TabsContent",CR=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=t,l=q1(_R,n),c=SR(l.baseId,r),u=ER(l.baseId,r),h=r===l.value,p=y.useRef(h);return y.useEffect(()=>{const m=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(Xl,{present:s||h,children:({present:m})=>i.jsx(ct.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:m&&a})})});CR.displayName=_R;function SR(t,e){return`${t}-trigger-${e}`}function ER(t,e){return`${t}-content-${e}`}var OV=vR,jR=xR,NR=wR,TR=CR;const u0=OV,Ag=y.forwardRef(({className:t,...e},n)=>i.jsx(jR,{ref:n,className:mt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Ag.displayName=jR.displayName;const rs=y.forwardRef(({className:t,...e},n)=>i.jsx(NR,{ref:n,className:mt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));rs.displayName=NR.displayName;const ss=y.forwardRef(({className:t,...e},n)=>i.jsx(TR,{ref:n,className:mt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ss.displayName=TR.displayName;const kR="/assets/logo1_1755107256138-DqSSODu-.png",AR=t=>{if(!t)return"";const e=t.replace(/[.-]/g,"");if(e.length>=8){const n=e.slice(0,-1),r=e.slice(-1);return n.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")+"-"+r}return t},h0=(t,e,n)=>{const r=e.issueDate?ks(e.issueDate):ks(new Date),s=r,a=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>Receta Médica Veterinaria</title>
      <style>
        body { 
          font-family: 'Inter', 'Lato', Arial, sans-serif; 
          margin: 40px; 
          line-height: 1.6;
          color: #333;
          background-color: #F9F5EF;
        }
        .container {
          background: white;
          padding: 40px;
          border-radius: 15px;
          box-shadow: 0 4px 20px rgba(0,0,0,0.1);
          max-width: 800px;
          margin: 0 auto;
        }
        .header { 
          text-align: center; 
          border-bottom: 2px solid #A3CBB2; 
          padding-bottom: 20px; 
          margin-bottom: 30px;
        }
        .logo-section {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 15px;
          margin-bottom: 15px;
        }
        .clinic-logo {
          width: 70px;
          height: 70px;
          object-fit: contain;
        }

        .vet-name {
          color: #2D3748;
          font-size: 20px;
          font-weight: bold;
          margin: 15px 0 8px 0;
        }
        .vet-title {
          color: #A3CBB2;
          font-weight: 600;
          font-size: 14px;
          margin: 5px 0;
        }
        .vet-credentials {
          color: #7FB3C3;
          font-size: 12px;
          margin: 5px 0 10px 0;
        }
        .contact-info {
          font-size: 11px;
          color: #666;
          margin: 10px 0;
          line-height: 1.4;
        }
        .patient-info { 
          background: linear-gradient(135deg, #F7F9FC, #EDF2F7); 
          padding: 20px; 
          border-radius: 12px; 
          margin-bottom: 25px;
          border-left: 5px solid #A3CBB2;
        }
        .prescription-content { 
          border: 2px solid #A3CBB2; 
          padding: 25px; 
          border-radius: 12px; 
          margin: 25px 0;
          background: #FDFDFD;
        }
        .signature-area { 
          margin-top: 50px; 
          text-align: center;
          padding-top: 30px;
          border-top: 1px solid #E2E8F0;
        }
        h1 { 
          color: #2D3748; 
          font-size: 18px; 
          font-weight: bold;
          margin: 15px 0; 
          text-align: center;
        }
        h2 { 
          color: #A3CBB2; 
          font-size: 16px; 
          margin-bottom: 12px; 
          font-weight: 600;
        }
        .rx { 
          font-size: 42px; 
          color: #A3CBB2; 
          font-weight: bold; 
          float: left; 
          margin-right: 20px;
          margin-top: -5px;
        }
        .prescription-text {
          font-size: 16px;
          line-height: 1.8;
          color: #2D3748;
        }
        .slogan {
          font-style: italic;
          color: #7FB3C3;
          font-size: 14px;
          margin-top: 15px;
        }
        @media print {
          body { margin: 0; background: white; }
          .container { box-shadow: none; margin: 0; }
          .no-print { display: none; }
        }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <div class="logo-section">
            <img src="${kR}" alt="Logo" class="clinic-logo">
          </div>
          <div class="vet-name">Dra. Alejandra Cautín Bastías</div>
          <div class="vet-title">MÉDICA VETERINARIA</div>
          <div class="vet-credentials">Fear Free Certified Professional</div>
          <div class="contact-info">
            WhatsApp: +56 9 7604 0797 | Email: contacto@aleveterinaria.cl<br>
            Instagram: @aleveterinaria | Santiago, Chile
          </div>
          <h1 style="font-size: 20px; color: #2D3748; margin: 20px 0; font-weight: bold;">RECETA MÉDICA VETERINARIA</h1>
        </div>

        <div class="patient-info">
          <h2>Información del Paciente</h2>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div>
              <p><strong>Paciente:</strong> ${t.name}</p>
              <p><strong>Especie:</strong> ${t.species}</p>
              <p><strong>Raza:</strong> ${t.breed}</p>
              <p><strong>Sexo:</strong> ${t.sex} | <strong>Estado:</strong> ${t.reproductiveStatus||"No especificado"}</p>
            </div>
            <div>
              <p><strong>Tutor:</strong> ${t.tutorName}</p>
              <p><strong>RUT:</strong> ${AR(t.tutorRut)||"No especificado"}</p>
              <p><strong>Teléfono:</strong> ${t.tutorPhone||"No especificado"}</p>
              <p><strong>Fecha:</strong> ${s}</p>
            </div>
          </div>
        </div>

        <div class="prescription-content">
          <div class="rx">℞</div>
          <h2>PRESCRIPCIÓN MÉDICA</h2>
          <div style="clear: both; margin-top: 20px;" class="prescription-text">
            <p><strong>Medicamentos Prescritos:</strong></p>
            <div style="margin-left: 20px; margin-bottom: 20px;">
              ${e.medications&&e.medications.length>0?e.medications.map(l=>`
                    <div style="margin-bottom: 15px; padding: 12px; background: #F8F9FA; border-radius: 8px; border-left: 4px solid #A3CBB2;">
                      <div style="display: flex; align-items: center; margin-bottom: 8px;">
                        <p style="margin: 0; font-weight: bold; color: #2D3748; font-size: 16px; flex: 1;">${l.name}</p>
                        <span style="background: #E2E8F0; color: #4A5568; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 500;">
                          ${l.medicationType||"Medicamento"}
                        </span>
                      </div>
                      <p style="margin: 5px 0; color: #2D3748; font-size: 14px; font-weight: 500;">
                        Dar ${l.dosage} por ${l.administrationRoute} ${l.frequency} durante ${l.duration}
                      </p>
                      ${l.specialInstructions?`
                        <p style="margin: 8px 0 0 0; color: #D69E2E; font-size: 13px; background: #FFFAF0; padding: 6px 8px; border-radius: 4px; border-left: 3px solid #F6AD55;">
                          <strong>Indicaciones especiales:</strong> ${l.specialInstructions}
                        </p>
                      `:""}
                    </div>
                  `).join(""):e.treatment?e.treatment.split(`
`).map(l=>l.trim()).filter(l=>l).map(l=>{const c=l.split(" - ");return c.length>=4?`
                          <div style="margin-bottom: 15px; padding: 12px; background: #F8F9FA; border-radius: 8px; border-left: 4px solid #A3CBB2;">
                            <p style="margin: 0; font-weight: bold; color: #2D3748; font-size: 16px;">${c[0]}</p>
                            <p style="margin: 5px 0 0 0; color: #666; font-size: 14px;">
                              <strong>Dosis:</strong> ${c[1]} • <strong>Frecuencia:</strong> ${c[2]} • <strong>Duración:</strong> ${c[3]}
                            </p>
                          </div>
                        `:`
                          <div style="margin-bottom: 15px; padding: 12px; background: #F8F9FA; border-radius: 8px; border-left: 4px solid #A3CBB2;">
                            <p style="margin: 0; color: #2D3748;">${l}</p>
                          </div>
                        `}).join(""):'<p style="color: #666; font-style: italic;">No se han especificado medicamentos</p>'}
            </div>
            
            ${e.indications?`
              <p><strong>Indicaciones Especiales:</strong></p>
              <p style="margin-left: 20px; margin-bottom: 20px; padding: 10px; background: #F8F9FA; border-radius: 8px;">${e.indications}</p>
            `:""}
            
            ${e.warnings?`
              <p><strong>Advertencias y Precauciones:</strong></p>
              <p style="margin-left: 20px; margin-bottom: 20px; padding: 10px; background: #FEF5E7; border-radius: 8px; border-left: 4px solid #F6AD55;">${e.warnings}</p>
            `:""}
            
            ${e.specialInstructions?`
              <p><strong>Indicaciones Especiales de Fármacos:</strong></p>
              <p style="margin-left: 20px; margin-bottom: 20px; padding: 10px; background: #F0F9FF; border-radius: 8px; border-left: 4px solid #3B82F6;">${e.specialInstructions}</p>
            `:""}
          </div>
        </div>

        <div class="signature-area">
          <div style="margin-top: 60px; border-top: 2px solid #A3CBB2; width: 350px; margin: 60px auto 0; padding-top: 20px;">
            <p style="margin: 0; font-weight: bold; color: #2D3748;">Dra. Alejandra Cautín Bastías</p>
            <p style="margin: 5px 0; color: #A3CBB2; font-weight: 600;">Médica Veterinaria</p>
            <p style="margin: 5px 0; color: #666; font-size: 14px;">Fear Free Certified Professional</p>
            <p style="margin: 10px 0 0 0; color: #666; font-size: 13px;">Fecha: ${r}</p>
          </div>
        </div>
      </div>
    </body>
    </html>
  `,o=window.open("","_blank");o&&(o.document.write(a),o.document.close(),o.focus())},FV=(t,e)=>{const n=new Date().toLocaleDateString("es-CL");return`
    <div class="microchip-header">
      <h2 style="color: #2D3748; font-size: 20px; text-align: center; margin-bottom: 25px;">
        CERTIFICADO DE ${e.microchipType==="verification"?"VERIFICACIÓN":"IMPLANTACIÓN"} DE MICROCHIP
      </h2>
      <p style="text-align: center; color: #666; margin-bottom: 30px;">
        Documento oficial de identificación electrónica permanente
      </p>
    </div>

    <div class="microchip-section">
      <h3 style="color: #A3CBB2; font-size: 16px; margin-bottom: 15px; border-bottom: 1px solid #A3CBB2; padding-bottom: 5px;">
        I. INFORMACIÓN DEL ANIMAL
      </h3>
      <table class="data-table" style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
        <tr>
          <td style="padding: 8px; border: 1px solid #ddd; background: #f8f9fa; font-weight: bold;">Nombre:</td>
          <td style="padding: 8px; border: 1px solid #ddd;">${t.name}</td>
          <td style="padding: 8px; border: 1px solid #ddd; background: #f8f9fa; font-weight: bold;">Especie:</td>
          <td style="padding: 8px; border: 1px solid #ddd;">${t.species}</td>
        </tr>
        <tr>
          <td style="padding: 8px; border: 1px solid #ddd; background: #f8f9fa; font-weight: bold;">Raza:</td>
          <td style="padding: 8px; border: 1px solid #ddd;">${t.breed}</td>
          <td style="padding: 8px; border: 1px solid #ddd; background: #f8f9fa; font-weight: bold;">Sexo:</td>
          <td style="padding: 8px; border: 1px solid #ddd;">${t.sex}</td>
        </tr>
        <tr>
          <td style="padding: 8px; border: 1px solid #ddd; background: #f8f9fa; font-weight: bold;">Edad:</td>
          <td style="padding: 8px; border: 1px solid #ddd;">${t.age||"No especificada"}</td>
          <td style="padding: 8px; border: 1px solid #ddd; background: #f8f9fa; font-weight: bold;">Color/Señas:</td>
          <td style="padding: 8px; border: 1px solid #ddd;">${t.colorMarkings||"No especificadas"}</td>
        </tr>
      </table>
    </div>

    <div class="microchip-section">
      <h3 style="color: #A3CBB2; font-size: 16px; margin-bottom: 15px; border-bottom: 1px solid #A3CBB2; padding-bottom: 5px;">
        II. PROPIETARIO/RESPONSABLE
      </h3>
      <table class="data-table" style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
        <tr>
          <td style="padding: 8px; border: 1px solid #ddd; background: #f8f9fa; font-weight: bold;">Nombre:</td>
          <td style="padding: 8px; border: 1px solid #ddd;">${t.tutorName}</td>
          <td style="padding: 8px; border: 1px solid #ddd; background: #f8f9fa; font-weight: bold;">RUT:</td>
          <td style="padding: 8px; border: 1px solid #ddd;">${t.tutorRut||"No especificado"}</td>
        </tr>
        <tr>
          <td style="padding: 8px; border: 1px solid #ddd; background: #f8f9fa; font-weight: bold;">Dirección:</td>
          <td style="padding: 8px; border: 1px solid #ddd;" colspan="3">${t.tutorAddress||"No especificada"}</td>
        </tr>
        <tr>
          <td style="padding: 8px; border: 1px solid #ddd; background: #f8f9fa; font-weight: bold;">Teléfono:</td>
          <td style="padding: 8px; border: 1px solid #ddd;">${t.tutorPhone||"No especificado"}</td>
          <td style="padding: 8px; border: 1px solid #ddd; background: #f8f9fa; font-weight: bold;">Email:</td>
          <td style="padding: 8px; border: 1px solid #ddd;">${t.tutorEmail||"No especificado"}</td>
        </tr>
      </table>
    </div>

    <div class="microchip-section">
      <h3 style="color: #A3CBB2; font-size: 16px; margin-bottom: 15px; border-bottom: 1px solid #A3CBB2; padding-bottom: 5px;">
        III. INFORMACIÓN DEL MICROCHIP
      </h3>
      <div style="background: #F7F9FC; padding: 20px; border-radius: 8px; border-left: 5px solid #A3CBB2; margin-bottom: 20px;">
        <table class="data-table" style="width: 100%; border-collapse: collapse;">
          <tr>
            <td style="padding: 8px; font-weight: bold; width: 30%;">Número de Microchip:</td>
            <td style="padding: 8px; font-size: 18px; font-weight: bold; color: #2D3748; background: white; border: 2px solid #A3CBB2; border-radius: 4px;">
              ${t.microchip||"NO REGISTRADO"}
            </td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold;">Fecha de Implantación:</td>
            <td style="padding: 8px;">${e.issueDate||n}</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold;">Sitio de Implantación:</td>
            <td style="padding: 8px;">Región dorsal del cuello (subcutáneo)</td>
          </tr>
          <tr>
            <td style="padding: 8px; font-weight: bold;">Tipo de Microchip:</td>
            <td style="padding: 8px;">ISO 11784/11785 compatible (134.2 kHz)</td>
          </tr>
        </table>
      </div>
    </div>

    <div class="microchip-section">
      <h3 style="color: #A3CBB2; font-size: 16px; margin-bottom: 15px; border-bottom: 1px solid #A3CBB2; padding-bottom: 5px;">
        IV. CERTIFICACIÓN PROFESIONAL
      </h3>
      <div style="background: #F7F9FC; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
        <p style="margin: 0 0 15px 0; line-height: 1.6;">
          El suscrito Médico Veterinario <strong>CERTIFICA</strong> que:
        </p>
        <ul style="margin: 0; padding-left: 20px; line-height: 1.8;">
          <li>El microchip ha sido implantado/verificado correctamente</li>
          <li>El número de identificación es único e irrepetible</li>
          <li>El dispositivo se encuentra funcionando correctamente</li>
          <li>La implantación se realizó bajo estrictas medidas de asepsia</li>
          <li>El animal se encuentra en buen estado de salud</li>
          <li>Se registró en la base de datos nacional de identificación</li>
        </ul>
      </div>
      
      ${e.observations?`
        <div style="margin-top: 20px;">
          <h4 style="color: #2D3748; font-size: 14px; margin-bottom: 10px;">Observaciones:</h4>
          <p style="background: white; padding: 15px; border: 1px solid #ddd; border-radius: 4px; margin: 0;">
            ${e.observations}
          </p>
        </div>
      `:""}
    </div>

    <div style="margin-top: 30px; padding: 15px; background: #E6F7FF; border-radius: 8px; border-left: 5px solid #1890FF;">
      <h4 style="color: #1890FF; margin: 0 0 10px 0; font-size: 14px;">Información Importante:</h4>
      <p style="margin: 0; font-size: 12px; line-height: 1.5; color: #666;">
        Este microchip cumple con estándares ISO 11784/11785. Se recomienda verificar la legibilidad 
        del microchip anualmente. En caso de pérdida del animal, contactar inmediatamente al registro 
        nacional de mascotas con el número de microchip.
      </p>
    </div>
  `},MV=(t,e)=>`
    <div class="sag-header">
      <h2>CERTIFICADO SANITARIO DE EXPORTACIÓN</h2>
      <p><strong>SERVICIO AGRÍCOLA Y GANADERO (SAG) - CHILE</strong></p>
      <p>Certificado Nº: EXP-${Date.now()}</p>
    </div>

    <div class="export-section">
      <h3>I. IDENTIFICACIÓN DEL ANIMAL</h3>
      <table class="data-table">
        <tr>
          <td><strong>Nombre:</strong></td>
          <td>${t.name}</td>
          <td><strong>Especie:</strong></td>
          <td>${t.species}</td>
        </tr>
        <tr>
          <td><strong>Raza:</strong></td>
          <td>${t.breed}</td>
          <td><strong>Sexo:</strong></td>
          <td>${t.sex}</td>
        </tr>
        <tr>
          <td><strong>Edad:</strong></td>
          <td>${t.age||"No especificada"}</td>
          <td><strong>Peso:</strong></td>
          <td>${t.weight||"No especificado"}</td>
        </tr>
        <tr>
          <td><strong>Microchip:</strong></td>
          <td>${t.microchip||"No tiene"}</td>
          <td><strong>Color/Señas:</strong></td>
          <td>${t.colorMarkings||"No especificadas"}</td>
        </tr>
      </table>
    </div>

    <div class="export-section">
      <h3>II. IDENTIFICACIÓN DEL PROPIETARIO</h3>
      <table class="data-table">
        <tr>
          <td><strong>Nombre:</strong></td>
          <td>${t.tutorName}</td>
          <td><strong>RUT:</strong></td>
          <td>${t.tutorRut||"No especificado"}</td>
        </tr>
        <tr>
          <td><strong>Dirección:</strong></td>
          <td colspan="3">${t.tutorAddress||"No especificada"}</td>
        </tr>
        <tr>
          <td><strong>Ciudad:</strong></td>
          <td>${t.tutorCity||"No especificada"}</td>
          <td><strong>Teléfono:</strong></td>
          <td>${t.tutorPhone||"No especificado"}</td>
        </tr>
      </table>
    </div>

    <div class="export-section">
      <h3>III. ESTADO SANITARIO</h3>
      <p>El suscrito Médico Veterinario CERTIFICA que el animal descrito:</p>
      <ul class="certification-list">
        <li>Ha sido examinado clínicamente y se encuentra en buen estado de salud</li>
        <li>No presenta síntomas ni signos de enfermedades transmisibles</li>
        <li>Procede de un área libre de enfermedades cuarentenarias</li>
        <li>Cumple con los requisitos sanitarios para exportación</li>
        <li>Ha sido vacunado según el esquema adjunto (Anexo)</li>
        <li>Se encuentra apto para el transporte internacional</li>
      </ul>
    </div>

    <div class="export-section">
      <h3>IV. VACUNAS APLICADAS</h3>
      <table class="vaccine-table">
        <thead>
          <tr>
            <th>Vacuna</th>
            <th>Laboratorio</th>
            <th>Lote</th>
            <th>Fecha Aplicación</th>
            <th>Vencimiento</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td colspan="5" style="text-align: center; padding: 20px; color: #666;">
              Completar según registro de vacunas del paciente
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="export-section">
      <h3>V. DESPARASITACIONES APLICADAS</h3>
      <table class="vaccine-table">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Principio Activo</th>
            <th>Laboratorio</th>
            <th>Fecha Aplicación</th>
            <th>Próxima Dosis</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td colspan="5" style="text-align: center; padding: 20px; color: #666;">
              Completar según registro de desparasitaciones del paciente
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="export-section">
      <h3>VI. INFORMACIÓN ADICIONAL</h3>
      <p><strong>Destino:</strong> ${e.purpose||"Por definir"}</p>
      <p><strong>Observaciones:</strong> ${e.observations||"Ninguna"}</p>
      <p><strong>Fecha de Examen:</strong> ${e.issueDate}</p>
      <p><strong>Validez:</strong> 10 días desde la fecha de emisión</p>
      
      <div style="margin-top: 25px; padding: 15px; background: #F7F9FC; border-radius: 8px; border-left: 5px solid #A3CBB2;">
        <h4 style="color: #2D3748; margin: 0 0 10px 0; font-size: 14px;">Declaración Oficial:</h4>
        <p style="margin: 0; font-size: 13px; line-height: 1.5;">
          El presente certificado se emite de acuerdo con los requisitos sanitarios vigentes del SAG 
          y cumple con las normativas internacionales para el transporte de animales de compañía. 
          La información contenida es verídica y se basa en el examen clínico realizado.
        </p>
      </div>
    </div>
  `,LV=async(t,e)=>{try{const n=await fetch(`/api/vaccinations/firebase/pet/${t.id}`),r=n.ok?await n.json():[],s=new Date;let a="NO VIGENTE",o="#dc2626";r.length>0&&r.filter(u=>u.nextDate?new Date(u.nextDate)>s:!1).length>0&&(a="VIGENTE",o="#16a34a");let l="";return r.length>0?l=`
        <table class="vaccine-table" style="margin-top: 20px;">
          <thead>
            <tr>
              <th>Vacuna</th>
              <th>Laboratorio</th>
              <th>Fecha Aplicación</th>
              <th>Próxima Vacuna</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody>
            ${r.map(c=>{const u=c.nextDate&&new Date(c.nextDate)>s,h=u?"Vigente":"Vencida",p=u?"color: #16a34a; font-weight: bold;":"color: #dc2626; font-weight: bold;";return`
                <tr>
                  <td>${c.vaccine||"No especificada"}</td>
                  <td>${c.laboratory||"No especificado"}</td>
                  <td>${c.applicationDate||"No especificada"}</td>
                  <td>${c.nextDate||"No programada"}</td>
                  <td style="${p}">${h}</td>
                </tr>
              `}).join("")}
          </tbody>
        </table>
      `:l=`
        <div style="text-align: center; padding: 20px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; margin-top: 20px;">
          <p style="color: #6c757d; margin: 0;">No se encontraron registros de vacunación para este paciente</p>
        </div>
      `,`
      <div style="margin-bottom: 25px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
          <h3 style="margin: 0; color: #2D3748;">ESTADO DE VACUNACIÓN</h3>
          <span style="background: ${o}; color: white; padding: 8px 16px; border-radius: 20px; font-weight: bold; font-size: 14px;">
            ${a}
          </span>
        </div>
        
        <p>Certifico que el animal descrito cuenta con el siguiente historial de vacunación:</p>
        <p><strong>Propósito:</strong> ${e.purpose||"Certificación de vacunas"}</p>
        
        ${l}
        
        <div style="margin-top: 20px; padding: 15px; background: #f7f9fc; border-left: 4px solid #A3CBB2; border-radius: 4px;">
          <p style="margin: 0; font-size: 14px; color: #2D3748;">
            <strong>Evaluación Profesional:</strong> 
            ${a==="VIGENTE"?"El animal presenta un estado de vacunación adecuado y vigente según el protocolo establecido.":"Se recomienda actualizar el esquema de vacunación según el protocolo correspondiente a la especie y edad del animal."}
          </p>
        </div>
      </div>
    `}catch(n){return console.error("Error fetching vaccination history:",n),`
      <p>Certifico que el animal descrito cuenta con el esquema de vacunación apropiado para su especie y edad.</p>
      <p><strong>Propósito:</strong> ${e.purpose||"Certificación de vacunas"}</p>
      <p style="color: #dc2626; font-style: italic;">Nota: No se pudo recuperar el historial completo de vacunación.</p>
    `}},$V=async(t,e)=>{try{const n=await fetch(`/api/dewormings/firebase/pet/${t.id}`),r=n.ok?await n.json():[],s=new Date;let a="NO VIGENTE",o="#dc2626";r.length>0&&r.filter(u=>{if(u.applicationDate){const h=new Date(u.applicationDate);return(s.getTime()-h.getTime())/(1e3*60*60*24*30)<=6}return!1}).length>0&&(a="VIGENTE",o="#16a34a");let l="";return r.length>0?l=`
        <table class="vaccine-table" style="margin-top: 20px;">
          <thead>
            <tr>
              <th>Producto</th>
              <th>Principio Activo</th>
              <th>Laboratorio</th>
              <th>Fecha Aplicación</th>
              <th>Duración/Frecuencia</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody>
            ${r.map(c=>{const u=new Date(c.applicationDate),p=(s.getTime()-u.getTime())/(1e3*60*60*24*30)<=6,m=p?"Vigente":"Requiere renovación",x=p?"color: #16a34a; font-weight: bold;":"color: #dc2626; font-weight: bold;";let N="No especificada";return c.duration?N={"1-month":"Duración: 1 mes (antiparasitarios externos)","3-months":"Duración: 3 meses (desparasitación interna estándar)","4-months":"Duración: 4 meses (desparasitación interna extendida)","6-months":"Duración: 6 meses (según criterio médico)",custom:"Duración personalizada (ver observaciones)"}[c.duration]||`Duración: ${c.duration}`:c.type==="internal"?N="Desparasitación interna - 3-4 meses (recomendación estándar)":c.type==="external"&&(N="Desparasitación externa - mensual (recomendación estándar)"),`
                <tr>
                  <td>${c.product||"No especificado"}</td>
                  <td>${c.activeIngredient||"No especificado"}</td>
                  <td>${c.laboratory||"No especificado"}</td>
                  <td>${c.applicationDate||"No especificada"}</td>
                  <td style="font-size: 12px;">${N}</td>
                  <td style="${x}">${m}</td>
                </tr>
              `}).join("")}
          </tbody>
        </table>
      `:l=`
        <div style="text-align: center; padding: 20px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; margin-top: 20px;">
          <p style="color: #6c757d; margin: 0;">No se encontraron registros de desparasitación para este paciente</p>
        </div>
      `,`
      <div style="margin-bottom: 25px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
          <h3 style="margin: 0; color: #2D3748;">ESTADO DE DESPARASITACIÓN</h3>
          <span style="background: ${o}; color: white; padding: 8px 16px; border-radius: 20px; font-weight: bold; font-size: 14px;">
            ${a}
          </span>
        </div>
        
        <p>Certifico que el animal descrito cuenta con el siguiente historial de desparasitación:</p>
        <p><strong>Propósito:</strong> ${e.purpose||"Certificación de desparasitación"}</p>
        
        ${l}
        
        <div style="margin-top: 20px; padding: 15px; background: #f7f9fc; border-left: 4px solid #A3CBB2; border-radius: 4px;">
          <p style="margin: 0; font-size: 14px; color: #2D3748;">
            <strong>Evaluación Profesional:</strong> 
            ${a==="VIGENTE"?"El animal presenta un estado de desparasitación adecuado según el protocolo establecido.":"Se recomienda aplicar desparasitación según el protocolo correspondiente a la especie, edad y condiciones del animal."}
          </p>
        </div>
      </div>
    `}catch(n){return console.error("Error fetching deworming history:",n),`
      <p>Certifico que el animal descrito cuenta con el esquema de desparasitación apropiado para su especie y edad.</p>
      <p><strong>Propósito:</strong> ${e.purpose||"Certificación de desparasitación"}</p>
      <p style="color: #dc2626; font-style: italic;">Nota: No se pudo recuperar el historial completo de desparasitación.</p>
    `}},Pg=async(t,e,n)=>{const r=new Date().toLocaleDateString("es-CL");let s="",a="";switch(e.certificateType){case"health":s="CERTIFICADO DE SALUD ANIMAL",a=`
        <p>La suscrita, Médica Veterinaria, certifica que el animal descrito a continuación:</p>
        <ul>
          <li>Se encuentra en buen estado de salud general</li>
          <li>No presenta signos clínicos de enfermedades transmisibles</li>
          <li>Está apto para el propósito indicado: <strong>${e.purpose||"General"}</strong></li>
        </ul>
      `;break;case"vaccination":s="CERTIFICADO DE VACUNACIÓN",a=await LV(t,e);break;case"deworming":s="CERTIFICADO DE DESPARASITACIÓN",a=await $V(t,e);break;case"export":s="CERTIFICADO SANITARIO DE EXPORTACIÓN",a=MV(t,e);break;case"microchip":s="CERTIFICADO DE IMPLANTACIÓN/VERIFICACIÓN DE MICROCHIP",a=FV(t,e);break;default:s="CERTIFICADO VETERINARIO",a=`
        <p>Certifico la condición sanitaria del animal descrito.</p>
        <p><strong>Propósito:</strong> ${e.purpose||"General"}</p>
      `}const o=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>${s}</title>
      <style>
        body { 
          font-family: 'Inter', 'Lato', Arial, sans-serif; 
          margin: 30px; 
          line-height: 1.5;
          color: #333;
          background-color: #F9F5EF;
        }
        .container {
          background: white;
          padding: 40px;
          border-radius: 15px;
          box-shadow: 0 4px 20px rgba(0,0,0,0.1);
          max-width: 900px;
          margin: 0 auto;
        }
        .header { 
          text-align: center; 
          border-bottom: 3px solid #A3CBB2; 
          padding-bottom: 25px; 
          margin-bottom: 30px; 
        }
        .logo-section {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 15px;
          margin-bottom: 15px;
        }
        .clinic-logo {
          width: 70px;
          height: 70px;
          object-fit: contain;
        }
        .logo { 
          background: linear-gradient(135deg, #A3CBB2, #7FB3C3);
          -webkit-background-clip: text;
          background-clip: text;
          -webkit-text-fill-color: transparent;
          font-family: 'Playfair Display', serif;
          font-size: 28px; 
          font-weight: bold; 
          letter-spacing: 2px;
          margin-bottom: 15px;
        }
        .vet-name {
          font-family: 'Playfair Display', serif;
          font-size: 22px;
          color: #2D3748;
          margin: 10px 0;
          font-weight: 600;
        }
        .vet-title {
          color: #A3CBB2;
          font-weight: bold;
          font-size: 14px;
          margin-bottom: 5px;
        }
        .fear-free-badge {
          background: linear-gradient(135deg, #A3CBB2, #7FB3C3);
          color: white;
          padding: 4px 12px;
          border-radius: 20px;
          font-size: 11px;
          font-weight: bold;
          display: inline-block;
          margin: 8px 0;
        }
        .contact-info {
          font-size: 12px;
          color: #666;
          margin-top: 10px;
        }
        .vet-info { 
          text-align: center; 
          margin-bottom: 25px;
        }
        .patient-info { 
          background: linear-gradient(135deg, #F7F9FC, #EDF2F7); 
          padding: 20px; 
          border-radius: 12px; 
          margin-bottom: 25px;
          border-left: 5px solid #A3CBB2;
        }
        .certificate-content { 
          margin: 25px 0;
        }
        .signature-area { 
          margin-top: 50px; 
          text-align: center;
          padding-top: 30px;
          border-top: 1px solid #E2E8F0;
        }
        h1 { 
          color: #2D3748; 
          font-size: 24px; 
          margin: 15px 0; 
          font-family: 'Playfair Display', serif;
        }
        h2 { 
          color: #A3CBB2; 
          font-size: 20px; 
          margin-bottom: 15px; 
          font-weight: 600;
          text-align: center;
        }
        h3 { 
          color: #2D3748; 
          font-size: 16px; 
          margin: 20px 0 10px 0; 
          font-weight: 600;
          border-bottom: 2px solid #A3CBB2;
          padding-bottom: 5px;
        }
        .slogan {
          font-style: italic;
          color: #7FB3C3;
          font-size: 12px;
          margin-top: 10px;
        }
        /* SAG Export Certificate Styles */
        .sag-header {
          text-align: center;
          margin-bottom: 30px;
          padding: 20px;
          border: 2px solid #A3CBB2;
          border-radius: 10px;
          background: linear-gradient(135deg, #F7F9FC, #EDF2F7);
        }
        .export-section {
          margin-bottom: 25px;
          padding: 15px;
          border-radius: 8px;
          background: #FDFDFD;
        }
        .data-table, .vaccine-table {
          width: 100%;
          border-collapse: collapse;
          margin: 15px 0;
          font-size: 14px;
        }
        .data-table td, .vaccine-table td, .vaccine-table th {
          border: 1px solid #A3CBB2;
          padding: 8px;
          text-align: left;
        }
        .vaccine-table th {
          background: #A3CBB2;
          color: white;
          font-weight: bold;
          text-align: center;
        }
        .certification-list {
          list-style-type: none;
          padding-left: 0;
        }
        .certification-list li {
          margin: 8px 0;
          padding: 8px 0 8px 20px;
          position: relative;
        }
        .certification-list li:before {
          content: "✓";
          color: #A3CBB2;
          font-weight: bold;
          position: absolute;
          left: 0;
        }
        @media print {
          body { margin: 0; background: white; }
          .container { box-shadow: none; margin: 0; }
          .no-print { display: none; }
        }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <div class="logo-section">
            <img src="${kR}" alt="Logo" class="clinic-logo">
          </div>
          <div class="vet-name">Dra. Alejandra Cautín Bastías</div>
          <div class="vet-title">MÉDICA VETERINARIA</div>
          <div class="vet-credentials">Fear Free Certified Professional</div>
          <div class="contact-info">
            WhatsApp: +56 9 7604 0797 | Email: contacto@aleveterinaria.cl<br>
            Instagram: @aleveterinaria | Santiago, Chile
          </div>
          <h1 style="font-size: 18px; color: #2D3748; margin: 15px 0; font-weight: bold;">${s}</h1>
        </div>

        <div class="patient-info">
          <h2>INFORMACIÓN DEL PACIENTE</h2>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div>
              <p><strong>Paciente:</strong> ${t.name}</p>
              <p><strong>Especie:</strong> ${t.species}</p>
              <p><strong>Raza:</strong> ${t.breed}</p>
              <p><strong>Sexo:</strong> ${t.sex} | <strong>Estado:</strong> ${t.reproductiveStatus||"No especificado"}</p>
            </div>
            <div>
              <p><strong>Tutor:</strong> ${t.tutorName}</p>
              <p><strong>RUT:</strong> ${AR(t.tutorRut)||"No especificado"}</p>
              <p><strong>Teléfono:</strong> ${t.tutorPhone||"No especificado"}</p>
              <p><strong>Fecha:</strong> ${r}</p>
            </div>
          </div>
        </div>

        <div class="certificate-content">${a}</div>

        <div class="signature-area">
          <div style="margin-top: 60px; border-top: 2px solid #A3CBB2; width: 350px; margin: 60px auto 0; padding-top: 20px;">
            <p style="margin: 0; font-weight: bold; color: #2D3748;">Dra. Alejandra Cautín Bastías</p>
            <p style="margin: 5px 0; color: #A3CBB2; font-weight: 600;">Médica Veterinaria</p>
            <p style="margin: 5px 0; color: #666; font-size: 14px;">Fear Free Certified Professional</p>
            <p style="margin: 10px 0 0 0; color: #666; font-size: 13px;">Fecha: ${r}</p>

          </div>
        </div>
      </div>
    </body>
    </html>
  `,l=window.open("","_blank");l&&(l.document.write(o),l.document.close(),l.focus())};function UV(t,e,n){const r=[];return t.forEach(s=>typeof s!="string"?r.push(s):e[Symbol.split](s).forEach((a,o,l)=>{a!==""&&r.push(a),o<l.length-1&&r.push(n)})),r}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function WE(t,e){const n=/\$/g,r="$$$$";let s=[t];if(e==null)return s;for(const a of Object.keys(e))if(a!=="_"){let o=e[a];typeof o=="string"&&(o=n[Symbol.replace](o,r)),s=UV(s,new RegExp(`%\\{${a}\\}`,"g"),o)}return s}const zV=t=>{throw new Error(`missing string: ${t}`)};var fp,mp,p0;class PR{constructor(e,{onMissingKey:n=zV}={}){X(this,mp);Z(this,"locale");X(this,fp);this.locale={strings:{},pluralize(r){return r===1?0:1}},Array.isArray(e)?e.forEach(ae(this,mp,p0),this):ae(this,mp,p0).call(this,e),re(this,fp,n)}translate(e,n){return this.translateArray(e,n).join("")}translateArray(e,n){let r=this.locale.strings[e];if(r==null&&(k(this,fp).call(this,e),r=e),typeof r=="object"){if(n&&typeof n.smart_count<"u"){const a=this.locale.pluralize(n.smart_count);return WE(r[a],n)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof r!="string")throw new Error("string was not a string");return WE(r,n)}}fp=new WeakMap,mp=new WeakSet,p0=function(e){if(!(e!=null&&e.strings))return;const n=this.locale;Object.assign(this.locale,{strings:{...n.strings,...e.strings},pluralize:e.pluralize||n.pluralize})};class IR{constructor(e,n){Z(this,"uppy");Z(this,"opts");Z(this,"id");Z(this,"defaultLocale");Z(this,"i18n");Z(this,"i18nArray");Z(this,"type");Z(this,"VERSION");this.uppy=e,this.opts=n??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return(e==null?void 0:e[this.id])||{}}setPluginState(e){const{plugins:n}=this.uppy.getState();this.uppy.setState({plugins:{...n,[this.id]:{...n[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new PR([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}function sx(t){return t<10?`0${t}`:t.toString()}function Am(){const t=new Date,e=sx(t.getHours()),n=sx(t.getMinutes()),r=sx(t.getSeconds());return`${e}:${n}:${r}`}const BV={debug:()=>{},warn:()=>{},error:(...t)=>console.error(`[Uppy] [${Am()}]`,...t)},VV={debug:(...t)=>console.debug(`[Uppy] [${Am()}]`,...t),warn:(...t)=>console.warn(`[Uppy] [${Am()}]`,...t),error:(...t)=>console.error(`[Uppy] [${Am()}]`,...t)};function RR(t){return typeof t!="object"||t===null||!("nodeType"in t)?!1:t.nodeType===Node.ELEMENT_NODE}function HV(t,e=document){return typeof t=="string"?e.querySelector(t):RR(t)?t:null}function DR(t){for(;t&&!t.dir;)t=t.parentNode;return t==null?void 0:t.dir}var ef,rt,OR,Yo,GE,FR,MR,LR,W1,f0,m0,Wh={},$R=[],qV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,tf=Array.isArray;function ki(t,e){for(var n in e)t[n]=e[n];return t}function G1(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Gh(t,e,n){var r,s,a,o={};for(a in e)a=="key"?r=e[a]:a=="ref"?s=e[a]:o[a]=e[a];if(arguments.length>2&&(o.children=arguments.length>3?ef.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(a in t.defaultProps)o[a]===void 0&&(o[a]=t.defaultProps[a]);return yh(t,o,r,s,null)}function yh(t,e,n,r,s){var a={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++OR,__i:-1,__u:0};return s==null&&rt.vnode!=null&&rt.vnode(a),a}function WV(){return{current:null}}function Vs(t){return t.children}function Dr(t,e){this.props=t,this.context=e}function Yd(t,e){if(e==null)return t.__?Yd(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Yd(t):null}function UR(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return UR(t)}}function KE(t){(!t.__d&&(t.__d=!0)&&Yo.push(t)&&!Ig.__r++||GE!=rt.debounceRendering)&&((GE=rt.debounceRendering)||FR)(Ig)}function Ig(){for(var t,e,n,r,s,a,o,l=1;Yo.length;)Yo.length>l&&Yo.sort(MR),t=Yo.shift(),l=Yo.length,t.__d&&(n=void 0,s=(r=(e=t).__v).__e,a=[],o=[],e.__P&&((n=ki({},r)).__v=r.__v+1,rt.vnode&&rt.vnode(n),K1(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[s]:null,a,s??Yd(r),!!(32&r.__u),o),n.__v=r.__v,n.__.__k[n.__i]=n,VR(a,n,o),n.__e!=s&&UR(n)));Ig.__r=0}function zR(t,e,n,r,s,a,o,l,c,u,h){var p,m,x,N,w,b,S=r&&r.__k||$R,v=e.length;for(c=GV(n,e,S,c,v),p=0;p<v;p++)(x=n.__k[p])!=null&&(m=x.__i==-1?Wh:S[x.__i]||Wh,x.__i=p,b=K1(t,x,m,s,a,o,l,c,u,h),N=x.__e,x.ref&&m.ref!=x.ref&&(m.ref&&Q1(m.ref,null,x),h.push(x.ref,x.__c||N,x)),w==null&&N!=null&&(w=N),4&x.__u||m.__k===x.__k?c=BR(x,c,t):typeof x.type=="function"&&b!==void 0?c=b:N&&(c=N.nextSibling),x.__u&=-7);return n.__e=w,c}function GV(t,e,n,r,s){var a,o,l,c,u,h=n.length,p=h,m=0;for(t.__k=new Array(s),a=0;a<s;a++)(o=e[a])!=null&&typeof o!="boolean"&&typeof o!="function"?(c=a+m,(o=t.__k[a]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?yh(null,o,null,null,null):tf(o)?yh(Vs,{children:o},null,null,null):o.constructor==null&&o.__b>0?yh(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,l=null,(u=o.__i=KV(o,n,c,p))!=-1&&(p--,(l=n[u])&&(l.__u|=2)),l==null||l.__v==null?(u==-1&&(s>h?m--:s<h&&m++),typeof o.type!="function"&&(o.__u|=4)):u!=c&&(u==c-1?m--:u==c+1?m++:(u>c?m--:m++,o.__u|=4))):t.__k[a]=null;if(p)for(a=0;a<h;a++)(l=n[a])!=null&&!(2&l.__u)&&(l.__e==r&&(r=Yd(l)),qR(l,l));return r}function BR(t,e,n){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=BR(r[s],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=Yd(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Fs(t,e){return e=e||[],t==null||typeof t=="boolean"||(tf(t)?t.some(function(n){Fs(n,e)}):e.push(t)),e}function KV(t,e,n,r){var s,a,o,l=t.key,c=t.type,u=e[n],h=u!=null&&(2&u.__u)==0;if(u===null&&t.key==null||h&&l==u.key&&c==u.type)return n;if(r>(h?1:0)){for(s=n-1,a=n+1;s>=0||a<e.length;)if((u=e[o=s>=0?s--:a++])!=null&&!(2&u.__u)&&l==u.key&&c==u.type)return o}return-1}function QE(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||qV.test(e)?n:n+"px"}function Kf(t,e,n,r,s){var a,o;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||QE(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||QE(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(LR,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=n,n?r?n.u=r.u:(n.u=W1,t.addEventListener(e,a?m0:f0,a)):t.removeEventListener(e,a?m0:f0,a);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function YE(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=W1++;else if(e.t<n.u)return;return n(rt.event?rt.event(e):e)}}}function K1(t,e,n,r,s,a,o,l,c,u){var h,p,m,x,N,w,b,S,v,T,I,L,R,C,_,P,A,F=e.type;if(e.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),a=[l=e.__e=n.__e]),(h=rt.__b)&&h(e);e:if(typeof F=="function")try{if(S=e.props,v="prototype"in F&&F.prototype.render,T=(h=F.contextType)&&r[h.__c],I=h?T?T.props.value:h.__:r,n.__c?b=(p=e.__c=n.__c).__=p.__E:(v?e.__c=p=new F(S,I):(e.__c=p=new Dr(S,I),p.constructor=F,p.render=YV),T&&T.sub(p),p.props=S,p.state||(p.state={}),p.context=I,p.__n=r,m=p.__d=!0,p.__h=[],p._sb=[]),v&&p.__s==null&&(p.__s=p.state),v&&F.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=ki({},p.__s)),ki(p.__s,F.getDerivedStateFromProps(S,p.__s))),x=p.props,N=p.state,p.__v=e,m)v&&F.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),v&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(v&&F.getDerivedStateFromProps==null&&S!==x&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(S,I),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(S,p.__s,I)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(p.props=S,p.state=p.__s,p.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(D){D&&(D.__=e)}),L=0;L<p._sb.length;L++)p.__h.push(p._sb[L]);p._sb=[],p.__h.length&&o.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(S,p.__s,I),v&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(x,N,w)})}if(p.context=I,p.props=S,p.__P=t,p.__e=!1,R=rt.__r,C=0,v){for(p.state=p.__s,p.__d=!1,R&&R(e),h=p.render(p.props,p.state,p.context),_=0;_<p._sb.length;_++)p.__h.push(p._sb[_]);p._sb=[]}else do p.__d=!1,R&&R(e),h=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++C<25);p.state=p.__s,p.getChildContext!=null&&(r=ki(ki({},r),p.getChildContext())),v&&!m&&p.getSnapshotBeforeUpdate!=null&&(w=p.getSnapshotBeforeUpdate(x,N)),P=h,h!=null&&h.type===Vs&&h.key==null&&(P=HR(h.props.children)),l=zR(t,tf(P)?P:[P],e,n,r,s,a,o,l,c,u),p.base=e.__e,e.__u&=-161,p.__h.length&&o.push(p),b&&(p.__E=p.__=null)}catch(D){if(e.__v=null,c||a!=null)if(D.then){for(e.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,e.__e=l}else{for(A=a.length;A--;)G1(a[A]);g0(e)}else e.__e=n.__e,e.__k=n.__k,D.then||g0(e);rt.__e(D,e,n)}else a==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):l=e.__e=QV(n.__e,e,n,r,s,a,o,c,u);return(h=rt.diffed)&&h(e),128&e.__u?void 0:l}function g0(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(g0)}function VR(t,e,n){for(var r=0;r<n.length;r++)Q1(n[r],n[++r],n[++r]);rt.__c&&rt.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(a){a.call(s)})}catch(a){rt.__e(a,s.__v)}})}function HR(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:tf(t)?t.map(HR):ki({},t)}function QV(t,e,n,r,s,a,o,l,c){var u,h,p,m,x,N,w,b=n.props,S=e.props,v=e.type;if(v=="svg"?s="http://www.w3.org/2000/svg":v=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),a!=null){for(u=0;u<a.length;u++)if((x=a[u])&&"setAttribute"in x==!!v&&(v?x.localName==v:x.nodeType==3)){t=x,a[u]=null;break}}if(t==null){if(v==null)return document.createTextNode(S);t=document.createElementNS(s,v,S.is&&S),l&&(rt.__m&&rt.__m(e,a),l=!1),a=null}if(v==null)b===S||l&&t.data==S||(t.data=S);else{if(a=a&&ef.call(t.childNodes),b=n.props||Wh,!l&&a!=null)for(b={},u=0;u<t.attributes.length;u++)b[(x=t.attributes[u]).name]=x.value;for(u in b)if(x=b[u],u!="children"){if(u=="dangerouslySetInnerHTML")p=x;else if(!(u in S)){if(u=="value"&&"defaultValue"in S||u=="checked"&&"defaultChecked"in S)continue;Kf(t,u,null,x,s)}}for(u in S)x=S[u],u=="children"?m=x:u=="dangerouslySetInnerHTML"?h=x:u=="value"?N=x:u=="checked"?w=x:l&&typeof x!="function"||b[u]===x||Kf(t,u,x,b[u],s);if(h)l||p&&(h.__html==p.__html||h.__html==t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(p&&(t.innerHTML=""),zR(e.type=="template"?t.content:t,tf(m)?m:[m],e,n,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":s,a,o,a?a[0]:n.__k&&Yd(n,0),l,c),a!=null)for(u=a.length;u--;)G1(a[u]);l||(u="value",v=="progress"&&N==null?t.removeAttribute("value"):N!=null&&(N!==t[u]||v=="progress"&&!N||v=="option"&&N!=b[u])&&Kf(t,u,N,b[u],s),u="checked",w!=null&&w!=t[u]&&Kf(t,u,w,b[u],s))}return t}function Q1(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(s){rt.__e(s,n)}}function qR(t,e,n){var r,s;if(rt.unmount&&rt.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||Q1(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){rt.__e(a,e)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&qR(r[s],e,n||typeof t.type!="function");n||G1(t.__e),t.__c=t.__=t.__e=void 0}function YV(t,e,n){return this.constructor(t,n)}function ZV(t,e,n){var r,s,a,o;e==document&&(e=document.documentElement),rt.__&&rt.__(t,e),s=(r=typeof n=="function")?null:e.__k,a=[],o=[],K1(e,t=(!r&&n||e).__k=Gh(Vs,null,[t]),s||Wh,Wh,e.namespaceURI,!r&&n?[n]:s?null:e.firstChild?ef.call(e.childNodes):null,a,!r&&n?n:s?s.__e:e.firstChild,r,o),VR(a,t,o)}function WR(t,e,n){var r,s,a,o,l=ki({},t.props);for(a in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)a=="key"?r=e[a]:a=="ref"?s=e[a]:l[a]=e[a]===void 0&&o!=null?o[a]:e[a];return arguments.length>2&&(l.children=arguments.length>3?ef.call(arguments,2):n),yh(t.type,l,r||t.key,s||t.ref,null)}ef=$R.slice,rt={__e:function(t,e,n,r){for(var s,a,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((a=s.constructor)&&a.getDerivedStateFromError!=null&&(s.setState(a.getDerivedStateFromError(t)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),o=s.__d),o)return s.__E=s}catch(l){t=l}throw t}},OR=0,Dr.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ki({},this.state),typeof t=="function"&&(t=t(ki({},n),this.props)),t&&ki(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),KE(this))},Dr.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),KE(this))},Dr.prototype.render=Vs,Yo=[],FR=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,MR=function(t,e){return t.__v.__b-e.__v.__b},Ig.__r=0,LR=/(PointerCapture)$|Capture$/i,W1=0,f0=YE(!1),m0=YE(!0);var Kh,pn,ix,ZE,Qh=0,GR=[],wn=rt,XE=wn.__b,JE=wn.__r,ej=wn.diffed,tj=wn.__c,nj=wn.unmount,rj=wn.__;function Y1(t,e){wn.__h&&wn.__h(pn,t,Qh||e),Qh=0;var n=pn.__H||(pn.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Rg(t){return Qh=1,XV(QR,t)}function XV(t,e,n){var r=Y1(Kh++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):QR(void 0,e),function(l){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,l);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=pn,!pn.__f)){var s=function(l,c,u){if(!r.__c.__H)return!0;var h=r.__c.__H.__.filter(function(m){return!!m.__c});if(h.every(function(m){return!m.__N}))return!a||a.call(this,l,c,u);var p=r.__c.props!==l;return h.forEach(function(m){if(m.__N){var x=m.__[0];m.__=m.__N,m.__N=void 0,x!==m.__[0]&&(p=!0)}}),a&&a.call(this,l,c,u)||p};pn.__f=!0;var a=pn.shouldComponentUpdate,o=pn.componentWillUpdate;pn.componentWillUpdate=function(l,c,u){if(this.__e){var h=a;a=void 0,s(l,c,u),a=h}o&&o.call(this,l,c,u)},pn.shouldComponentUpdate=s}return r.__N||r.__}function v0(t,e){var n=Y1(Kh++,3);!wn.__s&&KR(n.__H,e)&&(n.__=t,n.u=e,pn.__H.__h.push(n))}function Pm(t){return Qh=5,Z1(function(){return{current:t}},[])}function Z1(t,e){var n=Y1(Kh++,7);return KR(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function JV(t,e){return Qh=8,Z1(function(){return t},e)}function eH(){for(var t;t=GR.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Im),t.__H.__h.forEach(y0),t.__H.__h=[]}catch(e){t.__H.__h=[],wn.__e(e,t.__v)}}wn.__b=function(t){pn=null,XE&&XE(t)},wn.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),rj&&rj(t,e)},wn.__r=function(t){JE&&JE(t),Kh=0;var e=(pn=t.__c).__H;e&&(ix===pn?(e.__h=[],pn.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Im),e.__h.forEach(y0),e.__h=[],Kh=0)),ix=pn},wn.diffed=function(t){ej&&ej(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(GR.push(e)!==1&&ZE===wn.requestAnimationFrame||((ZE=wn.requestAnimationFrame)||tH)(eH)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ix=pn=null},wn.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Im),n.__h=n.__h.filter(function(r){return!r.__||y0(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],wn.__e(r,n.__v)}}),tj&&tj(t,e)},wn.unmount=function(t){nj&&nj(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Im(r)}catch(s){e=s}}),n.__H=void 0,e&&wn.__e(e,n.__v))};var sj=typeof requestAnimationFrame=="function";function tH(t){var e,n=function(){clearTimeout(r),sj&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);sj&&(e=requestAnimationFrame(n))}function Im(t){var e=pn,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),pn=e}function y0(t){var e=pn;t.__c=t.__(),pn=e}function KR(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function QR(t,e){return typeof e=="function"?e(t):e}function nH(t,e){for(var n in e)t[n]=e[n];return t}function ij(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function aj(t,e){this.props=t,this.context=e}(aj.prototype=new Dr).isPureReactComponent=!0,aj.prototype.shouldComponentUpdate=function(t,e){return ij(this.props,t)||ij(this.state,e)};var oj=rt.__b;rt.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),oj&&oj(t)};var rH=rt.__e;rt.__e=function(t,e,n,r){if(t.then){for(var s,a=e;a=a.__;)if((s=a.__c)&&s.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),s.__c(t,e)}rH(t,e,n,r)};var lj=rt.unmount;function YR(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=nH({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return YR(r,e,n)})),t}function ZR(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return ZR(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function ax(){this.__u=0,this.o=null,this.__b=null}function XR(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Qf(){this.i=null,this.l=null}rt.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),lj&&lj(t)},(ax.prototype=new Dr).__c=function(t,e){var n=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var s=XR(r.__v),a=!1,o=function(){a||(a=!0,n.__R=null,s?s(l):l())};n.__R=o;var l=function(){if(!--r.__u){if(r.state.__a){var c=r.state.__a;r.__v.__k[0]=ZR(c,c.__c.__P,c.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.o.pop();)u.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(o,o)},ax.prototype.componentWillUnmount=function(){this.o=[]},ax.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=YR(this.__b,n,r.__O=r.__P)}this.__b=null}var s=e.__a&&Gh(Vs,null,t.fallback);return s&&(s.__u&=-33),[Gh(Vs,null,e.__a?null:t.children),s]};var cj=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(Qf.prototype=new Dr).__a=function(t){var e=this,n=XR(e.__v),r=e.l.get(t);return r[0]++,function(s){var a=function(){e.props.revealOrder?(r.push(s),cj(e,t,r)):s()};n?n(a):a()}},Qf.prototype.render=function(t){this.i=null,this.l=new Map;var e=Fs(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},Qf.prototype.componentDidUpdate=Qf.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){cj(t,n,e)})};var sH=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,iH=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,aH=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,oH=/[A-Z0-9]/g,lH=typeof document<"u",cH=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function dj(t,e,n){return e.__k==null&&(e.textContent=""),ZV(t,e),typeof n=="function"&&n(),t?t.__c:null}Dr.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Dr.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var uj=rt.event;function dH(){}function uH(){return this.cancelBubble}function hH(){return this.defaultPrevented}rt.event=function(t){return uj&&(t=uj(t)),t.persist=dH,t.isPropagationStopped=uH,t.isDefaultPrevented=hH,t.nativeEvent=t};var pH={enumerable:!1,configurable:!0,get:function(){return this.class}},hj=rt.vnode;rt.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,r=e.type,s={},a=r.indexOf("-")===-1;for(var o in n){var l=n[o];if(!(o==="value"&&"defaultValue"in n&&l==null||lH&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var c=o.toLowerCase();o==="defaultValue"&&"value"in n&&n.value==null?o="value":o==="download"&&l===!0?l="":c==="translate"&&l==="no"?l=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?o="ondblclick":c!=="onchange"||r!=="input"&&r!=="textarea"||cH(n.type)?c==="onfocus"?o="onfocusin":c==="onblur"?o="onfocusout":aH.test(o)&&(o=c):c=o="oninput":a&&iH.test(o)?o=o.replace(oH,"-$&").toLowerCase():l===null&&(l=void 0),c==="oninput"&&s[o=c]&&(o="oninputCapture"),s[o]=l}}r=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=Fs(n.children).forEach(function(u){u.props.selected=s.value.indexOf(u.props.value)!=-1})),r=="select"&&s.defaultValue!=null&&(s.value=Fs(n.children).forEach(function(u){u.props.selected=s.multiple?s.defaultValue.indexOf(u.props.value)!=-1:s.defaultValue==u.props.value})),n.class&&!n.className?(s.class=n.class,Object.defineProperty(s,"className",pH)):(n.className&&!n.class||n.class&&n.className)&&(s.class=s.className=n.className),e.props=s}(t),t.$$typeof=sH,hj&&hj(t)};var pj=rt.__r;rt.__r=function(t){pj&&pj(t),t.__c};var fj=rt.diffed;rt.diffed=function(t){fj&&fj(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};function fH(t){let e=null,n;return(...r)=>(n=r,e||(e=Promise.resolve().then(()=>(e=null,t(...n)))),e)}var gp;const qg=class qg extends IR{constructor(){super(...arguments);X(this,gp);Z(this,"isTargetDOMEl");Z(this,"el");Z(this,"parent");Z(this,"title")}getTargetPlugin(n){let r;if(typeof(n==null?void 0:n.addTarget)=="function")r=n,r instanceof qg||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:r,UIPlugin:qg}}));else if(typeof n=="function"){const s=n;this.uppy.iteratePlugins(a=>{a instanceof s&&(r=a)})}return r}mount(n,r){const s=r.id,a=HV(n);if(a){this.isTargetDOMEl=!0;const c=document.createElement("div");return c.classList.add("uppy-Root"),re(this,gp,fH(u=>{this.uppy.getPlugin(this.id)&&(dj(this.render(u,c),c),this.afterUpdate())})),this.uppy.log(`Installing ${s} to a DOM element '${n}'`),this.opts.replaceTargetContent&&(a.innerHTML=""),dj(this.render(this.uppy.getState(),c),c),this.el=c,a.appendChild(c),c.dir=this.opts.direction||DR(c)||"ltr",this.onMount(),this.el}const o=this.getTargetPlugin(n);if(o)return this.uppy.log(`Installing ${s} to ${o.id}`),this.parent=o,this.el=o.addTarget(r),this.onMount(),this.el;this.uppy.log(`Not installing ${s}`);let l=`Invalid target option given to ${s}.`;throw typeof n=="function"?l+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":l+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(l)}render(n,r){throw new Error("Extend the render method to add your plugin to a DOM element")}update(n){var r;this.el!=null&&((r=k(this,gp))==null||r.call(this,n))}unmount(){var n;this.isTargetDOMEl&&((n=this.el)==null||n.remove()),this.onUnmount()}onMount(){}onUnmount(){}};gp=new WeakMap;let Zd=qg;const mH="@uppy/store-default",gH="The default simple object-based store for Uppy.",vH="4.3.2",yH="MIT",xH="lib/index.js",bH="module",wH={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},_H=["file uploader","uppy","uppy-store"],CH="https://uppy.io",SH={url:"https://github.com/transloadit/uppy/issues"},EH={jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},jH={type:"git",url:"git+https://github.com/transloadit/uppy.git"},NH=["src","lib","dist","CHANGELOG.md"],TH={name:mH,description:gH,version:vH,license:yH,main:xH,type:bH,scripts:wH,keywords:_H,homepage:CH,bugs:SH,devDependencies:EH,repository:jH,files:NH};var gd,Wg,eD;class JR{constructor(){X(this,Wg);Z(this,"state",{});X(this,gd,new Set)}getState(){return this.state}setState(e){const n={...this.state},r={...this.state,...e};this.state=r,ae(this,Wg,eD).call(this,n,r,e)}subscribe(e){return k(this,gd).add(e),()=>{k(this,gd).delete(e)}}}gd=new WeakMap,Wg=new WeakSet,eD=function(...e){k(this,gd).forEach(n=>{n(...e)})},Z(JR,"VERSION",TH.version);function tD(t){const e=t.lastIndexOf(".");return e===-1||e===t.length-1?{name:t,extension:void 0}:{name:t.slice(0,e),extension:t.slice(e+1)}}const mj={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function nD(t){var n;if(t.type)return t.type;const e=t.name?(n=tD(t.name).extension)==null?void 0:n.toLowerCase():null;return e&&e in mj?mj[e]:"application/octet-stream"}function kH(t){return t.charCodeAt(0).toString(32)}function gj(t){let e="";return t.replace(/[^A-Z0-9]/gi,n=>(e+=`-${kH(n)}`,"/"))+e}function AH(t,e){let n=e||"uppy";return typeof t.name=="string"&&(n+=`-${gj(t.name.toLowerCase())}`),t.type!==void 0&&(n+=`-${t.type}`),t.meta&&typeof t.meta.relativePath=="string"&&(n+=`-${gj(t.meta.relativePath.toLowerCase())}`),t.data.size!==void 0&&(n+=`-${t.data.size}`),t.data.lastModified!==void 0&&(n+=`-${t.data.lastModified}`),n}function PH(t){return!t.isRemote||!t.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(t.remote.provider)}function IH(t,e){if(PH(t))return t.id;const n=nD(t);return AH({...t,type:n},e)}function RH(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var X1=RH,DH=typeof gf=="object"&&gf&&gf.Object===Object&&gf,OH=DH,FH=OH,MH=typeof self=="object"&&self&&self.Object===Object&&self,LH=FH||MH||Function("return this")(),rD=LH,$H=rD,UH=function(){return $H.Date.now()},zH=UH,BH=/\s/;function VH(t){for(var e=t.length;e--&&BH.test(t.charAt(e)););return e}var HH=VH,qH=HH,WH=/^\s+/;function GH(t){return t&&t.slice(0,qH(t)+1).replace(WH,"")}var KH=GH,QH=rD,YH=QH.Symbol,sD=YH,vj=sD,iD=Object.prototype,ZH=iD.hasOwnProperty,XH=iD.toString,Du=vj?vj.toStringTag:void 0;function JH(t){var e=ZH.call(t,Du),n=t[Du];try{t[Du]=void 0;var r=!0}catch{}var s=XH.call(t);return r&&(e?t[Du]=n:delete t[Du]),s}var eq=JH,tq=Object.prototype,nq=tq.toString;function rq(t){return nq.call(t)}var sq=rq,yj=sD,iq=eq,aq=sq,oq="[object Null]",lq="[object Undefined]",xj=yj?yj.toStringTag:void 0;function cq(t){return t==null?t===void 0?lq:oq:xj&&xj in Object(t)?iq(t):aq(t)}var dq=cq;function uq(t){return t!=null&&typeof t=="object"}var hq=uq,pq=dq,fq=hq,mq="[object Symbol]";function gq(t){return typeof t=="symbol"||fq(t)&&pq(t)==mq}var vq=gq,yq=KH,bj=X1,xq=vq,wj=NaN,bq=/^[-+]0x[0-9a-f]+$/i,wq=/^0b[01]+$/i,_q=/^0o[0-7]+$/i,Cq=parseInt;function Sq(t){if(typeof t=="number")return t;if(xq(t))return wj;if(bj(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=bj(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=yq(t);var n=wq.test(t);return n||_q.test(t)?Cq(t.slice(2),n?2:8):bq.test(t)?wj:+t}var Eq=Sq,jq=X1,ox=zH,_j=Eq,Nq="Expected a function",Tq=Math.max,kq=Math.min;function Aq(t,e,n){var r,s,a,o,l,c,u=0,h=!1,p=!1,m=!0;if(typeof t!="function")throw new TypeError(Nq);e=_j(e)||0,jq(n)&&(h=!!n.leading,p="maxWait"in n,a=p?Tq(_j(n.maxWait)||0,e):a,m="trailing"in n?!!n.trailing:m);function x(R){var C=r,_=s;return r=s=void 0,u=R,o=t.apply(_,C),o}function N(R){return u=R,l=setTimeout(S,e),h?x(R):o}function w(R){var C=R-c,_=R-u,P=e-C;return p?kq(P,a-_):P}function b(R){var C=R-c,_=R-u;return c===void 0||C>=e||C<0||p&&_>=a}function S(){var R=ox();if(b(R))return v(R);l=setTimeout(S,w(R))}function v(R){return l=void 0,m&&r?x(R):(r=s=void 0,o)}function T(){l!==void 0&&clearTimeout(l),u=0,r=c=s=l=void 0}function I(){return l===void 0?o:v(ox())}function L(){var R=ox(),C=b(R);if(r=arguments,s=this,c=R,C){if(l===void 0)return N(c);if(p)return clearTimeout(l),l=setTimeout(S,e),x(c)}return l===void 0&&(l=setTimeout(S,e)),o}return L.cancel=T,L.flush=I,L}var aD=Aq;const Pq=Ea(aD);var Iq=aD,Rq=X1,Dq="Expected a function";function Oq(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(Dq);return Rq(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),Iq(t,e,{leading:r,maxWait:e,trailing:s})}var Fq=Oq;const Mq=Ea(Fq);var Lq=function(){var e={},n=e._fns={};e.emit=function(o,l,c,u,h,p,m){var x=r(o);x.length&&s(o,x,[l,c,u,h,p,m])},e.on=function(o,l){n[o]||(n[o]=[]),n[o].push(l)},e.once=function(o,l){function c(){l.apply(this,arguments),e.off(o,c)}this.on(o,c)},e.off=function(o,l){var c=[];if(o&&l){var u=this._fns[o],h=0,p=u?u.length:0;for(h;h<p;h++)u[h]!==l&&c.push(u[h])}c.length?this._fns[o]=c:delete this._fns[o]};function r(a){var o=n[a]?n[a]:[],l=a.indexOf(":"),c=l===-1?[a]:[a.substring(0,l),a.substring(l+1)],u=Object.keys(n),h=0,p=u.length;for(h;h<p;h++){var m=u[h];if(m==="*"&&(o=o.concat(n[m])),c.length===2&&c[0]===m){o=o.concat(n[m]);break}}return o}function s(a,o,l){var c=0,u=o.length;for(c;c<u&&o[c];c++)o[c].event=a,o[c].apply(o[c],l)}return e};const $q=Ea(Lq);let Uq="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",zq=(t=21)=>{let e="",n=t|0;for(;n--;)e+=Uq[Math.random()*64|0];return e};const Bq="@uppy/core",Vq="Core module for the extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:",Hq="4.5.3",qq="MIT",Wq="lib/index.js",Gq="dist/style.min.css",Kq="module",Qq=["*.css"],Yq={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},Zq=["file uploader","uppy","uppy-plugin"],Xq="https://uppy.io",Jq={url:"https://github.com/transloadit/uppy/issues"},eW={type:"git",url:"git+https://github.com/transloadit/uppy.git"},tW=["src","lib","dist","CHANGELOG.md"],nW={"@transloadit/prettier-bytes":"^0.3.4","@uppy/store-default":"^4.3.2","@uppy/utils":"^6.2.2",lodash:"^4.17.21","mime-match":"^1.0.2","namespace-emitter":"^2.0.1",nanoid:"^5.0.9",preact:"^10.5.13"},rW={"@types/deep-freeze":"^0",cssnano:"^7.0.7","deep-freeze":"^0.0.1",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},sW={name:Bq,description:Vq,version:Hq,license:qq,main:Wq,style:Gq,type:Kq,sideEffects:Qq,scripts:Yq,keywords:Zq,homepage:Xq,bugs:Jq,repository:eW,files:tW,dependencies:nW,devDependencies:rW};function iW(t,e){return e.name?e.name:t.split("/")[0]==="image"?`${t.split("/")[0]}.${t.split("/")[1]}`:"noname"}const aW={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var oW=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const n=e<0;let r=Math.abs(e);if(n&&(r=-r),r===0)return"0 B";const s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.min(Math.floor(Math.log(r)/Math.log(1024)),s.length-1),o=Number(r/1024**a),l=s[a];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${l}`};const sl=Ea(oW);function oD(t,e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}oD.prototype.match=function(t){var e=!0,n=this.parts,r,s=n.length,a;if(typeof t=="string"||t instanceof String)if(!this.hasWild&&this.text!=t)e=!1;else{for(a=(t||"").split(this.separator),r=0;e&&r<s;r++)n[r]!=="*"&&(r<a.length?e=n[r]===a[r]:e=!1);e=e&&a}else if(typeof t.splice=="function")for(e=[],r=t.length;r--;)this.match(t[r])&&(e[e.length]=t[r]);else if(typeof t=="object"){e={};for(var o in t)this.match(o)&&(e[o]=t[o])}return e};var lW=function(t,e,n){var r=new oD(t,n||/[\/\.]/);return typeof e<"u"?r.match(e):r},cW=lW,dW=/[\/\+\.]/,uW=function(t,e){function n(r){var s=cW(r,t,dW);return s&&s.length>=2}return e?n(e.split(";")[0]):n};const hW=Ea(uW),pW={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class As extends Error{constructor(n,r){super(n);Z(this,"isUserFacing");Z(this,"file");Z(this,"isRestriction",!0);this.isUserFacing=(r==null?void 0:r.isUserFacing)??!0,r!=null&&r.file&&(this.file=r.file)}}class fW{constructor(e,n){Z(this,"getI18n");Z(this,"getOpts");this.getI18n=n,this.getOpts=()=>{var s;const r=e();if(((s=r.restrictions)==null?void 0:s.allowedFileTypes)!=null&&!Array.isArray(r.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return r}}validateAggregateRestrictions(e,n){const{maxTotalFileSize:r,maxNumberOfFiles:s}=this.getOpts().restrictions;if(s&&e.filter(o=>!o.isGhost).length+n.length>s)throw new As(`${this.getI18n()("youCanOnlyUploadX",{smart_count:s})}`);if(r){const a=[...e,...n].reduce((o,l)=>o+(l.size??0),0);if(a>r)throw new As(this.getI18n()("aggregateExceedsSize",{sizeAllowed:sl(r),size:sl(a)}))}}validateSingleFile(e){const{maxFileSize:n,minFileSize:r,allowedFileTypes:s}=this.getOpts().restrictions;if(s&&!s.some(o=>o.includes("/")?e.type?hW(e.type.replace(/;.*?$/,""),o):!1:o[0]==="."&&e.extension?e.extension.toLowerCase()===o.slice(1).toLowerCase():!1)){const o=s.join(", ");throw new As(this.getI18n()("youCanOnlyUploadFileTypes",{types:o}),{file:e})}if(n&&e.size!=null&&e.size>n)throw new As(this.getI18n()("exceedsSize",{size:sl(n),file:e.name??this.getI18n()("unnamed")}),{file:e});if(r&&e.size!=null&&e.size<r)throw new As(this.getI18n()("inferiorSize",{size:sl(r)}),{file:e})}validate(e,n){n.forEach(r=>{this.validateSingleFile(r)}),this.validateAggregateRestrictions(e,n)}validateMinNumberOfFiles(e){const{minNumberOfFiles:n}=this.getOpts().restrictions;if(n&&Object.keys(e).length<n)throw new As(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:n}))}getMissingRequiredMetaFields(e){const n=new As(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:r}=this.getOpts().restrictions,s=[];for(const a of r)(!Object.hasOwn(e.meta,a)||e.meta[a]==="")&&s.push(a);return{missingFields:s,error:n}}}function mW(t){if(t==null&&typeof navigator<"u"&&(t=navigator.userAgent),!t)return!0;const e=/Edge\/(\d+\.\d+)/.exec(t);if(!e)return!0;const r=e[1].split(".",2),s=parseInt(r[0],10),a=parseInt(r[1],10);return s<15||s===15&&a<15063||s>18||s===18&&a>=18218}const Yf={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var ws,_s,vp,pl,vd,yd,fl,Oe,Ko,b0,lD,w0,cD,_0,C0,S0,E0,Gg,j0,ml,dD,uD,no,yp,Qu,hD,Rm,Yu;const Kg=class Kg{constructor(e){X(this,Oe);X(this,ws,Object.create(null));X(this,_s);X(this,vp);X(this,pl,$q());X(this,vd,new Set);X(this,yd,new Set);X(this,fl,new Set);Z(this,"defaultLocale");Z(this,"locale");Z(this,"opts");Z(this,"store");Z(this,"i18n");Z(this,"i18nArray");Z(this,"scheduledAutoProceed",null);Z(this,"wasOffline",!1);X(this,Gg,(e,n)=>{const r=e?this.getFile(e.id):void 0;if(e==null||!r){this.log(`Not setting progress for a file that has been removed: ${e==null?void 0:e.id}`);return}if(r.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);return}const s={bytesTotal:n.bytesTotal,percentage:n.bytesTotal!=null&&Number.isFinite(n.bytesTotal)&&n.bytesTotal>0?Math.round(n.bytesUploaded/n.bytesTotal*100):void 0};r.progress.uploadStarted!=null?this.setFileState(e.id,{progress:{...r.progress,...s,bytesUploaded:n.bytesUploaded}}):this.setFileState(e.id,{progress:{...r.progress,...s}}),k(this,ml).call(this)});X(this,ml,Mq(()=>ae(this,Oe,j0).call(this),500,{leading:!0,trailing:!0}));X(this,no,this.updateOnlineStatus.bind(this));X(this,yp,new Map);this.defaultLocale=aW;const n={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:pW,meta:{},onBeforeFileAdded:(s,a)=>!Object.hasOwn(a,s.id),onBeforeUpload:s=>s,store:new JR,logger:BV,infoTimeout:5e3},r={...n,...e};this.opts={...r,restrictions:{...n.restrictions,...e==null?void 0:e.restrictions}},e!=null&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e!=null&&e.debug&&(this.opts.logger=VV),this.log(`Using Core v${Kg.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...Yf,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:mW(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),re(this,_s,new fW(()=>this.opts,()=>this.i18n)),re(this,vp,this.store.subscribe((s,a,o)=>{this.emit("state-update",s,a,o),this.updateAll(a)})),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),ae(this,Oe,uD).call(this)}emit(e,...n){k(this,pl).emit(e,...n)}on(e,n){return k(this,pl).on(e,n),this}once(e,n){return k(this,pl).once(e,n),this}off(e,n){return k(this,pl).off(e,n),this}updateAll(e){this.iteratePlugins(n=>{n.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const n=this.getState().files;this.setState({files:{...n,...Object.fromEntries(Object.entries(e).map(([r,s])=>[r,{...n[r],...s}]))}})}setFileState(e,n){if(!this.getState().files[e])throw new Error(`Can’t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:n})}i18nInit(){const e=r=>this.log(`Missing i18n string: ${r}`,"error"),n=new PR([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=n.translate.bind(n),this.i18nArray=n.translateArray.bind(n),this.locale=n.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e==null?void 0:e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(n=>{n.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},n={...this.getState().files},r=Object.create(null);Object.keys(n).forEach(s=>{r[s]={...n[s],progress:{...n[s].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:r,...Yf})}clear(){const{capabilities:e,currentUploads:n}=this.getState();if(Object.keys(n).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...Yf,files:{}})}addPreProcessor(e){k(this,vd).add(e)}removePreProcessor(e){return k(this,vd).delete(e)}addPostProcessor(e){k(this,fl).add(e)}removePostProcessor(e){return k(this,fl).delete(e)}addUploader(e){k(this,yd).add(e)}removeUploader(e){return k(this,yd).delete(e)}setMeta(e){const n={...this.getState().meta,...e},r={...this.getState().files};Object.keys(r).forEach(s=>{r[s]={...r[s],meta:{...r[s].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:n,files:r})}setFileMeta(e,n){const r={...this.getState().files};if(!r[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}const s={...r[e].meta,...n};r[e]={...r[e],meta:s},this.setState({files:r})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(n=>this.getFile(n))}getObjectOfFilesPerState(){const{files:e,totalProgress:n,error:r}=this.getState(),s=Object.values(e),a=[],o=[],l=[],c=[],u=[],h=[],p=[],m=[],x=[];for(const N of s){const{progress:w}=N;!w.uploadComplete&&w.uploadStarted&&(a.push(N),N.isPaused||m.push(N)),w.uploadStarted||o.push(N),(w.uploadStarted||w.preprocess||w.postprocess)&&l.push(N),w.uploadStarted&&c.push(N),N.isPaused&&u.push(N),w.uploadComplete&&h.push(N),N.error&&p.push(N),(w.preprocess||w.postprocess)&&x.push(N)}return{newFiles:o,startedFiles:l,uploadStartedFiles:c,pausedFiles:u,completeFiles:h,erroredFiles:p,inProgressFiles:a,inProgressNotPausedFiles:m,processingFiles:x,isUploadStarted:c.length>0,isAllComplete:n===100&&h.length===s.length&&x.length===0,isAllErrored:!!r&&p.length===s.length,isAllPaused:a.length!==0&&u.length===a.length,isUploadInProgress:a.length>0,isSomeGhost:s.some(N=>N.isGhost)}}validateRestrictions(e,n=this.getFiles()){try{k(this,_s).validate(n,[e])}catch(r){return r}return null}validateSingleFile(e){try{k(this,_s).validateSingleFile(e)}catch(n){return n.message}return null}validateAggregateRestrictions(e){const n=this.getFiles();try{k(this,_s).validateAggregateRestrictions(n,e)}catch(r){return r.message}return null}checkIfFileAlreadyExists(e){const{files:n}=this.getState();return!!(n[e]&&!n[e].isGhost)}addFile(e){ae(this,Oe,w0).call(this,e);const{nextFilesState:n,validFilesToAdd:r,errors:s}=ae(this,Oe,C0).call(this,[e]),a=s.filter(l=>l.isRestriction);if(ae(this,Oe,Ko).call(this,a),s.length>0)throw s[0];this.setState({files:n});const[o]=r;return this.emit("file-added",o),this.emit("files-added",r),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),ae(this,Oe,_0).call(this),o.id}addFiles(e){ae(this,Oe,w0).call(this);const{nextFilesState:n,validFilesToAdd:r,errors:s}=ae(this,Oe,C0).call(this,e),a=s.filter(l=>l.isRestriction);ae(this,Oe,Ko).call(this,a);const o=s.filter(l=>!l.isRestriction);if(o.length>0){let l=`Multiple errors occurred while adding files:
`;if(o.forEach(c=>{l+=`
 * ${c.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:l},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,l);{const c=new Error(l);throw c.errors=o,c}}this.setState({files:n}),r.forEach(l=>{this.emit("file-added",l)}),this.emit("files-added",r),r.length>5?this.log(`Added batch of ${r.length} files`):Object.values(r).forEach(l=>{this.log(`Added file: ${l.name}
 id: ${l.id}
 type: ${l.type}`)}),r.length>0&&ae(this,Oe,_0).call(this)}removeFiles(e){const{files:n,currentUploads:r}=this.getState(),s={...n},a={...r},o=Object.create(null);e.forEach(h=>{n[h]&&(o[h]=n[h],delete s[h])});function l(h){return o[h]===void 0}Object.keys(a).forEach(h=>{const p=r[h].fileIDs.filter(l);if(p.length===0){delete a[h];return}const{capabilities:m}=this.getState();if(p.length!==r[h].fileIDs.length&&!m.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");a[h]={...r[h],fileIDs:p}});const c={currentUploads:a,files:s};Object.keys(s).length===0&&(c.allowNewUpload=!0,c.error=null,c.recoveredState=null),this.setState(c),k(this,ml).call(this);const u=Object.keys(o);u.forEach(h=>{this.emit("file-removed",o[h])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const n=this.getFile(e),s=!(n.isPaused||!1);return this.setFileState(e,{isPaused:s}),this.emit("upload-pause",n,s),s}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(r=>!e[r].progress.uploadComplete&&e[r].progress.uploadStarted).forEach(r=>{const s={...e[r],isPaused:!0};e[r]=s}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(r=>!e[r].progress.uploadComplete&&e[r].progress.uploadStarted).forEach(r=>{const s={...e[r],isPaused:!1,error:null};e[r]=s}),this.setState({files:e}),this.emit("resume-all")}async retryAll(){const e=await ae(this,Oe,E0).call(this);return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),n=Object.keys(e);n.length&&this.removeFiles(n),this.setState(Yf)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const n=ae(this,Oe,Qu).call(this,[e],{forceAllowNewUpload:!0});return ae(this,Oe,Yu).call(this,n)}logout(){this.iteratePlugins(e=>{var n,r;(r=(n=e.provider)==null?void 0:n.logout)==null||r.call(n)})}[Symbol.for("uppy test: updateTotalProgress")](){return ae(this,Oe,j0).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,...n){if(typeof e!="function"){const o=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(o)}const r=new e(this,...n),s=r.id;if(!s)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");const a=this.getPlugin(s);if(a){const o=`Already found a plugin named '${a.id}'. Tried to use: '${s}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(o)}return e.VERSION&&this.log(`Using ${s} v${e.VERSION}`),r.type in k(this,ws)?k(this,ws)[r.type].push(r):k(this,ws)[r.type]=[r],r.install(),this.emit("plugin-added",r),this}getPlugin(e){for(const n of Object.values(k(this,ws))){const r=n.find(s=>s.id===e);if(r!=null)return r}}[Symbol.for("uppy test: getPlugins")](e){return k(this,ws)[e]}iteratePlugins(e){Object.values(k(this,ws)).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const n=k(this,ws)[e.type],r=n.findIndex(o=>o.id===e.id);r!==-1&&n.splice(r,1);const a={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(a)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),k(this,vp).call(this),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",k(this,no)),window.removeEventListener("offline",k(this,no)))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,n="info",r=3e3){const s=typeof e=="object";this.setState({info:[...this.getState().info,{type:n,message:s?e.message:e,details:s?e.details:null}]}),setTimeout(()=>this.hideInfo(),r),this.emit("info-visible")}log(e,n){const{logger:r}=this.opts;switch(n){case"error":r.error(e);break;case"warning":r.warn(e);break;default:r.debug(e);break}}registerRequestClient(e,n){k(this,yp).set(e,n)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const n=k(this,yp).get(e.remote.requestClientId);if(n==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return n}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?ae(this,Oe,Yu).call(this,e):(ae(this,Oe,Rm).call(this,e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](...e){return ae(this,Oe,Qu).call(this,...e)}addResultData(e,n){if(!ae(this,Oe,hD).call(this,e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:r}=this.getState(),s={...r[e],result:{...r[e].result,...n}};this.setState({currentUploads:{...r,[e]:s}})}async upload(){var s;(s=k(this,ws).uploader)!=null&&s.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(ae(this,Oe,S0).call(this).length>0){const a=await ae(this,Oe,E0).call(this);if(!(this.getFiles().filter(l=>l.progress.uploadStarted==null).length>0))return this.emit("complete",a),a;({files:e}=this.getState())}const r=this.opts.onBeforeUpload(e);return r===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(r&&typeof r=="object"&&(e=r,this.setState({files:e})),Promise.resolve().then(()=>k(this,_s).validateMinNumberOfFiles(e)).catch(a=>{throw ae(this,Oe,Ko).call(this,[a]),a}).then(()=>{if(!ae(this,Oe,lD).call(this,e))throw new As(this.i18n("missingRequiredMetaField"))}).catch(a=>{throw a}).then(async()=>{const{currentUploads:a}=this.getState(),o=Object.values(a).flatMap(h=>h.fileIDs),l=[];Object.keys(e).forEach(h=>{const p=this.getFile(h);!p.progress.uploadStarted&&o.indexOf(h)===-1&&l.push(p.id)});const c=ae(this,Oe,Qu).call(this,l),u=await ae(this,Oe,Yu).call(this,c);return this.emit("complete",u),u}).catch(a=>{throw this.emit("error",a),this.log(a,"error"),a}))}};ws=new WeakMap,_s=new WeakMap,vp=new WeakMap,pl=new WeakMap,vd=new WeakMap,yd=new WeakMap,fl=new WeakMap,Oe=new WeakSet,Ko=function(e){for(const o of e)o.isRestriction?this.emit("restriction-failed",o.file,o):this.emit("error",o,o.file),this.log(o,"warning");const n=e.filter(o=>o.isUserFacing),r=4,s=n.slice(0,r),a=n.slice(r);s.forEach(({message:o,details:l=""})=>{this.info({message:o,details:l},"error",this.opts.infoTimeout)}),a.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:a.length})})},b0=function(e){const{missingFields:n,error:r}=k(this,_s).getMissingRequiredMetaFields(e);return n.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:n,error:r.message}),this.log(r.message),this.emit("restriction-failed",e,r),!1):(n.length===0&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)},lD=function(e){let n=!0;for(const r of Object.values(e))ae(this,Oe,b0).call(this,r)||(n=!1);return n},w0=function(e){const{allowNewUpload:n}=this.getState();if(n===!1){const r=new As(this.i18n("noMoreFilesAllowed"),{file:e});throw ae(this,Oe,Ko).call(this,[r]),r}},cD=function(e){const n=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,r=nD(n),s=iW(r,n),a=tD(s).extension,o=IH(n,this.getID()),l=n.meta||{};l.name=s,l.type=r;const c=Number.isFinite(n.data.size)?n.data.size:null;return{source:n.source||"",id:o,name:s,extension:a||"",meta:{...this.getState().meta,...l},type:r,data:n.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:c,uploadComplete:!1,uploadStarted:null},size:c,isGhost:!1,isRemote:n.isRemote||!1,remote:n.remote,preview:n.preview}},_0=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))},C0=function(e){var o;let{files:n}=this.getState(),r={...n};const s=[],a=[];for(const l of e)try{let c=ae(this,Oe,cD).call(this,l);const u=(o=n[c.id])==null?void 0:o.isGhost;u&&(c={...n[c.id],isGhost:!1,data:l.data},this.log(`Replaced the blob in the restored ghost file: ${c.name}, ${c.id}`));const h=this.opts.onBeforeFileAdded(c,r);if(n=this.getState().files,r={...n,...r},!h&&this.checkIfFileAlreadyExists(c.id))throw new As(this.i18n("noDuplicates",{fileName:c.name??this.i18n("unnamed")}),{file:l});if(h===!1&&!u)throw new As("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:l});typeof h=="object"&&h!==null&&(c=h),k(this,_s).validateSingleFile(c),r[c.id]=c,s.push(c)}catch(c){a.push(c)}try{k(this,_s).validateAggregateRestrictions(Object.values(n),s)}catch(l){return a.push(l),{nextFilesState:n,validFilesToAdd:[],errors:a}}return{nextFilesState:r,validFilesToAdd:s,errors:a}},S0=function(){const{files:e}=this.getState();return Object.keys(e).filter(n=>{const r=e[n];return r.error&&(!r.missingRequiredMetaFields||r.missingRequiredMetaFields.length===0)})},E0=async function(){const e=ae(this,Oe,S0).call(this),n={...this.getState().files};if(e.forEach(s=>{n[s]={...n[s],isPaused:!1,error:null}}),this.setState({files:n,error:null}),this.emit("retry-all",this.getFilesByIds(e)),e.length===0)return{successful:[],failed:[]};const r=ae(this,Oe,Qu).call(this,e,{forceAllowNewUpload:!0});return ae(this,Oe,Yu).call(this,r)},Gg=new WeakMap,j0=function(){const e=ae(this,Oe,dD).call(this);let n=null;e!=null&&(n=Math.round(e*100),n>100?n=100:n<0&&(n=0)),this.emit("progress",n??0),this.setState({totalProgress:n??0})},ml=new WeakMap,dD=function(){const n=this.getFiles().filter(c=>c.progress.uploadStarted||c.progress.preprocess||c.progress.postprocess);if(n.length===0)return 0;if(n.every(c=>c.progress.uploadComplete))return 1;const r=c=>c.progress.bytesTotal!=null&&c.progress.bytesTotal!==0,s=n.filter(r),a=n.filter(c=>!r(c));if(s.every(c=>c.progress.uploadComplete)&&a.length>0&&!a.every(c=>c.progress.uploadComplete))return null;const o=s.reduce((c,u)=>c+(u.progress.bytesTotal??0),0),l=s.reduce((c,u)=>c+(u.progress.bytesUploaded||0),0);return o===0?0:l/o},uD=function(){const e=(s,a,o)=>{let l=s.message||"Unknown error";s.details&&(l+=` ${s.details}`),this.setState({error:l}),a!=null&&a.id in this.getState().files&&this.setFileState(a.id,{error:l,response:o})};this.on("error",e),this.on("upload-error",(s,a,o)=>{if(e(a,s,o),typeof a=="object"&&a.message){this.log(a.message,"error");const l=new Error(this.i18n("failedToUpload",{file:(s==null?void 0:s.name)??""}));l.isUserFacing=!0,l.details=a.message,a.details&&(l.details+=` ${a.details}`),ae(this,Oe,Ko).call(this,[l])}else ae(this,Oe,Ko).call(this,[a])});let n=null;this.on("upload-stalled",(s,a)=>{const{message:o}=s,l=a.map(c=>c.meta.name).join(", ");n||(this.info({message:o,details:l},"warning",this.opts.infoTimeout),n=setTimeout(()=>{n=null},this.opts.infoTimeout)),this.log(`${o} ${l}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const r=s=>{const a=s.filter(l=>{const c=l!=null&&this.getFile(l.id);return c||this.log(`Not setting progress for a file that has been removed: ${l==null?void 0:l.id}`),c}),o=Object.fromEntries(a.map(l=>[l.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:l.size}}]));this.patchFilesState(o)};this.on("upload-start",r),this.on("upload-progress",k(this,Gg)),this.on("upload-success",(s,a)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const o=this.getFile(s.id).progress;this.setFileState(s.id,{progress:{...o,postprocess:k(this,fl).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:o.bytesTotal},response:a,uploadURL:a.uploadURL,isPaused:!1}),s.size==null&&this.setFileState(s.id,{size:a.bytesUploaded||o.bytesTotal}),k(this,ml).call(this)}),this.on("preprocess-progress",(s,a)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getFile(s.id).progress,preprocess:a}})}),this.on("preprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const a={...this.getState().files};a[s.id]={...a[s.id],progress:{...a[s.id].progress}},delete a[s.id].progress.preprocess,this.setState({files:a})}),this.on("postprocess-progress",(s,a)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getState().files[s.id].progress,postprocess:a}})}),this.on("postprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const a={...this.getState().files};a[s.id]={...a[s.id],progress:{...a[s.id].progress}},delete a[s.id].progress.postprocess,this.setState({files:a})}),this.on("restored",()=>{k(this,ml).call(this)}),this.on("dashboard:file-edit-complete",s=>{s&&ae(this,Oe,b0).call(this,s)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",k(this,no)),window.addEventListener("offline",k(this,no)),setTimeout(k(this,no),3e3))},no=new WeakMap,yp=new WeakMap,Qu=function(e,n={}){const{forceAllowNewUpload:r=!1}=n,{allowNewUpload:s,currentUploads:a}=this.getState();if(!s&&!r)throw new Error("Cannot create a new upload: already uploading.");const o=zq();return this.emit("upload",o,this.getFilesByIds(e)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...a,[o]:{fileIDs:e,step:0,result:{}}}}),o},hD=function(e){const{currentUploads:n}=this.getState();return n[e]},Rm=function(e){const n={...this.getState().currentUploads};delete n[e],this.setState({currentUploads:n})},Yu=async function(e){const n=()=>{const{currentUploads:o}=this.getState();return o[e]};let r=n();const s=[...k(this,vd),...k(this,yd),...k(this,fl)];try{for(let o=r.step||0;o<s.length&&r;o++){const l=s[o];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...r,step:o}}});const{fileIDs:c}=r;await l(c,e),r=n()}}catch(o){throw ae(this,Oe,Rm).call(this,e),o}if(r){r.fileIDs.forEach(u=>{const h=this.getFile(u);h!=null&&h.progress.postprocess&&this.emit("postprocess-complete",h)});const o=r.fileIDs.map(u=>this.getFile(u)),l=o.filter(u=>!u.error),c=o.filter(u=>u.error);this.addResultData(e,{successful:l,failed:c,uploadID:e}),r=n()}let a;return r&&(a=r.result,ae(this,Oe,Rm).call(this,e)),a==null&&(this.log(`Not setting result for an upload that has been removed: ${e}`),a={successful:[],failed:[],uploadID:e}),a},Z(Kg,"VERSION",sW.version);let x0=Kg;var gW=0;function M(t,e,n,r,s,a){e||(e={});var o,l,c=e;if("ref"in c)for(l in c={},e)l=="ref"?o=e[l]:c[l]=e[l];var u={type:t,props:c,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--gW,__i:-1,__u:0,__source:s,__self:a};if(typeof t=="function"&&(o=t.defaultProps))for(l in o)c[l]===void 0&&(c[l]=o[l]);return rt.vnode&&rt.vnode(u),u}const vW="@uppy/informer",yW="A notification and error pop-up bar for Uppy.",xW="4.3.2",bW="MIT",wW="lib/index.js",_W="dist/style.min.css",CW="module",SW={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build"},EW=["file uploader","uppy","uppy-plugin","notification","bar","ui"],jW="https://uppy.io",NW={url:"https://github.com/transloadit/uppy/issues"},TW={type:"git",url:"git+https://github.com/transloadit/uppy.git"},kW=["src","lib","dist","CHANGELOG.md"],AW={"@uppy/utils":"^6.2.2",preact:"^10.5.13"},PW={"@uppy/core":"^4.5.2"},IW={cssnano:"^7.0.7",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3"},RW={name:vW,description:yW,version:xW,license:bW,main:wW,style:_W,type:CW,scripts:SW,keywords:EW,homepage:jW,bugs:NW,repository:TW,files:kW,dependencies:AW,peerDependencies:PW,devDependencies:IW},Cj=300;class DW extends Dr{constructor(){super(...arguments);Z(this,"ref",WV())}componentWillEnter(n){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(n,Cj)}componentWillLeave(n){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(n,Cj)}render(){const{children:n}=this.props;return M("div",{className:"uppy-Informer-animated",ref:this.ref,children:n})}}function OW(t,e){return Object.assign(t,e)}function FW(t,e){return(t==null?void 0:t.key)??e}function MW(t,e){const n=t._ptgLinkedRefs||(t._ptgLinkedRefs={});return n[e]||(n[e]=r=>{t.refs[e]=r})}function Ou(t){const e={};for(let n=0;n<t.length;n++)if(t[n]!=null){const r=FW(t[n],n.toString(36));e[r]=t[n]}return e}function LW(t,e){t=t||{},e=e||{};const n=o=>Object.hasOwn(e,o)?e[o]:t[o],r={};let s=[];for(const o in t)Object.hasOwn(e,o)?s.length&&(r[o]=s,s=[]):s.push(o);const a={};for(const o in e){if(Object.hasOwn(r,o))for(let l=0;l<r[o].length;l++){const c=r[o][l];a[r[o][l]]=n(c)}a[o]=n(o)}for(let o=0;o<s.length;o++)a[s[o]]=n(s[o]);return a}const $W=t=>t;class pD extends Dr{constructor(e,n){super(e,n),this.refs={},this.state={children:Ou(Fs(Fs(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const n in e)e[n]&&this.performAppear(n)}componentWillReceiveProps(e){const n=Ou(Fs(e.children)||[]),r=this.state.children;this.setState(a=>({children:LW(a.children,n)}));let s;for(s in n)if(Object.hasOwn(n,s)){const a=r&&Object.hasOwn(r,s);n[s]&&a&&this.currentlyTransitioningKeys[s]?(this.keysToEnter.push(s),this.keysToAbortLeave.push(s)):n[s]&&!a&&!this.currentlyTransitioningKeys[s]&&this.keysToEnter.push(s)}for(s in r)if(Object.hasOwn(r,s)){const a=n&&Object.hasOwn(n,s);r[s]&&!a&&!this.currentlyTransitioningKeys[s]&&this.keysToLeave.push(s)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:n}=this;this.keysToLeave=[],n.forEach(this.performLeave)}_finishAbort(e){const n=this.keysToAbortLeave.indexOf(e);n!==-1&&this.keysToAbortLeave.splice(n,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const n=this.refs[e];n!=null&&n.componentWillAppear?n.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const n=this.refs[e];n!=null&&n.componentDidAppear&&n.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const r=Ou(Fs(this.props.children)||[]);(!r||!Object.hasOwn(r,e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const n=this.refs[e];n!=null&&n.componentWillEnter?n.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const n=this.refs[e];n!=null&&n.componentDidEnter&&n.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const r=Ou(Fs(this.props.children)||[]);(!r||!Object.hasOwn(r,e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const r=this.refs[e];r!=null&&r.componentWillLeave?r.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const r=this.refs[e];r!=null&&r.componentDidLeave&&r.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const s=Ou(Fs(this.props.children)||[]);if(s&&Object.hasOwn(s,e))this.performEnter(e);else{const a=OW({},this.state.children);delete a[e],this.setState({children:a})}}render({childFactory:e,transitionLeave:n,transitionName:r,transitionAppear:s,transitionEnter:a,transitionLeaveTimeout:o,transitionEnterTimeout:l,transitionAppearTimeout:c,component:u,...h},{children:p}){const m=Object.entries(p).map(([x,N])=>{if(!N)return;const w=MW(this,x);return WR(e(N),{ref:w,key:x})}).filter(Boolean);return Gh(u,h,m)}}pD.defaultProps={component:"span",childFactory:$W};class fD extends Zd{constructor(n,r){super(n,r);Z(this,"render",n=>M("div",{className:"uppy uppy-Informer",children:M(pD,{children:n.info.map(r=>M(DW,{children:M("p",{role:"alert",children:[r.message," ",r.details&&M("span",{"aria-label":r.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${r.message} 

 ${r.details}`),children:"?"})]})},r.message))})}));this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){const{target:n}=this.opts;n&&this.mount(n,this)}}Z(fD,"VERSION",RW.version);var mD={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,r(l)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(mD);var UW=mD.exports;const Xs=Ea(UW),zW={position:"relative",width:"100%",minHeight:"100%"},BW={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class VW extends Dr{constructor(n){super(n);Z(this,"handleScroll",()=>{this.setState({offset:this.base.scrollTop})});Z(this,"handleResize",()=>{this.resize()});this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){var n;(n=this.focusElement)!=null&&n.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:n}=this.state;n!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render({data:n,rowHeight:r,renderRow:s,overscanCount:a=10,...o}){const{offset:l,height:c}=this.state;let u=Math.floor(l/r),h=Math.floor(c/r);a&&(u=Math.max(0,u-u%a),h+=a);const p=u+h+4,m=n.slice(u,p),x={...zW,height:n.length*r},N={...BW,top:u*r};return M("div",{onScroll:this.handleScroll,...o,children:M("div",{role:"presentation",style:x,children:M("div",{role:"presentation",style:N,children:m.map(s)})})})}}function HW(){return M("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:M("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function Sj(t,e,n,r){return t===e?t:r===0?e:t+(e-t)*2**(-r/n)}const qW="@uppy/status-bar",WW="A progress bar for Uppy, with many bells and whistles.",GW="4.2.3",KW="MIT",QW="lib/index.js",YW="dist/style.min.css",ZW="module",XW={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build"},JW=["file uploader","uppy","uppy-plugin","progress bar","status bar","progress","upload","eta","speed"],eG="https://uppy.io",tG={url:"https://github.com/transloadit/uppy/issues"},nG={type:"git",url:"git+https://github.com/transloadit/uppy.git"},rG=["src","lib","dist","CHANGELOG.md"],sG={"@transloadit/prettier-bytes":"^0.3.4","@uppy/utils":"^6.2.2",classnames:"^2.2.6",preact:"^10.5.13"},iG={"@uppy/core":"^4.5.2"},aG={cssnano:"^7.0.7",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3"},oG={name:qW,description:WW,version:GW,license:KW,main:QW,style:YW,type:ZW,scripts:XW,keywords:JW,homepage:eG,bugs:tG,repository:nG,files:rG,dependencies:sG,peerDependencies:iG,devDependencies:aG},lG={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},pi={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function cG(t){const e=Math.floor(t/3600)%24,n=Math.floor(t/60)%60,r=Math.floor(t%60);return{hours:e,minutes:n,seconds:r}}function dG(t){const e=cG(t),n=e.hours===0?"":`${e.hours}h`,r=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,s=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${n}${r}${s}`}const uG="·",Ej=()=>` ${uG} `;function hG(t){const{newFiles:e,isUploadStarted:n,recoveredState:r,i18n:s,uploadState:a,isSomeGhost:o,startUpload:l}=t,c=Xs("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":a===pi.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),u=e&&n&&!r?s("uploadXNewFiles",{smart_count:e}):s("uploadXFiles",{smart_count:e});return M("button",{type:"button",className:c,"aria-label":s("uploadXFiles",{smart_count:e}),onClick:l,disabled:o,"data-uppy-super-focusable":!0,children:u})}function pG(t){const{i18n:e,uppy:n}=t;return M("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>n.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:M("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),e("retry")]})}function fG(t){const{i18n:e,uppy:n}=t;return M("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>n.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:M("g",{fill:"none",fillRule:"evenodd",children:[M("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),M("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function mG(t){const{isAllPaused:e,i18n:n,isAllComplete:r,resumableUploads:s,uppy:a}=t,o=n(e?"resume":"pause");function l(){if(!r){if(!s){a.cancelAll();return}if(e){a.resumeAll();return}a.pauseAll()}}return M("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:l,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:M("g",{fill:"none",fillRule:"evenodd",children:[M("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),M("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function gG(t){const{i18n:e,doneButtonHandler:n}=t;return M("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:n,"data-uppy-super-focusable":!0,children:e("done")})}function gD(){return M("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:M("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function vG(t){const{progress:e}=t,{value:n,mode:r,message:s}=e;return M("div",{className:"uppy-StatusBar-content",children:[M(gD,{}),r==="determinate"?`${Math.round(n*100)}% · `:"",s]})}function yG(t){const{numUploads:e,complete:n,totalUploadedSize:r,totalSize:s,totalETA:a,i18n:o}=t,l=e>1,c=sl(r);return M("div",{className:"uppy-StatusBar-statusSecondary",children:[l&&o("filesUploadedOfTotal",{complete:n,smart_count:e}),M("span",{className:"uppy-StatusBar-additionalInfo",children:[l&&Ej(),s!=null?o("dataUploadedOfTotal",{complete:c,total:sl(s)}):o("dataUploadedOfUnknown",{complete:c}),Ej(),a!=null&&o("xTimeLeft",{time:dG(a)})]})]})}function vD(t){const{i18n:e,complete:n,numUploads:r}=t;return M("div",{className:"uppy-StatusBar-statusSecondary",children:e("filesUploadedOfTotal",{complete:n,smart_count:r})})}function xG(t){const{i18n:e,newFiles:n,startUpload:r}=t,s=Xs("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return M("div",{className:"uppy-StatusBar-statusSecondary",children:[M("div",{className:"uppy-StatusBar-statusSecondaryHint",children:e("xMoreFilesAdded",{smart_count:n})}),M("button",{type:"button",className:s,"aria-label":e("uploadXFiles",{smart_count:n}),onClick:r,children:e("upload")})]})}function bG(t){const{i18n:e,supportsUploadProgress:n,totalProgress:r,showProgressDetails:s,isUploadStarted:a,isAllComplete:o,isAllPaused:l,newFiles:c,numUploads:u,complete:h,totalUploadedSize:p,totalSize:m,totalETA:x,startUpload:N}=t,w=c&&a;if(!a||o)return null;const b=e(l?"paused":"uploading");function S(){return!l&&!w&&s?n?M(yG,{numUploads:u,complete:h,totalUploadedSize:p,totalSize:m,totalETA:x,i18n:e}):M(vD,{i18n:e,complete:h,numUploads:u}):null}return M("div",{className:"uppy-StatusBar-content",title:b,children:[l?null:M(gD,{}),M("div",{className:"uppy-StatusBar-status",children:[M("div",{className:"uppy-StatusBar-statusPrimary",children:n&&r!==0?`${b}: ${r}%`:b}),S(),w?M(xG,{i18n:e,newFiles:c,startUpload:N}):null]})]})}function wG(t){const{i18n:e}=t;return M("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete"),children:M("div",{className:"uppy-StatusBar-status",children:M("div",{className:"uppy-StatusBar-statusPrimary",children:[M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:M("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),e("complete")]})})})}function _G(t){const{error:e,i18n:n,complete:r,numUploads:s}=t;function a(){const o=`${n("uploadFailed")} 

 ${e}`;alert(o)}return M("div",{className:"uppy-StatusBar-content",title:n("uploadFailed"),children:[M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:M("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),M("div",{className:"uppy-StatusBar-status",children:[M("div",{className:"uppy-StatusBar-statusPrimary",children:[n("uploadFailed"),M("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":n("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:a,type:"button",children:"?"})]}),M(vD,{i18n:n,complete:r,numUploads:s})]})]})}function lx(t){const e=[];let n="indeterminate",r;for(const{progress:a}of Object.values(t)){const{preprocess:o,postprocess:l}=a;r==null&&(o||l)&&({mode:n,message:r}=o||l),(o==null?void 0:o.mode)==="determinate"&&e.push(o.value),(l==null?void 0:l.mode)==="determinate"&&e.push(l.value)}const s=e.reduce((a,o)=>a+o/e.length,0);return{mode:n,message:r,value:s}}const{STATE_ERROR:jj,STATE_WAITING:CG,STATE_PREPROCESSING:cx,STATE_UPLOADING:Zf,STATE_POSTPROCESSING:dx,STATE_COMPLETE:Xf}=pi;function SG({newFiles:t,allowNewUpload:e,isUploadInProgress:n,isAllPaused:r,resumableUploads:s,error:a,hideUploadButton:o=void 0,hidePauseResumeButton:l=!1,hideCancelButton:c=!1,hideRetryButton:u=!1,recoveredState:h,uploadState:p,totalProgress:m,files:x,supportsUploadProgress:N,hideAfterFinish:w=!1,isSomeGhost:b,doneButtonHandler:S=void 0,isUploadStarted:v,i18n:T,startUpload:I,uppy:L,isAllComplete:R,showProgressDetails:C=void 0,numUploads:_,complete:P,totalSize:A,totalETA:F,totalUploadedSize:D}){function E(){switch(p){case dx:case cx:{const Xe=lx(x);return Xe.mode==="determinate"?Xe.value*100:m}case jj:return null;case Zf:return N?m:null;default:return m}}function $(){switch(p){case dx:case cx:{const{mode:Xe}=lx(x);return Xe==="indeterminate"}case Zf:return!N;default:return!1}}const G=E(),se=G??100,de=!a&&t&&(!n&&!r||h)&&e&&!o,Q=!c&&p!==CG&&p!==Xf,ce=s&&!l&&p===Zf,ue=a&&!R&&!u,we=S&&p===Xf,$e=Xs("uppy-StatusBar-progress",{"is-indeterminate":$()}),B=Xs("uppy-StatusBar",`is-${p}`,{"has-ghosts":b}),me=(()=>{switch(p){case cx:case dx:return M(vG,{progress:lx(x)});case Xf:return M(wG,{i18n:T});case jj:return M(_G,{error:a,i18n:T,numUploads:_,complete:P});case Zf:return M(bG,{i18n:T,supportsUploadProgress:N,totalProgress:m,showProgressDetails:C,isUploadStarted:v,isAllComplete:R,isAllPaused:r,newFiles:t,numUploads:_,complete:P,totalUploadedSize:D,totalSize:A,totalETA:F,startUpload:I});default:return null}})();return!(de||ue||ce||Q||we)&&!me||p===Xf&&w?null:M("div",{className:B,children:[M("div",{className:$e,style:{width:`${se}%`},role:"progressbar","aria-label":`${se}%`,"aria-valuetext":`${se}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":G}),me,M("div",{className:"uppy-StatusBar-actions",children:[de?M(hG,{newFiles:t,isUploadStarted:v,recoveredState:h,i18n:T,isSomeGhost:b,startUpload:I,uploadState:p}):null,ue?M(pG,{i18n:T,uppy:L}):null,ce?M(mG,{isAllPaused:r,i18n:T,isAllComplete:R,resumableUploads:s,uppy:L}):null,Q?M(fG,{i18n:T,uppy:L}):null,we?M(gG,{i18n:T,doneButtonHandler:S}):null]})]})}const EG=2e3,jG=2e3;function NG(t,e,n,r){if(t)return pi.STATE_ERROR;if(e)return pi.STATE_COMPLETE;if(n)return pi.STATE_WAITING;let s=pi.STATE_WAITING;const a=Object.keys(r);for(let o=0;o<a.length;o++){const{progress:l}=r[a[o]];if(l.uploadStarted&&!l.uploadComplete)return pi.STATE_UPLOADING;l.preprocess&&(s=pi.STATE_PREPROCESSING),l.postprocess&&s!==pi.STATE_PREPROCESSING&&(s=pi.STATE_POSTPROCESSING)}return s}const TG={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var _x,ro,so,gl,ra,Qg,yD,xp;let kG=(_x=class extends Zd{constructor(n,r){super(n,{...TG,...r});X(this,Qg);X(this,ro);X(this,so);X(this,gl);X(this,ra);Z(this,"startUpload",()=>this.uppy.upload().catch(()=>{}));X(this,xp,()=>{const{recoveredState:n}=this.uppy.getState();if(re(this,gl,null),re(this,ra,null),n){re(this,so,Object.values(n.files).reduce((r,{progress:s})=>r+s.bytesUploaded,0)),this.uppy.emit("restore-confirmed");return}re(this,ro,performance.now()),re(this,so,0)});this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=lG,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(n){const{capabilities:r,files:s,allowNewUpload:a,totalProgress:o,error:l,recoveredState:c}=n,{newFiles:u,startedFiles:h,completeFiles:p,isUploadStarted:m,isAllComplete:x,isAllPaused:N,isUploadInProgress:w,isSomeGhost:b}=this.uppy.getObjectOfFilesPerState(),S=c?Object.values(s):u,v=!!r.resumableUploads,T=r.uploadProgress!==!1;let I=null,L=0;h.every(C=>C.progress.bytesTotal!=null&&C.progress.bytesTotal!==0)?(I=0,h.forEach(C=>{I+=C.progress.bytesTotal||0,L+=C.progress.bytesUploaded||0})):h.forEach(C=>{L+=C.progress.bytesUploaded||0});const R=ae(this,Qg,yD).call(this,{uploaded:L,total:I});return SG({error:l,uploadState:NG(l,x,c,n.files||{}),allowNewUpload:a,totalProgress:o,totalSize:I,totalUploadedSize:L,isAllComplete:!1,isAllPaused:N,isUploadStarted:m,isUploadInProgress:w,isSomeGhost:b,recoveredState:c,complete:p.length,newFiles:S.length,numUploads:h.length,totalETA:R,files:s,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:v,supportsUploadProgress:T,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const n=this.el;DR(n)||(n.dir="ltr")}install(){const{target:n}=this.opts;n&&this.mount(n,this),this.uppy.on("upload",k(this,xp)),re(this,ro,performance.now()),re(this,so,this.uppy.getFiles().reduce((r,s)=>r+s.progress.bytesUploaded,0))}uninstall(){this.unmount(),this.uppy.off("upload",k(this,xp))}},ro=new WeakMap,so=new WeakMap,gl=new WeakMap,ra=new WeakMap,Qg=new WeakSet,yD=function(n){if(n.total==null||n.total===0)return null;const r=n.total-n.uploaded;if(r<=0)return null;k(this,ro)??re(this,ro,performance.now());const s=performance.now()-k(this,ro);if(s===0)return Math.round((k(this,ra)??0)/100)/10;const a=n.uploaded-k(this,so);if(re(this,so,n.uploaded),a<=0)return Math.round((k(this,ra)??0)/100)/10;const o=a/s,l=k(this,gl)==null?o:Sj(o,k(this,gl),EG,s);re(this,gl,l);const c=r/l,u=Math.max(k(this,ra)-s,0),h=k(this,ra)==null?c:Sj(c,u,jG,s);return re(this,ra,h),re(this,ro,performance.now()),Math.round(h/100)/10},xp=new WeakMap,Z(_x,"VERSION",oG.version),_x);const AG=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function PG(t,e,n){const r=AG.exec(t),s=e.mimeType??(r==null?void 0:r[1])??"plain/text";let a;if((r==null?void 0:r[2])!=null){const o=atob(decodeURIComponent(r[3])),l=new Uint8Array(o.length);for(let c=0;c<o.length;c++)l[c]=o.charCodeAt(c);a=[l]}else(r==null?void 0:r[3])!=null&&(a=[decodeURIComponent(r[3])]);return new Blob(a,{type:s})}function Nj(t){return t.startsWith("blob:")}function Tj(t){return t?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(t):!1}function Tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xD=typeof self<"u"?self:global;const Yh=typeof navigator<"u",IG=Yh&&typeof HTMLImageElement>"u",kj=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),bD=xD.Buffer,wD=!!bD,RG=t=>t!==void 0;function _D(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(RG).length===0)}function Ln(t){let e=new Error(t);throw delete e.stack,e}function Aj(t){let e=function(n){let r=0;return n.ifd0.enabled&&(r+=1024),n.exif.enabled&&(r+=2048),n.makerNote&&(r+=2048),n.userComment&&(r+=1024),n.gps.enabled&&(r+=512),n.interop.enabled&&(r+=100),n.ifd1.enabled&&(r+=1024),r+2048}(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const ux=t=>String.fromCharCode.apply(null,t),Pj=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class Ms{static from(e,n){return e instanceof this&&e.le===n?e:new Ms(e,void 0,void 0,n)}constructor(e,n=0,r,s){if(typeof s=="boolean"&&(this.le=s),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){r===void 0&&(r=e.byteLength-n);let a=new DataView(e,n,r);this._swapDataView(a)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Ms){r===void 0&&(r=e.byteLength-n),(n+=e.byteOffset)+r>e.byteOffset+e.byteLength&&Ln("Creating view outside of available memory in ArrayBuffer");let a=new DataView(e.buffer,n,r);this._swapDataView(a)}else if(typeof e=="number"){let a=new DataView(new ArrayBuffer(e));this._swapDataView(a)}else Ln("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,n,r=Ms){return e instanceof DataView||e instanceof Ms?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Ln("BufferView.set(): Invalid data argument."),this.toUint8().set(e,n),new r(this,n,e.byteLength)}subarray(e,n){return n=n||this._lengthToEnd(e),new Ms(this,e,n)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,n){return new Uint8Array(this.buffer,this.byteOffset+e,n)}getString(e=0,n=this.byteLength){return s=this.getUint8Array(e,n),Pj?Pj.decode(s):wD?Buffer.from(s).toString("utf8"):decodeURIComponent(escape(ux(s)));var s}getLatin1String(e=0,n=this.byteLength){let r=this.getUint8Array(e,n);return ux(r)}getUnicodeString(e=0,n=this.byteLength){const r=[];for(let s=0;s<n&&e+s<this.byteLength;s+=2)r.push(this.getUint16(e+s));return ux(r)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,n=this.le){return this.dataView.getInt16(e,n)}getInt32(e,n=this.le){return this.dataView.getInt32(e,n)}getUint16(e,n=this.le){return this.dataView.getUint16(e,n)}getUint32(e,n=this.le){return this.dataView.getUint32(e,n)}getFloat32(e,n=this.le){return this.dataView.getFloat32(e,n)}getFloat64(e,n=this.le){return this.dataView.getFloat64(e,n)}getFloat(e,n=this.le){return this.dataView.getFloat32(e,n)}getDouble(e,n=this.le){return this.dataView.getFloat64(e,n)}getUintBytes(e,n,r){switch(n){case 1:return this.getUint8(e,r);case 2:return this.getUint16(e,r);case 4:return this.getUint32(e,r);case 8:return this.getUint64&&this.getUint64(e,r)}}getUint(e,n,r){switch(n){case 8:return this.getUint8(e,r);case 16:return this.getUint16(e,r);case 32:return this.getUint32(e,r);case 64:return this.getUint64&&this.getUint64(e,r)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function N0(t,e){Ln(`${t} '${e}' was not loaded, try using full build of exifr.`)}let J1=class extends Map{constructor(e){super(),this.kind=e}get(e,n){return this.has(e)||N0(this.kind,e),n&&(e in n||function(r,s){Ln(`Unknown ${r} '${s}'.`)}(this.kind,e),n[e].enabled||N0(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}};var CD=new J1("file parser"),Ps=new J1("segment parser"),e_=new J1("file reader");let DG=xD.fetch;function Ij(t,e){return(n=t).startsWith("data:")||n.length>1e4?k0(t,e,"base64"):kj&&t.includes("://")?T0(t,e,"url",Rj):kj?k0(t,e,"fs"):Yh?T0(t,e,"url",Rj):void Ln("Invalid input argument");var n}async function T0(t,e,n,r){return e_.has(n)?k0(t,e,n):r?async function(s,a){let o=await a(s);return new Ms(o)}(t,r):void Ln(`Parser ${n} is not loaded`)}async function k0(t,e,n){let r=new(e_.get(n))(t,e);return await r.read(),r}const Rj=t=>DG(t).then(e=>e.arrayBuffer()),A0=t=>new Promise((e,n)=>{let r=new FileReader;r.onloadend=()=>e(r.result||new ArrayBuffer),r.onerror=n,r.readAsArrayBuffer(t)}),t_=new Map,OG=new Map,FG=new Map,Jf=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],SD=["jfif","xmp","icc","iptc","ihdr"],P0=["tiff",...SD],On=["ifd0","ifd1","exif","gps","interop"],em=[...P0,...On],tm=["makerNote","userComment"],ED=["translateKeys","translateValues","reviveValues","multiSegment"],nm=[...ED,"sanitize","mergeOutput","silentErrors"];class jD{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Fu extends jD{get needed(){return this.enabled||this.deps.size>0}constructor(e,n,r,s){if(super(),Tt(this,"enabled",!1),Tt(this,"skip",new Set),Tt(this,"pick",new Set),Tt(this,"deps",new Set),Tt(this,"translateKeys",!1),Tt(this,"translateValues",!1),Tt(this,"reviveValues",!1),this.key=e,this.enabled=n,this.parse=this.enabled,this.applyInheritables(s),this.canBeFiltered=On.includes(e),this.canBeFiltered&&(this.dict=t_.get(e)),r!==void 0)if(Array.isArray(r))this.parse=this.enabled=!0,this.canBeFiltered&&r.length>0&&this.translateTagSet(r,this.pick);else if(typeof r=="object"){if(this.enabled=!0,this.parse=r.parse!==!1,this.canBeFiltered){let{pick:a,skip:o}=r;a&&a.length>0&&this.translateTagSet(a,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(r)}else r===!0||r===!1?this.parse=this.enabled=r:Ln(`Invalid options argument: ${r}`)}applyInheritables(e){let n,r;for(n of ED)r=e[n],r!==void 0&&(this[n]=r)}translateTagSet(e,n){if(this.dict){let r,s,{tagKeys:a,tagValues:o}=this.dict;for(r of e)typeof r=="string"?(s=o.indexOf(r),s===-1&&(s=a.indexOf(Number(r))),s!==-1&&n.add(Number(a[s]))):n.add(r)}else for(let r of e)n.add(r)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Dg(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Dg(this.pick,this.deps)}}var ur={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Dj=new Map;class n_ extends jD{static useCached(e){let n=Dj.get(e);return n!==void 0||(n=new this(e),Dj.set(e,n)),n}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Ln(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Yh?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Jf)this[e]=ur[e];for(e of nm)this[e]=ur[e];for(e of tm)this[e]=ur[e];for(e of em)this[e]=new Fu(e,ur[e],void 0,this)}setupFromTrue(){let e;for(e of Jf)this[e]=ur[e];for(e of nm)this[e]=ur[e];for(e of tm)this[e]=!0;for(e of em)this[e]=new Fu(e,!0,void 0,this)}setupFromArray(e){let n;for(n of Jf)this[n]=ur[n];for(n of nm)this[n]=ur[n];for(n of tm)this[n]=ur[n];for(n of em)this[n]=new Fu(n,!1,void 0,this);this.setupGlobalFilters(e,void 0,On)}setupFromObject(e){let n;for(n of(On.ifd0=On.ifd0||On.image,On.ifd1=On.ifd1||On.thumbnail,Object.assign(this,e),Jf))this[n]=hx(e[n],ur[n]);for(n of nm)this[n]=hx(e[n],ur[n]);for(n of tm)this[n]=hx(e[n],ur[n]);for(n of P0)this[n]=new Fu(n,ur[n],e[n],this);for(n of On)this[n]=new Fu(n,ur[n],e[n],this.tiff);this.setupGlobalFilters(e.pick,e.skip,On,em),e.tiff===!0?this.batchEnableWithBool(On,!0):e.tiff===!1?this.batchEnableWithUserValue(On,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,On):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,On)}batchEnableWithBool(e,n){for(let r of e)this[r].enabled=n}batchEnableWithUserValue(e,n){for(let r of e){let s=n[r];this[r].enabled=s!==!1&&s!==void 0}}setupGlobalFilters(e,n,r,s=r){if(e&&e.length){for(let o of s)this[o].enabled=!1;let a=Oj(e,r);for(let[o,l]of a)Dg(this[o].pick,l),this[o].enabled=!0}else if(n&&n.length){let a=Oj(n,r);for(let[o,l]of a)Dg(this[o].skip,l)}}filterNestedSegmentTags(){let{ifd0:e,exif:n,xmp:r,iptc:s,icc:a}=this;this.makerNote?n.deps.add(37500):n.skip.add(37500),this.userComment?n.deps.add(37510):n.skip.add(37510),r.enabled||e.skip.add(700),s.enabled||e.skip.add(33723),a.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:n,gps:r,interop:s}=this;s.needed&&(n.deps.add(40965),e.deps.add(40965)),n.needed&&e.deps.add(34665),r.needed&&e.deps.add(34853),this.tiff.enabled=On.some(a=>this[a].enabled===!0)||this.makerNote||this.userComment;for(let a of On)this[a].finalizeFilters()}get onlyTiff(){return!SD.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of P0)this[e].enabled&&!Ps.has(e)&&N0("segment parser",e)}}function Oj(t,e){let n,r,s,a,o=[];for(s of e){for(a of(n=t_.get(s),r=[],n))(t.includes(a[0])||t.includes(a[1]))&&r.push(a[0]);r.length&&o.push([s,r])}return o}function hx(t,e){return t!==void 0?t:e!==void 0?e:void 0}function Dg(t,e){for(let n of e)t.add(n)}Tt(n_,"default",ur);class MG{constructor(e){Tt(this,"parsers",{}),Tt(this,"output",{}),Tt(this,"errors",[]),Tt(this,"pushToErrors",n=>this.errors.push(n)),this.options=n_.useCached(e)}async read(e){this.file=await function(n,r){return typeof n=="string"?Ij(n,r):Yh&&!IG&&n instanceof HTMLImageElement?Ij(n.src,r):n instanceof Uint8Array||n instanceof ArrayBuffer||n instanceof DataView?new Ms(n):Yh&&n instanceof Blob?T0(n,r,"blob",A0):void Ln("Invalid input argument")}(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,n=e.getUint16(0);for(let[r,s]of CD)if(s.canHandle(e,n))return this.fileParser=new s(this.options,this.file,this.parsers),e[r]=!0;this.file.close&&this.file.close(),Ln("Unknown file format")}async parse(){let{output:e,errors:n}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),n.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&n.length>0&&(e.errors=n),_D(r=e)?void 0:r;var r}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let n=Object.values(this.parsers).map(async r=>{let s=await r.parse();r.assignToOutput(e,s)});this.options.silentErrors&&(n=n.map(r=>r.catch(this.pushToErrors))),await Promise.all(n)}async extractThumbnail(){this.setup();let{options:e,file:n}=this,r=Ps.get("tiff",e);var s;if(n.tiff?s={start:0,type:"tiff"}:n.jpeg&&(s=await this.fileParser.getOrFindSegment("tiff")),s===void 0)return;let a=await this.fileParser.ensureSegmentChunk(s),o=this.parsers.tiff=new r(a,e,n),l=await o.extractThumbnail();return n.close&&n.close(),l}}class Lc{static findPosition(e,n){let r=e.getUint16(n+2)+2,s=typeof this.headerLength=="function"?this.headerLength(e,n,r):this.headerLength,a=n+s,o=r-s;return{offset:n,length:r,headerLength:s,start:a,size:o,end:a+o}}static parse(e,n={}){return new this(e,new n_({[this.type]:n}),e).parse()}normalizeInput(e){return e instanceof Ms?e:new Ms(e)}constructor(e,n={},r){Tt(this,"errors",[]),Tt(this,"raw",new Map),Tt(this,"handleError",s=>{if(!this.options.silentErrors)throw s;this.errors.push(s.message)}),this.chunk=this.normalizeInput(e),this.file=r,this.type=this.constructor.type,this.globalOptions=this.options=n,this.localOptions=n[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,n){let r=FG.get(n),s=OG.get(n),a=t_.get(n),o=this.options[n],l=o.reviveValues&&!!r,c=o.translateValues&&!!s,u=o.translateKeys&&!!a,h={};for(let[p,m]of e)l&&r.has(p)?m=r.get(p)(m):c&&s.has(p)&&(m=this.translateValue(m,s.get(p))),u&&a.has(p)&&(p=a.get(p)||p),h[p]=m;return h}translateValue(e,n){return n[e]||n.DEFAULT||e}assignToOutput(e,n){this.assignObjectToOutput(e,this.constructor.type,n)}assignObjectToOutput(e,n,r){if(this.globalOptions.mergeOutput)return Object.assign(e,r);e[n]?Object.assign(e[n],r):e[n]=r}}Tt(Lc,"headerLength",4),Tt(Lc,"type",void 0),Tt(Lc,"multiSegment",!1),Tt(Lc,"canHandle",()=>!1);function LG(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function $G(t){return t>=224&&t<=239}function UG(t,e,n){for(let[r,s]of Ps)if(s.canHandle(t,e,n))return r}class Fj extends class{constructor(e,n,r){Tt(this,"errors",[]),Tt(this,"ensureSegmentChunk",async s=>{let a=s.start,o=s.size||65536;if(this.file.chunked)if(this.file.available(a,o))s.chunk=this.file.subarray(a,o);else try{s.chunk=await this.file.readChunk(a,o)}catch(l){Ln(`Couldn't read segment: ${JSON.stringify(s)}. ${l.message}`)}else this.file.byteLength>a+o?s.chunk=this.file.subarray(a,o):s.size===void 0?s.chunk=this.file.subarray(a):Ln("Segment unreachable: "+JSON.stringify(s));return s.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=n,this.parsers=r}injectSegment(e,n){this.options[e].enabled&&this.createParser(e,n)}createParser(e,n){let r=new(Ps.get(e))(n,this.options,this.file);return this.parsers[e]=r}createParsers(e){for(let n of e){let{type:r,chunk:s}=n,a=this.options[r];if(a&&a.enabled){let o=this.parsers[r];o&&o.append||o||this.createParser(r,s)}}}async readSegments(e){let n=e.map(this.ensureSegmentChunk);await Promise.all(n)}}{constructor(...e){super(...e),Tt(this,"appSegments",[]),Tt(this,"jpegSegments",[]),Tt(this,"unknownSegments",[])}static canHandle(e,n){return n===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Ps.keyList())):(e=e===void 0?Ps.keyList().filter(n=>this.options[n].enabled):e.filter(n=>this.options[n].enabled&&Ps.has(n)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,n){this.setupSegmentFinderArgs(n);let{file:r,findAll:s,wanted:a,remaining:o}=this;if(!s&&this.file.chunked&&(s=Array.from(a).some(l=>{let c=Ps.get(l),u=this.options[l];return c.multiSegment&&u.multiSegment}),s&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,r.byteLength),!this.options.onlyTiff&&r.chunked){let l=!1;for(;o.size>0&&!l&&(r.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:c}=r,u=this.appSegments.some(h=>!this.file.available(h.offset||h.start,h.length||h.size));if(l=e>c&&!u?!await r.readNextChunk(e):!await r.readNextChunk(c),(e=this.findAppSegmentsInRange(e,r.byteLength))===void 0)return}}}findAppSegmentsInRange(e,n){n-=2;let r,s,a,o,l,c,{file:u,findAll:h,wanted:p,remaining:m,options:x}=this;for(;e<n;e++)if(u.getUint8(e)===255){if(r=u.getUint8(e+1),$G(r)){if(s=u.getUint16(e+2),a=UG(u,e,s),a&&p.has(a)&&(o=Ps.get(a),l=o.findPosition(u,e),c=x[a],l.type=a,this.appSegments.push(l),!h&&(o.multiSegment&&c.multiSegment?(this.unfinishedMultiSegment=l.chunkNumber<l.chunkCount,this.unfinishedMultiSegment||m.delete(a)):m.delete(a),m.size===0)))break;x.recordUnknownSegments&&(l=Lc.findPosition(u,e),l.marker=r,this.unknownSegments.push(l)),e+=s+1}else if(LG(r)){if(s=u.getUint16(e+2),r===218&&x.stopAfterSos!==!1)return;x.recordJpegSegments&&this.jpegSegments.push({offset:e,length:s,marker:r}),e+=s+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(n=>n.multiSegment))return;let e=function(n,r){let s,a,o,l=new Map;for(let c=0;c<n.length;c++)s=n[c],a=s[r],l.has(a)?o=l.get(a):l.set(a,o=[]),o.push(s);return Array.from(l)}(this.appSegments,"type");this.mergedAppSegments=e.map(([n,r])=>{let s=Ps.get(n,this.options);return s.handleMultiSegments?{type:n,chunk:s.handleMultiSegments(r)}:r[0]})}getSegment(e){return this.appSegments.find(n=>n.type===e)}async getOrFindSegment(e){let n=this.getSegment(e);return n===void 0&&(await this.findAppSegments(0,[e]),n=this.getSegment(e)),n}}Tt(Fj,"type","jpeg"),CD.set("jpeg",Fj);const zG=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class BG extends Lc{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,n,r=new Map){let{pick:s,skip:a}=this.options[n];s=new Set(s);let o=s.size>0,l=a.size===0,c=this.chunk.getUint16(e);e+=2;for(let u=0;u<c;u++){let h=this.chunk.getUint16(e);if(o){if(s.has(h)&&(r.set(h,this.parseTag(e,h,n)),s.delete(h),s.size===0))break}else!l&&a.has(h)||r.set(h,this.parseTag(e,h,n));e+=12}return r}parseTag(e,n,r){let{chunk:s}=this,a=s.getUint16(e+2),o=s.getUint32(e+4),l=zG[a];if(l*o<=4?e+=8:e=s.getUint32(e+8),(a<1||a>13)&&Ln(`Invalid TIFF value type. block: ${r.toUpperCase()}, tag: ${n.toString(16)}, type: ${a}, offset ${e}`),e>s.byteLength&&Ln(`Invalid TIFF value offset. block: ${r.toUpperCase()}, tag: ${n.toString(16)}, type: ${a}, offset ${e} is outside of chunk size ${s.byteLength}`),a===1)return s.getUint8Array(e,o);if(a===2)return(c=function(u){for(;u.endsWith("\0");)u=u.slice(0,-1);return u}(c=s.getString(e,o)).trim())===""?void 0:c;var c;if(a===7)return s.getUint8Array(e,o);if(o===1)return this.parseTagValue(a,e);{let u=new(function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(a))(o),h=l;for(let p=0;p<o;p++)u[p]=this.parseTagValue(a,e),e+=h;return u}}parseTagValue(e,n){let{chunk:r}=this;switch(e){case 1:return r.getUint8(n);case 3:return r.getUint16(n);case 4:return r.getUint32(n);case 5:return r.getUint32(n)/r.getUint32(n+4);case 6:return r.getInt8(n);case 8:return r.getInt16(n);case 9:return r.getInt32(n);case 10:return r.getInt32(n)/r.getInt32(n+4);case 11:return r.getFloat(n);case 12:return r.getDouble(n);case 13:return r.getUint32(n);default:Ln(`Invalid tiff type ${e}`)}}}class px extends BG{static canHandle(e,n){return e.getUint8(n+1)===225&&e.getUint32(n+4)===1165519206&&e.getUint16(n+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let n=this[e]();return n.catch!==void 0&&(n=n.catch(this.handleError)),n}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),n=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(n)}}parseBlock(e,n){let r=new Map;return this[n]=r,this.parseTags(e,n,r),r}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Ln("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Ln(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,Aj(this.options));let n=this.parseBlock(this.ifd0Offset,"ifd0");return n.size!==0?(this.exifOffset=n.get(34665),this.interopOffset=n.get(40965),this.gpsOffset=n.get(34853),this.xmp=n.get(700),this.iptc=n.get(33723),this.icc=n.get(34675),this.options.sanitize&&(n.delete(34665),n.delete(40965),n.delete(34853),n.delete(700),n.delete(33723),n.delete(34675)),n):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Aj(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,n){let r=e.get(n);r&&r.length===1&&e.set(n,r[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Mj(...e.get(2),e.get(1))),e.set("longitude",Mj(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),n=this.ifd1.get(514);return this.chunk.getUint8Array(e,n)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,n,r,s={};for(n of On)if(e=this[n],!_D(e))if(r=this.canTranslate?this.translateBlock(e,n):Object.fromEntries(e),this.options.mergeOutput){if(n==="ifd1")continue;Object.assign(s,r)}else s[n]=r;return this.makerNote&&(s.makerNote=this.makerNote),this.userComment&&(s.userComment=this.userComment),s}assignToOutput(e,n){if(this.globalOptions.mergeOutput)Object.assign(e,n);else for(let[r,s]of Object.entries(n))this.assignObjectToOutput(e,r,s)}}function Mj(t,e,n,r){var s=t+e/60+n/3600;return r!=="S"&&r!=="W"||(s*=-1),s}Tt(px,"type","tiff"),Tt(px,"headerLength",10),Ps.set("tiff",px);const r_={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},r_,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},r_,{tiff:!1,ifd1:!0,mergeOutput:!1});const VG=Object.assign({},r_,{firstChunkSize:4e4,ifd0:[274]});async function HG(t){let e=new MG(VG);await e.read(t);let n=await e.parse();if(n&&n.ifd0)return n.ifd0[274]}const qG=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Zu=!0,Xu=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,n,r]=e;Zu=Number(n)+.1*Number(r)<13.4,Xu=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Zu=Xu=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Zu=Xu=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Zu=Xu=Number(e)<77}}async function WG(t){let e=await HG(t);return Object.assign({canvas:Zu,css:Xu},qG[e])}class GG extends Ms{constructor(...e){super(...e),Tt(this,"ranges",new KG),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,n,r){if(e===0&&this.byteLength===0&&r){let s=new DataView(r.buffer||r,r.byteOffset,r.byteLength);this._swapDataView(s)}else{let s=e+n;if(s>this.byteLength){let{dataView:a}=this._extend(s);this._swapDataView(a)}}}_extend(e){let n;n=wD?bD.allocUnsafe(e):new Uint8Array(e);let r=new DataView(n.buffer,n.byteOffset,n.byteLength);return n.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:n,dataView:r}}subarray(e,n,r=!1){return n=n||this._lengthToEnd(e),r&&this._tryExtend(e,n),this.ranges.add(e,n),super.subarray(e,n)}set(e,n,r=!1){r&&this._tryExtend(n,e.byteLength,e);let s=super.set(e,n);return this.ranges.add(n,s.byteLength),s}async ensureChunk(e,n){this.chunked&&(this.ranges.available(e,n)||await this.readChunk(e,n))}available(e,n){return this.ranges.available(e,n)}}class KG{constructor(){Tt(this,"list",[])}get length(){return this.list.length}add(e,n,r=0){let s=e+n,a=this.list.filter(o=>Lj(e,o.offset,s)||Lj(e,o.end,s));if(a.length>0){e=Math.min(e,...a.map(l=>l.offset)),s=Math.max(s,...a.map(l=>l.end)),n=s-e;let o=a.shift();o.offset=e,o.length=n,o.end=s,this.list=this.list.filter(l=>!a.includes(l))}else this.list.push({offset:e,length:n,end:s})}available(e,n){let r=e+n;return this.list.some(s=>s.offset<=e&&r<=s.end)}}function Lj(t,e,n){return t<=e&&e<=n}class QG extends GG{constructor(e,n){super(0),Tt(this,"chunksRead",0),this.input=e,this.options=n}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let n=this.options.chunkSize,r=await this.readChunk(e,n);return!!r&&r.byteLength===n}async readChunk(e,n){if(this.chunksRead++,(n=this.safeWrapAddress(e,n))!==0)return this._readChunk(e,n)}safeWrapAddress(e,n){return this.size!==void 0&&e+n>this.size?Math.max(0,this.size-e):n}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}e_.set("blob",class extends QG{async readWhole(){this.chunked=!1;let t=await A0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let n=e?t+e:void 0,r=this.input.slice(t,n),s=await A0(r);return this.set(s,t,!0)}});const YG="@uppy/thumbnail-generator",ZG="Uppy plugin that generates small previews of images to show on your upload UI.",XG="4.2.2",JG="MIT",eK="lib/index.js",tK="module",nK={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},rK=["file uploader","uppy","uppy-plugin","thumbnail","preview","resize"],sK="https://uppy.io",iK={url:"https://github.com/transloadit/uppy/issues"},aK={type:"git",url:"git+https://github.com/transloadit/uppy.git"},oK=["src","lib","dist","CHANGELOG.md"],lK={"@uppy/utils":"^6.2.2",exifr:"^7.0.0"},cK={jsdom:"^26.1.0","namespace-emitter":"2.0.1",typescript:"^5.8.3",vitest:"^3.2.4"},dK={"@uppy/core":"^4.5.2"},uK={name:YG,description:ZG,version:XG,license:JG,main:eK,type:tK,scripts:nK,keywords:rK,homepage:sK,bugs:iK,repository:aK,files:oK,dependencies:lK,devDependencies:cK,peerDependencies:dK},hK={strings:{generatingThumbnails:"Generating thumbnails..."}};function pK(t,e,n){try{t.getContext("2d").getImageData(0,0,1,1)}catch(r){if(r.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return t.toBlob?new Promise(r=>{t.toBlob(r,e,n)}).then(r=>{if(r===null)throw new Error("cannot read image, probably an svg with external resources");return r}):Promise.resolve().then(()=>PG(t.toDataURL(e,n),{})).then(r=>{if(r===null)throw new Error("could not extract blob, probably an old browser");return r})}function fK(t,e){let n=t.width,r=t.height;(e.deg===90||e.deg===270)&&(n=t.height,r=t.width);const s=document.createElement("canvas");s.width=n,s.height=r;const a=s.getContext("2d");return a.translate(n/2,r/2),e.canvas&&(a.rotate(e.rad),a.scale(e.scaleX,e.scaleY)),a.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),s}function mK(t){const e=t.width/t.height,n=5e6,r=4096;let s=Math.floor(Math.sqrt(n*e)),a=Math.floor(n/Math.sqrt(n*e));if(s>r&&(s=r,a=Math.round(s/e)),a>r&&(a=r,s=Math.round(e*a)),t.width>s){const o=document.createElement("canvas");return o.width=s,o.height=a,o.getContext("2d").drawImage(t,0,0,s,a),o}return t}const gK={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class ND extends Zd{constructor(n,r){super(n,{...gK,...r});Z(this,"queue");Z(this,"queueProcessing");Z(this,"defaultThumbnailDimension");Z(this,"thumbnailType");Z(this,"onFileAdded",n=>{!n.preview&&n.data&&Tj(n.type)&&!n.isRemote&&this.addToQueue(n.id)});Z(this,"onCancelRequest",n=>{const r=this.queue.indexOf(n.id);r!==-1&&this.queue.splice(r,1)});Z(this,"onFileRemoved",n=>{const r=this.queue.indexOf(n.id);r!==-1&&this.queue.splice(r,1),n.preview&&Nj(n.preview)&&URL.revokeObjectURL(n.preview)});Z(this,"onRestored",()=>{this.uppy.getFiles().filter(r=>r.isRestored).forEach(r=>{(!r.preview||Nj(r.preview))&&this.addToQueue(r.id)})});Z(this,"onAllFilesRemoved",()=>{this.queue=[]});Z(this,"waitUntilAllProcessed",n=>{n.forEach(s=>{const a=this.uppy.getFile(s);this.uppy.emit("preprocess-progress",a,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const r=()=>{n.forEach(s=>{const a=this.uppy.getFile(s);this.uppy.emit("preprocess-complete",a)})};return new Promise(s=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{r(),s()}):(r(),s())})});if(this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=hK,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(n,r,s){const a=URL.createObjectURL(n.data),o=new Promise((c,u)=>{const h=new Image;h.src=a,h.addEventListener("load",()=>{URL.revokeObjectURL(a),c(h)}),h.addEventListener("error",p=>{URL.revokeObjectURL(a),u(p.error||new Error("Could not create thumbnail"))})}),l=WG(n.data).catch(()=>1);return Promise.all([o,l]).then(([c,u])=>{const h=this.getProportionalDimensions(c,r,s,u.deg),p=fK(c,u),m=this.resizeImage(p,h.width,h.height);return pK(m,this.thumbnailType,80)}).then(c=>URL.createObjectURL(c))}getProportionalDimensions(n,r,s,a){let o=n.width/n.height;return(a===90||a===270)&&(o=n.height/n.width),r!=null?{width:r,height:Math.round(r/o)}:s!=null?{width:Math.round(s*o),height:s}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/o)}}resizeImage(n,r,s){let a=mK(n),o=Math.ceil(Math.log2(a.width/r));o<1&&(o=1);let l=r*2**(o-1),c=s*2**(o-1);const u=2;for(;o--;){const h=document.createElement("canvas");h.width=l,h.height=c,h.getContext("2d").drawImage(a,0,0,l,c),a=h,l=Math.round(l/u),c=Math.round(c/u)}return a}setPreviewURL(n,r){this.uppy.setFileState(n,{preview:r})}addToQueue(n){this.queue.push(n),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const n=this.uppy.getFile(this.queue.shift());return n?this.requestThumbnail(n).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(n){return Tj(n.type)&&!n.isRemote?this.createThumbnail(n,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(r=>{this.setPreviewURL(n.id,r),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${n.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(n.id),r)}).catch(r=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${n.id}:`,"warning"),this.uppy.log(r,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(n.id),r)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}Z(ND,"VERSION",uK.version);function $j(t){if(typeof t=="string"){const e=document.querySelectorAll(t);return e.length===0?null:Array.from(e)}return typeof t=="object"&&RR(t)?[t]:null}const xh=Array.from;function vK(t){const e=xh(t.files);return Promise.resolve(e)}function TD(t,e,n,{onSuccess:r}){t.readEntries(s=>{const a=[...e,...s];s.length?queueMicrotask(()=>{TD(t,a,n,{onSuccess:r})}):r(a)},s=>{n(s),r(e)})}function kD(t,e){return t==null?t:{kind:t.isFile?"file":t.isDirectory?"directory":void 0,name:t.name,getFile(){return new Promise((n,r)=>t.file(n,r))},async*values(){const n=t.createReader();yield*await new Promise(s=>{TD(n,[],e,{onSuccess:a=>s(a.map(o=>kD(o,e)))})})},isSameEntry:void 0}}async function*AD(t,e,n=void 0){const r=()=>`${e}/${t.name}`;if(t.kind==="file"){const s=await t.getFile();s!=null?(s.relativePath=e?r():null,yield s):n!=null&&(yield n)}else if(t.kind==="directory")for await(const s of t.values())yield*AD(s,e?r():t.name);else n!=null&&(yield n)}async function*yK(t,e){const n=await Promise.all(Array.from(t.items,async r=>{let s;return s??(s=kD(typeof r.getAsEntry=="function"?r.getAsEntry():r.webkitGetAsEntry(),e)),{fileSystemHandle:s,lastResortFile:r.getAsFile()}}));for(const{lastResortFile:r,fileSystemHandle:s}of n)if(s!=null)try{yield*AD(s,"",r)}catch(a){r!=null?yield r:e(a)}else r!=null&&(yield r)}async function xK(t,e){const n=(e==null?void 0:e.logDropError)??Function.prototype;try{const r=[];for await(const s of yK(t,n))r.push(s);return r}catch{return vK(t)}}let bK="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",PD=(t=21)=>{let e="",n=t|0;for(;n--;)e+=bK[Math.random()*64|0];return e};const wK="@uppy/dashboard",_K="Universal UI plugin for Uppy.",CK="4.4.3",SK="MIT",EK="lib/index.js",jK="dist/style.min.css",NK="module",TK={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --silent='passed-only'","test:e2e":"vitest watch --project browser --browser.headless false"},kK=["file uploader","uppy","uppy-plugin","dashboard","ui"],AK="https://uppy.io",PK={url:"https://github.com/transloadit/uppy/issues"},IK={type:"git",url:"git+https://github.com/transloadit/uppy.git"},RK=["src","lib","dist","CHANGELOG.md"],DK={"@transloadit/prettier-bytes":"^0.3.4","@uppy/informer":"^4.3.2","@uppy/provider-views":"^4.5.2","@uppy/status-bar":"^4.2.3","@uppy/thumbnail-generator":"^4.2.2","@uppy/utils":"^6.2.2",classnames:"^2.2.6",lodash:"^4.17.21",nanoid:"^5.0.9",preact:"^10.5.13","shallow-equal":"^3.0.0"},OK={"@uppy/core":"^4.5.2","@uppy/google-drive":"^4.4.2","@uppy/status-bar":"^4.2.3","@uppy/url":"^4.3.2","@uppy/webcam":"^4.3.2","@vitest/browser":"^3.2.4",cssnano:"^7.0.7",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1","resize-observer-polyfill":"^1.5.0",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},FK={"@uppy/core":"^4.5.2"},MK={name:wK,description:_K,version:CK,license:SK,main:EK,style:jK,type:NK,scripts:TK,keywords:kK,homepage:AK,bugs:PK,repository:IK,files:RK,dependencies:DK,devDependencies:OK,peerDependencies:FK};function LK(){const t=document.body;return!(!("draggable"in t)||!("ondragstart"in t&&"ondrop"in t)||!("FormData"in window)||!("FileReader"in window))}class ID extends Dr{constructor(){super(...arguments);Z(this,"fileInput",null);Z(this,"folderInput",null);Z(this,"mobilePhotoFileInput",null);Z(this,"mobileVideoFileInput",null);Z(this,"triggerFileInputClick",()=>{var n;(n=this.fileInput)==null||n.click()});Z(this,"triggerFolderInputClick",()=>{var n;(n=this.folderInput)==null||n.click()});Z(this,"triggerVideoCameraInputClick",()=>{var n;(n=this.mobileVideoFileInput)==null||n.click()});Z(this,"triggerPhotoCameraInputClick",()=>{var n;(n=this.mobilePhotoFileInput)==null||n.click()});Z(this,"onFileInputChange",n=>{this.props.handleInputChange(n),n.currentTarget.value=""});Z(this,"renderHiddenInput",(n,r)=>{var s;return M("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:n,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:(s=this.props.allowedFileTypes)==null?void 0:s.join(", "),ref:r})});Z(this,"renderHiddenCameraInput",(n,r,s)=>{const o={photo:"image/*",video:"video/*"}[n];return M("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${n}`,onChange:this.onFileInputChange,capture:r===""?"environment":r,accept:o,ref:s})});Z(this,"renderMyDeviceAcquirer",()=>M("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:M("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[M("div",{className:"uppy-DashboardTab-inner",children:M("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:M("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),M("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})}));Z(this,"renderPhotoCamera",()=>M("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:M("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[M("div",{className:"uppy-DashboardTab-inner",children:M("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:M("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),M("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})}));Z(this,"renderVideoCamera",()=>M("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:M("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[M("div",{className:"uppy-DashboardTab-inner",children:M("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:M("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),M("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})}));Z(this,"renderBrowseButton",(n,r)=>{const s=this.props.acquirers.length;return M("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:r,"data-uppy-super-focusable":s===0,children:n})});Z(this,"renderDropPasteBrowseTagline",n=>{const r=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),s=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),a=this.props.fileManagerSelectionType,o=a.charAt(0).toUpperCase()+a.slice(1);return M("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):n>0?this.props.i18nArray(`dropPasteImport${o}`,{browseFiles:r,browseFolders:s,browse:r}):this.props.i18nArray(`dropPaste${o}`,{browseFiles:r,browseFolders:s,browse:r})})});Z(this,"renderAcquirer",n=>{var r;return M("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":n.id,children:M("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":n.id,"aria-controls":`uppy-DashboardContent-panel--${n.id}`,"aria-selected":((r=this.props.activePickerPanel)==null?void 0:r.id)===n.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(n.id),children:[M("div",{className:"uppy-DashboardTab-inner",children:n.icon()}),M("div",{className:"uppy-DashboardTab-name",children:n.name})]})})});Z(this,"renderAcquirers",n=>{const r=[...n],s=r.splice(n.length-2,n.length);return M(Vs,{children:[r.map(a=>this.renderAcquirer(a)),M("span",{role:"presentation",style:{"white-space":"nowrap"},children:s.map(a=>this.renderAcquirer(a))})]})});Z(this,"renderSourcesList",(n,r)=>{const{showNativePhotoCameraButton:s,showNativeVideoCameraButton:a}=this.props;let o=[];const l="myDevice";r||o.push({key:l,elements:this.renderMyDeviceAcquirer()}),s&&o.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),a&&o.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),o.push(...n.map(p=>({key:p.id,elements:this.renderAcquirer(p)}))),o.length===1&&o[0].key===l&&(o=[]);const u=[...o],h=u.splice(o.length-2,o.length);return M(Vs,{children:[this.renderDropPasteBrowseTagline(o.length),M("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[u.map(({key:p,elements:m})=>M(Vs,{children:m},p)),M("span",{role:"presentation",style:{"white-space":"nowrap"},children:h.map(({key:p,elements:m})=>M(Vs,{children:m},p))})]})]})})}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:n}=this.props,r=M("span",{children:[M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:M("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),M("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),s=n("poweredBy",{uppy:r});return M("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:s})}render(){const{showNativePhotoCameraButton:n,showNativeVideoCameraButton:r,nativeCameraFacingMode:s}=this.props;return M("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,a=>{this.fileInput=a}),this.renderHiddenInput(!0,a=>{this.folderInput=a}),n&&this.renderHiddenCameraInput("photo",s,a=>{this.mobilePhotoFileInput=a}),r&&this.renderHiddenCameraInput("video",s,a=>{this.mobileVideoFileInput=a}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),M("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&M("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const $K=t=>M("div",{className:Xs("uppy-Dashboard-AddFilesPanel",t.className),"data-uppy-panelType":"AddFiles","aria-hidden":!t.showAddFilesPanel,children:[M("div",{className:"uppy-DashboardContent-bar",children:[M("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:t.i18n("addingMoreFiles")}),M("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>t.toggleAddFilesPanel(!1),children:t.i18n("back")})]}),M(ID,{...t})]});function UK(t){const e=t.files[t.fileCardFor],n=()=>{t.uppy.emit("file-editor:cancel",e),t.closeFileEditor()};return M("div",{className:Xs("uppy-DashboardContent-panel",t.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[M("div",{className:"uppy-DashboardContent-bar",children:[M("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:t.i18nArray("editing",{file:M("span",{className:"uppy-DashboardContent-titleFile",children:e.meta?e.meta.name:e.name})})}),M("button",{className:"uppy-DashboardContent-back",type:"button",onClick:n,children:t.i18n("cancel")}),M("button",{className:"uppy-DashboardContent-save",type:"button",onClick:t.saveFileEditor,children:t.i18n("save")})]}),M("div",{className:"uppy-DashboardContent-panelBody",children:t.editors.map(r=>t.uppy.getPlugin(r.id).render(t.state))})]})}function zK(){return M("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:M("g",{fill:"#686DE0",fillRule:"evenodd",children:[M("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),M("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),M("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function BK(){return M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:M("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function VK(){return M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:M("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function HK(){return M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:M("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function qK(){return M("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:M("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function WK(){return M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:M("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[M("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),M("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function GK(){return M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:M("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function s_(t){const e={color:"#838999",icon:WK()};if(!t)return e;const n=t.split("/")[0],r=t.split("/")[1];return n==="text"?{color:"#5a5e69",icon:GK()}:n==="image"?{color:"#686de0",icon:zK()}:n==="audio"?{color:"#068dbb",icon:BK()}:n==="video"?{color:"#19af67",icon:VK()}:n==="application"&&r==="pdf"?{color:"#e25149",icon:HK()}:n==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(r)!==-1?{color:"#00C469",icon:qK()}:e}function oo(t){const{tagName:e}=t.target;if(e==="INPUT"||e==="TEXTAREA"){t.stopPropagation();return}t.preventDefault(),t.stopPropagation()}function RD(t){const{file:e}=t;if(e.preview)return M("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});const{color:n,icon:r}=s_(e.type);return M("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[M("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:n},children:r}),M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:M("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function KK(t){const{computedMetaFields:e,requiredMetaFields:n,updateMeta:r,form:s,formState:a}=t,o={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(l=>{const c=`uppy-Dashboard-FileCard-input-${l.id}`,u=n.includes(l.id);return M("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[M("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:c,children:l.name}),l.render!==void 0?l.render({value:a[l.id],onChange:h=>r(h,l.id),fieldCSSClasses:o,required:u,form:s.id},Gh):M("input",{className:o.text,id:c,form:s.id,type:l.type||"text",required:u,value:a[l.id],placeholder:l.placeholder,onInput:h=>r(h.target.value,l.id),"data-uppy-super-focusable":!0})]},l.id)})}function QK(t){const{files:e,fileCardFor:n,toggleFileCard:r,saveFileCard:s,metaFields:a,requiredMetaFields:o,openFileEditor:l,i18n:c,i18nArray:u,className:h,canEditFile:p}=t,m=()=>typeof a=="function"?a(e[n]):a,x=e[n],N=m()??[],w=p(x),b={};N.forEach(C=>{b[C.id]=x.meta[C.id]??""});const[S,v]=Rg(b),T=JV(C=>{C.preventDefault(),s(S,n)},[s,S,n]),I=(C,_)=>{v({...S,[_]:C})},L=()=>{r(!1)},[R]=Rg(()=>{const C=document.createElement("form");return C.setAttribute("tabindex","-1"),C.id=PD(),C});return v0(()=>(document.body.appendChild(R),R.addEventListener("submit",T),()=>{R.removeEventListener("submit",T),document.body.removeChild(R)}),[R,T]),M("div",{className:Xs("uppy-Dashboard-FileCard",h),"data-uppy-panelType":"FileCard",onDragOver:oo,onDragLeave:oo,onDrop:oo,onPaste:oo,children:[M("div",{className:"uppy-DashboardContent-bar",children:[M("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:u("editing",{file:M("span",{className:"uppy-DashboardContent-titleFile",children:x.meta?x.meta.name:x.name})})}),M("button",{className:"uppy-DashboardContent-back",type:"button",form:R.id,title:c("finishEditingFile"),onClick:L,children:c("cancel")})]}),M("div",{className:"uppy-Dashboard-FileCard-inner",children:[M("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:s_(x.type).color},children:[M(RD,{file:x}),w&&M("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:C=>{T(C),l(x)},children:c("editImage")})]}),M("div",{className:"uppy-Dashboard-FileCard-info",children:M(KK,{computedMetaFields:N,requiredMetaFields:o,updateMeta:I,form:R,formState:S})}),M("div",{className:"uppy-Dashboard-FileCard-actions",children:[M("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:R.id,children:c("saveChanges")}),M("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:L,form:R.id,children:c("cancel")})]})]})]})}function YK(t,e){if(t===e)return!0;if(!t||!e)return!1;const n=Object.keys(t),r=Object.keys(e),s=n.length;if(r.length!==s)return!1;for(let a=0;a<s;a++){const o=n[a];if(t[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function ZK(t,e="Copy the URL below"){return new Promise(n=>{const r=document.createElement("textarea");r.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),r.value=t,document.body.appendChild(r),r.select();const s=()=>{document.body.removeChild(r),window.prompt(e,t),n()};try{return document.execCommand("copy")?(document.body.removeChild(r),n()):s()}catch{return document.body.removeChild(r),s()}})}function XK({file:t,uploadInProgressOrComplete:e,metaFields:n,canEditFile:r,i18n:s,onClick:a}){return!e&&n&&n.length>0||!e&&r(t)?M("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":s("editFileWithFilename",{file:t.meta.name}),title:s("editFileWithFilename",{file:t.meta.name}),onClick:()=>a(),children:M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:M("g",{fillRule:"evenodd",children:[M("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),M("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),M("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function JK({i18n:t,onClick:e,file:n}){return M("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":t("removeFile",{file:n.meta.name}),title:t("removeFile",{file:n.meta.name}),onClick:()=>e(),children:M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[M("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),M("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function eQ({file:t,uppy:e,i18n:n}){const r=s=>{ZK(t.uploadURL,n("copyLinkToClipboardFallback")).then(()=>{e.log("Link copied to clipboard."),e.info(n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.log).then(()=>s.target.focus({preventScroll:!0}))};return M("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":n("copyLink"),title:n("copyLink"),onClick:s=>r(s),children:M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:M("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function tQ(t){const{uppy:e,file:n,uploadInProgressOrComplete:r,canEditFile:s,metaFields:a,showLinkToFileUploadResult:o,showRemoveButton:l,i18n:c,toggleFileCard:u,openFileEditor:h}=t;return M("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[M(XK,{i18n:c,file:n,uploadInProgressOrComplete:r,canEditFile:s,metaFields:a,onClick:()=>{a&&a.length>0?u(!0,n.id):h(n)}}),o&&n.uploadURL?M(eQ,{file:n,uppy:e,i18n:c}):null,l?M(JK,{i18n:c,file:n,onClick:()=>e.removeFile(n.id)}):null]})}const fx="...";function DD(t,e){if(e===0)return"";if(t.length<=e)return t;if(e<=fx.length+1)return`${t.slice(0,e-1)}…`;const n=e-fx.length,r=Math.ceil(n/2),s=Math.floor(n/2);return t.slice(0,r)+fx+t.slice(-s)}const nQ=(t,e)=>(typeof e=="function"?e():e).filter(s=>s.id===t)[0].name;function OD(t){const{file:e,toggleFileCard:n,i18n:r,metaFields:s}=t,{missingRequiredMetaFields:a}=e;if(!(a!=null&&a.length))return null;const o=a.map(l=>nQ(l,s)).join(", ");return M("div",{className:"uppy-Dashboard-Item-errorMessage",children:[r("missingRequiredMetaFields",{smart_count:a.length,fields:o})," ",M("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>n(!0,e.id),children:r("editFile")})]})}const rQ=t=>{const{author:e,name:n}=t.file.meta;function r(){return t.isSingleFile&&t.containerHeight>=350?90:t.containerWidth<=352?35:t.containerWidth<=576?60:e?20:30}return M("div",{className:"uppy-Dashboard-Item-name",title:n,children:DD(n,r())})},sQ=t=>{var s;const{author:e}=t.file.meta,n=(s=t.file.remote)==null?void 0:s.providerName,r="·";return e?M("div",{className:"uppy-Dashboard-Item-author",children:[M("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:DD(e.name,13)}),n?M(Vs,{children:[` ${r} `,n,` ${r} `]}):null]}):null},iQ=t=>t.file.size&&M("div",{className:"uppy-Dashboard-Item-statusSize",children:sl(t.file.size)}),aQ=t=>t.file.isGhost&&M("span",{children:[" • ",M("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>t.toggleAddFilesPanel(!0),children:t.i18n("reSelect")})]}),oQ=({file:t,onClick:e})=>t.error?M("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":t.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:e,type:"button",children:"?"}):null;function lQ(t){const{file:e,i18n:n,toggleFileCard:r,metaFields:s,toggleAddFilesPanel:a,isSingleFile:o,containerHeight:l,containerWidth:c}=t;return M("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source,children:[M("div",{className:"uppy-Dashboard-Item-fileName",children:[rQ({file:e,isSingleFile:o,containerHeight:l,containerWidth:c}),M(oQ,{file:e,onClick:()=>alert(e.error)})]}),M("div",{className:"uppy-Dashboard-Item-status",children:[sQ({file:e}),iQ({file:e}),aQ({file:e,toggleAddFilesPanel:a,i18n:n})]}),M(OD,{file:e,i18n:n,toggleFileCard:r,metaFields:s})]})}function cQ(t){const{file:e,i18n:n,toggleFileCard:r,metaFields:s,showLinkToFileUploadResult:a}=t,l=e.preview?"rgba(255, 255, 255, 0.5)":s_(e.type).color;return M("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:l},children:[a&&e.uploadURL&&M("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name,children:M("span",{hidden:!0,children:e.meta.name})}),M(RD,{file:e}),M(OD,{file:e,i18n:n,toggleFileCard:r,metaFields:s})]})}function dQ(t){if(!t.isUploaded){if(t.error&&!t.hideRetryButton){t.uppy.retryUpload(t.file.id);return}t.resumableUploads&&!t.hidePauseResumeButton?t.uppy.pauseResume(t.file.id):t.individualCancellation&&!t.hideCancelButton&&t.uppy.removeFile(t.file.id)}}function Uj(t){return t.isUploaded?t.i18n("uploadComplete"):t.error?t.i18n("retryUpload"):t.resumableUploads?t.file.isPaused?t.i18n("resumeUpload"):t.i18n("pauseUpload"):t.individualCancellation?t.i18n("cancelUpload"):""}function mx(t){return M("div",{className:"uppy-Dashboard-Item-progress",children:M("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":Uj(t),title:Uj(t),onClick:()=>dQ(t),children:t.children})})}function rm({children:t}){return M("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:t})}function gx({progress:t}){const e=2*Math.PI*15;return M("g",{children:[M("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),M("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":e,"stroke-dashoffset":e-e/100*t})]})}function uQ(t){return!t.file.progress.uploadStarted||t.file.progress.percentage===void 0?null:t.isUploaded?M("div",{className:"uppy-Dashboard-Item-progress",children:M("div",{className:"uppy-Dashboard-Item-progressIndicator",children:M(rm,{children:[M("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),M("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):t.recoveredState?null:t.error&&!t.hideRetryButton?M(mx,{...t,children:M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[M("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),M("path",{d:"M7.9 3H10v2H7.9z"}),M("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),M("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):t.resumableUploads&&!t.hidePauseResumeButton?M(mx,{...t,children:M(rm,{children:[M(gx,{progress:t.file.progress.percentage}),t.file.isPaused?M("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):M("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[M("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),M("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!t.resumableUploads&&t.individualCancellation&&!t.hideCancelButton?M(mx,{...t,children:M(rm,{children:[M(gx,{progress:t.file.progress.percentage}),M("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):M("div",{className:"uppy-Dashboard-Item-progress",children:M("div",{className:"uppy-Dashboard-Item-progressIndicator",children:M(rm,{children:M(gx,{progress:t.file.progress.percentage})})})})}class hQ extends Dr{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!YK(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,n=e.progress.preprocess||e.progress.postprocess,r=!!e.progress.uploadComplete&&!n&&!e.error,s=!!e.progress.uploadStarted||!!n,a=e.progress.uploadStarted&&!e.progress.uploadComplete||n,o=e.error||!1,{isGhost:l}=e;let c=(this.props.individualCancellation||!a)&&!r;r&&this.props.showRemoveButtonAfterComplete&&(c=!0);const u=Xs({"uppy-Dashboard-Item":!0,"is-inprogress":a&&!this.props.recoveredState,"is-processing":n,"is-complete":r,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":l});return M("div",{className:u,id:`uppy_${e.id}`,role:this.props.role,children:[M("div",{className:"uppy-Dashboard-Item-preview",children:[M(cQ,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),M(uQ,{uppy:this.props.uppy,file:e,error:o,isUploaded:r,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),M("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[M(lQ,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),M(tQ,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:c,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:s,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function pQ(t,e){const n=[];let r=[];return t.forEach(s=>{r.length<e?r.push(s):(n.push(r),r=[s])}),r.length&&n.push(r),n}function fQ({id:t,i18n:e,uppy:n,files:r,resumableUploads:s,hideRetryButton:a,hidePauseResumeButton:o,hideCancelButton:l,showLinkToFileUploadResult:c,showRemoveButtonAfterComplete:u,metaFields:h,isSingleFile:p,toggleFileCard:m,handleRequestThumbnail:x,handleCancelThumbnail:N,recoveredState:w,individualCancellation:b,itemsPerRow:S,openFileEditor:v,canEditFile:T,toggleAddFilesPanel:I,containerWidth:L,containerHeight:R}){const C=S===1?71:200,_=Z1(()=>{const A=(D,E)=>Number(r[E].isGhost)-Number(r[D].isGhost),F=Object.keys(r);return w&&F.sort(A),pQ(F,S)},[r,S,w]),P=A=>M("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:A.map(F=>M(hQ,{uppy:n,id:t,i18n:e,resumableUploads:s,individualCancellation:b,hideRetryButton:a,hidePauseResumeButton:o,hideCancelButton:l,showLinkToFileUploadResult:c,showRemoveButtonAfterComplete:u,metaFields:h,recoveredState:w,isSingleFile:p,containerWidth:L,containerHeight:R,toggleFileCard:m,handleRequestThumbnail:x,handleCancelThumbnail:N,role:"listitem",openFileEditor:v,canEditFile:T,toggleAddFilesPanel:I,file:r[F]},F))},A[0]);return p?M("div",{class:"uppy-Dashboard-files",children:P(_[0])}):M(VW,{class:"uppy-Dashboard-files",role:"list",data:_,renderRow:P,rowHeight:C})}function mQ({activePickerPanel:t,className:e,hideAllPanels:n,i18n:r,state:s,uppy:a}){const o=Pm(null);return M("div",{className:Xs("uppy-DashboardContent-panel",e),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${t.id}`,onDragOver:oo,onDragLeave:oo,onDrop:oo,onPaste:oo,children:[M("div",{className:"uppy-DashboardContent-bar",children:[M("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:r("importFrom",{name:t.name})}),M("button",{className:"uppy-DashboardContent-back",type:"button",onClick:n,children:r("cancel")})]}),M("div",{ref:o,className:"uppy-DashboardContent-panelBody",children:a.getPlugin(t.id).render(s,o.current)})]})}const di={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function gQ(t,e,n,r={}){if(t)return di.STATE_ERROR;if(e)return di.STATE_COMPLETE;if(n)return di.STATE_PAUSED;let s=di.STATE_WAITING;const a=Object.keys(r);for(let o=0;o<a.length;o++){const{progress:l}=r[a[o]];if(l.uploadStarted&&!l.uploadComplete)return di.STATE_UPLOADING;l.preprocess&&s!==di.STATE_UPLOADING&&(s=di.STATE_PREPROCESSING),l.postprocess&&s!==di.STATE_UPLOADING&&s!==di.STATE_PREPROCESSING&&(s=di.STATE_POSTPROCESSING)}return s}function vQ({files:t,i18n:e,isAllComplete:n,isAllErrored:r,isAllPaused:s,inProgressNotPausedFiles:a,newFiles:o,processingFiles:l}){switch(gQ(r,n,s,t)){case"uploading":return e("uploadingXFiles",{smart_count:a.length});case"preprocessing":case"postprocessing":return e("processingXFiles",{smart_count:l.length});case"paused":return e("uploadPaused");case"waiting":return e("xFilesSelected",{smart_count:o.length});case"complete":return e("uploadComplete");case"error":return e("error")}}function yQ(t){const{i18n:e,isAllComplete:n,hideCancelButton:r,maxNumberOfFiles:s,toggleAddFilesPanel:a,uppy:o}=t;let{allowNewUpload:l}=t;return l&&s&&(l=t.totalFileCount<t.maxNumberOfFiles),M("div",{className:"uppy-DashboardContent-bar",children:[!n&&!r?M("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>o.cancelAll(),children:e("cancel")}):M("div",{}),M("div",{className:"uppy-DashboardContent-title",children:M(vQ,{...t})}),l?M("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>a(!0),children:[M("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:M("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),M("span",{className:"uppy-DashboardContent-addMoreCaption",children:e("addMore")})]}):M("div",{})]})}const xc="uppy-transition-slideDownUp",zj=250;function sm({children:t}){const[e,n]=Rg(null),[r,s]=Rg(""),a=Pm(),o=Pm(),l=Pm(),c=()=>{s(`${xc}-enter`),cancelAnimationFrame(l.current),clearTimeout(o.current),o.current=void 0,l.current=requestAnimationFrame(()=>{s(`${xc}-enter ${xc}-enter-active`),a.current=setTimeout(()=>{s("")},zj)})},u=()=>{s(`${xc}-leave`),cancelAnimationFrame(l.current),clearTimeout(a.current),a.current=void 0,l.current=requestAnimationFrame(()=>{s(`${xc}-leave ${xc}-leave-active`),o.current=setTimeout(()=>{n(null),s("")},zj)})};return v0(()=>{const h=Fs(t)[0];e!==h&&(h&&!e?c():e&&!h&&!o.current&&u(),n(h))},[t,e]),v0(()=>()=>{clearTimeout(a.current),clearTimeout(o.current),cancelAnimationFrame(l.current)},[]),e?WR(e,{className:Xs(r,e.props.className)}):null}const Bj=900,Vj=700,vx=576,Hj=330;function xQ(t){const e=t.totalFileCount===0,n=t.totalFileCount===1,r=t.containerWidth>vx,s=t.containerHeight>Hj,a=Xs({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":t.disabled,"uppy-Dashboard--animateOpenClose":t.animateOpenClose,"uppy-Dashboard--isClosing":t.isClosing,"uppy-Dashboard--isDraggingOver":t.isDraggingOver,"uppy-Dashboard--modal":!t.inline,"uppy-size--md":t.containerWidth>vx,"uppy-size--lg":t.containerWidth>Vj,"uppy-size--xl":t.containerWidth>Bj,"uppy-size--height-md":t.containerHeight>Hj,"uppy-Dashboard--isAddFilesPanelVisible":t.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":t.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":t.singleFileFullScreen&&n&&s});let o=1;t.containerWidth>Bj?o=5:t.containerWidth>Vj?o=4:t.containerWidth>vx&&(o=3);const l=t.showSelectedFiles&&!e,c=t.recoveredState?Object.keys(t.recoveredState.files).length:null,u=t.files?Object.keys(t.files).filter(m=>t.files[m].isGhost).length:0,h=()=>u>0?t.i18n("recoveredXFiles",{smart_count:u}):t.i18n("recoveredAllFiles");return M("div",{className:a,"data-uppy-theme":t.theme,"data-uppy-num-acquirers":t.acquirers.length,"data-uppy-drag-drop-supported":!t.disableLocalFiles&&LK(),"aria-hidden":t.inline?"false":t.isHidden,"aria-disabled":t.disabled,"aria-label":t.inline?t.i18n("dashboardTitle"):t.i18n("dashboardWindowTitle"),onPaste:t.handlePaste,onDragOver:t.handleDragOver,onDragLeave:t.handleDragLeave,onDrop:t.handleDrop,children:[M("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:t.handleClickOutside}),M("div",{className:"uppy-Dashboard-inner",role:t.inline?void 0:"dialog",style:{width:t.inline&&t.width?t.width:"",height:t.inline&&t.height?t.height:""},children:[t.inline?null:M("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":t.i18n("closeModal"),title:t.i18n("closeModal"),onClick:t.closeModal,children:M("span",{"aria-hidden":"true",children:"×"})}),M("div",{className:"uppy-Dashboard-innerWrap",children:[M("div",{className:"uppy-Dashboard-dropFilesHereHint",children:t.i18n("dropHint")}),l&&M(yQ,{...t}),c&&M("div",{className:"uppy-Dashboard-serviceMsg",children:[M("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:M("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[M("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),M("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),M("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),M("strong",{className:"uppy-Dashboard-serviceMsg-title",children:t.i18n("sessionRestored")}),M("div",{className:"uppy-Dashboard-serviceMsg-text",children:h()})]}),l?M(fQ,{id:t.id,i18n:t.i18n,uppy:t.uppy,files:t.files,resumableUploads:t.resumableUploads,hideRetryButton:t.hideRetryButton,hidePauseResumeButton:t.hidePauseResumeButton,hideCancelButton:t.hideCancelButton,showLinkToFileUploadResult:t.showLinkToFileUploadResult,showRemoveButtonAfterComplete:t.showRemoveButtonAfterComplete,metaFields:t.metaFields,toggleFileCard:t.toggleFileCard,handleRequestThumbnail:t.handleRequestThumbnail,handleCancelThumbnail:t.handleCancelThumbnail,recoveredState:t.recoveredState,individualCancellation:t.individualCancellation,openFileEditor:t.openFileEditor,canEditFile:t.canEditFile,toggleAddFilesPanel:t.toggleAddFilesPanel,isSingleFile:n,itemsPerRow:o,containerWidth:t.containerWidth,containerHeight:t.containerHeight}):M(ID,{i18n:t.i18n,i18nArray:t.i18nArray,acquirers:t.acquirers,handleInputChange:t.handleInputChange,maxNumberOfFiles:t.maxNumberOfFiles,allowedFileTypes:t.allowedFileTypes,showNativePhotoCameraButton:t.showNativePhotoCameraButton,showNativeVideoCameraButton:t.showNativeVideoCameraButton,nativeCameraFacingMode:t.nativeCameraFacingMode,showPanel:t.showPanel,activePickerPanel:t.activePickerPanel,disableLocalFiles:t.disableLocalFiles,fileManagerSelectionType:t.fileManagerSelectionType,note:t.note,proudlyDisplayPoweredByUppy:t.proudlyDisplayPoweredByUppy}),M(sm,{children:t.showAddFilesPanel?M($K,{...t,isSizeMD:r},"AddFiles"):null}),M(sm,{children:t.fileCardFor?M(QK,{...t},"FileCard"):null}),M(sm,{children:t.activePickerPanel?M(mQ,{...t},"Picker"):null}),M(sm,{children:t.showFileEditor?M(UK,{...t},"Editor"):null}),M("div",{className:"uppy-Dashboard-progressindicators",children:t.progressindicators.map(m=>t.uppy.getPlugin(m.id).render(t.state))})]})]})]})}const bQ={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}},FD=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function MD(t,e){if(e){const n=t.querySelector(`[data-uppy-paneltype="${e}"]`);if(n)return n}return t}function wQ(){let t=!1;return Pq((n,r)=>{const s=MD(n,r),a=s.contains(document.activeElement);if(a&&t)return;const o=s.querySelector("[data-uppy-super-focusable]");if(!(a&&!o))if(o)o.focus({preventScroll:!0}),t=!0;else{const l=s.querySelector(FD);l==null||l.focus({preventScroll:!0}),t=!1}},260)}function qj(t,e){const n=e[0];n&&(n.focus(),t.preventDefault())}function _Q(t,e){const n=e[e.length-1];n&&(n.focus(),t.preventDefault())}function CQ(t){return t.contains(document.activeElement)}function LD(t,e,n){const r=MD(n,e),s=xh(r.querySelectorAll(FD)),a=s.indexOf(document.activeElement);CQ(r)?t.shiftKey&&a===0?_Q(t,s):!t.shiftKey&&a===s.length-1&&qj(t,s):qj(t,s)}function SQ(t,e,n){e===null||LD(t,e,n)}const Wj=9,EQ=27;function Gj(){const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t}const jQ={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:HW,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};var Cx,xd,vl,bp,bd,Yg,Zg,Xg,yl,Jg,ev,wd,$n,I0,R0,$D,D0,O0,UD;let NQ=(Cx=class extends Zd{constructor(n,r){var a;const s=(r==null?void 0:r.autoOpen)??null;super(n,{...jQ,...r,autoOpen:s});X(this,$n);X(this,xd);Z(this,"modalName",`uppy-Dashboard-${PD()}`);Z(this,"superFocus",wQ());Z(this,"ifFocusedOnUppyRecently",!1);Z(this,"dashboardIsDisabled");Z(this,"savedScrollPosition");Z(this,"savedActiveElement");Z(this,"resizeObserver");Z(this,"darkModeMediaQuery");Z(this,"makeDashboardInsidesVisibleAnywayTimeout");Z(this,"removeTarget",n=>{const s=this.getPluginState().targets.filter(a=>a.id!==n.id);this.setPluginState({targets:s})});Z(this,"addTarget",n=>{const r=n.id||n.constructor.name,s=n.title||r,a=n.type;if(a!=="acquirer"&&a!=="progressindicator"&&a!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const o={id:r,name:s,type:a},c=this.getPluginState().targets.slice();return c.push(o),this.setPluginState({targets:c}),this.el});Z(this,"hideAllPanels",()=>{var s;const n=this.getPluginState(),r={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};n.activePickerPanel===r.activePickerPanel&&n.showAddFilesPanel===r.showAddFilesPanel&&n.showFileEditor===r.showFileEditor&&n.activeOverlayType===r.activeOverlayType||(this.setPluginState(r),this.uppy.emit("dashboard:close-panel",(s=n.activePickerPanel)==null?void 0:s.id))});Z(this,"showPanel",n=>{const{targets:r}=this.getPluginState(),s=r.find(a=>a.type==="acquirer"&&a.id===n);this.setPluginState({activePickerPanel:s,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",n)});Z(this,"canEditFile",n=>{const{targets:r}=this.getPluginState();return k(this,yl).call(this,r).some(a=>this.uppy.getPlugin(a.id).canEditFile(n))});Z(this,"openFileEditor",n=>{const{targets:r}=this.getPluginState(),s=k(this,yl).call(this,r);this.setPluginState({showFileEditor:!0,fileCardFor:n.id||null,activeOverlayType:"FileEditor"}),s.forEach(a=>{this.uppy.getPlugin(a.id).selectFile(n)})});Z(this,"closeFileEditor",()=>{const{metaFields:n}=this.getPluginState();n&&n.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})});Z(this,"saveFileEditor",()=>{const{targets:n}=this.getPluginState();k(this,yl).call(this,n).forEach(s=>{this.uppy.getPlugin(s.id).save()}),this.closeFileEditor()});Z(this,"openModal",()=>{const{promise:n,resolve:r}=Gj();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const s=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",s,!1),r()};this.el.addEventListener("animationend",s,!1)}else this.setPluginState({isHidden:!1}),r();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),n});Z(this,"closeModal",n=>{var c;const r=(n==null?void 0:n.manualClose)??!0,{isHidden:s,isClosing:a}=this.getPluginState();if(s||a)return;const{promise:o,resolve:l}=Gj();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const u=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",u,!1),l()};this.el.addEventListener("animationend",u,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),l();return document.removeEventListener("keydown",this.handleKeyDownInModal),r&&this.opts.browserBackButtonClose&&(c=history.state)!=null&&c[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),o});Z(this,"isModalOpen",()=>!this.getPluginState().isHidden||!1);Z(this,"requestCloseModal",()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal());Z(this,"setDarkModeCapability",n=>{const{capabilities:r}=this.uppy.getState();this.uppy.setState({capabilities:{...r,darkMode:n}})});Z(this,"handleSystemDarkModeChange",n=>{const r=n.matches;this.uppy.log(`[Dashboard] Dark mode is ${r?"on":"off"}`),this.setDarkModeCapability(r)});Z(this,"toggleFileCard",(n,r)=>{const s=this.uppy.getFile(r);n?this.uppy.emit("dashboard:file-edit-start",s):this.uppy.emit("dashboard:file-edit-complete",s),this.setPluginState({fileCardFor:n?r:null,activeOverlayType:n?"FileCard":null})});Z(this,"toggleAddFilesPanel",n=>{this.setPluginState({showAddFilesPanel:n,activeOverlayType:n?"AddFiles":null})});Z(this,"addFiles",n=>{const r=n.map(s=>({source:this.id,name:s.name,type:s.type,data:s,meta:{relativePath:s.relativePath||s.webkitRelativePath||null}}));try{this.uppy.addFiles(r)}catch(s){this.uppy.log(s)}});Z(this,"startListeningToResize",()=>{this.resizeObserver=new ResizeObserver(n=>{const r=n[0],{width:s,height:a}=r.contentRect;this.setPluginState({containerWidth:s,containerHeight:a,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const n=this.getPluginState(),r=!this.opts.inline&&n.isHidden;!n.areInsidesReadyToBeVisible&&!r&&(this.uppy.log("[Dashboard] resize event didn’t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)});Z(this,"stopListeningToResize",()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)});Z(this,"recordIfFocusedOnUppyRecently",n=>{this.el.contains(n.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())});Z(this,"disableInteractiveElements",n=>{const r=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],s=k(this,xd)??xh(this.el.querySelectorAll(r)).filter(a=>!a.classList.contains("uppy-Dashboard-close"));for(const a of s)a.tagName==="A"?a.setAttribute("aria-disabled",n):a.disabled=n;n?re(this,xd,s):re(this,xd,null),this.dashboardIsDisabled=n});Z(this,"updateBrowserHistory",()=>{var n;(n=history.state)!=null&&n[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)});Z(this,"handlePopState",n=>{var r;this.isModalOpen()&&(!n.state||!n.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&((r=n.state)!=null&&r[this.modalName])&&history.back()});Z(this,"handleKeyDownInModal",n=>{n.keyCode===EQ&&this.requestCloseModal(),n.keyCode===Wj&&LD(n,this.getPluginState().activeOverlayType,this.el)});Z(this,"handleClickOutside",()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()});Z(this,"handlePaste",n=>{this.uppy.iteratePlugins(s=>{var a;s.type==="acquirer"&&((a=s.handleRootPaste)==null||a.call(s,n))});const r=xh(n.clipboardData.files);r.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(r))});Z(this,"handleInputChange",n=>{n.preventDefault();const r=xh(n.currentTarget.files||[]);r.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(r))});Z(this,"handleDragOver",n=>{n.preventDefault(),n.stopPropagation();const r=()=>{let l=!0;return this.uppy.iteratePlugins(c=>{var u;(u=c.canHandleRootDrop)!=null&&u.call(c,n)&&(l=!0)}),l},s=()=>{const{types:l}=n.dataTransfer;return l.some(c=>c==="Files")},a=r(),o=s();if(!a&&!o||this.opts.disabled||this.opts.disableLocalFiles&&(o||!a)||!this.uppy.getState().allowNewUpload){n.dataTransfer.dropEffect="none";return}n.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(n)});Z(this,"handleDragLeave",n=>{n.preventDefault(),n.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(n)});Z(this,"handleDrop",async n=>{n.preventDefault(),n.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(o=>{var l;o.type==="acquirer"&&((l=o.handleRootDrop)==null||l.call(o,n))});let r=!1;const s=o=>{this.uppy.log(o,"error"),r||(this.uppy.info(o.message,"error"),r=!0)};this.uppy.log("[Dashboard] Processing dropped files");const a=await xK(n.dataTransfer,{logDropError:s});a.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(a)),this.opts.onDrop(n)});Z(this,"handleRequestThumbnail",n=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",n)});Z(this,"handleCancelThumbnail",n=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",n)});Z(this,"handleKeyDownInInline",n=>{n.keyCode===Wj&&SQ(n,this.getPluginState().activeOverlayType,this.el)});Z(this,"handlePasteOnBody",n=>{this.el.contains(document.activeElement)&&this.handlePaste(n)});Z(this,"handleComplete",({failed:n})=>{this.opts.closeAfterFinish&&!(n!=null&&n.length)&&this.requestCloseModal()});Z(this,"handleCancelRestore",()=>{this.uppy.emit("restore-canceled")});X(this,vl,()=>{if(this.opts.disableThumbnailGenerator)return;const n=600,r=this.uppy.getFiles();if(r.length===1){const s=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);s==null||s.setOptions({thumbnailWidth:n});const a={...r[0],preview:void 0};s==null||s.requestThumbnail(a).then(()=>{s==null||s.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}});X(this,bp,n=>{const r=n[0],{metaFields:s}=this.getPluginState(),a=s&&s.length>0,o=this.canEditFile(r);a&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,r.id):o&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(r)});Z(this,"initEvents",()=>{if(this.opts.trigger&&!this.opts.inline){const n=$j(this.opts.trigger);n?n.forEach(r=>r.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",k(this,wd)),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",k(this,vl)),this.uppy.on("file-removed",k(this,vl)),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",k(this,bp))});Z(this,"removeEvents",()=>{const n=$j(this.opts.trigger);!this.opts.inline&&n&&n.forEach(r=>r.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",k(this,wd)),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",k(this,vl)),this.uppy.off("file-removed",k(this,vl)),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",k(this,bp))});Z(this,"superFocusOnEachUpdate",()=>{const n=this.el.contains(document.activeElement),r=document.activeElement===document.body||document.activeElement===null,s=this.uppy.getState().info.length===0,a=!this.opts.inline;s&&(a||n||r&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()});Z(this,"afterUpdate",()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()});Z(this,"saveFileCard",(n,r)=>{this.uppy.setFileMeta(r,n),this.toggleFileCard(!1,r)});X(this,bd,n=>{const r=this.uppy.getPlugin(n.id);return{...n,icon:r.icon||this.opts.defaultPickerIcon,render:r.render}});X(this,Yg,n=>{const r=this.uppy.getPlugin(n.id);return typeof r.isSupported!="function"?!0:r.isSupported()});X(this,Zg,n=>n.filter(r=>r.type==="acquirer"&&k(this,Yg).call(this,r)).map(k(this,bd)));X(this,Xg,n=>n.filter(r=>r.type==="progressindicator").map(k(this,bd)));X(this,yl,n=>n.filter(r=>r.type==="editor").map(k(this,bd)));Z(this,"render",n=>{const r=this.getPluginState(),{files:s,capabilities:a,allowNewUpload:o}=n,{newFiles:l,uploadStartedFiles:c,completeFiles:u,erroredFiles:h,inProgressFiles:p,inProgressNotPausedFiles:m,processingFiles:x,isUploadStarted:N,isAllComplete:w,isAllPaused:b}=this.uppy.getObjectOfFilesPerState(),S=k(this,Zg).call(this,r.targets),v=k(this,Xg).call(this,r.targets),T=k(this,yl).call(this,r.targets);let I;return this.opts.theme==="auto"?I=a.darkMode?"dark":"light":I=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),xQ({state:n,isHidden:r.isHidden,files:s,newFiles:l,uploadStartedFiles:c,completeFiles:u,erroredFiles:h,inProgressFiles:p,inProgressNotPausedFiles:m,processingFiles:x,isUploadStarted:N,isAllComplete:w,isAllPaused:b,totalFileCount:Object.keys(s).length,totalProgress:n.totalProgress,allowNewUpload:o,acquirers:S,theme:I,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:r.activePickerPanel,showFileEditor:r.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:r.isClosing,progressindicators:v,editors:T,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:n.recoveredState,metaFields:r.metaFields,resumableUploads:a.resumableUploads||!1,individualCancellation:a.individualCancellation,isMobileDevice:a.isMobileDevice,fileCardFor:r.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:r.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:r.containerWidth,containerHeight:r.containerHeight,areInsidesReadyToBeVisible:r.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:r.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})});X(this,Jg,()=>{const{plugins:n}=this.opts;n.forEach(r=>{const s=this.uppy.getPlugin(r);s?s.mount(this,s):this.uppy.log(`[Uppy] Dashboard could not find plugin '${r}', make sure to uppy.use() the plugins you are specifying`,"warning")})});X(this,ev,()=>{this.uppy.iteratePlugins(k(this,wd))});X(this,wd,n=>{var s;const r=["acquirer","editor"];n&&!((s=n.opts)!=null&&s.target)&&r.includes(n.type)&&(this.getPluginState().targets.some(o=>n.id===o.id)||n.mount(this,n))});Z(this,"install",()=>{var c;this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:n,closeAfterFinish:r}=this.opts;if(n&&r)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:s,allowMultipleUploadBatches:a}=this.uppy.opts;(s||a)&&r&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:o}=this.opts;o&&this.mount(o,this),this.opts.disableStatusBar||this.uppy.use(kG,{id:ae(this,$n,D0).call(this),target:this,...ae(this,$n,I0).call(this)}),this.opts.disableInformer||this.uppy.use(fD,{id:ae(this,$n,UD).call(this),target:this,...ae(this,$n,$D).call(this)}),this.opts.disableThumbnailGenerator||this.uppy.use(ND,{id:ae(this,$n,O0).call(this),...ae(this,$n,R0).call(this)}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const l=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${l?"on":"off"}`),this.setDarkModeCapability(l),this.opts.theme==="auto"&&((c=this.darkModeMediaQuery)==null||c.addListener(this.handleSystemDarkModeChange)),k(this,Jg).call(this),k(this,ev).call(this),this.initEvents()});Z(this,"uninstall",()=>{var r;if(!this.opts.disableInformer){const s=this.uppy.getPlugin(`${this.id}:Informer`);s&&this.uppy.removePlugin(s)}if(!this.opts.disableStatusBar){const s=this.uppy.getPlugin(`${this.id}:StatusBar`);s&&this.uppy.removePlugin(s)}if(!this.opts.disableThumbnailGenerator){const s=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);s&&this.uppy.removePlugin(s)}const{plugins:n}=this.opts;n.forEach(s=>{const a=this.uppy.getPlugin(s);a&&a.unmount()}),this.opts.theme==="auto"&&((r=this.darkModeMediaQuery)==null||r.removeListener(this.handleSystemDarkModeChange)),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()});this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=bQ,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(a=this.opts).onRequestCloseModal??(a.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(n){var r,s;super.setOptions(n),(r=this.uppy.getPlugin(ae(this,$n,D0).call(this)))==null||r.setOptions(ae(this,$n,I0).call(this)),(s=this.uppy.getPlugin(ae(this,$n,O0).call(this)))==null||s.setOptions(ae(this,$n,R0).call(this))}},xd=new WeakMap,vl=new WeakMap,bp=new WeakMap,bd=new WeakMap,Yg=new WeakMap,Zg=new WeakMap,Xg=new WeakMap,yl=new WeakMap,Jg=new WeakMap,ev=new WeakMap,wd=new WeakMap,$n=new WeakSet,I0=function(){const{hideUploadButton:n,hideRetryButton:r,hidePauseResumeButton:s,hideCancelButton:a,showProgressDetails:o,hideProgressAfterFinish:l,locale:c,doneButtonHandler:u}=this.opts;return{hideUploadButton:n,hideRetryButton:r,hidePauseResumeButton:s,hideCancelButton:a,showProgressDetails:o,hideAfterFinish:l,locale:c,doneButtonHandler:u}},R0=function(){const{thumbnailWidth:n,thumbnailHeight:r,thumbnailType:s,waitForThumbnailsBeforeUpload:a}=this.opts;return{thumbnailWidth:n,thumbnailHeight:r,thumbnailType:s,waitForThumbnailsBeforeUpload:a,lazy:!a}},$D=function(){return{}},D0=function(){return`${this.id}:StatusBar`},O0=function(){return`${this.id}:ThumbnailGenerator`},UD=function(){return`${this.id}:Informer`},Z(Cx,"VERSION",MK.version),Cx);const TQ=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],kQ=/^(aria-|data-)/,zD=t=>Object.fromEntries(Object.entries(t).filter(([e])=>kQ.test(e)||TQ.includes(e)));function AQ(t,e){const n=zD(t);return Object.keys(t).some(r=>!Object.hasOwn(n,r)&&t[r]!==e[r])}class BD extends y.Component{constructor(){super(...arguments);Z(this,"container");Z(this,"plugin")}componentDidMount(){this.installPlugin()}componentDidUpdate(n){const{uppy:r,open:s,onRequestClose:a}=this.props;if(n.uppy!==r)this.uninstallPlugin(n),this.installPlugin();else if(AQ(this.props,n)){const{uppy:o,...l}={...this.props,inline:!1,onRequestCloseModal:a};this.plugin.setOptions(l)}n.open&&!s?this.plugin.closeModal():!n.open&&s&&this.plugin.openModal()}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{target:n=this.container,open:r,onRequestClose:s,uppy:a,...o}=this.props,l={id:"DashboardModal",...o,inline:!1,target:n,open:r,onRequestCloseModal:s};a.use(NQ,l),this.plugin=a.getPlugin(l.id),r&&this.plugin.openModal()}uninstallPlugin(n=this.props){const{uppy:r}=n;r.removePlugin(this.plugin)}render(){return y.createElement("div",{className:"uppy-Container",ref:n=>{this.container=n},...zD(this.props)})}}Z(BD,"defaultProps",{open:void 0,onRequestClose:void 0});y.createContext({uppy:void 0,status:"init",progress:0});var PQ={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf=y;function IQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var RQ=typeof Object.is=="function"?Object.is:IQ,DQ=nf.useSyncExternalStore,OQ=nf.useRef,FQ=nf.useEffect,MQ=nf.useMemo,LQ=nf.useDebugValue;PQ.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var a=OQ(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=MQ(function(){function c(x){if(!u){if(u=!0,h=x,x=r(x),s!==void 0&&o.hasValue){var N=o.value;if(s(N,x))return p=N}return p=x}if(N=p,RQ(h,x))return N;var w=r(x);return s!==void 0&&s(N,w)?N:(h=x,p=w)}var u=!1,h,p,m=n===void 0?null:n;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,n,r,s]);var l=DQ(t,a[0],a[1]);return FQ(function(){o.hasValue=!0,o.value=l},[l]),LQ(l),l};function VD(t,e){return Object.hasOwn(t,e)}class $Q extends Error{constructor(n,r){super(n);Z(this,"isNetworkError");Z(this,"cause");this.cause=r==null?void 0:r.cause,this.cause&&VD(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}class UQ extends Error{constructor(n,r=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");Z(this,"cause");Z(this,"isNetworkError");Z(this,"request");this.cause=n,this.isNetworkError=!0,this.request=r}}function zQ(...t){return fetch(...t).catch(e=>{throw e.name==="AbortError"?e:new UQ(e)})}function BQ(t){var s;const n=(s=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(t))==null?void 0:s[1];return`${/^http:\/\//i.test(t)?"ws":"wss"}://${n}`}class VQ extends Error{constructor(){super(...arguments);Z(this,"name","UserFacingApiError")}}var HD={};function us(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var HQ=us;us.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};us.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};us.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0};us.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};us.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};us.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};us.prototype.start=us.prototype.try;us.prototype.errors=function(){return this._errors};us.prototype.attempts=function(){return this._attempts};us.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var s=this._errors[r],a=s.message,o=(t[a]||0)+1;t[a]=o,o>=n&&(e=s,n=o)}return e};(function(t){var e=HQ;t.operation=function(n){var r=t.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},t.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in n)r[s]=n[s];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],o=0;o<r.retries;o++)a.push(this.createTimeout(o,r));return n&&n.forever&&!a.length&&a.push(this.createTimeout(o,r)),a.sort(function(l,c){return l-c}),a},t.createTimeout=function(n,r){var s=r.randomize?Math.random()+1:1,a=Math.round(s*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return a=Math.min(a,r.maxTimeout),a},t.wrap=function(n,r,s){if(r instanceof Array&&(s=r,r=null),!s){s=[];for(var a in n)typeof n[a]=="function"&&s.push(a)}for(var o=0;o<s.length;o++){var l=s[o],c=n[l];n[l]=(function(h){var p=t.operation(r),m=Array.prototype.slice.call(arguments,1),x=m.pop();m.push(function(N){p.retry(N)||(N&&(arguments[0]=p.mainError()),x.apply(this,arguments))}),p.attempt(function(){h.apply(n,m)})}).bind(n,c),n[l].options=r}}})(HD);var qQ=HD;const WQ=Ea(qQ),GQ=Object.prototype.toString,KQ=t=>GQ.call(t)==="[object Error]",QQ=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function YQ(t){return t&&KQ(t)&&t.name==="TypeError"&&typeof t.message=="string"?t.message==="Load failed"?t.stack===void 0:QQ.has(t.message):!1}class F0 extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const Kj=(t,e,n)=>{const r=n.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t};async function Qj(t,e){return new Promise((n,r)=>{e={...e},e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.retries??(e.retries=10);const s=WQ.operation(e),a=()=>{var l;s.stop(),r((l=e.signal)==null?void 0:l.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",a,{once:!0});const o=()=>{var l;(l=e.signal)==null||l.removeEventListener("abort",a),s.stop()};s.attempt(async l=>{try{const c=await t(l);o(),n(c)}catch(c){try{if(!(c instanceof Error))throw new TypeError(`Non-error was thrown: "${c}". You should only throw errors.`);if(c instanceof F0)throw c.originalError;if(c instanceof TypeError&&!YQ(c))throw c;if(Kj(c,l,e),await e.shouldRetry(c)||(s.stop(),r(c)),await e.onFailedAttempt(c),!s.retry(c))throw s.mainError()}catch(u){Kj(u,l,e),o(),r(u)}}})})}const ZQ="@uppy/companion-client",XQ="Client library for communication with Companion. Intended for use in Uppy plugins.",JQ="4.5.2",eY="MIT",tY="lib/index.js",nY="module",rY={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},sY=["file uploader","uppy","uppy-plugin","companion","provider"],iY="https://uppy.io",aY={url:"https://github.com/transloadit/uppy/issues"},oY={type:"git",url:"git+https://github.com/transloadit/uppy.git"},lY=["src","lib","dist","CHANGELOG.md"],cY={"@uppy/utils":"^6.2.2","namespace-emitter":"^2.0.1","p-retry":"^6.1.0"},dY={jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},uY={"@uppy/core":"^4.5.2"},hY={name:ZQ,description:XQ,version:JQ,license:eY,main:tY,type:nY,scripts:rY,keywords:sY,homepage:iY,bugs:aY,repository:oY,files:lY,dependencies:cY,devDependencies:dY,peerDependencies:uY};class pY extends Error{constructor(){super("Authorization required");Z(this,"isAuthError");this.name="AuthError",this.isAuthError=!0}}function fY(t){return t.replace(/\/$/,"")}const Yj=10,mY=5*60*1e3,gY=401;class vY extends Error{constructor({statusCode:n,message:r}){super(r);Z(this,"statusCode");this.name="HttpError",this.statusCode=n}}async function yY(t){if(t.status===gY)throw new pY;if(t.ok)return t.json();let e=`Failed request with status: ${t.status}. ${t.statusText}`,n;try{n=await t.json(),n.message&&(e=`${e} message: ${n.message}`),n.requestId&&(e=`${e} request-Id: ${n.requestId}`)}catch(r){throw new Error(e,{cause:r})}throw t.status>=400&&t.status<=499&&n.message?new VQ(n.message):new vY({statusCode:t.status,message:e})}function xY(t,e,n){const{progress:r,bytesUploaded:s,bytesTotal:a}=e;r&&(t.uppy.log(`Upload progress: ${r}`),t.uppy.emit("upload-progress",n,{uploadStarted:n.progress.uploadStarted??0,bytesUploaded:s,bytesTotal:a}))}var xl,Po,M0,tv,L0;class qD{constructor(e,n){X(this,Po);X(this,xl);Z(this,"uppy");Z(this,"opts");X(this,tv,async({file:e,postBody:n,signal:r})=>{var a;if(((a=e.remote)==null?void 0:a.url)==null)throw new Error("Cannot connect to an undefined URL");return(await this.post(e.remote.url,{...e.remote.body,...n},{signal:r})).token});this.uppy=e,this.opts=n,this.onReceiveResponse=this.onReceiveResponse.bind(this),re(this,xl,n.companionHeaders)}setCompanionHeaders(e){re(this,xl,e)}[Symbol.for("uppy test: getCompanionHeaders")](){return k(this,xl)}get hostname(){const{companion:e}=this.uppy.getState(),n=this.opts.companionUrl;return fY(e!=null&&e[n]?e[n]:n)}async headers(e=!1){return{...{Accept:"application/json",...e?void 0:{"Content-Type":"application/json"}},...k(this,xl)}}onReceiveResponse(e){const{headers:n}=e,s=this.uppy.getState().companion||{},a=this.opts.companionUrl;n.has("i-am")&&n.get("i-am")!==s[a]&&this.uppy.setState({companion:{...s,[a]:n.get("i-am")}})}async request({path:e,method:n="GET",data:r,skipPostResponse:s,signal:a}){try{const o=await this.headers(!r),l=await zQ(ae(this,Po,M0).call(this,e),{method:n,signal:a,headers:o,credentials:this.opts.companionCookiesRule||"same-origin",body:r?JSON.stringify(r):null});return s||this.onReceiveResponse(l),await yY(l)}catch(o){throw o.isAuthError||o.name==="UserFacingApiError"||o.name==="AbortError"?o:new $Q(`Could not ${n} ${ae(this,Po,M0).call(this,e)}`,{cause:o})}}async get(e,n){return this.request({...n,path:e})}async post(e,n,r){return this.request({...r,path:e,method:"POST",data:n})}async delete(e,n,r){return this.request({...r,path:e,method:"DELETE",data:n})}async uploadRemoteFile(e,n,r){try{const{signal:s,getQueue:a}=r||{};return await Qj(async()=>{var u;const o=(u=this.uppy.getFile(e.id))==null?void 0:u.serverToken;if(o!=null)return this.uppy.log(`Connecting to exiting websocket ${o}`),ae(this,Po,L0).call(this,{file:e,queue:a(),signal:s});const c=await a().wrapPromiseFunction(async(...h)=>{try{return await k(this,tv).call(this,...h)}catch(p){if(p.isAuthError)throw new F0(p);if(p.cause==null)throw p;const m=p.cause,x=()=>[408,409,429,418,423].includes(m.statusCode)||m.statusCode>=500&&m.statusCode<=599&&![501,505].includes(m.statusCode);throw m.name==="HttpError"&&!x()?new F0(m):m}},{priority:-1})({file:e,postBody:n,signal:s}).abortOn(s);if(this.uppy.getFile(e.id))return this.uppy.setFileState(e.id,{serverToken:c}),ae(this,Po,L0).call(this,{file:this.uppy.getFile(e.id),queue:a(),signal:s})},{retries:Yj,signal:s,onFailedAttempt:o=>this.uppy.log(`Retrying upload due to: ${o.message}`,"warning")})}catch(s){if(s.name==="AbortError")return;throw this.uppy.emit("upload-error",e,s),s}}}xl=new WeakMap,Po=new WeakSet,M0=function(e){return/^(https?:|)\/\//.test(e)?e:`${this.hostname}/${e}`},tv=new WeakMap,L0=async function({file:e,queue:n,signal:r}){let s;const{capabilities:a}=this.uppy.getState();try{return await new Promise((o,l)=>{const c=e.serverToken,u=BQ(e.remote.companionUrl);let h,p,m,{isPaused:x}=e;const N=(C,_)=>{if(h==null||h.readyState!==h.OPEN){this.uppy.log(`Cannot send "${C}" to socket ${e.id} because the socket state was ${String(h==null?void 0:h.readyState)}`,"warning");return}h.send(JSON.stringify({action:C,payload:_??{}}))};function w(){a.resumableUploads&&N(x?"pause":"resume")}const b=async()=>{p&&p.abort(),p=new AbortController;const C=P=>{var A;this.uppy.setFileState(e.id,{serverToken:null}),(A=p==null?void 0:p.abort)==null||A.call(p),l(P)};function _(){clearTimeout(m),!x&&(m=setTimeout(()=>C(new Error("Timeout waiting for message from Companion socket")),mY))}try{await n.wrapPromiseFunction(async()=>{await Qj(async()=>new Promise((A,F)=>{h=new WebSocket(`${u}/api/${c}`),_(),h.addEventListener("close",()=>{h=void 0,F(new Error("Socket closed unexpectedly"))}),h.addEventListener("error",E=>{this.uppy.log(`Companion socket error ${JSON.stringify(E)}, closing socket`,"warning"),h==null||h.close()}),h.addEventListener("open",()=>{w()}),h.addEventListener("message",E=>{var $,G,se;_();try{const{action:de,payload:Q}=JSON.parse(E.data);switch(de){case"progress":{xY(this,Q,this.uppy.getFile(e.id));break}case"success":{const ce=($=Q.response)==null?void 0:$.responseText;this.uppy.emit("upload-success",this.uppy.getFile(e.id),{uploadURL:Q.url,status:((G=Q.response)==null?void 0:G.status)??200,body:ce?JSON.parse(ce):void 0}),(se=p==null?void 0:p.abort)==null||se.call(p),o();break}case"error":{const{message:ce}=Q.error;throw Object.assign(new Error(ce),{cause:Q.error})}default:this.uppy.log(`Companion socket unknown action ${de}`,"warning")}}catch(de){C(de)}});const D=()=>{this.uppy.log(`Closing socket ${e.id}`),clearTimeout(m),h&&h.close(),h=void 0};p.signal.addEventListener("abort",()=>{D()})}),{retries:Yj,signal:p.signal,onFailedAttempt:()=>{p.signal.aborted||this.uppy.log(`Retrying websocket ${e.id}`)}})})().abortOn(p.signal)}catch(P){if(p.signal.aborted)return;C(P)}},S=C=>{a.resumableUploads&&(x=C,h&&w())},v=C=>{var _;a.individualCancellation&&C.id===e.id&&(N("cancel"),(_=p==null?void 0:p.abort)==null||_.call(p),this.uppy.log(`upload ${e.id} was removed`),o())},T=()=>{var C;N("cancel"),(C=p==null?void 0:p.abort)==null||C.call(p),this.uppy.log(`upload ${e.id} was canceled`),o()},I=(C,_)=>{(C==null?void 0:C.id)===e.id&&S(_)},L=()=>S(!0),R=()=>S(!1);this.uppy.on("file-removed",v),this.uppy.on("cancel-all",T),this.uppy.on("upload-pause",I),this.uppy.on("pause-all",L),this.uppy.on("resume-all",R),s=()=>{this.uppy.off("file-removed",v),this.uppy.off("cancel-all",T),this.uppy.off("upload-pause",I),this.uppy.off("pause-all",L),this.uppy.off("resume-all",R)},r.addEventListener("abort",()=>{p==null||p.abort()}),b()})}finally{s==null||s()}},Z(qD,"VERSION",hY.version);var bi,wp;class bY{constructor(e){X(this,bi);X(this,wp,[]);re(this,bi,e)}on(e,n){return k(this,wp).push([e,n]),k(this,bi).on(e,n)}remove(){for(const[e,n]of k(this,wp).splice(0))k(this,bi).off(e,n)}onFilePause(e,n){this.on("upload-pause",(r,s)=>{e===(r==null?void 0:r.id)&&n(s)})}onFileRemove(e,n){this.on("file-removed",r=>{e===r.id&&n(r.id)})}onPause(e,n){this.on("upload-pause",(r,s)=>{e===(r==null?void 0:r.id)&&n(s)})}onRetry(e,n){this.on("upload-retry",r=>{e===(r==null?void 0:r.id)&&n()})}onRetryAll(e,n){this.on("retry-all",()=>{k(this,bi).getFile(e)&&n()})}onPauseAll(e,n){this.on("pause-all",()=>{k(this,bi).getFile(e)&&n()})}onCancelAll(e,n){this.on("cancel-all",(...r)=>{k(this,bi).getFile(e)&&n(...r)})}onResumeAll(e,n){this.on("resume-all",()=>{k(this,bi).getFile(e)&&n()})}}bi=new WeakMap,wp=new WeakMap;const{AbortController:yx}=globalThis,WD=(t="Aborted",e)=>{const n=new DOMException(t,"AbortError");return e!=null&&VD(e,"cause")&&Object.defineProperty(n,"cause",{__proto__:null,configurable:!0,writable:!0,value:e.cause}),n};function wY(t){const e=n=>"error"in n&&!!n.error;return t.filter(n=>!e(n))}function _Y(t){return t.filter(e=>{var n;return!((n=e.progress)!=null&&n.uploadStarted)||!e.isRestored})}function Zj(t,e){return t===!0?Object.keys(e):Array.isArray(t)?t:[]}function CY(t){return new Error("Cancelled",{cause:t})}function Xj(t){var e;if(t!=null){const n=()=>this.abort(t.reason);t.addEventListener("abort",n,{once:!0});const r=()=>{t.removeEventListener("abort",n)};(e=this.then)==null||e.call(this,r,r)}return this}var sa,wi,ia,_d,_i,Cd,bl,rr,$0,Ju,GD,KD,QD,nv,Sd;class SY{constructor(e){X(this,rr);X(this,sa,0);X(this,wi,[]);X(this,ia,!1);X(this,_d);X(this,_i,1);X(this,Cd);X(this,bl);Z(this,"limit");X(this,nv,()=>this.resume());X(this,Sd,()=>{if(k(this,ia)){re(this,bl,setTimeout(k(this,Sd),0));return}re(this,_i,this.limit),this.limit=Math.ceil((k(this,Cd)+k(this,_i))/2);for(let e=k(this,_i);e<=this.limit;e++)ae(this,rr,Ju).call(this);k(this,Cd)-k(this,_i)>3?re(this,bl,setTimeout(k(this,Sd),2e3)):re(this,_i,Math.floor(k(this,_i)/2))});typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,n){return!k(this,ia)&&k(this,sa)<this.limit?ae(this,rr,$0).call(this,e):ae(this,rr,KD).call(this,e,n)}wrapSyncFunction(e,n){return(...r)=>{const s=this.run(()=>(e(...r),queueMicrotask(()=>s.done()),()=>{}),n);return{abortOn:Xj,abort(){s.abort()}}}}wrapPromiseFunction(e,n){return(...r)=>{let s;const a=new Promise((o,l)=>{s=this.run(()=>{let c,u;try{u=Promise.resolve(e(...r))}catch(h){u=Promise.reject(h)}return u.then(h=>{c?l(c):(s.done(),o(h))},h=>{c?l(c):(s.done(),l(h))}),h=>{c=CY(h)}},n)});return a.abort=o=>{s.abort(o)},a.abortOn=Xj,a}}resume(){re(this,ia,!1),clearTimeout(k(this,_d));for(let e=0;e<this.limit;e++)ae(this,rr,Ju).call(this)}pause(e=null){re(this,ia,!0),clearTimeout(k(this,_d)),e!=null&&re(this,_d,setTimeout(k(this,nv),e))}rateLimit(e){clearTimeout(k(this,bl)),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(re(this,Cd,this.limit-1),this.limit=k(this,_i),re(this,bl,setTimeout(k(this,Sd),e)))}get isPaused(){return k(this,ia)}}sa=new WeakMap,wi=new WeakMap,ia=new WeakMap,_d=new WeakMap,_i=new WeakMap,Cd=new WeakMap,bl=new WeakMap,rr=new WeakSet,$0=function(e){re(this,sa,k(this,sa)+1);let n=!1,r;try{r=e()}catch(s){throw re(this,sa,k(this,sa)-1),s}return{abort:s=>{n||(n=!0,re(this,sa,k(this,sa)-1),r==null||r(s),ae(this,rr,Ju).call(this))},done:()=>{n||(n=!0,re(this,sa,k(this,sa)-1),ae(this,rr,Ju).call(this))}}},Ju=function(){queueMicrotask(()=>ae(this,rr,GD).call(this))},GD=function(){if(k(this,ia)||k(this,sa)>=this.limit||k(this,wi).length===0)return;const e=k(this,wi).shift();if(e==null)throw new Error("Invariant violation: next is null");const n=ae(this,rr,$0).call(this,e.fn);e.abort=n.abort,e.done=n.done},KD=function(e,n){const r={fn:e,priority:(n==null?void 0:n.priority)||0,abort:()=>{ae(this,rr,QD).call(this,r)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},s=k(this,wi).findIndex(a=>r.priority>a.priority);return s===-1?k(this,wi).push(r):k(this,wi).splice(s,0,r),r},QD=function(e){const n=k(this,wi).indexOf(e);n!==-1&&k(this,wi).splice(n,1)},nv=new WeakMap,Sd=new WeakMap;const EY="@uppy/aws-s3",jY="Upload to Amazon S3 with Uppy",NY="4.3.2",TY="MIT",kY="lib/index.js",AY="module",PY={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},IY=["file uploader","aws s3","amazon s3","s3","uppy","uppy-plugin","multipart"],RY="https://uppy.io",DY={url:"https://github.com/transloadit/uppy/issues"},OY={type:"git",url:"git+https://github.com/transloadit/uppy.git"},FY=["src","lib","dist","CHANGELOG.md"],MY={"@uppy/companion-client":"^4.5.2","@uppy/utils":"^6.2.2"},LY={"@aws-sdk/client-s3":"^3.362.0","@aws-sdk/s3-request-presigner":"^3.362.0","@uppy/core":"^4.5.2",jsdom:"^26.1.0",nock:"^13.1.0",typescript:"^5.8.3",vitest:"^3.2.4","whatwg-fetch":"3.6.2"},$Y={"@uppy/core":"^4.5.2"},UY={name:EY,description:jY,version:NY,license:TY,main:kY,type:AY,scripts:PY,keywords:IY,homepage:RY,bugs:DY,repository:OY,files:FY,dependencies:MY,devDependencies:LY,peerDependencies:$Y};function zY({method:t="PUT",CanonicalUri:e="/",CanonicalQueryString:n="",SignedHeaders:r,HashedPayload:s}){const a=Object.keys(r).map(o=>o.toLowerCase()).sort();return[t,e,n,...a.map(o=>`${o}:${r[o]}`),"",a.join(";"),s].join(`
`)}const i_=new TextEncoder,a_={name:"HMAC",hash:"SHA-256"};async function BY(t){const{subtle:e}=globalThis.crypto;return e.digest(a_.hash,i_.encode(t))}async function VY(t){const{subtle:e}=globalThis.crypto;return e.importKey("raw",typeof t=="string"?i_.encode(t):t,a_,!1,["sign"])}function Jj(t){const e=new Uint8Array(t);let n="";for(let r=0;r<e.length;r++)n+=e[r].toString(16).padStart(2,"0");return n}async function Mu(t,e){const{subtle:n}=globalThis.crypto;return n.sign(a_,await VY(t),i_.encode(e))}async function HY({accountKey:t,accountSecret:e,sessionToken:n,bucketName:r,Key:s,Region:a,expires:o,uploadId:l,partNumber:c}){const u="s3",h=`${u}.${a}.amazonaws.com`,p=`/${r}/${encodeURI(s).replace(/[;?:@&=+$,#!'()*]/g,P=>`%${P.charCodeAt(0).toString(16).toUpperCase()}`)}`,m="UNSIGNED-PAYLOAD",x=new Date().toISOString().replace(/[-:]|\.\d+/g,""),N=x.slice(0,8),w=`${N}/${a}/${u}/aws4_request`,b=new URL(`https://${h}${p}`);b.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),b.searchParams.set("X-Amz-Content-Sha256",m),b.searchParams.set("X-Amz-Credential",`${t}/${w}`),b.searchParams.set("X-Amz-Date",x),b.searchParams.set("X-Amz-Expires",o),b.searchParams.set("X-Amz-Security-Token",n),b.searchParams.set("X-Amz-SignedHeaders","host"),c&&b.searchParams.set("partNumber",c),l&&b.searchParams.set("uploadId",l),b.searchParams.set("x-id",c&&l?"UploadPart":"PutObject");const S=zY({CanonicalUri:p,CanonicalQueryString:b.search.slice(1),SignedHeaders:{host:h},HashedPayload:m}),v=Jj(await BY(S)),T=["AWS4-HMAC-SHA256",x,w,v].join(`
`),I=await Mu(`AWS4${e}`,N),L=await Mu(I,a),R=await Mu(L,u),C=await Mu(R,"aws4_request"),_=Jj(await Mu(C,T));return b.searchParams.set("X-Amz-Signature",_),b}const qY=1024*1024,eN={getChunkSize(t){return Math.ceil(t.size/1e4)},onProgress(){},onPartComplete(){},onSuccess(){},onError(t){throw t}};function WY(t){if(typeof t=="string")return parseInt(t,10);if(typeof t=="number")return t;throw new TypeError("Expected a number")}const Dm=Symbol("pausing upload, not an actual error");var Cs,Jr,Ci,aa,oa,_p,Cp,Ed,wl,jd,Sp,Nd,Ep,ei,YD,ZD,U0,jp,Np,XD;class GY{constructor(e,n){X(this,ei);Z(this,"options");X(this,Cs,new yx);X(this,Jr,[]);X(this,Ci,[]);X(this,aa);X(this,oa);X(this,_p,!1);X(this,Cp);X(this,Ed);X(this,wl);X(this,jd);X(this,Sp,e=>(e==null?void 0:e.cause)===Dm?null:k(this,Cp).call(this,e));X(this,Nd,1e4);X(this,Ep,5*qY);X(this,jp,e=>n=>{if(!n.lengthComputable)return;k(this,Ci)[e].uploaded=WY(n.loaded);const r=k(this,Ci).reduce((s,a)=>s+a.uploaded,0);this.options.onProgress(r,k(this,aa).size)});X(this,Np,e=>n=>{k(this,Jr)[e]=null,k(this,Ci)[e].etag=n,k(this,Ci)[e].done=!0;const r={PartNumber:e+1,ETag:n};this.options.onPartComplete(r)});var r;this.options={...eN,...n},(r=this.options).getChunkSize??(r.getChunkSize=eN.getChunkSize),re(this,aa,e),re(this,oa,n.file),re(this,Ed,this.options.onSuccess),re(this,Cp,this.options.onError),re(this,wl,this.options.shouldUseMultipart),re(this,jd,n.uploadId&&n.key),ae(this,ei,YD).call(this)}start(){k(this,_p)?(k(this,Cs).signal.aborted||k(this,Cs).abort(Dm),re(this,Cs,new yx),ae(this,ei,U0).call(this)):k(this,jd)?(this.options.companionComm.restoreUploadFile(k(this,oa),{uploadId:this.options.uploadId,key:this.options.key}),ae(this,ei,U0).call(this)):ae(this,ei,ZD).call(this)}pause(){k(this,Cs).abort(Dm),re(this,Cs,new yx)}abort(e){e!=null&&e.really?ae(this,ei,XD).call(this):this.pause()}[Symbol.for("uppy test: getChunkState")](){return k(this,Ci)}}Cs=new WeakMap,Jr=new WeakMap,Ci=new WeakMap,aa=new WeakMap,oa=new WeakMap,_p=new WeakMap,Cp=new WeakMap,Ed=new WeakMap,wl=new WeakMap,jd=new WeakMap,Sp=new WeakMap,Nd=new WeakMap,Ep=new WeakMap,ei=new WeakSet,YD=function(){const e=k(this,aa).size,n=typeof k(this,wl)=="function"?k(this,wl).call(this,k(this,oa)):!!k(this,wl);if(n&&e>k(this,Ep)){let r=Math.max(this.options.getChunkSize(k(this,aa)),k(this,Ep)),s=Math.floor(e/r);s>k(this,Nd)&&(s=k(this,Nd),r=e/k(this,Nd)),re(this,Jr,Array(s));for(let a=0,o=0;a<e;a+=r,o++){const l=Math.min(e,a+r),c=()=>{const u=a;return k(this,aa).slice(u,l)};if(k(this,Jr)[o]={getData:c,onProgress:k(this,jp).call(this,o),onComplete:k(this,Np).call(this,o),shouldUseMultipart:n},k(this,jd)){const u=a+r>e?e-a:r;k(this,Jr)[o].setAsUploaded=()=>{k(this,Jr)[o]=null,k(this,Ci)[o].uploaded=u}}}}else re(this,Jr,[{getData:()=>k(this,aa),onProgress:k(this,jp).call(this,0),onComplete:k(this,Np).call(this,0),shouldUseMultipart:n}]);re(this,Ci,k(this,Jr).map(()=>({uploaded:0})))},ZD=function(){this.options.companionComm.uploadFile(k(this,oa),k(this,Jr),k(this,Cs).signal).then(k(this,Ed),k(this,Sp)),re(this,_p,!0)},U0=function(){this.options.companionComm.resumeUploadFile(k(this,oa),k(this,Jr),k(this,Cs).signal).then(k(this,Ed),k(this,Sp))},jp=new WeakMap,Np=new WeakMap,XD=function(){k(this,Cs).abort(),this.options.companionComm.abortFileUpload(k(this,oa)).catch(e=>this.options.log(e))};function er(t){if(t!=null&&t.aborted)throw WD("The operation was aborted",{cause:t.reason})}function KY(t){const e=new URL(t);return e.search="",e.hash="",e.href}var Tp,Ss,kp,Ap,Pp,Ip,Td,kd,Ad,Pd,_l,Id,Es,Gl,JD,z0;class QY{constructor(e,n,r,s){X(this,Gl);X(this,Tp);X(this,Ss,new WeakMap);X(this,kp);X(this,Ap);X(this,Pp);X(this,Ip);X(this,Td);X(this,kd);X(this,Ad);X(this,Pd);X(this,_l);X(this,Id);X(this,Es);re(this,kd,e),re(this,_l,r),re(this,Es,s),this.setOptions(n)}setOptions(e){const n=k(this,kd);"abortMultipartUpload"in e&&re(this,Tp,n.wrapPromiseFunction(e.abortMultipartUpload,{priority:1})),"createMultipartUpload"in e&&re(this,kp,n.wrapPromiseFunction(e.createMultipartUpload,{priority:-1})),"signPart"in e&&re(this,Ap,n.wrapPromiseFunction(e.signPart)),"listParts"in e&&re(this,Ip,n.wrapPromiseFunction(e.listParts)),"completeMultipartUpload"in e&&re(this,Pd,n.wrapPromiseFunction(e.completeMultipartUpload,{priority:1})),"retryDelays"in e&&re(this,Ad,e.retryDelays??[]),"uploadPartBytes"in e&&re(this,Id,n.wrapPromiseFunction(e.uploadPartBytes,{priority:1/0})),"getUploadParameters"in e&&re(this,Pp,n.wrapPromiseFunction(e.getUploadParameters))}async getUploadId(e,n){let r;for(;r=k(this,Ss).get(e.data),r!=null;)try{return await r}catch{}const s=k(this,kp).call(this,k(this,Es).call(this,e),n),a=()=>{s.abort(n.reason),k(this,Ss).delete(e.data)};return n.addEventListener("abort",a,{once:!0}),k(this,Ss).set(e.data,s),s.then(async o=>{n.removeEventListener("abort",a),k(this,_l).call(this,e,o),k(this,Ss).set(e.data,o)},()=>{n.removeEventListener("abort",a),k(this,Ss).delete(e.data)}),s}async abortFileUpload(e){const n=k(this,Ss).get(e.data);if(n==null)return;k(this,Ss).delete(e.data),k(this,_l).call(this,e,Object.create(null));let r;try{r=await n}catch{return}await k(this,Tp).call(this,k(this,Es).call(this,e),r)}async uploadFile(e,n,r){if(er(r),n.length===1&&!n[0].shouldUseMultipart)return ae(this,Gl,z0).call(this,e,n[0],r);const{uploadId:s,key:a}=await this.getUploadId(e,r);er(r);try{const o=await Promise.all(n.map((l,c)=>this.uploadChunk(e,c+1,l,r)));return er(r),await k(this,Pd).call(this,k(this,Es).call(this,e),{key:a,uploadId:s,parts:o,signal:r},r).abortOn(r)}catch(o){throw(o==null?void 0:o.cause)!==Dm&&(o==null?void 0:o.name)!=="AbortError"&&this.abortFileUpload(e),o}}restoreUploadFile(e,n){k(this,Ss).set(e.data,n)}async resumeUploadFile(e,n,r){if(er(r),n.length===1&&n[0]!=null&&!n[0].shouldUseMultipart)return ae(this,Gl,z0).call(this,e,n[0],r);const{uploadId:s,key:a}=await this.getUploadId(e,r);er(r);const o=await k(this,Ip).call(this,k(this,Es).call(this,e),{uploadId:s,key:a,signal:r},r).abortOn(r);er(r);const l=await Promise.all(n.map((c,u)=>{var m;const h=u+1,p=o.find(({PartNumber:x})=>x===h);return p==null?this.uploadChunk(e,h,c,r):((m=c==null?void 0:c.setAsUploaded)==null||m.call(c),{PartNumber:h,ETag:p.ETag})}));return er(r),k(this,Pd).call(this,k(this,Es).call(this,e),{key:a,uploadId:s,parts:l,signal:r},r).abortOn(r)}async uploadChunk(e,n,r,s){er(s);const{uploadId:a,key:o}=await this.getUploadId(e,s),l=k(this,Ad).values(),c=k(this,Ad).values(),u=()=>{const h=l.next();return h==null||h.done?null:h.value};for(;;){er(s);const h=r.getData(),{onProgress:p,onComplete:m}=r;let x;try{x=await k(this,Ap).call(this,k(this,Es).call(this,e),{uploadId:a,key:o,partNumber:n,body:h,signal:s}).abortOn(s)}catch(N){const w=u();if(w==null||s.aborted)throw N;await new Promise(b=>setTimeout(b,w));continue}er(s);try{return{PartNumber:n,...await k(this,Id).call(this,{signature:x,body:h,size:h.size,onProgress:p,onComplete:m,signal:s}).abortOn(s)}}catch(N){if(!await ae(this,Gl,JD).call(this,N,c))throw N}}}}Tp=new WeakMap,Ss=new WeakMap,kp=new WeakMap,Ap=new WeakMap,Pp=new WeakMap,Ip=new WeakMap,Td=new WeakMap,kd=new WeakMap,Ad=new WeakMap,Pd=new WeakMap,_l=new WeakMap,Id=new WeakMap,Es=new WeakMap,Gl=new WeakSet,JD=async function(e,n){var a;const r=k(this,kd),s=(a=e==null?void 0:e.source)==null?void 0:a.status;if(s==null)return!1;if(s===403&&e.message==="Request has expired"){if(!r.isPaused){if(r.limit===1||k(this,Td)==null){const o=n.next();if(o==null||o.done)return!1;re(this,Td,o.value)}r.rateLimit(0),await new Promise(o=>setTimeout(o,k(this,Td)))}}else if(s===429){if(!r.isPaused){const o=n.next();if(o==null||o.done)return!1;r.rateLimit(o.value)}}else{if(s>400&&s<500&&s!==409)return!1;if(typeof navigator<"u"&&navigator.onLine===!1)r.isPaused||(r.pause(),window.addEventListener("online",()=>{r.resume()},{once:!0}));else{const o=n.next();if(o==null||o.done)return!1;await new Promise(l=>setTimeout(l,o.value))}}return!0},z0=async function(e,n,r){const{method:s="POST",url:a,fields:o,headers:l}=await k(this,Pp).call(this,k(this,Es).call(this,e),{signal:r}).abortOn(r);let c;const u=n.getData();if(s.toUpperCase()==="POST"){const N=new FormData;Object.entries(o).forEach(([w,b])=>N.set(w,b)),N.set("file",u),c=N}else c=u;const{onProgress:h,onComplete:p}=n,m=await k(this,Id).call(this,{signature:{url:a,headers:l,method:s},body:c,size:u.size,onProgress:h,onComplete:p,signal:r}).abortOn(r),x=o==null?void 0:o.key;return k(this,_l).call(this,e,{key:x}),{...m,location:m.location??KY(a),bucket:o==null?void 0:o.bucket,key:x}};function bc(t){if(t!=null&&t.error){const e=new Error(t.message);throw Object.assign(e,t.error),e}return t}function tN(t){const e=t.Expiration;if(e){const n=Math.floor((new Date(e)-Date.now())/1e3);if(n>9)return n}}function nN({meta:t,allowedMetaFields:e,querify:n=!1}){const r=e??Object.keys(t);return t?Object.fromEntries(r.filter(s=>t[s]!=null).map(s=>{const a=n?`metadata[${s}]`:s,o=String(t[s]);return[a,o]})):{}}const YY={allowedMetaFields:!0,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:t=>(t.size||0)>100*1024*1024,retryDelays:[0,1e3,3e3,5e3]};var Rd,fr,kn,V0,Ma,js,e4,rv,Dd,t4,n4,Rp,Od,Cl,Dp;const sv=class sv extends IR{constructor(n,r){super(n,{...YY,uploadPartBytes:sv.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...r});X(this,kn);X(this,Rd);X(this,fr);Z(this,"requests");Z(this,"uploaderEvents");Z(this,"uploaders");X(this,js);X(this,rv,(n,{key:r,uploadId:s})=>{const a=this.uppy.getFile(n.id);a!=null&&this.uppy.setFileState(n.id,{s3Multipart:{...a.s3Multipart,key:r,uploadId:s}})});X(this,Dd,n=>this.uppy.getFile(n.id)||n);X(this,Rp,async n=>{if(n.length===0)return;const r=this.uppy.getFilesByIds(n),s=wY(r),a=_Y(s);this.uppy.emit("upload-start",a);const o=s.map(c=>{if(c.isRemote){const u=()=>this.requests;k(this,Cl).call(this,!1);const h=new AbortController,p=x=>{x.id===c.id&&h.abort()};this.uppy.on("file-removed",p);const m=this.uppy.getRequestClientForFile(c).uploadRemoteFile(c,ae(this,kn,n4).call(this,c),{signal:h.signal,getQueue:u});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",p)},{priority:-1})(),m}return ae(this,kn,t4).call(this,c)}),l=await Promise.allSettled(o);return k(this,Cl).call(this,!0),l});X(this,Od,()=>{var n;(n=k(this,fr))==null||n.setCompanionHeaders(this.opts.headers)});X(this,Cl,n=>{const{capabilities:r}=this.uppy.getState();this.uppy.setState({capabilities:{...r,resumableUploads:n}})});X(this,Dp,()=>{k(this,Cl).call(this,!0)});this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",ae(this,kn,V0).call(this,r);const s={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:r!=null&&r.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:r!=null&&r.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(const a of Object.keys(s))this.opts[a]==null&&(this.opts[a]=s[a].bind(this));this.requests=this.opts.rateLimitedQueue??new SY(this.opts.limit),re(this,Rd,new QY(this.requests,this.opts,k(this,rv),k(this,Dd))),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}[Symbol.for("uppy test: getClient")](){return k(this,fr)}setOptions(n){k(this,Rd).setOptions(n),super.setOptions(n),ae(this,kn,V0).call(this,n)}resetUploaderReferences(n,r){this.uploaders[n]&&(this.uploaders[n].abort({really:(r==null?void 0:r.abort)||!1}),this.uploaders[n]=null),this.uploaderEvents[n]&&(this.uploaderEvents[n].remove(),this.uploaderEvents[n]=null)}createMultipartUpload(n,r){ae(this,kn,Ma).call(this,"createMultipartUpload"),er(r);const s=Zj(this.opts.allowedMetaFields,n.meta),a=nN({meta:n.meta,allowedMetaFields:s});return k(this,fr).post("s3/multipart",{filename:n.name,type:n.type,metadata:a},{signal:r}).then(bc)}listParts(n,{key:r,uploadId:s,signal:a},o){a??(a=o),ae(this,kn,Ma).call(this,"listParts"),er(a);const l=encodeURIComponent(r);return k(this,fr).get(`s3/multipart/${encodeURIComponent(s)}?key=${l}`,{signal:a}).then(bc)}completeMultipartUpload(n,{key:r,uploadId:s,parts:a,signal:o},l){o??(o=l),ae(this,kn,Ma).call(this,"completeMultipartUpload"),er(o);const c=encodeURIComponent(r),u=encodeURIComponent(s);return k(this,fr).post(`s3/multipart/${u}/complete?key=${c}`,{parts:a.map(({ETag:h,PartNumber:p})=>({ETag:h,PartNumber:p}))},{signal:o}).then(bc)}async createSignedURL(n,r){const s=await ae(this,kn,e4).call(this,r),a=tN(s.credentials)||604800,{uploadId:o,key:l,partNumber:c}=r;return{method:"PUT",expires:a,fields:{},url:`${await HY({accountKey:s.credentials.AccessKeyId,accountSecret:s.credentials.SecretAccessKey,sessionToken:s.credentials.SessionToken,expires:a,bucketName:s.bucket,Region:s.region,Key:l??`${crypto.randomUUID()}-${n.name}`,uploadId:o,partNumber:c})}`,headers:{"Content-Type":n.type}}}signPart(n,{uploadId:r,key:s,partNumber:a,signal:o}){if(ae(this,kn,Ma).call(this,"signPart"),er(o),r==null||s==null||a==null)throw new Error("Cannot sign without a key, an uploadId, and a partNumber");const l=encodeURIComponent(s);return k(this,fr).get(`s3/multipart/${encodeURIComponent(r)}/${a}?key=${l}`,{signal:o}).then(bc)}abortMultipartUpload(n,{key:r,uploadId:s,signal:a}){ae(this,kn,Ma).call(this,"abortMultipartUpload");const o=encodeURIComponent(r),l=encodeURIComponent(s);return k(this,fr).delete(`s3/multipart/${l}?key=${o}`,void 0,{signal:a}).then(bc)}getUploadParameters(n,r){ae(this,kn,Ma).call(this,"getUploadParameters");const{meta:s}=n,{type:a,name:o}=s,l=Zj(this.opts.allowedMetaFields,n.meta),c=nN({meta:s,allowedMetaFields:l,querify:!0}),u=new URLSearchParams({filename:o,type:a,...c});return k(this,fr).get(`s3/params?${u}`,r)}static async uploadPartBytes({signature:{url:n,expires:r,headers:s,method:a="PUT"},body:o,size:l=o.size,onProgress:c,onComplete:u,signal:h}){if(er(h),n==null)throw new Error("Cannot upload to an undefined URL");return new Promise((p,m)=>{const x=new XMLHttpRequest;x.open(a,n,!0),s&&Object.keys(s).forEach(b=>{x.setRequestHeader(b,s[b])}),x.responseType="text",typeof r=="number"&&(x.timeout=r*1e3);function N(){x.abort()}function w(){h==null||h.removeEventListener("abort",N)}h==null||h.addEventListener("abort",N),x.upload.addEventListener("progress",b=>{c(b)}),x.addEventListener("abort",()=>{w(),m(WD())}),x.addEventListener("timeout",()=>{w();const b=new Error("Request has expired");b.source={status:403},m(b)}),x.addEventListener("load",()=>{if(w(),x.status===403&&x.responseText.includes("<Message>Request has expired</Message>")){const I=new Error("Request has expired");I.source=x,m(I);return}if(x.status<200||x.status>=300){const I=new Error("Non 2xx");I.source=x,m(I);return}c==null||c({loaded:l,lengthComputable:!0});const b=x.getAllResponseHeaders().trim().split(/[\r\n]+/),S={__proto__:null};for(const I of b){const L=I.split(": "),R=L.shift(),C=L.join(": ");S[R]=C}const{etag:v,location:T}=S;if(a.toUpperCase()==="POST"&&T==null&&console.error("@uppy/aws-s3: Could not read the Location header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket"),v==null){console.error("@uppy/aws-s3: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket");return}u==null||u(v),p({...S,ETag:v})}),x.addEventListener("error",b=>{w();const S=new Error("Unknown error");S.source=b.target,m(S)}),x.send(o)})}install(){k(this,Cl).call(this,!0),this.uppy.addPreProcessor(k(this,Od)),this.uppy.addUploader(k(this,Rp)),this.uppy.on("cancel-all",k(this,Dp))}uninstall(){this.uppy.removePreProcessor(k(this,Od)),this.uppy.removeUploader(k(this,Rp)),this.uppy.off("cancel-all",k(this,Dp))}};Rd=new WeakMap,fr=new WeakMap,kn=new WeakSet,V0=function(n){n==null||!("endpoint"in n||"companionUrl"in n||"headers"in n||"companionHeaders"in n||"cookiesRule"in n||"companionCookiesRule"in n)||("companionUrl"in n&&!("endpoint"in n)&&this.uppy.log("`companionUrl` option has been removed in @uppy/aws-s3, use `endpoint` instead.","warning"),"companionHeaders"in n&&!("headers"in n)&&this.uppy.log("`companionHeaders` option has been removed in @uppy/aws-s3, use `headers` instead.","warning"),"companionCookiesRule"in n&&!("cookiesRule"in n)&&this.uppy.log("`companionCookiesRule` option has been removed in @uppy/aws-s3, use `cookiesRule` instead.","warning"),"endpoint"in n?re(this,fr,new qD(this.uppy,{pluginId:this.id,provider:"AWS",companionUrl:this.opts.endpoint,companionHeaders:this.opts.headers,companionCookiesRule:this.opts.cookiesRule})):("headers"in n&&k(this,Od).call(this),"cookiesRule"in n&&(k(this,fr).opts.companionCookiesRule=n.cookiesRule)))},Ma=function(n){if(!k(this,fr))throw new Error(`Expected a \`endpoint\` option containing a URL, or if you are not using Companion, a custom \`${n}\` implementation.`)},js=new WeakMap,e4=async function(n){if(er(n==null?void 0:n.signal),k(this,js)==null){const{getTemporarySecurityCredentials:r}=this.opts;r===!0?(ae(this,kn,Ma).call(this,"getTemporarySecurityCredentials"),re(this,js,k(this,fr).get("s3/sts",n).then(bc))):re(this,js,r(n)),re(this,js,await k(this,js)),setTimeout(()=>{re(this,js,null)},(tN(k(this,js).credentials)||0)*500)}return k(this,js)},rv=new WeakMap,Dd=new WeakMap,t4=function(n){return new Promise((r,s)=>{const a=(h,p)=>{const m=this.uppy.getFile(n.id);this.uppy.emit("upload-progress",m,{uploadStarted:m.progress.uploadStarted??0,bytesUploaded:h,bytesTotal:p})},o=h=>{this.uppy.log(h),this.uppy.emit("upload-error",n,h),this.resetUploaderReferences(n.id),s(h)},l=h=>{const p={body:{...h},status:200,uploadURL:h.location};this.resetUploaderReferences(n.id),this.uppy.emit("upload-success",k(this,Dd).call(this,n),p),h.location&&this.uppy.log(`Download ${n.name} from ${h.location}`),r(void 0)},c=new GY(n.data,{companionComm:k(this,Rd),log:(...h)=>this.uppy.log(...h),getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):void 0,onProgress:a,onError:o,onSuccess:l,onPartComplete:h=>{this.uppy.emit("s3-multipart:part-uploaded",k(this,Dd).call(this,n),h)},file:n,shouldUseMultipart:this.opts.shouldUseMultipart,...n.s3Multipart});this.uploaders[n.id]=c;const u=new bY(this.uppy);this.uploaderEvents[n.id]=u,u.onFileRemove(n.id,h=>{c.abort(),this.resetUploaderReferences(n.id,{abort:!0}),r(`upload ${h} was removed`)}),u.onCancelAll(n.id,()=>{c.abort(),this.resetUploaderReferences(n.id,{abort:!0}),r(`upload ${n.id} was canceled`)}),u.onFilePause(n.id,h=>{h?c.pause():c.start()}),u.onPauseAll(n.id,()=>{c.pause()}),u.onResumeAll(n.id,()=>{c.start()}),c.start()})},n4=function(n){var r;return{...(r=n.remote)==null?void 0:r.body,protocol:"s3-multipart",size:n.data.size,metadata:n.meta}},Rp=new WeakMap,Od=new WeakMap,Cl=new WeakMap,Dp=new WeakMap,Z(sv,"VERSION",UY.version);let B0=sv;function ZY({maxNumberOfFiles:t=1,maxFileSize:e=10485760,onGetUploadParameters:n,onComplete:r,buttonClassName:s,children:a}){const[o,l]=y.useState(!1),[c]=y.useState(()=>new x0({restrictions:{maxNumberOfFiles:t,maxFileSize:e},autoProceed:!1}).use(B0,{shouldUseMultipart:!1,getUploadParameters:n}).on("complete",u=>{r==null||r(u)}));return i.jsxs("div",{children:[i.jsx(ee,{onClick:()=>l(!0),className:s,children:a}),i.jsx(BD,{uppy:c,open:o,onRequestClose:()=>l(!1),proudlyDisplayPoweredByUppy:!1})]})}function XY(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var JY=J0[" useInsertionEffect ".trim().toString()]||Gn;function eZ({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,a,o]=tZ({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=y.useRef(t!==void 0);y.useEffect(()=>{const p=h.current;p!==l&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const u=y.useCallback(h=>{var p;if(l){const m=nZ(h)?h(t):h;m!==t&&((p=o.current)==null||p.call(o,m))}else a(h)},[l,t,a,o]);return[c,u]}function tZ({defaultProp:t,onChange:e}){const[n,r]=y.useState(t),s=y.useRef(n),a=y.useRef(e);return JY(()=>{a.current=e},[e]),y.useEffect(()=>{var o;s.current!==n&&((o=a.current)==null||o.call(a,n),s.current=n)},[n,s]),[n,r,a]}function nZ(t){return typeof t=="function"}function rZ(t){const e=sZ(t),n=y.forwardRef((r,s)=>{const{children:a,...o}=r,l=y.Children.toArray(a),c=l.find(aZ);if(c){const u=c.props.children,h=l.map(p=>p===c?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:p);return i.jsx(e,{...o,ref:s,children:y.isValidElement(u)?y.cloneElement(u,void 0,h):null})}return i.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}function sZ(t){const e=y.forwardRef((n,r)=>{const{children:s,...a}=n;if(y.isValidElement(s)){const o=lZ(s),l=oZ(a,s.props);return s.type!==y.Fragment&&(l.ref=r?Yw(r,o):o),y.cloneElement(s,l)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var iZ=Symbol("radix.slottable");function aZ(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===iZ}function oZ(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function lZ(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var cZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],r4=cZ.reduce((t,e)=>{const n=rZ(`Primitive.${e}`),r=y.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),qv="Switch",[dZ,bJ]=Na(qv),[uZ,hZ]=dZ(qv),s4=y.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...p}=t,[m,x]=y.useState(null),N=Ft(e,T=>x(T)),w=y.useRef(!1),b=m?h||!!m.closest("form"):!0,[S,v]=eZ({prop:s,defaultProp:a??!1,onChange:u,caller:qv});return i.jsxs(uZ,{scope:n,checked:S,disabled:l,children:[i.jsx(r4.button,{type:"button",role:"switch","aria-checked":S,"aria-required":o,"data-state":l4(S),"data-disabled":l?"":void 0,disabled:l,value:c,...p,ref:N,onClick:XY(t.onClick,T=>{v(I=>!I),b&&(w.current=T.isPropagationStopped(),w.current||T.stopPropagation())})}),b&&i.jsx(o4,{control:m,bubbles:!w.current,name:r,value:c,checked:S,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});s4.displayName=qv;var i4="SwitchThumb",a4=y.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=hZ(i4,n);return i.jsx(r4.span,{"data-state":l4(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});a4.displayName=i4;var pZ="SwitchBubbleInput",o4=y.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},a)=>{const o=y.useRef(null),l=Ft(o,a),c=xI(n),u=uA(e);return y.useEffect(()=>{const h=o.current;if(!h)return;const p=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==n&&x){const N=new Event("click",{bubbles:r});x.call(h,n),h.dispatchEvent(N)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});o4.displayName=pZ;function l4(t){return t?"checked":"unchecked"}var c4=s4,fZ=a4;const td=y.forwardRef(({className:t,...e},n)=>i.jsx(c4,{className:mt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:i.jsx(fZ,{className:mt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));td.displayName=c4.displayName;const xx=[{value:0,label:"Domingo"},{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"Miércoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"},{value:6,label:"Sábado"}];function mZ(){const[t,e]=y.useState("calendar-overview"),[n,r]=y.useState({dayOfWeek:"",startTime:"",endTime:"",isActive:!0}),[s,a]=y.useState({blockDate:"",startTime:"",endTime:"",reason:""}),[o,l]=y.useState({fromDate:"",toDate:"",selectedDays:[],startTime:"",endTime:"",lunchStart:"",lunchEnd:"",enableLunch:!1,action:"enable"}),[c,u]=y.useState(null),[h,p]=y.useState(null);y.useState({enabled:!1,startTime:"13:00",endTime:"14:00",selectedDays:[]});const{toast:m}=ti(),x=Zl(),{data:N=[],isLoading:w}=Qt({queryKey:["/api/schedule/veterinary"]}),{data:b=[]}=Qt({queryKey:["/api/schedule/blocks"]}),S=jt({mutationFn:async E=>{const $=await fetch(`/api/appointments/${E}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!$.ok){const G=await $.text();throw new Error(`Error eliminando cita: ${G}`)}return $.json()},onSuccess:()=>{m({title:"Cita Eliminada",description:"La cita cancelada ha sido eliminada permanentemente del sistema.",variant:"default"}),x.invalidateQueries({queryKey:["/api/appointments"]})},onError:E=>{m({title:"Error al Eliminar",description:E.message||"No se pudo eliminar la cita. Inténtalo nuevamente.",variant:"destructive"})}}),v=jt({mutationFn:async E=>{const $=await fetch("/api/schedule/veterinary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!$.ok)throw new Error("Failed to create schedule");return $.json()},onSuccess:()=>{m({title:"Éxito",description:"Horario creado exitosamente"}),x.invalidateQueries({queryKey:["/api/schedule/veterinary"]}),r({dayOfWeek:"",startTime:"",endTime:"",isActive:!0})},onError:()=>{m({title:"Error",description:"No se pudo crear el horario",variant:"destructive"})}}),T=jt({mutationFn:async({id:E,...$})=>{const G=await fetch(`/api/schedule/veterinary/${E}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(!G.ok)throw new Error("Failed to update schedule");return G.json()},onSuccess:()=>{m({title:"Éxito",description:"Horario actualizado exitosamente"}),x.invalidateQueries({queryKey:["/api/schedule/veterinary"]}),u(null)},onError:()=>{m({title:"Error",description:"No se pudo actualizar el horario",variant:"destructive"})}}),I=jt({mutationFn:async E=>{const $=await fetch("/api/schedule/blocks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!$.ok)throw new Error("Failed to create block");return $.json()},onSuccess:()=>{m({title:"Éxito",description:"Bloqueo creado exitosamente"}),x.invalidateQueries({queryKey:["/api/schedule/blocks"]}),a({blockDate:"",startTime:"",endTime:"",reason:""})},onError:()=>{m({title:"Error",description:"No se pudo crear el bloqueo",variant:"destructive"})}}),L=jt({mutationFn:async({id:E,...$})=>{const G=await fetch(`/api/schedule/blocks/${E}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(!G.ok)throw new Error("Failed to update block");return G.json()},onSuccess:()=>{m({title:"Éxito",description:"Bloqueo actualizado exitosamente"}),x.invalidateQueries({queryKey:["/api/schedule/blocks"]}),p(null)},onError:()=>{m({title:"Error",description:"No se pudo actualizar el bloqueo",variant:"destructive"})}}),R=jt({mutationFn:async E=>{const $=await fetch("/api/schedule/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!$.ok)throw new Error("Failed to create bulk schedule");return $.json()},onSuccess:()=>{m({title:"Éxito",description:"Horarios masivos creados exitosamente"}),x.invalidateQueries({queryKey:["/api/schedule/veterinary"]}),x.invalidateQueries({queryKey:["/api/schedule/blocks"]}),l({fromDate:"",toDate:"",selectedDays:[],startTime:"",endTime:"",lunchStart:"",lunchEnd:"",enableLunch:!1,action:"enable"})},onError:()=>{m({title:"Error",description:"No se pudo crear los horarios masivos",variant:"destructive"})}}),C=()=>{if(!n.dayOfWeek||!n.startTime||!n.endTime){m({title:"Campos Requeridos",description:"Complete todos los campos.",variant:"destructive"});return}v.mutate({dayOfWeek:parseInt(n.dayOfWeek),startTime:n.startTime,endTime:n.endTime,isActive:n.isActive})},_=()=>{c&&T.mutate({id:c.id,dayOfWeek:c.dayOfWeek,startTime:c.startTime,endTime:c.endTime,isActive:c.isActive})},P=()=>{if(!s.blockDate||!s.reason){m({title:"Campos Requeridos",description:"Complete al menos la fecha y razón.",variant:"destructive"});return}I.mutate({blockDate:s.blockDate,startTime:s.startTime||null,endTime:s.endTime||null,reason:s.reason,isActive:!0})},A=()=>{h&&L.mutate({id:h.id,blockDate:h.blockDate,startTime:h.startTime,endTime:h.endTime,reason:h.reason,isActive:h.isActive})},F=()=>{if(!o.fromDate||!o.toDate||o.selectedDays.length===0){m({title:"Campos Requeridos",description:"Complete fechas y seleccione días.",variant:"destructive"});return}if(o.action==="enable"&&(!o.startTime||!o.endTime)){m({title:"Campos Requeridos",description:"Complete horario de inicio y fin para habilitar.",variant:"destructive"});return}R.mutate(o)},D=E=>{l($=>({...$,selectedDays:$.selectedDays.includes(E)?$.selectedDays.filter(G=>G!==E):[...$.selectedDays,E]}))};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[i.jsxs("button",{className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="calendar-overview"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>e("calendar-overview"),children:[i.jsx(nr,{className:"h-4 w-4 inline mr-2"}),"Vista General"]}),i.jsxs("button",{className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="schedule"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>e("schedule"),children:[i.jsx(Wd,{className:"h-4 w-4 inline mr-2"}),"Horarios Semanales"]}),i.jsxs("button",{className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="blocks"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>e("blocks"),children:[i.jsx(nr,{className:"h-4 w-4 inline mr-2"}),"Bloqueos Específicos"]}),i.jsxs("button",{className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="bulk"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>e("bulk"),children:[i.jsx(dg,{className:"h-4 w-4 inline mr-2"}),"Gestión Masiva"]})]}),t==="schedule"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(Wd,{className:"h-5 w-5"}),c?"Editar Horario":"Nuevo Horario Semanal"]})}),i.jsxs(De,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Día de la Semana"}),i.jsxs(Ue,{value:(c==null?void 0:c.dayOfWeek.toString())||n.dayOfWeek,onValueChange:E=>{c?u($=>$?{...$,dayOfWeek:parseInt(E)}:null):r($=>({...$,dayOfWeek:E}))},children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Seleccionar día"})}),i.jsx(Me,{children:xx.map(E=>i.jsx(W,{value:E.value.toString(),children:E.label},E.value))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Estado"}),i.jsxs("div",{className:"flex items-center space-x-2 h-10",children:[i.jsx(td,{checked:(c==null?void 0:c.isActive)??n.isActive,onCheckedChange:E=>{c?u($=>$?{...$,isActive:E}:null):r($=>({...$,isActive:E}))}}),i.jsx("span",{className:"text-sm",children:(c==null?void 0:c.isActive)??n.isActive?"Activo":"Inactivo"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Hora Inicio"}),i.jsx(J,{type:"time",value:(c==null?void 0:c.startTime)||n.startTime,onChange:E=>{c?u($=>$?{...$,startTime:E.target.value}:null):r($=>({...$,startTime:E.target.value}))}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Hora Fin"}),i.jsx(J,{type:"time",value:(c==null?void 0:c.endTime)||n.endTime,onChange:E=>{c?u($=>$?{...$,endTime:E.target.value}:null):r($=>({...$,endTime:E.target.value}))}})]})]}),i.jsx("div",{className:"flex gap-2",children:c?i.jsxs(i.Fragment,{children:[i.jsx(ee,{onClick:_,disabled:T.isPending,className:"flex-1",children:T.isPending?"Guardando...":"Guardar Cambios"}),i.jsx(ee,{variant:"outline",onClick:()=>u(null),children:"Cancelar"})]}):i.jsxs(ee,{onClick:C,disabled:v.isPending,className:"w-full",children:[i.jsx(Ts,{className:"h-4 w-4 mr-2"}),v.isPending?"Creando...":"Crear Horario"]})})]})]}),i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsx(Be,{children:"Horarios Configurados"})}),i.jsx(De,{children:w?i.jsx("p",{children:"Cargando..."}):N.length===0?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay horarios configurados"}):i.jsx("div",{className:"space-y-2",children:N.map(E=>{var $;return i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:($=xx.find(G=>G.value===E.dayOfWeek))==null?void 0:$.label}),i.jsxs("p",{className:"text-sm text-gray-600",children:[E.startTime," - ",E.endTime]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${E.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:E.isActive?"Activo":"Inactivo"})]}),i.jsx("div",{className:"flex gap-2",children:i.jsx(ee,{size:"sm",variant:"outline",onClick:()=>u(E),children:i.jsx(lg,{className:"h-4 w-4"})})})]},E.id)})})})]})]}),t==="blocks"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(nr,{className:"h-5 w-5"}),h?"Editar Bloqueo":"Nuevo Bloqueo"]})}),i.jsxs(De,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Fecha"}),i.jsx(J,{type:"date",value:(h==null?void 0:h.blockDate)||s.blockDate,onChange:E=>{h?p($=>$?{...$,blockDate:E.target.value}:null):a($=>({...$,blockDate:E.target.value}))}})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Hora Inicio (Opcional)"}),i.jsx(J,{type:"time",value:(h==null?void 0:h.startTime)||s.startTime,onChange:E=>{h?p($=>$?{...$,startTime:E.target.value}:null):a($=>({...$,startTime:E.target.value}))}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Hora Fin (Opcional)"}),i.jsx(J,{type:"time",value:(h==null?void 0:h.endTime)||s.endTime,onChange:E=>{h?p($=>$?{...$,endTime:E.target.value}:null):a($=>({...$,endTime:E.target.value}))}})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Razón del Bloqueo"}),i.jsxs(Ue,{value:(h==null?void 0:h.reason)||s.reason,onValueChange:E=>{h?p($=>$?{...$,reason:E}:null):a($=>({...$,reason:E}))},children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Seleccionar razón"})}),i.jsxs(Me,{children:[i.jsxs(W,{value:"Almuerzo",children:[i.jsx(S3,{className:"h-4 w-4 inline mr-2"}),"Almuerzo"]}),i.jsx(W,{value:"Vacaciones",children:"Vacaciones"}),i.jsx(W,{value:"Enfermedad",children:"Enfermedad"}),i.jsx(W,{value:"Capacitación",children:"Capacitación"}),i.jsx(W,{value:"Personal",children:"Motivos Personales"}),i.jsx(W,{value:"Emergencia",children:"Emergencia"}),i.jsx(W,{value:"Otro",children:"Otro"})]})]})]}),h&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Estado"}),i.jsxs("div",{className:"flex items-center space-x-2 h-10",children:[i.jsx(td,{checked:h.isActive,onCheckedChange:E=>{p($=>$?{...$,isActive:E}:null)}}),i.jsx("span",{className:"text-sm",children:h.isActive?"Activo":"Inactivo"})]})]})]}),i.jsx("div",{className:"flex gap-2",children:h?i.jsxs(i.Fragment,{children:[i.jsx(ee,{onClick:A,disabled:L.isPending,className:"flex-1",children:L.isPending?"Guardando...":"Guardar Cambios"}),i.jsx(ee,{variant:"outline",onClick:()=>p(null),children:"Cancelar"})]}):i.jsxs(ee,{onClick:P,disabled:I.isPending,className:"w-full",children:[i.jsx(Ts,{className:"h-4 w-4 mr-2"}),I.isPending?"Creando...":"Crear Bloqueo"]})})]})]}),i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsx(Be,{children:"Bloqueos Configurados"})}),i.jsx(De,{children:b.length===0?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay bloqueos configurados"}):i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:b.map(E=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:new Date(E.blockDate).toLocaleDateString("es-CL")}),E.startTime&&E.endTime&&i.jsxs("p",{className:"text-sm text-gray-600",children:[E.startTime," - ",E.endTime]}),i.jsx("p",{className:"text-sm text-gray-600",children:E.reason}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${E.isActive?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:E.isActive?"Bloqueado":"Inactivo"})]}),i.jsx("div",{className:"flex gap-2",children:i.jsx(ee,{size:"sm",variant:"outline",onClick:()=>p(E),children:i.jsx(lg,{className:"h-4 w-4"})})})]},E.id))})})]})]}),t==="bulk"&&i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(dg,{className:"h-5 w-5"}),"Gestión Masiva de Horarios"]})}),i.jsxs(De,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Fecha Desde"}),i.jsx(J,{type:"date",value:o.fromDate,onChange:E=>l($=>({...$,fromDate:E.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Fecha Hasta"}),i.jsx(J,{type:"date",value:o.toDate,onChange:E=>l($=>({...$,toDate:E.target.value}))})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(Y,{children:"Seleccionar Días de la Semana"}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:xx.map(E=>i.jsx("button",{className:`p-3 rounded-lg border text-sm font-medium transition-colors ${o.selectedDays.includes(E.value)?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,onClick:()=>D(E.value),children:E.label},E.value))})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(Y,{children:"Acción a Realizar"}),i.jsxs(Ue,{value:o.action,onValueChange:E=>l($=>({...$,action:E})),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"enable",children:"Habilitar Horarios"}),i.jsx(W,{value:"disable",children:"Bloquear Días"})]})]})]}),o.action==="enable"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Hora Inicio"}),i.jsx(J,{type:"time",value:o.startTime,onChange:E=>l($=>({...$,startTime:E.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Hora Fin"}),i.jsx(J,{type:"time",value:o.endTime,onChange:E=>l($=>({...$,endTime:E.target.value}))})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Y,{children:"Incluir Bloque de Almuerzo"}),i.jsx(td,{checked:o.enableLunch,onCheckedChange:E=>l($=>({...$,enableLunch:E}))})]}),o.enableLunch&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Inicio Almuerzo"}),i.jsx(J,{type:"time",value:o.lunchStart,onChange:E=>l($=>({...$,lunchStart:E.target.value})),placeholder:"13:00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Fin Almuerzo"}),i.jsx(J,{type:"time",value:o.lunchEnd,onChange:E=>l($=>({...$,lunchEnd:E.target.value})),placeholder:"14:00"})]})]})]})]}),i.jsxs(ee,{onClick:F,disabled:R.isPending,className:"w-full",size:"lg",children:[i.jsx(nr,{className:"h-4 w-4 mr-2"}),R.isPending?"Procesando...":o.action==="enable"?"Habilitar Horarios Masivos":"Bloquear Días Masivos"]})]})]}),t==="calendar-overview"&&i.jsx(gZ,{schedule:N,blocks:b,deleteAppointmentMutation:S})]})}function gZ({schedule:t,blocks:e,deleteAppointmentMutation:n}){const[r,s]=y.useState(new Date);y.useState(null),y.useState([]);const{data:a=[]}=Qt({queryKey:["/api/appointments",r.getFullYear(),r.getMonth()+1]}),o=new Date(r.getFullYear(),r.getMonth(),1),l=new Date(r.getFullYear(),r.getMonth()+1,0),c=o.getDay(),u=l.getDate(),h=[];for(let v=0;v<c;v++)h.push(null);for(let v=1;v<=u;v++)h.push(v);const p=v=>t.filter(T=>T.dayOfWeek===v&&T.isActive),m=v=>e.filter(T=>T.blockDate===v&&T.isActive),x=v=>a.filter(T=>T.appointmentDate===v),N=v=>new Date(r.getFullYear(),r.getMonth(),v).toISOString().split("T")[0],w=()=>{s(new Date(r.getFullYear(),r.getMonth()-1,1))},b=()=>{s(new Date(r.getFullYear(),r.getMonth()+1,1))},S=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsxs(Be,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(nr,{className:"h-5 w-5"}),"Vista General del Calendario"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ee,{variant:"outline",size:"sm",onClick:w,"data-testid":"button-prev-month",children:i.jsx(w3,{className:"h-4 w-4"})}),i.jsxs("span",{className:"font-semibold min-w-[120px] text-center",children:[S[r.getMonth()]," ",r.getFullYear()]}),i.jsx(ee,{variant:"outline",size:"sm",onClick:b,"data-testid":"button-next-month",children:i.jsx(_3,{className:"h-4 w-4"})})]})]})}),i.jsxs(De,{children:[i.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(v=>i.jsx("div",{className:"p-2 text-center font-semibold text-gray-600 text-sm",children:v},v)),h.map((v,T)=>{if(!v)return i.jsx("div",{className:"p-2 h-24"},T);const I=N(v),L=new Date(r.getFullYear(),r.getMonth(),v).getDay(),R=p(L),C=m(I),_=x(I),P=new Date().toDateString()===new Date(r.getFullYear(),r.getMonth(),v).toDateString();return i.jsxs(L1,{children:[i.jsx(Zz,{asChild:!0,children:i.jsxs("div",{className:`p-1 h-24 border rounded-lg overflow-hidden cursor-pointer transition-colors hover:bg-gray-50 ${P?"bg-blue-50 border-blue-200":"bg-white border-gray-200"} ${_.length>0?"hover:bg-blue-50":""}`,"data-testid":`calendar-day-${v}`,children:[i.jsx("div",{className:`text-sm font-medium mb-1 ${P?"text-blue-700":"text-gray-700"}`,children:v}),i.jsxs("div",{className:"space-y-1 text-xs",children:[R.length>0&&i.jsxs("div",{className:"bg-green-100 text-green-800 px-1 rounded text-[10px] leading-tight",children:[R[0].startTime,"-",R[0].endTime]}),C.map((A,F)=>i.jsx("div",{className:"bg-red-100 text-red-800 px-1 rounded text-[10px] leading-tight",children:A.startTime&&A.endTime?`${A.startTime}-${A.endTime}`:"Bloqueado"},F)),_.length>0&&i.jsxs("div",{className:"bg-blue-100 text-blue-800 px-1 rounded text-[10px] leading-tight font-medium",children:[_.length," cita",_.length>1?"s":""]})]})]})}),(_.length>0||R.length>0||C.length>0)&&i.jsxs(Lv,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[i.jsx($v,{children:i.jsxs(Uv,{className:"flex items-center gap-2",children:[i.jsx(nr,{className:"h-5 w-5"}),"Agenda del ",v," de ",S[r.getMonth()]," ",r.getFullYear()]})}),i.jsxs("div",{className:"space-y-6",children:[R.length>0&&i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-green-700 mb-2 flex items-center gap-2",children:[i.jsx(Wd,{className:"h-4 w-4"}),"Horarios Disponibles"]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:R.map((A,F)=>i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[i.jsxs("div",{className:"font-medium text-green-800",children:[A.startTime," - ",A.endTime]}),i.jsx("div",{className:"text-sm text-green-600",children:A.isActive?"Activo":"Inactivo"})]},F))})]}),C.length>0&&i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-red-700 mb-2 flex items-center gap-2",children:[i.jsx(dg,{className:"h-4 w-4"}),"Bloqueos"]}),i.jsx("div",{className:"space-y-2",children:C.map((A,F)=>i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[i.jsx("div",{className:"font-medium text-red-800",children:A.startTime&&A.endTime?`${A.startTime} - ${A.endTime}`:"Todo el día"}),A.reason&&i.jsx("div",{className:"text-sm text-red-600 mt-1",children:A.reason})]},F))})]}),_.length>0&&i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[i.jsx(is,{className:"h-4 w-4"}),"Citas Programadas (",_.length,")"]}),i.jsx("div",{className:"space-y-3",children:_.map(A=>i.jsx(Ae,{className:"border-blue-200",children:i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wd,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"font-semibold text-lg",children:A.appointmentTime})]}),i.jsx($r,{variant:A.status==="scheduled"?"default":A.status==="completed"?"secondary":A.status==="cancelled"?"destructive":"outline",children:A.status==="scheduled"?"Programada":A.status==="completed"?"Completada":A.status==="cancelled"?"Cancelada":A.status})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(is,{className:"h-4 w-4 text-gray-500"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:A.petName}),i.jsx("div",{className:"text-sm text-gray-600",children:A.serviceType})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(is,{className:"h-4 w-4 text-gray-500"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:A.tutorName}),i.jsx("div",{className:"text-xs text-gray-500",children:"Tutor"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[A.tutorPhone&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Mb,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm",children:A.tutorPhone})]}),A.address&&i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Fb,{className:"h-4 w-4 text-gray-500 mt-0.5"}),i.jsx("span",{className:"text-sm",children:A.address})]})]})]}),A.notes&&i.jsxs("div",{className:"flex items-start gap-2 pt-2 border-t",children:[i.jsx(xn,{className:"h-4 w-4 text-gray-500 mt-0.5"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Notas:"}),i.jsx("div",{className:"text-sm text-gray-600",children:A.notes})]})]}),A.vetNotes&&i.jsxs("div",{className:"flex items-start gap-2 pt-2 border-t",children:[i.jsx(xn,{className:"h-4 w-4 text-gray-500 mt-0.5"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Notas Veterinarias:"}),i.jsx("div",{className:"text-sm text-gray-600",children:A.vetNotes})]})]}),i.jsxs("div",{className:"flex gap-2 pt-3 border-t",children:[i.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>{window.dispatchEvent(new CustomEvent("navigate-to-pet-record",{detail:{petId:A.petId,tutorRut:A.tutorRut,appointmentId:A.id}}))},className:"flex items-center gap-2","data-testid":`button-open-pet-record-${A.petId}`,children:[i.jsx(is,{className:"h-4 w-4"}),"Ver Ficha de ",A.petName]}),A.status==="scheduled"&&i.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>{window.dispatchEvent(new CustomEvent("edit-appointment",{detail:{appointmentId:A.id,appointmentData:{petId:A.petId,petName:A.petName,species:A.species,tutorName:A.tutorName,tutorRut:A.tutorRut,tutorPhone:A.tutorPhone,tutorEmail:A.tutorEmail,serviceType:A.serviceType,appointmentDate:A.appointmentDate,appointmentTime:A.appointmentTime,notes:A.notes,address:A.address}}}))},className:"flex items-center gap-2","data-testid":`button-edit-appointment-${A.id}`,children:[i.jsx(lg,{className:"h-4 w-4"}),"Editar Cita"]}),A.status==="cancelled"&&i.jsxs(ee,{variant:"destructive",size:"sm",onClick:()=>{if(console.log("ScheduleManager: Delete button clicked, mutation exists:",!!n),window.confirm(`¿Estás seguro de que deseas eliminar permanentemente esta cita cancelada?

Cita: ${A.petName} - ${zB(A.appointmentDate)}

Esta acción no se puede deshacer.`))try{n.mutate(A.id)}catch(F){console.error("Error calling deleteAppointmentMutation:",F),toast({title:"Error",description:"Error interno al eliminar la cita",variant:"destructive"})}},disabled:n==null?void 0:n.isPending,className:"flex items-center gap-2","data-testid":`button-delete-appointment-${A.id}`,children:[i.jsx(ui,{className:"h-4 w-4"}),n!=null&&n.isPending?"Eliminando...":"Eliminar Cita"]})]})]})})},A.id))})]}),_.length===0&&R.length===0&&C.length===0&&i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(nr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),i.jsx("h3",{className:"font-medium mb-2",children:"Sin eventos programados"}),i.jsx("p",{className:"text-sm",children:"No hay horarios, bloqueos o citas para este día."})]})]})]})]},v)})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 bg-green-100 rounded"}),i.jsx("span",{children:"Horarios disponibles"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 bg-red-100 rounded"}),i.jsx("span",{children:"Bloqueos"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded"}),i.jsx("span",{children:"Citas agendadas"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-50 border border-blue-200 rounded"}),i.jsx("span",{children:"Día actual"})]})]})]})]})}function vZ(){const[t,e]=y.useState("whatsapp"),[n,r]=y.useState({smtpHost:"",smtpPort:587,smtpUser:"",smtpPassword:"",fromEmail:"",fromName:"Ale Veterinaria",smtpSecure:!0}),[s,a]=y.useState({whatsappToken:"",whatsappPhoneId:"",whatsappBusinessAccountId:""}),{toast:o}=ti(),l=Zl(),{data:c}=Qt({queryKey:["notificationSettings","email"],queryFn:async()=>{const R=await fetch("/api/settings/notifications/email");return R.ok?R.json():null}}),{data:u}=Qt({queryKey:["notificationSettings","whatsapp"],queryFn:async()=>{const R=await fetch("/api/settings/notifications/whatsapp");return R.ok?R.json():null}});y.useEffect(()=>{c&&r({smtpHost:c.smtpHost||"",smtpPort:c.smtpPort||587,smtpUser:c.smtpUser||"",smtpPassword:c.smtpPassword||"",fromEmail:c.fromEmail||"",fromName:c.fromName||"Ale Veterinaria",smtpSecure:c.smtpSecure!==!1})},[c]),y.useEffect(()=>{u&&a({whatsappToken:u.whatsappToken||"",whatsappPhoneId:u.whatsappPhoneId||"",whatsappBusinessAccountId:u.whatsappBusinessAccountId||""})},[u]);const h=jt({mutationFn:async R=>{const C=await fetch("/api/settings/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...R,type:"email"})});if(!C.ok)throw new Error("Failed to save email settings");return C.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["notificationSettings","email"]}),o({title:"Configuración de Email Guardada",description:"La configuración SMTP se ha guardado exitosamente."})},onError:()=>{o({title:"Error",description:"No se pudo guardar la configuración de email.",variant:"destructive"})}});jt({mutationFn:async R=>{const C=await fetch("/api/settings/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...R,type:"whatsapp"})});if(!C.ok)throw new Error("Failed to save WhatsApp settings");return C.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["notificationSettings","whatsapp"]}),o({title:"Configuración de WhatsApp Guardada",description:"La configuración de WhatsApp se ha guardado exitosamente."})},onError:()=>{o({title:"Error",description:"No se pudo guardar la configuración de WhatsApp.",variant:"destructive"})}});const[p,m]=y.useState([{id:"1",name:"Confirmación de Cita",type:"whatsapp",trigger:"appointment_created",template:"Hola {{tutorName}}, tu cita para {{petName}} ha sido agendada para el {{appointmentDate}} a las {{appointmentTime}}. Dirección: {{address}}",isActive:!0},{id:"2",name:"Recordatorio de Cita",type:"whatsapp",trigger:"appointment_reminder",template:"Recordatorio: Tu cita con {{petName}} es mañana {{appointmentDate}} a las {{appointmentTime}}. ¡Te esperamos!",isActive:!0},{id:"3",name:"Confirmación por Email",type:"email",trigger:"appointment_created",template:"Tu cita veterinaria ha sido confirmada para {{petName}} el {{appointmentDate}} a las {{appointmentTime}}.",isActive:!1}]),[x,N]=y.useState(null),[w,b]=y.useState({name:"",type:"whatsapp",trigger:"appointment_created",template:"",isActive:!0}),S=()=>{if(x)m(R=>R.map(C=>C.id===x.id?x:C)),N(null),o({title:"Plantilla actualizada",description:"La plantilla se guardó correctamente."});else{if(!w.name||!w.template){o({title:"Error",description:"Complete todos los campos requeridos.",variant:"destructive"});return}const R={id:Date.now().toString(),...w};m(C=>[...C,R]),b({name:"",type:"whatsapp",trigger:"appointment_created",template:"",isActive:!0}),o({title:"Plantilla creada",description:"La plantilla se creó correctamente."})}},v=R=>{m(C=>C.map(_=>_.id===R?{..._,isActive:!_.isActive}:_))},T=R=>{m(C=>C.filter(_=>_.id!==R)),o({title:"Plantilla eliminada",description:"La plantilla se eliminó correctamente."})},I=["{{tutorName}}","{{petName}}","{{appointmentDate}}","{{appointmentTime}}","{{serviceType}}","{{address}}","{{vetName}}","{{clinicPhone}}"],L={appointment_created:"Cita Creada",appointment_reminder:"Recordatorio de Cita",appointment_confirmed:"Cita Confirmada",vaccination_reminder:"Recordatorio de Vacuna"};return i.jsxs("div",{className:"space-y-6",children:[i.jsx(Ae,{children:i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(zk,{className:"h-5 w-5"}),"Configuración de Notificaciones"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Configura plantillas de mensajes para WhatsApp y email que se enviarán automáticamente"})]})}),i.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[i.jsxs("button",{className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="whatsapp"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>e("whatsapp"),children:[i.jsx(j3,{className:"h-4 w-4 inline mr-2"}),"WhatsApp"]}),i.jsxs("button",{className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="email"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>e("email"),children:[i.jsx(Vk,{className:"h-4 w-4 inline mr-2"}),"Email"]}),i.jsxs("button",{className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="settings"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>e("settings"),children:[i.jsx(dg,{className:"h-4 w-4 inline mr-2"}),"Configuración"]})]}),(t==="whatsapp"||t==="email")&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsxs(Be,{children:["Plantillas de ",t==="whatsapp"?"WhatsApp":"Email"]})}),i.jsx(De,{children:i.jsx("div",{className:"space-y-4",children:p.filter(R=>R.type===t).map(R=>i.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:R.name}),i.jsx("p",{className:"text-sm text-gray-500",children:L[R.trigger]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(td,{checked:R.isActive,onCheckedChange:()=>v(R.id)}),i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>N(R),children:"Editar"}),i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>T(R.id),className:"text-red-600 hover:text-red-700",children:"Eliminar"})]})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm",children:R.template})]},R.id))})})]}),i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsx(Be,{children:x?"Editar Plantilla":"Nueva Plantilla"})}),i.jsx(De,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"template-name",children:"Nombre de la Plantilla"}),i.jsx(J,{id:"template-name",value:(x==null?void 0:x.name)||w.name,onChange:R=>{x?N({...x,name:R.target.value}):b({...w,name:R.target.value})},placeholder:"Ej: Confirmación de cita"})]}),i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"trigger",children:"Disparador"}),i.jsxs(Ue,{value:(x==null?void 0:x.trigger)||w.trigger,onValueChange:R=>{const C=R;x?N({...x,trigger:C}):b({...w,trigger:C})},children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsx(Me,{children:Object.entries(L).map(([R,C])=>i.jsx(W,{value:R,children:C},R))})]})]}),i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"template-content",children:"Contenido del Mensaje"}),i.jsx(Et,{id:"template-content",rows:4,value:(x==null?void 0:x.template)||w.template,onChange:R=>{x?N({...x,template:R.target.value}):b({...w,template:R.target.value})},placeholder:"Escribe el mensaje usando variables como {{tutorName}}, {{petName}}, etc."})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Variables Disponibles"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:I.map(R=>i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{const _=((x==null?void 0:x.template)||w.template)+R;x?N({...x,template:_}):b({...w,template:_})},children:R},R))})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ee,{onClick:S,className:"flex-1",children:[x?"Actualizar":"Crear"," Plantilla"]}),x&&i.jsx(ee,{variant:"outline",onClick:()=>N(null),children:"Cancelar"})]})]})})]})]}),t==="settings"&&i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsx(Be,{children:"Configuración de Servicios"})}),i.jsx(De,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium",children:"WhatsApp Business API"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"whatsapp-token",children:"Token de Acceso"}),i.jsx(J,{id:"whatsapp-token",type:"password",placeholder:"Tu token de WhatsApp Business API"})]}),i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"whatsapp-phone",children:"ID del Número de Teléfono"}),i.jsx(J,{id:"whatsapp-phone",placeholder:"ID del número en Meta for Developers"})]})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Configuración WhatsApp Business API:"}),i.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-700 space-y-1",children:[i.jsx("li",{children:"Crea una aplicación en Meta for Developers"}),i.jsx("li",{children:"Habilita WhatsApp Business API"}),i.jsx("li",{children:"Obtén el token de acceso y el ID del número de teléfono"}),i.jsx("li",{children:"Configura el webhook para recibir notificaciones"})]})]}),i.jsx(ee,{onClick:async()=>{var _,P;const R=(_=document.getElementById("whatsapp-token"))==null?void 0:_.value,C=(P=document.getElementById("whatsapp-phone"))==null?void 0:P.value;if(!R||!C){o({title:"Campos Incompletos",description:"Complete el token y el ID del número de teléfono.",variant:"destructive"});return}try{const A=await fetch("/api/whatsapp/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:R,phoneNumberId:C})}),F=await A.json();A.ok?o({title:"Configuración Guardada",description:F.message}):o({title:"Error de Conexión",description:F.details||F.error,variant:"destructive"})}catch{o({title:"Error",description:"No se pudo probar la configuración de WhatsApp",variant:"destructive"})}},variant:"outline",className:"w-full",children:"Probar y Guardar Configuración WhatsApp"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Configuración de Email"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"smtp-host",children:"Servidor SMTP"}),i.jsx(J,{id:"smtp-host",value:n.smtpHost,onChange:R=>r(C=>({...C,smtpHost:R.target.value})),placeholder:"smtp.gmail.com"})]}),i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"smtp-port",children:"Puerto"}),i.jsx(J,{id:"smtp-port",type:"number",value:n.smtpPort,onChange:R=>r(C=>({...C,smtpPort:parseInt(R.target.value)||587})),placeholder:"587"})]}),i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"smtp-user",children:"Usuario"}),i.jsx(J,{id:"smtp-user",type:"email",value:n.smtpUser,onChange:R=>r(C=>({...C,smtpUser:R.target.value})),placeholder:"tu-email@gmail.com"})]}),i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"smtp-password",children:"Contraseña de Aplicación"}),i.jsx(J,{id:"smtp-password",type:"password",value:n.smtpPassword,onChange:R=>r(C=>({...C,smtpPassword:R.target.value})),placeholder:"Contraseña específica de aplicación"})]}),i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"from-email",children:"Email Remitente"}),i.jsx(J,{id:"from-email",type:"email",value:n.fromEmail,onChange:R=>r(C=>({...C,fromEmail:R.target.value})),placeholder:"noreply@ale-veterinaria.com"})]}),i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"from-name",children:"Nombre Remitente"}),i.jsx(J,{id:"from-name",value:n.fromName,onChange:R=>r(C=>({...C,fromName:R.target.value})),placeholder:"Ale Veterinaria"})]})]}),i.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Configuración Gmail:"}),i.jsxs("ul",{className:"list-disc list-inside text-sm text-yellow-700 space-y-1",children:[i.jsx("li",{children:"Habilita la autenticación de 2 factores en tu cuenta Google"}),i.jsx("li",{children:'Genera una "Contraseña de aplicación" específica desde tu configuración de Google'}),i.jsx("li",{children:"Usa esta contraseña de aplicación, no tu contraseña normal de Gmail"}),i.jsx("li",{children:"Servidor SMTP: smtp.gmail.com, Puerto: 587"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ee,{onClick:()=>{if(!n.smtpHost||!n.smtpUser||!n.smtpPassword||!n.fromEmail){o({title:"Campos Incompletos",description:"Complete todos los campos obligatorios de configuración SMTP.",variant:"destructive"});return}h.mutate(n)},disabled:h.isPending,className:"flex-1",children:h.isPending?"Guardando...":"Guardar Configuración SMTP"}),i.jsx(ee,{onClick:async()=>{if(!n.smtpHost||!n.smtpUser||!n.smtpPassword){o({title:"Campos Incompletos",description:"Complete la configuración SMTP antes de probar.",variant:"destructive"});return}try{const R=await fetch("/api/email/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),C=await R.json();R.ok?o({title:"Prueba Exitosa",description:"La configuración SMTP funciona correctamente."}):o({title:"Error de Conexión",description:C.details||C.error,variant:"destructive"})}catch{o({title:"Error",description:"No se pudo probar la configuración SMTP",variant:"destructive"})}},variant:"outline",children:"Probar"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[i.jsx(Wd,{className:"h-5 w-5"}),"Temporización de Notificaciones"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"reminder-hours",children:"Recordatorio de Cita (horas antes)"}),i.jsxs(Ue,{defaultValue:"24",children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"1",children:"1 hora"}),i.jsx(W,{value:"2",children:"2 horas"}),i.jsx(W,{value:"6",children:"6 horas"}),i.jsx(W,{value:"12",children:"12 horas"}),i.jsx(W,{value:"24",children:"24 horas"}),i.jsx(W,{value:"48",children:"48 horas"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{htmlFor:"vaccination-reminder",children:"Recordatorio de Vacunas (días antes)"}),i.jsxs(Ue,{defaultValue:"7",children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"3",children:"3 días"}),i.jsx(W,{value:"7",children:"7 días"}),i.jsx(W,{value:"14",children:"14 días"}),i.jsx(W,{value:"30",children:"30 días"})]})]})]})]})]}),i.jsx(ee,{className:"w-full",children:"Guardar Configuración"})]})})]})]})}function yZ(){const[t,e]=y.useState(!1),[n,r]=y.useState(!1),[s,a]=y.useState(!0),[o,l]=y.useState("primary"),[c,u]=y.useState(null),[h,p]=y.useState([]),{toast:m}=ti();y.useEffect(()=>{x()},[]);const x=async()=>{try{const v=await fetch("/api/google-calendar/status");if(v.ok){const T=await v.json();e(T.connected),T.connected&&(u(new Date(T.lastSync)),S())}}catch(v){console.error("Error checking Google Calendar connection:",v)}},N=async()=>{r(!0);try{const T=await(await fetch("/api/google-calendar/auth-url")).json();if(T.authUrl)window.location.href=T.authUrl;else throw new Error("No se pudo obtener la URL de autenticación")}catch(v){console.error("Error connecting to Google Calendar:",v),m({title:"Error de Conexión",description:"No se pudo conectar con Google Calendar. Intenta nuevamente.",variant:"destructive"})}finally{r(!1)}},w=async()=>{try{(await fetch("/api/google-calendar/disconnect",{method:"POST"})).ok&&(e(!1),p([]),u(null),m({title:"Desconectado",description:"Google Calendar se desconectó correctamente."}))}catch(v){console.error("Error disconnecting Google Calendar:",v),m({title:"Error",description:"No se pudo desconectar Google Calendar.",variant:"destructive"})}},b=async()=>{if(t){r(!0);try{const v=await fetch("/api/google-calendar/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({calendarId:o,syncEnabled:s})});if(v.ok){const T=await v.json();u(new Date),S(),m({title:"Sincronización Completa",description:`Se sincronizaron ${T.eventsCreated} eventos con Google Calendar.`})}}catch(v){console.error("Error syncing with Google Calendar:",v),m({title:"Error de Sincronización",description:"No se pudo sincronizar con Google Calendar.",variant:"destructive"})}finally{r(!1)}}},S=async()=>{try{const v=await fetch("/api/google-calendar/events");if(v.ok){const T=await v.json();p(T.slice(0,5))}}catch(v){console.error("Error fetching calendar events:",v)}};return i.jsxs("div",{className:"space-y-6",children:[!t&&i.jsxs(Ae,{className:"border-amber-200 bg-amber-50",children:[i.jsx(Le,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ji,{className:"h-5 w-5 text-amber-600"}),i.jsxs("div",{children:[i.jsx(Be,{className:"text-amber-900 text-lg",children:"Google Calendar no conectado"}),i.jsx(Jt,{className:"text-amber-700",children:"Conecta tu cuenta de Google para sincronizar automáticamente las citas veterinarias con tu calendario."})]})]})}),i.jsx(De,{className:"pt-0",children:i.jsx(ee,{onClick:N,disabled:n,className:"bg-amber-600 hover:bg-amber-700",children:n?i.jsxs(i.Fragment,{children:[i.jsx(uS,{className:"mr-2 h-4 w-4 animate-spin"}),"Conectando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Db,{className:"mr-2 h-4 w-4"}),"Conectar Google Calendar"]})})})]}),i.jsx(Ae,{children:i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(nr,{className:"h-5 w-5"}),"Integración con Google Calendar"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Sincroniza automáticamente las citas veterinarias con tu Google Calendar"})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsx(Be,{children:"Estado de Conexión"})}),i.jsxs(De,{className:"space-y-4",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[t?i.jsx(C3,{className:"h-5 w-5 text-green-500"}):i.jsx(ji,{className:"h-5 w-5 text-red-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:t?"Conectado":"Desconectado"}),i.jsx("p",{className:"text-sm text-gray-600",children:t?"Las citas se sincronizan automáticamente":"Conecta tu cuenta para sincronizar citas"})]})]})}),c&&i.jsxs("div",{className:"text-sm text-gray-600",children:["Última sincronización: ",c.toLocaleString("es-CL")]}),i.jsx("div",{className:"flex gap-2",children:t?i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ee,{onClick:b,disabled:n,variant:"outline",className:"flex items-center gap-2",children:[i.jsx(uS,{className:"h-4 w-4"}),n?"Sincronizando...":"Sincronizar Ahora"]}),i.jsx(ee,{onClick:w,variant:"destructive",children:"Desconectar"})]}):i.jsxs(ee,{onClick:N,disabled:n,className:"flex items-center gap-2",children:[i.jsx(Db,{className:"h-4 w-4"}),n?"Conectando...":"Conectar Google Calendar"]})})]})]}),i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsx(Be,{children:"Configuración de Sincronización"})}),i.jsxs(De,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Y,{htmlFor:"sync-enabled",children:"Sincronización Automática"}),i.jsx(td,{id:"sync-enabled",checked:s,onCheckedChange:a,disabled:!t})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Las nuevas citas se crearán automáticamente en Google Calendar"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{htmlFor:"calendar-id",children:"Calendario de Destino"}),i.jsx(J,{id:"calendar-id",value:o,onChange:v=>l(v.target.value),placeholder:"primary",disabled:!t}),i.jsx("p",{className:"text-sm text-gray-600",children:"ID del calendario donde se crearán las citas (por defecto: 'primary')"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Y,{children:"Información a Sincronizar"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"sync-pet-name",defaultChecked:!0,disabled:!t}),i.jsx(Y,{htmlFor:"sync-pet-name",className:"text-sm",children:"Nombre de la mascota"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"sync-service",defaultChecked:!0,disabled:!t}),i.jsx(Y,{htmlFor:"sync-service",className:"text-sm",children:"Tipo de servicio"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"sync-location",defaultChecked:!0,disabled:!t}),i.jsx(Y,{htmlFor:"sync-location",className:"text-sm",children:"Dirección del tutor"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"sync-notes",defaultChecked:!0,disabled:!t}),i.jsx(Y,{htmlFor:"sync-notes",className:"text-sm",children:"Notas de la cita"})]})]})]})]})]})]}),t&&h.length>0&&i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsx(Be,{children:"Próximas Citas en Google Calendar"})}),i.jsx(De,{children:i.jsx("div",{className:"space-y-3",children:h.map(v=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:v.title}),i.jsx("p",{className:"text-sm text-gray-600",children:new Date(v.start).toLocaleString("es-CL")}),v.location&&i.jsx("p",{className:"text-sm text-gray-500",children:v.location})]}),i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>window.open(`https://calendar.google.com/calendar/event?eid=${v.id}`,"_blank"),children:"Ver en Google Calendar"})]},v.id))})})]}),!t&&i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsx(Be,{children:"Instrucciones de Configuración"})}),i.jsx(De,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-medium",children:"Para configurar la integración con Google Calendar:"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:[i.jsx("li",{children:'Haz clic en "Conectar Google Calendar"'}),i.jsx("li",{children:"Autoriza el acceso a tu cuenta de Google"}),i.jsx("li",{children:"Selecciona el calendario donde deseas sincronizar las citas"}),i.jsx("li",{children:"Configura las opciones de sincronización según tus preferencias"})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"Beneficios de la Integración:"}),i.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-700 space-y-1",children:[i.jsx("li",{children:"Sincronización automática de citas veterinarias"}),i.jsx("li",{children:"Recordatorios nativos de Google Calendar"}),i.jsx("li",{children:"Acceso desde cualquier dispositivo"}),i.jsx("li",{children:"Compartir calendario con el equipo veterinario"})]})]})]})})]})]})}const ft=t=>kg.sanitize(t,{ALLOWED_TAGS:["p","br","strong","em","u","div","span"],ALLOWED_ATTR:["style"]});function xZ(){const{user:t}=MP(),[,e]=Z2(),[n,r]=y.useState(""),[s,a]=y.useState(null),[o,l]=y.useState(!1),[c,u]=y.useState("search"),[h,p]=y.useState([]),[m,x]=y.useState(null),[N,w]=y.useState(!1);y.useEffect(()=>{console.log("ProfessionalPortal useEffect - checking navigation");const f=sessionStorage.getItem("selectedPetData"),V=sessionStorage.getItem("navigateToSection");if(console.log("SessionStorage data:",{selectedPetData:!!f,navigateToSection:V}),f&&(V==="patient-details"||V==="patient-hub")){try{const $t=JSON.parse(f);console.log("Parsed pet data from session:",$t),a($t),u("patient-hub"),console.log("Navigation successful - patient set and section changed to patient-hub");const li=sessionStorage.getItem("editAppointmentId");li&&(x(li),w(!0),sessionStorage.removeItem("editAppointmentId")),sessionStorage.removeItem("selectedPetData"),sessionStorage.removeItem("navigateToSection"),b({title:"Navegación exitosa",description:`Ficha de ${$t.name} cargada desde el calendario`})}catch($t){console.error("Error parsing pet data from session:",$t),b({title:"Error de navegación",description:"No se pudo cargar la ficha del paciente desde el calendario",variant:"destructive"})}return}const ie=new URLSearchParams(window.location.search),oe=ie.get("section"),Ce=ie.get("petId"),Ze=ie.get("tutorRut"),ut=ie.get("search");oe&&Ce&&Ze?(u(oe),r(Ze)):ut&&(r(ut),u("search"))},[]);const{toast:b}=ti(),S=Zl(),[v,T]=y.useState({consultations:!0,prescriptions:!0,vaccinations:!0,certificates:!0}),[I,L]=y.useState({examType:"",notes:"",uploadedFile:null}),[R,C]=y.useState(null),[_,P]=y.useState({currentWeight:"",idealWeight:"",bcs:"",bcsMethod:"canine_9_point",activityFactor:"1.6",weightGoal:"maintain",targetWeight:"",currentFood:"",currentFoodBrand:"",dailyAmount:"",feedingFrequency:"",treats:"",supplements:"",bodyConditionNotes:"",nutritionalConcerns:"",recommendations:"",followUpDate:"",thoracicPerimeter:"",limbLength:"",calculatedIdealWeight:""}),[A,F]=y.useState({visitDate:new Date().toISOString().split("T")[0],visitReason:"",clinicalFindings:"",diagnosis:"",treatmentPerformed:"",medications:"",recommendations:"",followUpInstructions:"",nextAppointment:"",urgentSigns:"",tutorQuestions:""}),[D,E]=y.useState({name:"",brand:"",type:"kibble",species:"Ambos",lifeStage:"adult",calories:"",protein:"",fat:"",carbohydrates:"",fiber:"",moisture:"",calcium:"",phosphorus:"",sodium:"",ingredients:"",notes:""}),[$,G]=y.useState(!1),[se,de]=y.useState(null),[Q,ce]=y.useState(!1),[ue,we]=y.useState({rer:0,der:0,recommendedAmount:0,idealWeight:0,weightStatus:"",bcsPercentage:0}),$e=jt({mutationFn:f=>Xt("/api/nutrition-assessments","POST",f),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/nutrition-assessments/pet",s==null?void 0:s.id]}),b({title:"Éxito",description:"Evaluación nutricional guardada correctamente"}),P({currentWeight:"",idealWeight:"",bcs:"",bcsMethod:"canine_9_point",activityFactor:"1.6",weightGoal:"maintain",targetWeight:"",currentFood:"",currentFoodBrand:"",dailyAmount:"",feedingFrequency:"",treats:"",supplements:"",bodyConditionNotes:"",nutritionalConcerns:"",recommendations:"",followUpDate:""})},onError:()=>b({title:"Error",description:"No se pudo guardar la evaluación",variant:"destructive"})}),B=jt({mutationFn:f=>Xt("/api/foods","POST",f),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/foods"]}),b({title:"Éxito",description:"Alimento agregado correctamente"}),G(!1),Ye()},onError:()=>b({title:"Error",description:"No se pudo agregar el alimento",variant:"destructive"})}),me=jt({mutationFn:({id:f,data:V})=>Xt(`/api/foods/${f}`,"PUT",V),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/foods"]}),b({title:"Éxito",description:"Alimento actualizado correctamente"}),ce(!1),de(null),Ye()},onError:()=>b({title:"Error",description:"No se pudo actualizar el alimento",variant:"destructive"})}),ve=jt({mutationFn:f=>Xt(`/api/foods/${f}`,"DELETE"),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/foods"]}),b({title:"Éxito",description:"Alimento eliminado correctamente"})},onError:()=>b({title:"Error",description:"No se pudo eliminar el alimento",variant:"destructive"})}),{data:Ge=[],isLoading:ye}=Qt({queryKey:["/api/foods"],enabled:c==="nutrition"});Qt({queryKey:["/api/nutrition-assessments/pet",s==null?void 0:s.id],enabled:c==="nutrition"&&!!(s!=null&&s.id)});const Xe=()=>{if(!s||!(t!=null&&t.uid)){b({title:"Error",description:"Información de paciente o veterinario no disponible",variant:"destructive"});return}const f={petId:s.id,veterinarianId:t.uid,assessmentDate:new Date().toISOString(),..._,rer:ue.rer>0?ue.rer.toString():"",der:ue.der>0?ue.der.toString():"",recommendedCalories:ue.der>0?ue.der.toString():"",recommendedAmount:ue.recommendedAmount>0?ue.recommendedAmount.toString():""};$e.mutate(f)},Ye=()=>{E({name:"",brand:"",type:"kibble",species:"Ambos",lifeStage:"adult",calories:"",protein:"",fat:"",carbohydrates:"",fiber:"",moisture:"",calcium:"",phosphorus:"",sodium:"",ingredients:"",notes:""})},Je=()=>{if(!D.name||!D.type){b({title:"Error",description:"Nombre y tipo de alimento son requeridos",variant:"destructive"});return}se?me.mutate({id:se.id,data:D}):B.mutate(D)},Ve=f=>{de(f),E({name:f.name||"",brand:f.brand||"",type:f.type||"kibble",species:f.species||"Ambos",lifeStage:f.lifeStage||"adult",calories:f.calories||"",protein:f.protein||"",fat:f.fat||"",carbohydrates:f.carbohydrates||"",fiber:f.fiber||"",moisture:f.moisture||"",calcium:f.calcium||"",phosphorus:f.phosphorus||"",sodium:f.sodium||"",ingredients:f.ingredients||"",notes:f.notes||""}),ce(!0)},Ke=f=>{window.confirm("¿Estás seguro de que quieres eliminar este alimento?")&&ve.mutate(f)},At=()=>{ce(!1),de(null),Ye()},[Re,Pt]=y.useState({selectedExams:[],clinicalHistory:"",clinicalSuspicion:"",urgency:"normal",fastingRequired:!1,specialInstructions:"",orderDate:new Date().toISOString().split("T")[0]}),[ln,sn]=y.useState(""),[st,et]=y.useState("all"),[gn,En]=y.useState(!1),[U,H]=y.useState({name:"",category:"",newCategory:"",description:"",preparationInstructions:"",fastingRequired:!1}),[ne,xe]=y.useState(()=>{const f=[{id:"hemograma",name:"Hemograma Completo",category:"Hematología",description:"Análisis completo de células sanguíneas"},{id:"bioquimica",name:"Bioquímica Sanguínea",category:"Bioquímica",description:"Panel básico de química sanguínea"},{id:"perfil-renal",name:"Perfil Renal (Urea/Creatinina)",category:"Bioquímica",description:"Evaluación de función renal"},{id:"perfil-hepatico",name:"Perfil Hepático (ALT/AST)",category:"Bioquímica",description:"Evaluación de función hepática"},{id:"perfil-tiroideo",name:"Perfil Tiroideo (T4)",category:"Endocrinología",description:"Evaluación de función tiroidea"},{id:"glucosa",name:"Glucosa",category:"Bioquímica",description:"Medición de glucosa en sangre"},{id:"proteinas-totales",name:"Proteínas Totales",category:"Bioquímica",description:"Medición de proteínas totales"},{id:"electrolitos",name:"Electrolitos (Na/K/Cl)",category:"Bioquímica",description:"Panel de electrolitos séricos"},{id:"urinanalisis",name:"Análisis de Orina",category:"Urología",description:"Análisis físico, químico y microscópico de orina"},{id:"coprocultivo",name:"Coprocultivo",category:"Parasitología",description:"Búsqueda de parásitos en heces"},{id:"radiografia-torax",name:"Radiografía de Tórax",category:"Imagenología",description:"Imagen radiográfica del tórax"},{id:"radiografia-abdomen",name:"Radiografía de Abdomen",category:"Imagenología",description:"Imagen radiográfica del abdomen"},{id:"ecografia-abdominal",name:"Ecografía Abdominal",category:"Imagenología",description:"Ultrasonido abdominal"},{id:"ecocardiograma",name:"Ecocardiograma",category:"Cardiología",description:"Ultrasonido del corazón"},{id:"electrocardiograma",name:"Electrocardiograma",category:"Cardiología",description:"Registro de actividad eléctrica cardíaca"},{id:"citologia",name:"Citología",category:"Patología",description:"Análisis microscópico de células"},{id:"histopatologia",name:"Histopatología",category:"Patología",description:"Análisis microscópico de tejidos"},{id:"cultivo-bacteriano",name:"Cultivo Bacteriano",category:"Microbiología",description:"Cultivo para identificación de bacterias"},{id:"pcr",name:"PCR",category:"Biología Molecular",description:"Técnica de amplificación de ADN"},{id:"serologia",name:"Serología",category:"Inmunología",description:"Análisis de anticuerpos en suero"}];try{const V=localStorage.getItem("ale-veterinaria-custom-exams");if(V){const ie=JSON.parse(V);return[...f,...ie]}}catch(V){console.error("Error loading custom exams from localStorage:",V)}return f}),le=f=>{T(V=>({...V,[f]:!V[f]}))},[K,ge]=y.useState({tutorName:"",tutorRut:"",tutorPhone:"",tutorPhone2:"",tutorEmail:"",tutorRegion:"",tutorComuna:"",tutorAddress:"",tutorHouseNumber:"",tutorApartmentNumber:"",tutorCity:"",name:"",species:"Canino",breed:"",sex:"Macho",reproductiveStatus:"Entero",birthDate:"",colorMarkings:"",microchip:"",weight:"",origin:"Adopción"}),[it,It]=y.useState(o0("Canino")),[Mt,ar]=y.useState({isValid:!0,message:""}),[Un,vn]=y.useState({isValid:!0,message:""});y.useEffect(()=>{It(o0(K.species)),ge(f=>({...f,breed:""}))},[K.species]);const[Pe,Ht]=y.useState({consultationDate:new Date().toISOString().split("T")[0],consultationReason:"",anamnesis:"",respiratoryRate:"",weight:"",temperature:"",capillaryRefillTime:"",heartRate:"",mucosaColor:"",physicalExamination:"",physicalExamFindings:"",presumptiveDiagnosis:"",therapeuticPlan:"",additionalNotes:"",nextAppointment:""}),[at,cn]=y.useState({vaccineName:"",laboratory:"",batchNumber:"",dose:"",applicationRoute:"Subcutánea",applicationDate:new Date().toISOString().split("T")[0],nextDueDate:"",validityPeriod:"365",validityType:"predefined",customValidityMonths:"",notes:""}),[Ct,In]=y.useState({type:"internal",product:"",activeIngredient:"",dose:"",laboratory:"",batchNumber:"",applicationDate:new Date().toISOString().split("T")[0],nextDueDate:"",duration:"",notes:""}),[zt,zn]=y.useState({certificateType:"health",purpose:"",issueDate:new Date().toISOString().split("T")[0],expiryDate:"",observations:"",additionalInfo:"",microchipType:"implantation"}),[Zt,Bn]=y.useState({medications:[],indications:"",warnings:"",specialInstructions:"",issueDate:new Date().toISOString().split("T")[0]}),[Kt]=y.useState([{id:"1",name:"Amoxicilina + Ácido Clavulánico",type:"Antibiótico"},{id:"2",name:"Meloxicam",type:"Antiinflamatorio"},{id:"3",name:"Omeprazol",type:"Protector gástrico"},{id:"4",name:"Sucralfato",type:"Protector gástrico"},{id:"5",name:"Prednisona",type:"Corticoide"},{id:"6",name:"Cefalexina",type:"Antibiótico"},{id:"7",name:"Tramadol",type:"Analgésico"},{id:"8",name:"Ranitidina",type:"Antiácido"},{id:"9",name:"Metronidazol",type:"Antibiótico/Antiparasitario"},{id:"10",name:"Dipirona",type:"Analgésico/Antipirético"},{id:"11",name:"Doxiciclina",type:"Antibiótico"},{id:"12",name:"Furosemida",type:"Diurético"},{id:"13",name:"Enalapril",type:"Cardioprotector"},{id:"14",name:"Silimarina",type:"Hepatoprotector"},{id:"15",name:"Lactulose",type:"Laxante"},{id:"16",name:"Domperidona",type:"Antiemético"},{id:"17",name:"Maropitant",type:"Antiemético"},{id:"18",name:"Gabapentina",type:"Anticonvulsivante/Analgésico"},{id:"19",name:"Fenobarbital",type:"Anticonvulsivante"},{id:"20",name:"Levotiroxina",type:"Hormonal"}]),[wt,Qr]=y.useState({medicationId:"",dosage:"",frequency:"",duration:"",administrationRoute:"vía oral",specialInstructions:""}),hs=["vía oral","vía subcutánea","vía intramuscular","vía intravenosa","vía tópica","vía oftálmica","vía ótica","vía rectal","vía intranasal","vía inhalatoria"],[ri,dn]=y.useState(!1),[ot,Rn]=y.useState({commercialName:"",activeIngredient:"",usage:"veterinario",presentation:"",dosage:"",frequency:"",duration:"",administrationRoute:"vía oral",specialInstructions:""}),Dn=()=>{if(!wt.medicationId||!wt.dosage||!wt.frequency||!wt.duration){b({title:"Error",description:"Todos los campos del medicamento son obligatorios",variant:"destructive"});return}const f=Kt.find(ie=>ie.id===wt.medicationId);if(!f)return;const V={id:`${Date.now()}`,name:f.name,dosage:wt.dosage,frequency:wt.frequency,duration:wt.duration,administrationRoute:wt.administrationRoute,medicationType:f.type,specialInstructions:wt.specialInstructions};Bn(ie=>({...ie,medications:[...ie.medications,V]})),Qr({medicationId:"",dosage:"",frequency:"",duration:"",administrationRoute:"vía oral",specialInstructions:""}),b({title:"Medicamento agregado",description:`${f.name} agregado a la prescripción`})},si=f=>{Bn(V=>({...V,medications:V.medications.filter(ie=>ie.id!==f)}))},tc=()=>{if(!U.name||!U.category&&!U.newCategory){b({title:"Error",description:"Completa el nombre del examen y selecciona o crea una categoría",variant:"destructive"});return}const f=U.newCategory||U.category,V={id:`custom-${Date.now()}`,name:U.name,category:f,description:U.description||"Examen personalizado",preparationInstructions:U.preparationInstructions,fastingRequired:U.fastingRequired,isCustom:!0},ie=[...ne,V];xe(ie);try{const oe=ie.filter(Ce=>Ce.isCustom);localStorage.setItem("ale-veterinaria-custom-exams",JSON.stringify(oe))}catch(oe){console.error("Error saving custom exam to localStorage:",oe)}H({name:"",category:"",newCategory:"",description:"",preparationInstructions:"",fastingRequired:!1}),En(!1),b({title:"Éxito",description:`Examen "${V.name}" agregado correctamente`})},ps=f=>{const V=ne.filter(ie=>ie.id!==f);xe(V);try{const ie=V.filter(oe=>oe.isCustom);localStorage.setItem("ale-veterinaria-custom-exams",JSON.stringify(ie))}catch(ie){console.error("Error updating custom exams in localStorage:",ie)}Pt(ie=>({...ie,selectedExams:ie.selectedExams.filter(oe=>oe!==f)})),b({title:"Examen eliminado",description:"El examen personalizado ha sido eliminado"})},$o=jt({mutationFn:f=>Xt(`/api/prescriptions/firebase/${f}`,"DELETE"),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/prescriptions/firebase/pet",s==null?void 0:s.id]}),b({title:"Éxito",description:"Receta eliminada correctamente"})},onError:()=>b({title:"Error",description:"No se pudo eliminar la receta",variant:"destructive"})}),nc=jt({mutationFn:f=>Xt(`/api/vaccinations/firebase/${f}`,"DELETE"),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/vaccinations/firebase/pet",s==null?void 0:s.id]}),b({title:"Éxito",description:"Vacuna eliminada correctamente"})},onError:()=>b({title:"Error",description:"No se pudo eliminar la vacuna",variant:"destructive"})}),or=jt({mutationFn:f=>Xt(`/api/dewormings/firebase/${f}`,"DELETE"),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/dewormings/firebase/pet",s==null?void 0:s.id]}),b({title:"Éxito",description:"Desparasitación eliminada correctamente"})},onError:()=>b({title:"Error",description:"No se pudo eliminar la desparasitación",variant:"destructive"})}),rc=jt({mutationFn:f=>Xt(`/api/certificates/firebase/${f}`,"DELETE"),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/certificates/pet",s==null?void 0:s.id]}),b({title:"Éxito",description:"Certificado eliminado correctamente"})},onError:()=>b({title:"Error",description:"No se pudo eliminar el certificado",variant:"destructive"})}),Ta=jt({mutationFn:f=>Xt(`/api/medical-records/firebase/${f}`,"DELETE"),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/medical-records/firebase/pet",s==null?void 0:s.id]}),b({title:"Éxito",description:"Consulta médica eliminada correctamente"})},onError:()=>b({title:"Error",description:"No se pudo eliminar la consulta médica",variant:"destructive"})});jt({mutationFn:f=>Xt(`/api/exam-orders/firebase/${f}`,"DELETE"),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/exam-orders/firebase/pet",s==null?void 0:s.id]}),b({title:"Éxito",description:"Orden de exámenes eliminada correctamente"})},onError:()=>b({title:"Error",description:"No se pudo eliminar la orden de exámenes",variant:"destructive"})});const ii=()=>{const f=ne.map(V=>V.category);return["all",...Array.from(new Set(f))]},lr=()=>ne.filter(f=>{var oe;const V=f.name.toLowerCase().includes(ln.toLowerCase())||((oe=f.description)==null?void 0:oe.toLowerCase().includes(ln.toLowerCase())),ie=st==="all"||f.category===st;return V&&ie}),sc=()=>{if(!ot.commercialName||!ot.activeIngredient||!ot.presentation||!ot.dosage||!ot.frequency||!ot.duration){b({title:"Error",description:"Todos los campos del medicamento personalizado son obligatorios",variant:"destructive"});return}const f=`${ot.commercialName} (${ot.activeIngredient} - ${ot.presentation}) - Uso ${ot.usage}`,V={id:`custom-${Date.now()}`,name:f,dosage:ot.dosage,frequency:ot.frequency,duration:ot.duration,administrationRoute:ot.administrationRoute,medicationType:"Personalizado",specialInstructions:ot.specialInstructions};Bn(ie=>({...ie,medications:[...ie.medications,V]})),Rn({commercialName:"",activeIngredient:"",usage:"veterinario",presentation:"",dosage:"",frequency:"",duration:"",administrationRoute:"vía oral",specialInstructions:""}),dn(!1),b({title:"Medicamento agregado",description:`${ot.commercialName} agregado a la prescripción`})};y.useEffect(()=>{t?console.log("User authenticated in professional portal:",t.uid):(console.log("No user authenticated, redirecting to home..."),e("/"))},[t,e]),y.useEffect(()=>{const f=async ie=>{const{petId:oe,tutorRut:Ce,appointmentId:Ze}=ie.detail;try{console.log("Navigating to pet record:",{petId:oe,tutorRut:Ce});const ut=await fetch(`/api/pets/rut/${Ce}`);if(console.log("API Response status:",ut.status),ut.ok){const $t=await ut.json();console.log("Fetched pets:",$t);const li=$t.find(ka=>ka.id===oe);console.log("Found pet:",li),li?(a(li),u("patient-hub"),b({title:"Navegación exitosa",description:`Ficha de ${li.name} abierta desde el calendario`})):(console.error("Pet not found in tutor pets list"),b({title:"Error",description:"No se encontró el paciente especificado",variant:"destructive"}))}else console.error("Failed to fetch pets:",ut.status),b({title:"Error",description:"No se pudieron cargar los pacientes del tutor",variant:"destructive"})}catch(ut){console.error("Error fetching pet data:",ut),b({title:"Error",description:"Error de conexión al cargar la ficha del paciente",variant:"destructive"})}},V=ie=>{const{appointmentId:oe,appointmentData:Ce}=ie.detail;if(Ce&&Ce.petId){const Ze={id:Ce.petId,name:Ce.petName,species:Ce.species,tutorName:Ce.tutorName,tutorRut:Ce.tutorRut,tutorPhone:Ce.tutorPhone,tutorEmail:Ce.tutorEmail};a(Ze),sessionStorage.setItem("selectedPetData",JSON.stringify(Ze)),sessionStorage.setItem("navigateToSection","patient-hub"),sessionStorage.setItem("editAppointmentId",oe),u("patient-hub"),b({title:"Editando cita",description:`Cita de ${Ce.petName} cargada para edición`})}else b({title:"Error",description:"No se pudo cargar la información de la cita",variant:"destructive"})};return window.addEventListener("navigate-to-pet-record",f),window.addEventListener("edit-appointment",V),()=>{window.removeEventListener("navigate-to-pet-record",f),window.removeEventListener("edit-appointment",V)}},[b]);const Te=[{value:"1.6",label:"Canino - Adulto castrado (1.6)"},{value:"1.8",label:"Canino - Adulto entero (1.8)"},{value:"1.2",label:"Canino - Inactivo/obeso (1.2)"},{value:"1.3",label:"Canino - Inactivo/obeso (1.3)"},{value:"1.4",label:"Canino - Inactivo/obeso (1.4)"},{value:"1.0",label:"Canino - Pérdida de peso (1.0)"},{value:"1.1",label:"Canino - Cuidado crítico (1.1)"},{value:"1.21",label:"Canino - Ganancia peso (1.2)"},{value:"1.31",label:"Canino - Ganancia peso (1.3)"},{value:"1.41",label:"Canino - Ganancia peso (1.4)"},{value:"1.5",label:"Canino - Ganancia peso (1.5)"},{value:"1.61",label:"Canino - Ganancia peso (1.6)"},{value:"1.71",label:"Canino - Ganancia peso (1.7)"},{value:"1.81",label:"Canino - Ganancia peso (1.8)"},{value:"1.62",label:"Canino - Trabajo ligero (1.6)"},{value:"1.72",label:"Canino - Trabajo ligero (1.7)"},{value:"1.82",label:"Canino - Trabajo ligero (1.8)"},{value:"1.9",label:"Canino - Trabajo ligero (1.9)"},{value:"2.0",label:"Canino - Trabajo ligero (2.0)"},{value:"2.01",label:"Canino - Trabajo moderado (2.0)"},{value:"2.1",label:"Canino - Trabajo moderado (2.1)"},{value:"2.2",label:"Canino - Trabajo moderado (2.2)"},{value:"2.3",label:"Canino - Trabajo moderado (2.3)"},{value:"2.4",label:"Canino - Trabajo moderado (2.4)"},{value:"2.5",label:"Canino - Trabajo moderado (2.5)"},{value:"3.0",label:"Canino - Trabajo moderado (3.0)"},{value:"3.5",label:"Canino - Trabajo moderado (3.5)"},{value:"4.0",label:"Canino - Trabajo moderado (4.0)"},{value:"4.5",label:"Canino - Trabajo moderado (4.5)"},{value:"5.0",label:"Canino - Trabajo moderado (5.0)"},{value:"5.01",label:"Canino - Trabajo pesado (5.0)"},{value:"6.0",label:"Canino - Trabajo pesado (6.0)"},{value:"7.0",label:"Canino - Trabajo pesado (7.0)"},{value:"8.0",label:"Canino - Trabajo pesado (8.0)"},{value:"9.0",label:"Canino - Trabajo pesado (9.0)"},{value:"10.0",label:"Canino - Trabajo pesado (10.0)"},{value:"11.0",label:"Canino - Trabajo pesado (11.0)"},{value:"1.83",label:"Canino - Gestación primeros 42 días (1.8)"},{value:"3.01",label:"Canino - Gestación últimos 21 días (3.0)"},{value:"3.02",label:"Canino - Lactancia 1 cachorro (3.0)"},{value:"3.51",label:"Canino - Lactancia 2 cachorros (3.5)"},{value:"4.01",label:"Canino - Lactancia 3-4 cachorros (4.0)"},{value:"5.02",label:"Canino - Lactancia 5-6 cachorros (5.0)"},{value:"5.5",label:"Canino - Lactancia 7-8 cachorros (5.5)"},{value:"6.01",label:"Canino - Lactancia 9+ cachorros (6.0)"},{value:"7.0",label:"Canino - Lactancia múltiple (7.0)"},{value:"8.01",label:"Canino - Lactancia múltiple (8.0)"},{value:"3.03",label:"Canino - Crecimiento hasta 4 meses (3.0)"},{value:"2.02",label:"Canino - Crecimiento 4+ meses (2.0)"}],z=[{value:"1.2",label:"Felino - Adulto castrado (1.2)"},{value:"1.3",label:"Felino - Adulto castrado (1.3)"},{value:"1.4",label:"Felino - Adulto castrado (1.4)"},{value:"1.41",label:"Felino - Adulto entero (1.4)"},{value:"1.5",label:"Felino - Adulto entero (1.5)"},{value:"1.6",label:"Felino - Adulto entero (1.6)"},{value:"1.01",label:"Felino - Inactivo/obeso (1.0)"},{value:"0.8",label:"Felino - Pérdida de peso (0.8)"},{value:"1.02",label:"Felino - Cuidado crítico (1.0)"},{value:"1.21",label:"Felino - Ganancia peso (1.2)"},{value:"1.31",label:"Felino - Ganancia peso (1.3)"},{value:"1.42",label:"Felino - Ganancia peso (1.4)"},{value:"1.51",label:"Felino - Ganancia peso (1.5)"},{value:"1.61",label:"Felino - Ganancia peso (1.6)"},{value:"1.7",label:"Felino - Ganancia peso (1.7)"},{value:"1.8",label:"Felino - Ganancia peso (1.8)"},{value:"1.11",label:"Felino - Senior 7-11 años (1.1)"},{value:"1.22",label:"Felino - Senior 7-11 años (1.2)"},{value:"1.32",label:"Felino - Senior 7-11 años (1.3)"},{value:"1.43",label:"Felino - Senior 7-11 años (1.4)"},{value:"1.12",label:"Felino - Muy senior +11 años (1.1)"},{value:"1.23",label:"Felino - Muy senior +11 años (1.2)"},{value:"1.33",label:"Felino - Muy senior +11 años (1.3)"},{value:"1.44",label:"Felino - Muy senior +11 años (1.4)"},{value:"1.52",label:"Felino - Muy senior +11 años (1.5)"},{value:"1.62",label:"Felino - Muy senior +11 años (1.6)"},{value:"1.63",label:"Felino - Gestación inicio (1.6)"},{value:"1.71",label:"Felino - Gestación progresiva (1.7)"},{value:"1.81",label:"Felino - Gestación progresiva (1.8)"},{value:"1.91",label:"Felino - Gestación progresiva (1.9)"},{value:"2.01",label:"Felino - Gestación al parto (2.0)"},{value:"2.02",label:"Felino - Lactancia básica (2.0)"},{value:"2.51",label:"Felino - Lactancia moderada (2.5)"},{value:"3.01",label:"Felino - Lactancia múltiple (3.0)"},{value:"3.52",label:"Felino - Lactancia múltiple (3.5)"},{value:"4.02",label:"Felino - Lactancia múltiple (4.0)"},{value:"4.51",label:"Felino - Lactancia múltiple (4.5)"},{value:"5.01",label:"Felino - Lactancia múltiple (5.0)"},{value:"5.51",label:"Felino - Lactancia múltiple (5.5)"},{value:"6.02",label:"Felino - Lactancia múltiple (6.0)"},{value:"2.52",label:"Felino - Crecimiento (2.5)"}],he=(f,V)=>{console.log("calculateIdealWeightFromBCS called with:",f,V);const ie=parseFloat(f),oe=parseInt(V);if(!ie||!oe||ie<=0){console.log("Invalid input for calculation");return}console.log("Processing calculation with weight:",ie,"BCS:",oe);let Ce=ie,Ze="peso ideal",ut="maintain";oe>5?(Ce=ie/(1+.1*(oe-5)),oe>=8?Ze="obesidad severa":oe>=7?Ze="obesidad moderada":Ze="sobrepeso",ut="lose"):oe<5?(Ce=ie/(1-.1*(5-oe)),oe<=2?Ze="muy bajo peso":Ze="bajo peso",ut="gain"):(Ce=ie,Ze="peso ideal",ut="maintain"),console.log("Final calculated values:",{idealWeight:Ce,weightStatus:Ze,weightGoal:ut}),we($t=>({...$t,idealWeight:Ce,weightStatus:Ze,bcsPercentage:oe!==4&&oe!==5?Math.abs((Ce-ie)/Ce*100):0})),P($t=>({...$t,idealWeight:Ce.toFixed(2),weightGoal:ut,targetWeight:Ce.toFixed(2)}))},je=()=>{if(!s){b({title:"Error",description:"Selecciona un paciente primero",variant:"destructive"});return}const f={patient:s,consultation:{date:new Date().toLocaleDateString("es-CL"),veterinarian:(t==null?void 0:t.email)||"Dr. Veterinario",findings:Pe.clinicalFindings||"",diagnosis:Pe.diagnosis||"",treatment:Pe.treatment||""},nutrition:_,prescriptions:Zt.medications,recommendations:{nutritional:_.recommendations,pharmacological:Zt.specialInstructions,followUp:_.followUpDate,generalCare:Pe.recommendations||""}};cr(f)},Rt=()=>{if(!s)return;const f=ai.find(ut=>ut.petId===s.id),V=Uo.filter(ut=>ut.petId===s.id),ie=Wi.filter(ut=>ut.petId===s.id),oe=oi.filter(ut=>ut.petId===s.id),Ce={...A};if(f&&(Ce.visitDate=f.consultationDate||A.visitDate,Ce.visitReason=f.consultationReason||A.visitReason,Ce.clinicalFindings=f.clinicalFindings||A.clinicalFindings,Ce.diagnosis=f.diagnosis||A.diagnosis),V.length>0){const ut=V.map($t=>`${$t.medication} - ${$t.dosage}${$t.frequency?` - ${$t.frequency}`:""}${$t.duration?` por ${$t.duration}`:""}`).join(`
`);Ce.medications=ut||A.medications}const Ze=[];if(ie.length>0){const ut=ie.map($t=>`Vacuna: ${$t.vaccine}`).join(", ");Ze.push(ut)}if(oe.length>0){const ut=oe.map($t=>`Desparasitación: ${$t.product}`).join(", ");Ze.push(ut)}Ze.length>0&&(Ce.treatmentPerformed=Ze.join(". ")||A.treatmentPerformed),F(Ce),b({title:"Informe auto-rellenado",description:"Se han cargado los datos de consultas anteriores"})},yn=()=>{if(!s){b({title:"Error",description:"Selecciona un paciente primero",variant:"destructive"});return}jn({patient:s,report:A})},Bt=()=>{if(!s||!s.ownerPhone){b({title:"Error",description:"No hay número de teléfono del tutor",variant:"destructive"});return}const f=`
*INFORME DE ATENCIÓN VETERINARIA*
🐾 Paciente: ${s.name}
📅 Fecha: ${new Date(A.visitDate).toLocaleDateString("es-CL")}

*MOTIVO DE CONSULTA:*
${A.visitReason}

*HALLAZGOS:*
${A.clinicalFindings}

*DIAGNÓSTICO:*
${A.diagnosis}

*TRATAMIENTO REALIZADO:*
${A.treatmentPerformed}

${A.medications?`*MEDICAMENTOS:*
${A.medications}
`:""}

*RECOMENDACIONES:*
${A.recommendations}

*SEGUIMIENTO:*
${A.followUpInstructions}

${A.urgentSigns?`⚠️ *SEÑALES DE ALERTA:*
${A.urgentSigns}
`:""}

${A.nextAppointment?`📅 *PRÓXIMA CITA:* ${new Date(A.nextAppointment).toLocaleDateString("es-CL")}
`:""}

---
Ale Veterinaria - Servicios a Domicilio
    `.trim(),ie=`https://wa.me/56${s.ownerPhone.replace(/[^\d]/g,"")}?text=${encodeURIComponent(f)}`;window.open(ie,"_blank"),b({title:"WhatsApp abierto",description:"El informe está listo para enviar al tutor"})},jn=f=>{const V=`
      <div style="padding: 20px; font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto;">
        <div style="text-align: center; margin-bottom: 30px;">
          <div style="margin-bottom: 20px;">
            <img src="/attached_assets/logo1_1755107256138.png" alt="Ale Veterinaria Logo" style="max-height: 80px; max-width: 200px;" />
          </div>
          <h1 style="color: #5FA98D; margin-bottom: 10px;">Ale Veterinaria</h1>
          <h2 style="color: #333; margin-bottom: 5px;">Informe de Atención Veterinaria</h2>
          <p style="color: #666;">Fecha: ${new Date(f.report.visitDate).toLocaleDateString("es-CL")}</p>
        </div>

        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Información del Paciente</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
            <div><strong>Nombre:</strong> ${f.patient.name}</div>
            <div><strong>Especie:</strong> ${f.patient.species}</div>
            <div><strong>Raza:</strong> ${f.patient.breed}</div>
            <div><strong>Edad:</strong> ${f.patient.age}</div>
          </div>
          <div style="margin-top: 15px;">
            <strong>Tutor:</strong> ${f.patient.ownerName}
          </div>
        </div>

        ${f.report.visitReason?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Motivo de la Consulta</h3>
          <p style="margin-top: 15px;">${ft(f.report.visitReason)}</p>
        </div>`:""}

        ${f.report.clinicalFindings?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Hallazgos de la Evaluación</h3>
          <p style="margin-top: 15px;">${ft(f.report.clinicalFindings)}</p>
        </div>`:""}

        ${f.report.diagnosis?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Diagnóstico</h3>
          <p style="margin-top: 15px;">${ft(f.report.diagnosis)}</p>
        </div>`:""}

        ${f.report.treatmentPerformed?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Tratamiento Realizado</h3>
          <p style="margin-top: 15px;">${ft(f.report.treatmentPerformed)}</p>
        </div>`:""}

        ${f.report.medications?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Medicamentos Prescritos</h3>
          <p style="margin-top: 15px;">${ft(f.report.medications)}</p>
        </div>`:""}

        ${f.report.recommendations?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Recomendaciones para el Hogar</h3>
          <p style="margin-top: 15px;">${ft(f.report.recommendations)}</p>
        </div>`:""}

        ${f.report.followUpInstructions?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Instrucciones de Seguimiento</h3>
          <p style="margin-top: 15px;">${ft(f.report.followUpInstructions)}</p>
          ${f.report.nextAppointment?`<p style="margin-top: 10px;"><strong>Próxima cita:</strong> ${new Date(f.report.nextAppointment).toLocaleDateString("es-CL")}</p>`:""}
        </div>`:""}

        ${f.report.urgentSigns?`
        <div style="border: 1px solid #ffebee; padding: 20px; margin-bottom: 20px; border-radius: 8px; background-color: #ffebee;">
          <h3 style="color: #d32f2f; border-bottom: 2px solid #d32f2f; padding-bottom: 5px;">⚠️ Señales de Alerta</h3>
          <p style="margin-top: 15px; color: #d32f2f; font-weight: 500;">${ft(f.report.urgentSigns)}</p>
          <p style="margin-top: 10px; font-size: 14px; color: #666;">Si observa estos síntomas, contacte inmediatamente al veterinario.</p>
        </div>`:""}

        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; font-size: 12px;">
          <p>Ale Veterinaria - Servicios Veterinarios a Domicilio</p>
          <p>Santiago, Chile</p>
          <p style="margin-top: 10px; font-style: italic;">Este informe ha sido preparado especialmente para el tutor de ${ft(f.patient.name)}</p>
        </div>
      </div>
    `,ie=document.createElement("div");ie.innerHTML=kg.sanitize(V),document.body.appendChild(ie),FE(()=>import("./html2pdf-DcS_3D2N.js").then(oe=>oe.h),[]).then(oe=>{const Ce={margin:1,filename:`informe_tutor_${ft(f.patient.name)}_${new Date().toISOString().split("T")[0]}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};oe.default().from(ie).set(Ce).save().then(()=>{document.body.removeChild(ie),b({title:"Informe generado",description:"El informe para el tutor se ha descargado correctamente"})})})},cr=f=>{const V=`
      <div style="padding: 20px; font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto;">
        <div style="text-align: center; margin-bottom: 30px;">
          <div style="margin-bottom: 20px;">
            <img src="/attached_assets/logo1_1755107256138.png" alt="Ale Veterinaria Logo" style="max-height: 80px; max-width: 200px;" />
          </div>
          <h1 style="color: #5FA98D; margin-bottom: 10px;">Ale Veterinaria</h1>
          <h2 style="color: #333; margin-bottom: 5px;">Informe de Consulta Veterinaria</h2>
          <p style="color: #666;">Fecha: ${f.consultation.date}</p>
        </div>

        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Información del Paciente</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
            <div><strong>Nombre:</strong> ${ft(f.patient.name)}</div>
            <div><strong>Especie:</strong> ${ft(f.patient.species)}</div>
            <div><strong>Raza:</strong> ${ft(f.patient.breed)}</div>
            <div><strong>Edad:</strong> ${ft(f.patient.age)}</div>
            <div><strong>Sexo:</strong> ${ft(f.patient.sex)}</div>
            <div><strong>Peso:</strong> ${ft(f.patient.weight)} kg</div>
          </div>
          <div style="margin-top: 15px;">
            <strong>Tutor:</strong> ${ft(f.patient.ownerName)}<br>
            <strong>Contacto:</strong> ${ft(f.patient.ownerPhone)}
          </div>
        </div>

        ${f.consultation.findings?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Hallazgos Clínicos</h3>
          <p style="margin-top: 15px;">${ft(f.consultation.findings)}</p>
          ${f.consultation.diagnosis?`<div style="margin-top: 15px;"><strong>Diagnóstico:</strong> ${ft(f.consultation.diagnosis)}</div>`:""}
        </div>`:""}

        ${f.nutrition.bcs||f.nutrition.currentWeight?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Evaluación Nutricional</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
            ${f.nutrition.currentWeight?`<div><strong>Peso Actual:</strong> ${ft(f.nutrition.currentWeight)} kg</div>`:""}
            ${f.nutrition.idealWeight?`<div><strong>Peso Ideal:</strong> ${ft(f.nutrition.idealWeight)} kg</div>`:""}
            ${f.nutrition.bcs?`<div><strong>BCS:</strong> ${ft(f.nutrition.bcs)}/9</div>`:""}
            ${f.nutrition.calculatedIdealWeight?`<div><strong>${f.nutrition.bcsMethod==="canine_9_point"?"PIBW":"FBMI"}:</strong> ${ft(f.nutrition.calculatedIdealWeight)} ${f.nutrition.bcsMethod==="canine_9_point"?"kg":""}</div>`:""}
          </div>
          ${f.nutrition.currentFood?`<div style="margin-top: 15px;"><strong>Alimento Actual:</strong> ${ft(f.nutrition.currentFood)} ${f.nutrition.currentFoodBrand?"("+ft(f.nutrition.currentFoodBrand)+")":""}</div>`:""}
        </div>`:""}

        ${f.recommendations.nutritional?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Recomendaciones Nutricionales</h3>
          <p style="margin-top: 15px;">${ft(f.recommendations.nutritional)}</p>
        </div>`:""}

        ${f.prescriptions&&f.prescriptions.length>0?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Prescripciones</h3>
          <div style="margin-top: 15px;">
            ${f.prescriptions.map(oe=>`
              <div style="margin-bottom: 15px; padding: 10px; background-color: #f8f9fa; border-radius: 5px;">
                <strong>${ft(oe.commercialName)}</strong> (${ft(oe.activeIngredient)})<br>
                <small style="color: #666;">
                  Dosis: ${ft(oe.dosage)} | Frecuencia: ${ft(oe.frequency)} | Duración: ${ft(oe.duration)}<br>
                  Vía: ${ft(oe.administrationRoute)}
                  ${oe.specialInstructions?" | "+ft(oe.specialInstructions):""}
                </small>
              </div>
            `).join("")}
          </div>
        </div>`:""}

        ${f.recommendations.followUp?`
        <div style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
          <h3 style="color: #5FA98D; border-bottom: 2px solid #5FA98D; padding-bottom: 5px;">Seguimiento</h3>
          <p style="margin-top: 15px;"><strong>Próximo control:</strong> ${new Date(f.recommendations.followUp).toLocaleDateString("es-CL")}</p>
        </div>`:""}

        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; font-size: 12px;">
          <p>Médico Veterinario: ${ft(f.consultation.veterinarian)}</p>
          <p>Ale Veterinaria - Servicios Veterinarios a Domicilio</p>
          <p>Santiago, Chile</p>
        </div>
      </div>
    `,ie=document.createElement("div");ie.innerHTML=kg.sanitize(V),document.body.appendChild(ie),FE(()=>import("./html2pdf-DcS_3D2N.js").then(oe=>oe.h),[]).then(oe=>{const Ce={margin:1,filename:`informe_consulta_${ft(f.patient.name)}_${new Date().toISOString().split("T")[0]}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};oe.default().from(ie).set(Ce).save().then(()=>{document.body.removeChild(ie),b({title:"Informe generado",description:"El informe de consulta se ha descargado correctamente"})})})},[jr,Yr]=y.useState(!1),{data:Ie,refetch:ic}=Qt({queryKey:["/api/pets",s==null?void 0:s.id],enabled:!!(s!=null&&s.id),queryFn:async()=>{if(!(s!=null&&s.id))return null;try{let f=await fetch(`/api/pets/${s.id}`);return f.ok?await f.json():(f=await fetch(`/api/patients/${s.id}`),f.ok?await f.json():s)}catch(f){return console.error("Error fetching patient data:",f),s}}}),{data:ai=[]}=Qt({queryKey:["/api/medical-records/pet",s==null?void 0:s.id],enabled:!!(s!=null&&s.id),queryFn:async()=>{if(!(s!=null&&s.id))return[];try{let f=await fetch(`/api/medical-records/pet/${s.id}`);if(f.ok){const V=await f.json();if(V.length>0)return V}return f=await fetch(`/api/medical-records/firebase/pet/${s.id}`),f.ok?await f.json():[]}catch(f){return console.error("Error fetching medical records:",f),[]}}}),{data:Wi=[]}=Qt({queryKey:["/api/vaccinations/pet",s==null?void 0:s.id],enabled:!!(s!=null&&s.id),queryFn:async()=>{if(!(s!=null&&s.id))return[];try{let f=await fetch(`/api/vaccinations/pet/${s.id}`);if(f.ok){const V=await f.json();if(V.length>0)return V}return f=await fetch(`/api/vaccinations/firebase/pet/${s.id}`),f.ok?await f.json():[]}catch(f){return console.error("Error fetching vaccinations:",f),[]}}}),{data:Uo=[]}=Qt({queryKey:["/api/prescriptions/pet",s==null?void 0:s.id],enabled:!!(s!=null&&s.id),queryFn:async()=>{if(!(s!=null&&s.id))return[];try{let f=await fetch(`/api/prescriptions/pet/${s.id}`);if(f.ok){const V=await f.json();if(V.length>0)return V}return f=await fetch(`/api/prescriptions/firebase/pet/${s.id}`),f.ok?await f.json():[]}catch(f){return console.error("Error fetching prescriptions:",f),[]}}}),{data:zo=[]}=Qt({queryKey:["/api/certificates/pet",s==null?void 0:s.id],enabled:!!(s!=null&&s.id),queryFn:async()=>{if(!(s!=null&&s.id))return[];try{let f=await fetch(`/api/certificates/pet/${s.id}`);if(f.ok){const V=await f.json();if(V.length>0)return V}return f=await fetch(`/api/certificates/firebase/pet/${s.id}`),f.ok?await f.json():[]}catch(f){return console.error("Error fetching certificates:",f),[]}}}),{data:ac=[]}=Qt({queryKey:["/api/exam-documents/pet",s==null?void 0:s.id],enabled:!!(s!=null&&s.id),queryFn:async()=>{if(!(s!=null&&s.id))return[];try{const f=await fetch(`/api/exam-documents/pet/${s.id}`);return f.ok?await f.json():[]}catch(f){return console.error("Error fetching exam documents:",f),[]}}}),{data:oi=[]}=Qt({queryKey:["/api/dewormings/pet",s==null?void 0:s.id],enabled:!!(s!=null&&s.id),queryFn:async()=>{if(!(s!=null&&s.id))return[];try{let f=await fetch(`/api/dewormings/pet/${s.id}`);if(f.ok){const V=await f.json();if(V.length>0)return V}return f=await fetch(`/api/dewormings/firebase/pet/${s.id}`),f.ok?await f.json():[]}catch(f){return console.error("Error fetching deworming records:",f),[]}}}),oc=jt({mutationFn:f=>Xt("/api/pets","POST",f),onSuccess:()=>{b({title:"Paciente creado exitosamente"}),u("search"),ge({tutorName:"",tutorRut:"",tutorPhone:"",tutorPhone2:"",tutorEmail:"",tutorCity:"",tutorAddress:"",name:"",species:"Canino",breed:"",sex:"Macho",reproductiveStatus:"Entero",birthDate:"",colorMarkings:"",microchip:"",weight:"",origin:"Adopción"})},onError:()=>{b({title:"Error",description:"No se pudo crear el paciente",variant:"destructive"})}}),uu=jt({mutationFn:f=>Xt("/api/medical-records","POST",f),onSuccess:()=>{b({title:"Consulta registrada exitosamente"}),S.invalidateQueries({queryKey:["/api/medical-records/pet",s==null?void 0:s.id]}),Ht({consultationDate:new Date().toISOString().split("T")[0],consultationReason:"",anamnesis:"",respiratoryRate:"",weight:"",temperature:"",capillaryRefillTime:"",heartRate:"",mucosaColor:"",physicalExamination:"",physicalExamFindings:"",presumptiveDiagnosis:"",therapeuticPlan:"",additionalNotes:"",nextAppointment:""})},onError:()=>{b({title:"Error",description:"No se pudo registrar la consulta",variant:"destructive"})}}),hu=jt({mutationFn:f=>Xt("/api/prescriptions","POST",f),onSuccess:f=>{b({title:"Receta guardada exitosamente"}),S.invalidateQueries({queryKey:["/api/prescriptions/pet",s==null?void 0:s.id]}),Bn({medications:[],indications:"",warnings:"",specialInstructions:"",issueDate:new Date().toISOString().split("T")[0]}),setTimeout(()=>{h0(s,f)},500)},onError:()=>{b({title:"Error",description:"No se pudo guardar la receta",variant:"destructive"})}}),af=jt({mutationFn:f=>Xt(`/api/exam-documents/${f}`,"DELETE"),onSuccess:()=>{b({title:"Documento de examen eliminado exitosamente"}),S.invalidateQueries({queryKey:["/api/exam-documents/pet",s==null?void 0:s.id]}),C(null)},onError:()=>{b({title:"Error",description:"No se pudo eliminar el documento",variant:"destructive"})}}),lc=jt({mutationFn:f=>Xt("/api/vaccinations","POST",f),onSuccess:()=>{b({title:"Vacunación registrada exitosamente"}),S.invalidateQueries({queryKey:["/api/vaccinations/pet",s==null?void 0:s.id]}),cn({vaccineName:"",laboratory:"",batchNumber:"",dose:"",applicationRoute:"Subcutánea",applicationDate:new Date().toISOString().split("T")[0],nextDueDate:"",validityPeriod:"365",validityType:"predefined",customValidityMonths:"",notes:""})},onError:()=>{b({title:"Error",description:"No se pudo registrar la vacunación",variant:"destructive"})}}),pu=jt({mutationFn:f=>Xt("/api/dewormings","POST",f),onSuccess:()=>{b({title:"Desparasitación registrada exitosamente"}),S.invalidateQueries({queryKey:["/api/dewormings/pet",s==null?void 0:s.id]}),In({type:"internal",product:"",activeIngredient:"",dose:"",laboratory:"",batchNumber:"",applicationDate:new Date().toISOString().split("T")[0],nextDueDate:"",duration:"",notes:""})},onError:()=>{b({title:"Error",description:"No se pudo registrar la desparasitación",variant:"destructive"})}}),fs=jt({mutationFn:f=>Xt("/api/certificates","POST",f),onSuccess:f=>{b({title:"Certificado generado exitosamente"}),S.invalidateQueries({queryKey:["/api/certificates/pet",s==null?void 0:s.id]}),zn({certificateType:"health",purpose:"",issueDate:new Date().toISOString().split("T")[0],expiryDate:"",observations:"",additionalInfo:"",microchipType:"implantation"}),setTimeout(async()=>{try{await Pg(s,f,{name:"Dra. Alejandra Cautín Bastías"})}catch(V){console.error("Error generating certificate PDF:",V),b({title:"Error",description:"Error al generar el PDF del certificado",variant:"destructive"})}},500)},onError:()=>{b({title:"Error",description:"No se pudo generar el certificado",variant:"destructive"})}}),Fr=jt({mutationFn:f=>Xt(`/api/patients/firebase/${s==null?void 0:s.id}`,"PUT",f),onSuccess:()=>{b({title:"Paciente actualizado exitosamente"}),l(!1),S.invalidateQueries({queryKey:["/api/patients",s==null?void 0:s.id]}),ic()},onError:()=>{b({title:"Error",description:"No se pudo actualizar el paciente",variant:"destructive"})}}),cc=async f=>{if(f.preventDefault(),!K.name||!K.tutorName||!K.tutorRut){b({title:"Error",description:"Completa los campos requeridos: nombre del paciente, tutor y RUT",variant:"destructive"});return}if(!Mt.isValid){b({title:"Error",description:"RUT inválido: "+Mt.message,variant:"destructive"});return}if(K.birthDate&&!Un.isValid){b({title:"Error",description:"Fecha de nacimiento inválida: "+Un.message,variant:"destructive"});return}if(!K.breed){b({title:"Error",description:"Selecciona una raza",variant:"destructive"});return}const V={...K,ownerId:t==null?void 0:t.uid,createdAt:new Date().toISOString(),name:K.name.toLowerCase(),age:K.birthDate?hc(K.birthDate):""};oc.mutate(V)},dc=async f=>{if(f.preventDefault(),!s||!Pe.consultationReason){b({title:"Error",description:"Completa los campos requeridos",variant:"destructive"});return}const V={petId:s.id,veterinarianId:t==null?void 0:t.uid,date:Pe.consultationDate,type:"consultation",reason:Pe.consultationReason,findings:Pe.physicalExamFindings,diagnosis:Pe.presumptiveDiagnosis,treatment:Pe.therapeuticPlan,notes:Pe.additionalNotes,nextAppointment:Pe.nextAppointment,createdAt:new Date().toISOString()};uu.mutate(V)},of=async f=>{if(f.preventDefault(),console.log("Prescription data:",Zt),console.log("Selected patient:",s),!s||Zt.medications.length===0){b({title:"Error",description:"Agrega al menos un medicamento a la prescripción",variant:"destructive"});return}try{const V=Zt.medications.map(oe=>`${oe.name} - ${oe.dosage} - ${oe.frequency} - ${oe.duration}`).join(`
`),ie={petId:s.id,veterinarianId:(t==null?void 0:t.uid)||"unknown",treatment:V,indications:Zt.indications||"",duration:"",dosage:"",warnings:Zt.warnings||"",createdAt:new Date().toISOString()};console.log("Sending prescription:",ie),hu.mutate(ie)}catch(V){console.error("Error preparing prescription data:",V),b({title:"Error",description:"Error al procesar los datos",variant:"destructive"})}},Lt=async f=>{if(f.preventDefault(),console.log("Vaccination data:",at),console.log("Selected patient:",s),!s||!at.vaccineName){b({title:"Error",description:"Completa los campos requeridos",variant:"destructive"});return}let V;if(at.validityType==="manual"){if(!at.customValidityMonths||parseInt(at.customValidityMonths)<=0){b({title:"Error",description:"Ingresa un número válido de meses para la vigencia manual",variant:"destructive"});return}V=parseInt(at.customValidityMonths)*30}else V=parseInt(at.validityPeriod||"365");try{const ie=new Date(at.applicationDate);ie.setDate(ie.getDate()+V);const oe={petId:s.id,veterinarianId:(t==null?void 0:t.uid)||"unknown",...at,validityPeriod:V,nextDueDate:ie.toISOString().split("T")[0],createdAt:new Date().toISOString()};console.log("Sending vaccination:",oe),lc.mutate(oe)}catch(ie){console.error("Error preparing vaccination data:",ie),b({title:"Error",description:"Error al procesar los datos",variant:"destructive"})}},uc=async f=>{if(f.preventDefault(),console.log("Deworming data:",Ct),console.log("Selected patient:",s),!s||!Ct.product){b({title:"Error",description:"Completa los campos requeridos",variant:"destructive"});return}try{const V=new Date(Ct.applicationDate);V.setMonth(V.getMonth()+3);const ie={petId:s.id,veterinarianId:(t==null?void 0:t.uid)||"unknown",...Ct,nextDueDate:V.toISOString().split("T")[0],createdAt:new Date().toISOString()};console.log("Sending deworming:",ie),pu.mutate(ie)}catch(V){console.error("Error preparing deworming data:",V),b({title:"Error",description:"Error al procesar los datos",variant:"destructive"})}},Bo=async f=>{if(f.preventDefault(),console.log("Certificate data:",zt),console.log("Selected patient:",s),!s||!zt.certificateType){b({title:"Error",description:"Completa los campos requeridos",variant:"destructive"});return}try{const V=new Date(zt.issueDate);switch(zt.certificateType){case"health":V.setDate(V.getDate()+30);break;case"export":V.setDate(V.getDate()+10);break;case"vaccination":V.setFullYear(V.getFullYear()+1);break;case"microchip":V.setFullYear(V.getFullYear()+10);break;default:V.setDate(V.getDate()+30)}const ie={petId:s.id,veterinarianId:(t==null?void 0:t.uid)||"unknown",...zt,expiryDate:V.toISOString().split("T")[0],createdAt:new Date().toISOString()};console.log("Sending certificate:",ie),fs.mutate(ie)}catch(V){console.error("Error preparing certificate data:",V),b({title:"Error",description:"Error al procesar los datos",variant:"destructive"})}},Vo=f=>{const V=rl(f);if(ge(ie=>({...ie,tutorRut:V})),V.length>=9){const ie=Tg(V);ar({isValid:ie.isValid,message:ie.message||""})}else ar({isValid:!0,message:""})},Kv=f=>{if(ge(V=>({...V,birthDate:f})),f){const V=new Date;new Date(f)>V?vn({isValid:!1,message:"La fecha de nacimiento no puede ser futura"}):vn({isValid:!0,message:""})}else vn({isValid:!0,message:""})},hc=f=>f?B1(new Date(f)).formatted:"";return i.jsxs("div",{className:"min-h-screen bg-warm-beige",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"container mx-auto px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:"/assets/logo.png",alt:"Ale Veterinaria Logo",className:"w-8 h-8"}),i.jsxs("h1",{className:"text-xl font-poppins font-bold text-darkgray",children:[i.jsx("span",{className:"text-mint",children:"Ale"})," Veterinaria"]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("span",{className:"text-sm text-gray-600 hidden md:block",children:"Dra. Alejandra Cautín Bastías"}),i.jsx(uh,{href:"/",children:i.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-2","data-testid":"button-home",children:[i.jsx(bm,{className:"w-4 h-4"}),"Volver al Inicio"]})}),i.jsxs(ee,{onClick:()=>{e("/")},variant:"outline",size:"sm",className:"flex items-center gap-2","data-testid":"button-logout",children:[i.jsx(E3,{className:"w-4 h-4"}),"Salir"]})]})]})})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-text-main mb-2",children:"Portal Profesional"}),i.jsx("p",{className:"text-text-muted",children:"Gestión de Pacientes y Consultas Médicas"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-8",children:[i.jsxs(ee,{variant:c==="search"?"default":"outline",onClick:()=>u("search"),className:"flex items-center gap-2",children:[i.jsx(cg,{size:18}),"Buscar Pacientes"]}),i.jsxs(ee,{variant:c==="new-patient"?"default":"outline",onClick:()=>u("new-patient"),className:"flex items-center gap-2",children:[i.jsx(Ts,{size:18}),"Nuevo Paciente"]}),i.jsxs(ee,{variant:c==="schedule-management"?"default":"outline",onClick:()=>u("schedule-management"),className:"flex items-center gap-2",children:[i.jsx(nr,{size:18}),"Gestión de Horarios"]}),i.jsxs(ee,{variant:c==="notifications"?"default":"outline",onClick:()=>u("notifications"),className:"flex items-center gap-2",children:[i.jsx(zk,{size:18}),"Notificaciones"]}),i.jsxs(ee,{variant:c==="calendar-integration"?"default":"outline",onClick:()=>u("calendar-integration"),className:"flex items-center gap-2 relative",children:[i.jsx(Db,{size:18}),"Google Calendar",i.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-amber-500"})]})]}),s&&i.jsxs(i.Fragment,{children:[i.jsxs(ee,{variant:c==="patient-hub"?"default":"outline",onClick:()=>u("patient-hub"),className:"flex items-center gap-2",children:[i.jsx(is,{size:18}),"Ficha: ",s.name]}),i.jsxs(ee,{variant:c==="nutrition"?"default":"outline",onClick:()=>u("nutrition"),className:"flex items-center gap-2",children:[i.jsx(dS,{size:18}),"Nutrición"]}),i.jsxs(ee,{variant:c==="consultation"?"default":"outline",onClick:()=>u("consultation"),className:"flex items-center gap-2",children:[i.jsx(pS,{size:18}),"Nueva Consulta"]}),i.jsxs(ee,{variant:c==="vaccination"?"default":"outline",onClick:()=>u("vaccination"),className:"flex items-center gap-2",children:[i.jsx(tl,{size:18}),"Vacunar"]}),i.jsxs(ee,{variant:c==="deworming"?"default":"outline",onClick:()=>u("deworming"),className:"flex items-center gap-2",children:[i.jsx(Gc,{size:18}),"Desparasitar"]}),i.jsxs(ee,{variant:c==="report"?"default":"outline",onClick:()=>u("report"),className:"flex items-center gap-2",children:[i.jsx(xn,{size:18}),"Informe de Atención"]}),i.jsxs(ee,{variant:c==="certificate"?"default":"outline",onClick:()=>u("certificate"),className:"flex items-center gap-2",children:[i.jsx(Oc,{size:18}),"Certificado"]}),i.jsxs(ee,{variant:c==="prescription"?"default":"outline",onClick:()=>u("prescription"),className:"flex items-center gap-2",children:[i.jsx(xn,{size:18}),"Receta Médica"]}),i.jsxs(ee,{variant:c==="exam-order"?"default":"outline",onClick:()=>u("exam-order"),className:"flex items-center gap-2",children:[i.jsx(hS,{size:18}),"Orden de Exámenes"]}),i.jsxs(ee,{variant:c==="exam-documents"?"default":"outline",onClick:()=>u("exam-documents"),className:"flex items-center gap-2",children:[i.jsx(xn,{size:18}),"Subir Exámenes"]})]})]}),c==="search"&&i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(cg,{size:20}),"Búsqueda de Pacientes"]}),i.jsx(Jt,{children:"Busca usando múltiples criterios independientes"})]}),i.jsx(De,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsx(J,{placeholder:"Ingrese término de búsqueda...",value:n,onChange:f=>r(f.target.value),className:"flex-1","data-testid":"input-search-term"}),i.jsx(ee,{onClick:()=>{r(""),p([])},variant:"outline","data-testid":"button-clear-search",children:"Limpiar"})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[i.jsxs(ee,{onClick:async()=>{if(n.trim())try{const f=await fetch(`/api/search/patients/${n}`);if(f.ok){const V=await f.json();p(V)}}catch(f){console.error("Error searching by name:",f)}},variant:"outline",className:"flex items-center gap-2 border-mint text-mint hover:bg-mint hover:text-white","data-testid":"button-search-name",disabled:!n.trim(),children:[i.jsx(is,{size:16}),"Por Nombre"]}),i.jsxs(ee,{onClick:async()=>{if(n.trim())try{const f=n.replace(/[.-]/g,""),V=await fetch(`/api/pets/rut/${f}`);if(V.ok){const ie=await V.json();p(ie)}}catch(f){console.error("Error searching by RUT:",f)}},variant:"outline",className:"flex items-center gap-2 border-turquoise text-turquoise hover:bg-turquoise hover:text-white","data-testid":"button-search-rut",disabled:!n.trim(),children:[i.jsx(xn,{size:16}),"Por RUT"]}),i.jsxs(ee,{onClick:async()=>{if(n.trim())try{let f=await fetch(`/api/pets/${n}`);if(f.ok||(f=await fetch(`/api/patients/${n}`)),f.ok){const V=await f.json();p(V?[V]:[])}}catch(f){console.error("Error searching by record:",f)}},variant:"outline",className:"flex items-center gap-2 border-lavender text-lavender hover:bg-lavender hover:text-white","data-testid":"button-search-record",disabled:!n.trim(),children:[i.jsx(xn,{size:16}),"Por Ficha"]}),i.jsxs(ee,{onClick:async()=>{if(n.trim())try{const f=await fetch(`/api/search/patients/tutor/${n}`);if(f.ok){const V=await f.json();p(V)}else{const V=await fetch(`/api/search/patients/${n}`);if(V.ok){const oe=(await V.json()).filter(Ce=>{var Ze;return(Ze=Ce.tutorName)==null?void 0:Ze.toLowerCase().includes(n.toLowerCase())});p(oe)}}}catch(f){console.error("Error searching by tutor:",f)}},variant:"outline",className:"flex items-center gap-2 border-palerose text-palerose hover:bg-palerose hover:text-white","data-testid":"button-search-tutor",disabled:!n.trim(),children:[i.jsx(is,{size:16}),"Por Tutor"]})]}),jr&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-mint mx-auto"}),i.jsx("p",{className:"mt-2 text-text-muted",children:"Buscando..."})]}),h.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-semibold text-lg",children:["Resultados encontrados (",h.length,")"]}),i.jsx("div",{className:"grid gap-4",children:h.map(f=>i.jsx(Ae,{className:"cursor-pointer hover:shadow-md transition-shadow","data-testid":`card-patient-${f.id}`,children:i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg capitalize",children:f.name}),i.jsxs("p",{className:"text-text-muted",children:["Ficha Nº ",f.id]}),i.jsxs("p",{className:"text-sm text-text-muted",children:[f.species," - ",f.breed]}),i.jsxs("p",{className:"text-sm text-text-muted",children:["Tutor: ",f.tutorName," ",f.ownerId&&`(RUT: ${f.ownerId})`]}),f.age&&i.jsxs("p",{className:"text-sm text-text-muted",children:["Edad: ",f.age]})]}),i.jsx(ee,{onClick:()=>{a(f),u("patient-hub")},className:"bg-mint hover:bg-mint-dark","data-testid":`button-view-patient-${f.id}`,children:"Ver Ficha"})]})})},f.id))})]}),n.length>=1&&!jr&&h.length===0&&i.jsx("div",{className:"text-center py-8",children:i.jsxs("p",{className:"text-text-muted",children:["No se encontraron pacientes.",i.jsx("br",{}),i.jsx("span",{className:"text-sm",children:"Prueba con otros términos o usa los botones de búsqueda específicos."})]})})]})})]}),c==="new-patient"&&i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(Ts,{size:20}),"Registrar Nuevo Paciente"]})}),i.jsx(De,{children:i.jsxs("form",{onSubmit:cc,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-mint",children:"Datos del Tutor"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nombre Completo *"}),i.jsx(J,{value:K.tutorName,onChange:f=>ge({...K,tutorName:f.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"RUT *"}),i.jsx(J,{value:K.tutorRut,onChange:f=>Vo(f.target.value),placeholder:"12345678-9",className:Mt.isValid?"":"border-red-500"}),!Mt.isValid&&i.jsxs("p",{className:"text-sm text-red-500 mt-1",children:[i.jsx(ji,{className:"inline w-4 h-4 mr-1"}),Mt.message]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Teléfono Principal"}),i.jsx(J,{value:K.tutorPhone,onChange:f=>ge({...K,tutorPhone:f.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),i.jsx(J,{type:"email",value:K.tutorEmail,onChange:f=>ge({...K,tutorEmail:f.target.value})})]}),i.jsxs("div",{className:"space-y-4 mt-6",children:[i.jsx("h4",{className:"font-medium text-mint",children:"Dirección del Tutor"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Región *"}),i.jsxs(Ue,{value:K.tutorRegion,onValueChange:f=>{ge({...K,tutorRegion:f,tutorComuna:""})},children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona una región"})}),i.jsx(Me,{children:i0().map(f=>i.jsx(W,{value:f,children:f},f))})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Comuna *"}),i.jsxs(Ue,{value:K.tutorComuna,onValueChange:f=>ge({...K,tutorComuna:f}),disabled:!K.tutorRegion,children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:K.tutorRegion?"Selecciona una comuna":"Primero selecciona región"})}),i.jsx(Me,{children:K.tutorRegion&&a0(K.tutorRegion).map(f=>i.jsx(W,{value:f,children:f},f))})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Calle/Avenida *"}),i.jsx(J,{value:K.tutorAddress,onChange:f=>ge({...K,tutorAddress:f.target.value}),placeholder:"Ej: Avenida Providencia, Calle Santa Rosa"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Número *"}),i.jsx(J,{value:K.tutorHouseNumber,onChange:f=>ge({...K,tutorHouseNumber:f.target.value}),placeholder:"123"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Depto/Oficina (opcional)"}),i.jsx(J,{value:K.tutorApartmentNumber,onChange:f=>ge({...K,tutorApartmentNumber:f.target.value}),placeholder:"101, A, etc."})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Ciudad (opcional)"}),i.jsx(J,{value:K.tutorCity,onChange:f=>ge({...K,tutorCity:f.target.value}),placeholder:"Solo si es diferente a la comuna"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-mint",children:"Datos del Paciente"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nombre *"}),i.jsx(J,{value:K.name,onChange:f=>ge({...K,name:f.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Especie"}),i.jsxs(Ue,{value:K.species,onValueChange:f=>ge({...K,species:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona especie"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Canino",children:"Canino"}),i.jsx(W,{value:"Felino",children:"Felino"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Raza *"}),i.jsxs(Ue,{value:K.breed,onValueChange:f=>ge({...K,breed:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona una raza"})}),i.jsx(Me,{children:it.map(f=>i.jsx(W,{value:f.name,children:f.name},f.id))})]}),!K.breed&&i.jsxs("p",{className:"text-sm text-red-500 mt-1",children:[i.jsx(ji,{className:"inline w-4 h-4 mr-1"}),"Selecciona una raza para continuar"]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Sexo"}),i.jsxs(Ue,{value:K.sex,onValueChange:f=>ge({...K,sex:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona el sexo"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Macho",children:"Macho"}),i.jsx(W,{value:"Hembra",children:"Hembra"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Fecha de Nacimiento"}),i.jsx(J,{type:"date",value:K.birthDate,onChange:f=>Kv(f.target.value),className:Un.isValid?"":"border-red-500"}),K.birthDate&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Edad: ",hc(K.birthDate)]}),!Un.isValid&&i.jsxs("p",{className:"text-sm text-red-500 mt-1",children:[i.jsx(ji,{className:"inline w-4 h-4 mr-1"}),Un.message]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Peso"}),i.jsx(J,{value:K.weight,onChange:f=>ge({...K,weight:f.target.value}),placeholder:"3.5 kg"})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{type:"button",variant:"outline",onClick:()=>u("search"),children:"Cancelar"}),i.jsx(ee,{type:"submit",className:"bg-mint hover:bg-mint-dark",disabled:oc.isPending,children:oc.isPending?"Guardando...":"Guardar Paciente"})]})]})})]}),c==="patient-hub"&&s&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(is,{size:20}),"Ficha Nº ",(Ie||s).id," - ",(Ie||s).name]}),i.jsx(Jt,{children:Ie?"Datos cargados correctamente":"Usando datos desde navegación"})]}),i.jsxs(De,{children:[!Ie&&s&&i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-mint"}),i.jsx("span",{className:"ml-2",children:"Cargando datos del paciente..."})]}),(Ie||s)&&i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-mint mb-3",children:"Información del Paciente"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Nombre:"})," ",i.jsx("span",{className:"capitalize",children:(Ie||s).name})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Especie:"})," ",(Ie||s).species]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Raza:"})," ",(Ie||s).breed||"No especificada"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Sexo:"})," ",(Ie||s).sex]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Edad:"})," ",(Ie||s).birthDate?hc((Ie||s).birthDate):(Ie||s).age||"No especificada"]}),(Ie||s).birthDate&&i.jsxs("p",{children:[i.jsx("strong",{children:"Fecha Nacimiento:"})," ",UB((Ie||s).birthDate)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Peso:"})," ",(Ie||s).weight||"No especificado"]}),(Ie||s).microchip&&i.jsxs("p",{children:[i.jsx("strong",{children:"Microchip:"})," ",(Ie||s).microchip]}),(Ie||s).reproductiveStatus&&i.jsxs("p",{children:[i.jsx("strong",{children:"Estado Reproductivo:"})," ",(Ie||s).reproductiveStatus]}),(Ie||s).colorMarkings&&i.jsxs("p",{children:[i.jsx("strong",{children:"Color/Marcas:"})," ",(Ie||s).colorMarkings]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-mint mb-3",children:"Información del Tutor"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"flex items-center gap-2",children:[i.jsx(is,{size:16}),i.jsx("strong",{children:"Nombre:"})," ",(Ie||s).tutorName||"No especificado"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"RUT:"})," ",(Ie||s).tutorRut||(Ie||s).ownerId||"No especificado"]}),(Ie||s).tutorPhone&&i.jsxs("p",{className:"flex items-center gap-2",children:[i.jsx(Mb,{size:16}),i.jsx("strong",{children:"Teléfono:"})," ",(Ie||s).tutorPhone]}),(Ie||s).tutorEmail&&i.jsxs("p",{className:"flex items-center gap-2",children:[i.jsx(Vk,{size:16}),i.jsx("strong",{children:"Email:"})," ",(Ie||s).tutorEmail]}),(Ie||s).tutorCity&&i.jsxs("p",{className:"flex items-center gap-2",children:[i.jsx(Fb,{size:16}),i.jsx("strong",{children:"Ciudad:"})," ",(Ie||s).tutorCity]}),(Ie||s).tutorAddress&&i.jsxs("p",{className:"flex items-center gap-2",children:[i.jsx(Fb,{size:16}),i.jsx("strong",{children:"Dirección:"})," ",(Ie||s).tutorAddress]})]})]})]}),i.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded text-xs",children:[i.jsx("p",{children:i.jsx("strong",{children:"Debug Info:"})}),i.jsxs("p",{children:["selectedPatient ID: ",s==null?void 0:s.id]}),i.jsxs("p",{children:["patientData available: ",Ie?"Yes":"No"]}),i.jsxs("p",{children:["Data source: ",Ie?"API Query":"Session Storage"]})]})]})]}),i.jsxs("div",{className:"flex gap-4 mb-6",children:[i.jsxs(ee,{onClick:()=>l(!0),variant:"outline",className:"flex items-center gap-2",children:[i.jsx(xn,{size:16}),"Editar Datos"]}),!N&&i.jsxs(ee,{onClick:()=>w(!0),variant:"outline",className:"flex items-center gap-2",children:[i.jsx(nr,{size:16}),"Gestionar Citas"]})]}),N&&s&&i.jsxs(Ae,{className:"mb-6",children:[i.jsx(Le,{children:i.jsxs(Be,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(nr,{size:20}),m?"Editar Cita":"Gestión de Citas"]}),i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{w(!1),x(null)},children:"Cerrar"})]})}),i.jsx(De,{children:i.jsx(z1,{tutorRut:s.tutorRut||s.ownerId||"",pets:[s]})})]}),o&&i.jsxs(Ae,{className:"mb-6",children:[i.jsx(Le,{children:i.jsx(Be,{children:"Editar Información Completa"})}),i.jsx(De,{children:i.jsxs("form",{onSubmit:f=>{f.preventDefault(),Fr.mutate(s)},className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg mb-4 text-mint",children:"Datos del Tutor"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Nombre Completo"}),i.jsx(J,{value:s.tutorName||"",onChange:f=>a({...s,tutorName:f.target.value}),placeholder:"Nombre completo del tutor"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"RUT"}),i.jsx(J,{value:s.tutorRut||"",onChange:f=>a({...s,tutorRut:f.target.value}),placeholder:"12.345.678-9"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Teléfono Principal"}),i.jsx(J,{value:s.tutorPhone||"",onChange:f=>a({...s,tutorPhone:f.target.value}),placeholder:"+56 9 1234 5678"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Email"}),i.jsx(J,{type:"email",value:s.tutorEmail||"",onChange:f=>a({...s,tutorEmail:f.target.value}),placeholder:"correo@ejemplo.com"})]})]}),i.jsxs("div",{className:"space-y-4 mt-6",children:[i.jsx("h4",{className:"font-medium text-mint",children:"Dirección del Tutor"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Región"}),i.jsxs(Ue,{value:s.tutorRegion||"",onValueChange:f=>{a({...s,tutorRegion:f,tutorComuna:""})},children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona una región"})}),i.jsx(Me,{children:i0().map(f=>i.jsx(W,{value:f,children:f},f))})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Comuna"}),i.jsxs(Ue,{value:s.tutorComuna||"",onValueChange:f=>a({...s,tutorComuna:f}),disabled:!s.tutorRegion,children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:s.tutorRegion?"Selecciona una comuna":"Primero selecciona región"})}),i.jsx(Me,{children:s.tutorRegion&&a0(s.tutorRegion).map(f=>i.jsx(W,{value:f,children:f},f))})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Calle/Avenida"}),i.jsx(J,{value:s.tutorAddress||"",onChange:f=>a({...s,tutorAddress:f.target.value}),placeholder:"Ej: Avenida Providencia, Calle Santa Rosa"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Número"}),i.jsx(J,{value:s.tutorHouseNumber||"",onChange:f=>a({...s,tutorHouseNumber:f.target.value}),placeholder:"123"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Depto/Oficina"}),i.jsx(J,{value:s.tutorApartmentNumber||"",onChange:f=>a({...s,tutorApartmentNumber:f.target.value}),placeholder:"101, A, etc."})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Ciudad"}),i.jsx(J,{value:s.tutorCity||"",onChange:f=>a({...s,tutorCity:f.target.value}),placeholder:"Solo si es diferente a la comuna"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg mb-4 text-mint",children:"Datos del Paciente"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Nombre"}),i.jsx(J,{value:s.name||"",onChange:f=>a({...s,name:f.target.value}),placeholder:"Nombre de la mascota"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Peso"}),i.jsx(J,{value:s.weight||"",onChange:f=>a({...s,weight:f.target.value}),placeholder:"4.5 kg"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Sexo"}),i.jsxs(Ue,{value:s.sex||"Macho",onValueChange:f=>a({...s,sex:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Macho",children:"Macho"}),i.jsx(W,{value:"Hembra",children:"Hembra"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Estado Reproductivo"}),i.jsxs(Ue,{value:s.reproductiveStatus||"Entero",onValueChange:f=>a({...s,reproductiveStatus:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Entero",children:"Entero"}),i.jsx(W,{value:"Castrado",children:"Castrado"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Fecha de Nacimiento"}),i.jsx(J,{type:"date",value:s.birthDate||"",onChange:f=>a({...s,birthDate:f.target.value})})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Microchip"}),i.jsx(J,{value:s.microchip||"",onChange:f=>a({...s,microchip:f.target.value}),placeholder:"Número de microchip"})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Señas Particulares"}),i.jsx(J,{value:s.colorMarkings||"",onChange:f=>a({...s,colorMarkings:f.target.value}),placeholder:"Color, marcas distintivas..."})]}),i.jsxs("div",{children:[i.jsx(Y,{className:"block text-sm font-medium mb-1",children:"Origen"}),i.jsxs(Ue,{value:s.origin||"Particular",onValueChange:f=>a({...s,origin:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Particular",children:"Particular"}),i.jsx(W,{value:"Adopción",children:"Adopción"}),i.jsx(W,{value:"Refugio",children:"Refugio"}),i.jsx(W,{value:"Criadero",children:"Criadero"})]})]})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),i.jsx(ee,{type:"submit",className:"bg-mint hover:bg-mint-dark",disabled:Fr.isPending,children:Fr.isPending?"Guardando...":"Guardar Cambios"})]})]})})]}),i.jsxs(Ae,{children:[i.jsx(Le,{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>le("consultations"),children:i.jsxs(Be,{className:"flex items-center justify-between",children:[i.jsxs("span",{children:["Historial Médico (",ai.length,")"]}),v.consultations?i.jsx(qu,{size:20}):i.jsx(Fc,{size:20})]})}),v.consultations&&i.jsx(De,{children:ai.length>0?i.jsx("div",{className:"space-y-4",children:ai.map(f=>i.jsx("div",{className:"border-l-4 border-mint pl-4 py-2",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:f.date}),i.jsx("p",{className:"text-sm text-text-muted",children:f.reason||f.type}),f.diagnosis&&i.jsxs("p",{className:"mt-1",children:[i.jsx("strong",{children:"Diagnóstico:"})," ",f.diagnosis]}),f.treatment&&i.jsxs("p",{className:"mt-1",children:[i.jsx("strong",{children:"Tratamiento:"})," ",f.treatment]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($r,{variant:"outline",children:"Consulta"}),i.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>{confirm("¿Eliminar esta consulta médica?")&&Ta.mutate(f.id)},className:"text-red-500 hover:text-red-700",children:i.jsx(ui,{size:14})})]})]})},f.id))}):i.jsx("p",{className:"text-text-muted text-center py-8",children:"No hay registros médicos."})})]}),i.jsxs(Ae,{children:[i.jsx(Le,{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>le("prescriptions"),children:i.jsxs(Be,{className:"flex items-center justify-between",children:[i.jsxs("span",{children:["Historial de Recetas (",Uo.length,")"]}),v.prescriptions?i.jsx(qu,{size:20}):i.jsx(Fc,{size:20})]})}),v.prescriptions&&i.jsx(De,{children:Uo.length>0?i.jsx("div",{className:"space-y-4",children:Uo.map(f=>i.jsx("div",{className:"border-l-4 border-turquoise pl-4 py-2",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:f.treatment}),i.jsx("p",{className:"text-sm text-text-muted",children:new Date(f.createdAt).toLocaleDateString()}),f.indications&&i.jsxs("p",{className:"mt-1",children:[i.jsx("strong",{children:"Indicaciones:"})," ",f.indications]}),f.duration&&i.jsxs("p",{className:"mt-1",children:[i.jsx("strong",{children:"Duración:"})," ",f.duration]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($r,{variant:"outline",children:"Receta"}),i.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>h0(s,f),children:i.jsx(el,{size:14})}),i.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>{confirm("¿Eliminar esta receta?")&&$o.mutate(f.id)},className:"text-red-500 hover:text-red-700",children:i.jsx(ui,{size:14})})]})]})},f.id))}):i.jsx("p",{className:"text-text-muted text-center py-8",children:"No hay recetas registradas."})})]}),i.jsxs(Ae,{children:[i.jsxs(Le,{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>le("vaccinations"),children:[i.jsxs(Be,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tl,{size:20}),"Control de Vacunas y Desparasitación (",Wi.length+oi.length,")"]}),v.vaccinations?i.jsx(qu,{size:20}):i.jsx(Fc,{size:20})]}),i.jsx(Jt,{children:"Seguimiento completo del esquema preventivo"})]}),v.vaccinations&&i.jsx(De,{children:i.jsxs(u0,{defaultValue:"vaccinations",className:"w-full",children:[i.jsxs(Ag,{className:"grid w-full grid-cols-2",children:[i.jsxs(rs,{value:"vaccinations",className:"flex items-center gap-2",children:[i.jsx(tl,{size:16}),"Vacunas"]}),i.jsxs(rs,{value:"deworming",className:"flex items-center gap-2",children:[i.jsx(Gc,{size:16}),"Desparasitación"]})]}),i.jsx(ss,{value:"vaccinations",className:"mt-6",children:Wi.length>0?i.jsxs("div",{className:"space-y-4",children:[(()=>{const f=new Date,V=Wi.filter(oe=>oe.nextDueDate?new Date(oe.nextDueDate)<f:!1),ie=Wi.filter(oe=>{if(!oe.nextDueDate)return!1;const Ce=new Date(oe.nextDueDate),Ze=new Date;return Ze.setDate(Ze.getDate()+7),Ce>=f&&Ce<=Ze});return i.jsxs(i.Fragment,{children:[V.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-red-800 font-semibold mb-2",children:[i.jsx(ji,{size:18}),"Vacunas Atrasadas (",V.length,")"]}),i.jsx("div",{className:"space-y-1",children:V.map(oe=>i.jsxs("p",{className:"text-sm text-red-700",children:["• ",oe.vaccineName," - Vencida el ",new Date(oe.nextDueDate).toLocaleDateString("es-CL")]},oe.id))})]}),ie.length>0&&i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-amber-800 font-semibold mb-2",children:[i.jsx(nr,{size:18}),"Próximas Vacunas (",ie.length,")"]}),i.jsx("div",{className:"space-y-1",children:ie.map(oe=>i.jsxs("p",{className:"text-sm text-amber-700",children:["• ",oe.vaccineName," - Programada para el ",new Date(oe.nextDueDate).toLocaleDateString("es-CL")]},oe.id))})]})]})})(),i.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b",children:i.jsx("h4",{className:"font-semibold text-gray-800",children:"Registro de Vacunas"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Vacuna"}),i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Fecha Aplicación"}),i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Laboratorio"}),i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Próxima Dosis"}),i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Estado"}),i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Acciones"})]})}),i.jsx("tbody",{children:Wi.map(f=>{const V=new Date,ie=f.nextDueDate?new Date(f.nextDueDate):null;let oe="vigente",Ce="bg-green-100 text-green-800";return ie&&(ie<V?(oe="vencida",Ce="bg-red-100 text-red-800"):ie<=new Date(V.getTime()+7*24*60*60*1e3)&&(oe="próxima",Ce="bg-amber-100 text-amber-800")),i.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3 font-medium",children:f.vaccineName}),i.jsx("td",{className:"px-4 py-3",children:new Date(f.applicationDate).toLocaleDateString("es-CL")}),i.jsx("td",{className:"px-4 py-3",children:f.laboratory||"-"}),i.jsx("td",{className:"px-4 py-3",children:ie?ie.toLocaleDateString("es-CL"):"-"}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ce}`,children:oe})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>{confirm("¿Eliminar esta vacuna?")&&nc.mutate(f.id)},className:"text-red-500 hover:text-red-700",children:i.jsx(ui,{size:14})})})]},f.id)})})]})})]})]}):i.jsx("p",{className:"text-text-muted text-center py-8",children:"No hay vacunas registradas."})}),i.jsx(ss,{value:"deworming",className:"mt-6",children:oi&&oi.length>0?i.jsxs("div",{className:"space-y-4",children:[(()=>{const f=new Date,V=oi.filter(oe=>oe.nextDueDate?new Date(oe.nextDueDate)<f:!1),ie=oi.filter(oe=>{if(!oe.nextDueDate)return!1;const Ce=new Date(oe.nextDueDate),Ze=new Date;return Ze.setDate(Ze.getDate()+14),Ce>=f&&Ce<=Ze});return i.jsxs(i.Fragment,{children:[V.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-red-800 font-semibold mb-2",children:[i.jsx(ji,{size:18}),"Desparasitación Atrasada (",V.length,")"]}),i.jsx("div",{className:"space-y-1",children:V.map(oe=>i.jsxs("p",{className:"text-sm text-red-700",children:["• ",oe.product||"Desparasitante"," - Vencida el ",new Date(oe.nextDueDate).toLocaleDateString("es-CL")]},oe.id))})]}),ie.length>0&&i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-amber-800 font-semibold mb-2",children:[i.jsx(nr,{size:18}),"Próxima Desparasitación (",ie.length,")"]}),i.jsx("div",{className:"space-y-1",children:ie.map(oe=>i.jsxs("p",{className:"text-sm text-amber-700",children:["• ",oe.product||"Desparasitante"," - Programada para el ",new Date(oe.nextDueDate).toLocaleDateString("es-CL")]},oe.id))})]})]})})(),i.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b",children:i.jsx("h4",{className:"font-semibold text-gray-800",children:"Registro de Desparasitación"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Producto"}),i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Principio Activo"}),i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Fecha Aplicación"}),i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Duración"}),i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Próxima Dosis"}),i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Estado"}),i.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold",children:"Acciones"})]})}),i.jsx("tbody",{children:oi.map(f=>{const V=new Date,ie=f.nextDueDate?new Date(f.nextDueDate):null;let oe="vigente",Ce="bg-green-100 text-green-800";ie&&(ie<V?(oe="vencida",Ce="bg-red-100 text-red-800"):ie<=new Date(V.getTime()+14*24*60*60*1e3)&&(oe="próxima",Ce="bg-amber-100 text-amber-800"));const Ze=ut=>({"1-month":"1 mes","3-months":"3 meses","4-months":"4 meses","6-months":"6 meses",custom:"Personalizada"})[ut]||ut||"-";return i.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3 font-medium",children:f.product||"-"}),i.jsx("td",{className:"px-4 py-3",children:f.activeIngredient||"-"}),i.jsx("td",{className:"px-4 py-3",children:new Date(f.applicationDate).toLocaleDateString("es-CL")}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Ze(f.duration)}),i.jsx("td",{className:"px-4 py-3",children:ie?ie.toLocaleDateString("es-CL"):"-"}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ce}`,children:oe})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>{confirm("¿Eliminar esta desparasitación?")&&or.mutate(f.id)},className:"text-red-500 hover:text-red-700",children:i.jsx(ui,{size:14})})})]},f.id)})})]})})]})]}):i.jsx("p",{className:"text-text-muted text-center py-8",children:"No hay registros de desparasitación."})})]})})]}),i.jsxs(Ae,{children:[i.jsx(Le,{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>le("certificates"),children:i.jsxs(Be,{className:"flex items-center justify-between",children:[i.jsxs("span",{children:["Historial de Certificados (",zo.length,")"]}),v.certificates?i.jsx(qu,{size:20}):i.jsx(Fc,{size:20})]})}),v.certificates&&i.jsx(De,{children:zo.length>0?i.jsx("div",{className:"space-y-4",children:zo.map(f=>i.jsx("div",{className:"border-l-4 border-pale-rose pl-4 py-2",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:f.certificateType}),i.jsxs("p",{className:"text-sm text-text-muted",children:["Emitido: ",f.issueDate]}),f.purpose&&i.jsxs("p",{className:"mt-1",children:[i.jsx("strong",{children:"Propósito:"})," ",f.purpose]}),f.observations&&i.jsxs("p",{className:"mt-1",children:[i.jsx("strong",{children:"Observaciones:"})," ",f.observations]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($r,{variant:"outline",children:"Certificado"}),i.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>Pg(s,f),children:i.jsx(el,{size:14})}),i.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>{confirm("¿Eliminar este certificado?")&&rc.mutate(f.id)},className:"text-red-500 hover:text-red-700",children:i.jsx(ui,{size:14})})]})]})},f.id))}):i.jsx("p",{className:"text-text-muted text-center py-8",children:"No hay certificados registrados."})})]})]}),c==="consultation"&&s&&i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(pS,{size:20}),"Nueva Consulta - ",s.name]})}),i.jsx(De,{children:i.jsxs("form",{onSubmit:dc,className:"space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fecha de Consulta"}),i.jsx(J,{type:"date",value:Pe.consultationDate,onChange:f=>Ht({...Pe,consultationDate:f.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Motivo de Consulta *"}),i.jsx(J,{value:Pe.consultationReason,onChange:f=>Ht({...Pe,consultationReason:f.target.value}),placeholder:"Ej: Control rutinario, síntomas específicos...",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Anamnesis"}),i.jsx(Et,{value:Pe.anamnesis,onChange:f=>Ht({...Pe,anamnesis:f.target.value}),rows:4,placeholder:"Historia clínica, síntomas, evolución..."})]}),i.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[i.jsx("h3",{className:"font-semibold text-lg mb-4 text-mint",children:"Parámetros Vitales"}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Frecuencia Respiratoria"}),i.jsx(J,{value:Pe.respiratoryRate,onChange:f=>Ht({...Pe,respiratoryRate:f.target.value}),placeholder:"rpm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Peso"}),i.jsx(J,{value:Pe.weight,onChange:f=>Ht({...Pe,weight:f.target.value}),placeholder:"kg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Temperatura"}),i.jsx(J,{value:Pe.temperature,onChange:f=>Ht({...Pe,temperature:f.target.value}),placeholder:"°C"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tiempo Llenado Capilar"}),i.jsx(J,{value:Pe.capillaryRefillTime,onChange:f=>Ht({...Pe,capillaryRefillTime:f.target.value}),placeholder:"segundos"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Frecuencia Cardíaca"}),i.jsx(J,{value:Pe.heartRate,onChange:f=>Ht({...Pe,heartRate:f.target.value}),placeholder:"lpm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Color de Mucosas"}),i.jsxs(Ue,{value:Pe.mucosaColor,onValueChange:f=>Ht({...Pe,mucosaColor:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Seleccionar"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"rosada",children:"Rosada"}),i.jsx(W,{value:"pálida",children:"Pálida"}),i.jsx(W,{value:"cianótica",children:"Cianótica"}),i.jsx(W,{value:"ictérica",children:"Ictérica"}),i.jsx(W,{value:"hiperémicas",children:"Hiperémicas"})]})]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Examen Físico Completo"}),i.jsx(Et,{value:Pe.physicalExamination,onChange:f=>Ht({...Pe,physicalExamination:f.target.value}),rows:6,placeholder:"Descripción detallada del examen físico: inspección, palpación, auscultación, percusión. Incluir hallazgos por sistemas (cardiovascular, respiratorio, digestivo, neurológico, etc.)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hallazgos Específicos"}),i.jsx(Et,{value:Pe.physicalExamFindings,onChange:f=>Ht({...Pe,physicalExamFindings:f.target.value}),rows:3,placeholder:"Hallazgos adicionales relevantes, alteraciones específicas..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Diagnóstico Presuntivo"}),i.jsx(Et,{value:Pe.presumptiveDiagnosis,onChange:f=>Ht({...Pe,presumptiveDiagnosis:f.target.value}),rows:3,placeholder:"Diagnóstico principal basado en los hallazgos..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Plan Terapéutico"}),i.jsx(Et,{value:Pe.therapeuticPlan,onChange:f=>Ht({...Pe,therapeuticPlan:f.target.value}),rows:4,placeholder:"Tratamiento, medicamentos, indicaciones..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notas Adicionales"}),i.jsx(Et,{value:Pe.additionalNotes,onChange:f=>Ht({...Pe,additionalNotes:f.target.value}),rows:3,placeholder:"Observaciones adicionales..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Próxima Cita"}),i.jsx(J,{type:"date",value:Pe.nextAppointment,onChange:f=>Ht({...Pe,nextAppointment:f.target.value})})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{type:"button",variant:"outline",onClick:()=>u("patient-hub"),children:"Cancelar"}),i.jsx(ee,{type:"submit",className:"bg-mint hover:bg-mint-dark",disabled:uu.isPending,children:uu.isPending?"Guardando...":"Guardar Consulta"})]})]})})]}),c==="prescription"&&s&&i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(xn,{size:20}),"Nueva Receta - ",s.name]})}),i.jsx(De,{children:i.jsxs("form",{onSubmit:of,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4 border rounded-lg p-4 bg-gray-50",children:[i.jsx("h3",{className:"font-semibold text-lg text-mint",children:"Agregar Medicamentos"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Medicamento *"}),i.jsxs(Ue,{value:wt.medicationId,onValueChange:f=>Qr({...wt,medicationId:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona un medicamento"})}),i.jsx(Me,{children:Kt.map(f=>i.jsxs(W,{value:f.id,children:[f.name," (",f.type,")"]},f.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dosis *"}),i.jsx(J,{value:wt.dosage,onChange:f=>Qr({...wt,dosage:f.target.value}),placeholder:"Ej: 1 comprimido, 5ml, 250mg"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Frecuencia *"}),i.jsx(J,{value:wt.frequency,onChange:f=>Qr({...wt,frequency:f.target.value}),placeholder:"Ej: cada 12 horas, cada 8 horas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Duración *"}),i.jsx(J,{value:wt.duration,onChange:f=>Qr({...wt,duration:f.target.value}),placeholder:"Ej: 7 días, 2 semanas"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Vía de Administración *"}),i.jsxs(Ue,{value:wt.administrationRoute,onValueChange:f=>Qr({...wt,administrationRoute:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona vía de administración"})}),i.jsx(Me,{children:hs.map(f=>i.jsx(W,{value:f,children:f},f))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Indicaciones Especiales del Medicamento"}),i.jsx(J,{value:wt.specialInstructions,onChange:f=>Qr({...wt,specialInstructions:f.target.value}),placeholder:"Ej: Dar con alimento, en ayunas..."})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ee,{type:"button",onClick:Dn,className:"bg-mint hover:bg-mint-dark",children:[i.jsx(Ts,{size:16,className:"mr-2"}),"Agregar Medicamento"]}),i.jsxs(ee,{type:"button",variant:"outline",onClick:()=>dn(!ri),className:"border-mint text-mint hover:bg-mint hover:text-white",children:[i.jsx(Ts,{size:16,className:"mr-2"}),ri?"Cancelar":"Medicamento Personalizado"]})]})]}),ri&&i.jsxs("div",{className:"space-y-4 border rounded-lg p-4 bg-blue-50 border-blue-200",children:[i.jsx("h3",{className:"font-semibold text-lg text-blue-800",children:"Crear Medicamento Personalizado"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nombre Comercial *"}),i.jsx(J,{value:ot.commercialName,onChange:f=>Rn({...ot,commercialName:f.target.value}),placeholder:"Ej: Sucravet, Amoxidal, Meloxidyl..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Principio Activo *"}),i.jsx(J,{value:ot.activeIngredient,onChange:f=>Rn({...ot,activeIngredient:f.target.value}),placeholder:"Ej: Sucralfato 10%, Amoxicilina 500mg..."})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Uso *"}),i.jsxs(Ue,{value:ot.usage,onValueChange:f=>Rn({...ot,usage:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"veterinario",children:"Uso Veterinario"}),i.jsx(W,{value:"humano",children:"Uso Humano"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Presentación *"}),i.jsx(J,{value:ot.presentation,onChange:f=>Rn({...ot,presentation:f.target.value}),placeholder:"Ej: Solución oral, Comprimidos, Inyectable..."})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dosis *"}),i.jsx(J,{value:ot.dosage,onChange:f=>Rn({...ot,dosage:f.target.value}),placeholder:"Ej: 1 comprimido, 5ml, 0.5mg/kg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Frecuencia *"}),i.jsx(J,{value:ot.frequency,onChange:f=>Rn({...ot,frequency:f.target.value}),placeholder:"Ej: cada 12 horas, cada 8 horas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Duración *"}),i.jsx(J,{value:ot.duration,onChange:f=>Rn({...ot,duration:f.target.value}),placeholder:"Ej: 7 días, 2 semanas"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Vía de Administración *"}),i.jsxs(Ue,{value:ot.administrationRoute,onValueChange:f=>Rn({...ot,administrationRoute:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona vía de administración"})}),i.jsx(Me,{children:hs.map(f=>i.jsx(W,{value:f,children:f},f))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Indicaciones Especiales del Medicamento"}),i.jsx(J,{value:ot.specialInstructions,onChange:f=>Rn({...ot,specialInstructions:f.target.value}),placeholder:"Ej: Dar con alimento, en ayunas..."})]})]}),i.jsxs(ee,{type:"button",onClick:sc,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(Ts,{size:16,className:"mr-2"}),"Agregar Medicamento Personalizado"]})]}),Zt.medications.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold text-lg",children:"Medicamentos en la Receta"}),Zt.medications.map(f=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:f.name}),i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs mr-2",children:f.medicationType}),"Dar ",f.dosage," por ",f.administrationRoute," ",f.frequency," durante ",f.duration]}),f.specialInstructions&&i.jsxs("p",{className:"text-sm text-orange-600 mt-1",children:[i.jsx("strong",{children:"Indicaciones especiales:"})," ",f.specialInstructions]})]}),i.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>si(f.id),children:i.jsx(ui,{size:16})})]},f.id))]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Indicaciones Adicionales"}),i.jsx(Et,{value:Zt.indications,onChange:f=>Bn({...Zt,indications:f.target.value}),rows:3,placeholder:"Dieta, cuidados especiales, próximo control..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Advertencias"}),i.jsx(Et,{value:Zt.warnings,onChange:f=>Bn({...Zt,warnings:f.target.value}),rows:3,placeholder:"Efectos secundarios, contraindicaciones..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Indicaciones Especiales de Fármacos"}),i.jsx(Et,{value:Zt.specialInstructions,onChange:f=>Bn({...Zt,specialInstructions:f.target.value}),rows:3,placeholder:"Instrucciones especiales generales para la administración de medicamentos..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fecha de Emisión *"}),i.jsx(J,{type:"date",value:Zt.issueDate,onChange:f=>Bn({...Zt,issueDate:f.target.value}),required:!0})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{type:"button",variant:"outline",onClick:()=>u("patient-hub"),children:"Cancelar"}),i.jsx(ee,{type:"submit",className:"bg-mint hover:bg-mint-dark",disabled:hu.isPending,children:hu.isPending?"Guardando...":"Guardar Receta"})]})]})})]}),c==="vaccination"&&s&&i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(tl,{size:20}),"Registrar Vacunación - ",s.name]}),i.jsx(Jt,{children:"Registra una nueva vacunación aplicada al paciente"})]}),i.jsx(De,{children:i.jsxs("form",{onSubmit:Lt,className:"space-y-4",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Vacuna *"}),i.jsxs(Ue,{value:at.vaccineName,onValueChange:f=>cn({...at,vaccineName:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona la vacuna"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Antirrábica",children:"Antirrábica"}),i.jsx(W,{value:"Óctuple",children:"Óctuple (DHPPI-L4)"}),i.jsx(W,{value:"Séxtuple",children:"Séxtuple (DHPPI)"}),i.jsx(W,{value:"Triple Felina",children:"Triple Felina (FVRCP)"}),i.jsx(W,{value:"Leucemia Felina",children:"Leucemia Felina (FeLV)"}),i.jsx(W,{value:"Bordetella",children:"Bordetella (Tos de las Perreras)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Laboratorio"}),i.jsxs(Ue,{value:at.laboratory,onValueChange:f=>cn({...at,laboratory:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona laboratorio"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Zoetis",children:"Zoetis"}),i.jsx(W,{value:"MSD",children:"MSD Animal Health"}),i.jsx(W,{value:"Nobivac",children:"Nobivac"}),i.jsx(W,{value:"Virbac",children:"Virbac"}),i.jsx(W,{value:"Merial",children:"Merial"})]})]})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Número de Lote"}),i.jsx(J,{value:at.batchNumber,onChange:f=>cn({...at,batchNumber:f.target.value}),placeholder:"Lote de la vacuna"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dosis"}),i.jsx(J,{value:at.dose,onChange:f=>cn({...at,dose:f.target.value}),placeholder:"1 ml, 2 ml..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Vía de Aplicación"}),i.jsxs(Ue,{value:at.applicationRoute,onValueChange:f=>cn({...at,applicationRoute:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Subcutánea",children:"Subcutánea"}),i.jsx(W,{value:"Intramuscular",children:"Intramuscular"}),i.jsx(W,{value:"Intranasal",children:"Intranasal"})]})]})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fecha de Aplicación *"}),i.jsx(J,{type:"date",value:at.applicationDate,onChange:f=>cn({...at,applicationDate:f.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Vigencia"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",name:"validityType",value:"predefined",checked:at.validityType==="predefined",onChange:f=>cn({...at,validityType:f.target.value}),className:"w-4 h-4"}),i.jsx("span",{children:"Predefinida"})]}),i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",name:"validityType",value:"manual",checked:at.validityType==="manual",onChange:f=>cn({...at,validityType:f.target.value}),className:"w-4 h-4"}),i.jsx("span",{children:"Manual"})]})]}),at.validityType==="predefined"?i.jsxs(Ue,{value:at.validityPeriod,onValueChange:f=>cn({...at,validityPeriod:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona vigencia predefinida"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"365",children:"1 año (365 días)"}),i.jsx(W,{value:"1095",children:"3 años (1095 días)"}),i.jsx(W,{value:"180",children:"6 meses (180 días)"}),i.jsx(W,{value:"90",children:"3 meses (90 días)"}),i.jsx(W,{value:"30",children:"1 mes (30 días)"})]})]}):i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(J,{type:"number",placeholder:"Número de meses",value:at.customValidityMonths,onChange:f=>cn({...at,customValidityMonths:f.target.value}),className:"w-32",min:"1",max:"60"}),i.jsx("span",{className:"text-sm text-gray-600",children:"meses"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaciones"}),i.jsx(Et,{value:at.notes,onChange:f=>cn({...at,notes:f.target.value}),rows:3,placeholder:"Reacciones, observaciones especiales..."})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{type:"button",variant:"outline",onClick:()=>u("patient-hub"),children:"Cancelar"}),i.jsx(ee,{type:"submit",className:"bg-mint hover:bg-mint-dark",disabled:lc.isPending,children:lc.isPending?"Registrando...":"Registrar Vacunación"})]})]})})]}),c==="deworming"&&s&&i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(Gc,{size:20}),"Registrar Desparasitación - ",s.name]}),i.jsx(Jt,{children:"Registra una nueva desparasitación aplicada al paciente"})]}),i.jsx(De,{children:i.jsxs("form",{onSubmit:uc,className:"space-y-4",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Desparasitación *"}),i.jsxs(Ue,{value:Ct.type,onValueChange:f=>In({...Ct,type:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"internal",children:"Interna (Endoparásitos)"}),i.jsx(W,{value:"external",children:"Externa (Ectoparásitos)"}),i.jsx(W,{value:"combined",children:"Combinada (Endo + Ecto)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Producto *"}),i.jsx(J,{value:Ct.product,onChange:f=>In({...Ct,product:f.target.value}),placeholder:"Nombre del producto"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Principio Activo"}),i.jsx(J,{value:Ct.activeIngredient,onChange:f=>In({...Ct,activeIngredient:f.target.value}),placeholder:"Ivermectina, Milbemicina, etc."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dosis"}),i.jsx(J,{value:Ct.dose,onChange:f=>In({...Ct,dose:f.target.value}),placeholder:"Dosis aplicada"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Laboratorio"}),i.jsx(J,{value:Ct.laboratory,onChange:f=>In({...Ct,laboratory:f.target.value}),placeholder:"Laboratorio fabricante"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Lote"}),i.jsx(J,{value:Ct.batchNumber,onChange:f=>In({...Ct,batchNumber:f.target.value}),placeholder:"Número de lote"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fecha de Aplicación *"}),i.jsx(J,{type:"date",value:Ct.applicationDate,onChange:f=>In({...Ct,applicationDate:f.target.value})})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Duración del Tratamiento *"}),i.jsxs(Ue,{value:Ct.duration||"",onValueChange:f=>In({...Ct,duration:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Seleccionar duración"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"1-month",children:"1 mes (antiparasitarios externos)"}),i.jsx(W,{value:"3-months",children:"3 meses (desparasitación interna estándar)"}),i.jsx(W,{value:"4-months",children:"4 meses (desparasitación interna extendida)"}),i.jsx(W,{value:"6-months",children:"6 meses (según criterio médico)"}),i.jsx(W,{value:"custom",children:"Personalizada (especificar en observaciones)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Próxima Aplicación"}),i.jsx(J,{type:"date",value:Ct.nextDueDate,onChange:f=>In({...Ct,nextDueDate:f.target.value}),placeholder:"Fecha próxima dosis"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaciones"}),i.jsx(Et,{value:Ct.notes,onChange:f=>In({...Ct,notes:f.target.value}),rows:3,placeholder:"Efectividad, reacciones, próxima aplicación..."})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{type:"button",variant:"outline",onClick:()=>u("patient-hub"),children:"Cancelar"}),i.jsx(ee,{type:"submit",className:"bg-mint hover:bg-mint-dark",disabled:pu.isPending,children:pu.isPending?"Registrando...":"Registrar Desparasitación"})]})]})})]}),c==="exam-order"&&s&&i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(hS,{size:20}),"Orden de Exámenes - ",s.name]}),i.jsx(Jt,{children:"Genera una orden de exámenes médicos para el paciente"})]}),i.jsx(De,{children:i.jsx("form",{onSubmit:async f=>{if(f.preventDefault(),!Re.selectedExams.length){b({title:"Error",description:"Selecciona al menos un examen",variant:"destructive"});return}try{const V={petId:s.id,selectedExams:Re.selectedExams,clinicalHistory:Re.clinicalHistory,clinicalSuspicion:Re.clinicalSuspicion,urgency:Re.urgency,fastingRequired:Re.fastingRequired,specialInstructions:Re.specialInstructions,orderDate:Re.orderDate,veterinarianId:(t==null?void 0:t.uid)||"unknown"};await Xt("/api/exam-orders/firebase","POST",V),b({title:"Éxito",description:"Orden de exámenes generada correctamente"}),Pt({selectedExams:[],clinicalHistory:"",clinicalSuspicion:"",urgency:"normal",fastingRequired:!1,specialInstructions:"",orderDate:new Date().toISOString().split("T")[0]}),u("patient-hub")}catch(V){console.error("Error creating exam order:",V),b({title:"Error",description:"No se pudo generar la orden de exámenes",variant:"destructive"})}},children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Seleccionar Exámenes *"}),i.jsxs(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>En(!0),className:"flex items-center gap-2",children:[i.jsx(Ts,{size:16}),"Agregar Examen"]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[i.jsx("div",{children:i.jsx(J,{placeholder:"Buscar exámenes...",value:ln,onChange:f=>sn(f.target.value),className:"w-full"})}),i.jsx("div",{children:i.jsxs(Ue,{value:st,onValueChange:et,children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Filtrar por categoría"})}),i.jsx(Me,{children:ii().map(f=>i.jsx(W,{value:f,children:f==="all"?"Todas las categorías":f},f))})]})})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-80 overflow-y-auto border rounded-lg p-4",children:lr().map(f=>i.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[i.jsx("input",{type:"checkbox",value:f.id,checked:Re.selectedExams.includes(f.id),onChange:V=>{V.target.checked?Pt({...Re,selectedExams:[...Re.selectedExams,f.id]}):Pt({...Re,selectedExams:Re.selectedExams.filter(ie=>ie!==f.id)})},className:"w-4 h-4 mt-1"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"font-medium text-sm flex items-center gap-2",children:[f.name,f.isCustom&&i.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Personalizado"})]}),i.jsx("div",{className:"text-xs text-gray-500",children:f.category}),f.description&&i.jsx("div",{className:"text-xs text-gray-400 mt-1",children:f.description})]}),f.isCustom&&i.jsx("button",{type:"button",onClick:V=>{V.preventDefault(),confirm(`¿Eliminar el examen "${f.name}"?`)&&ps(f.id)},className:"text-red-500 hover:text-red-700 p-1",title:"Eliminar examen personalizado",children:i.jsx(ui,{size:14})})]},f.id))}),lr().length===0&&i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("p",{children:"No se encontraron exámenes con los filtros aplicados"}),i.jsx(ee,{type:"button",variant:"link",onClick:()=>{sn(""),et("all")},children:"Limpiar filtros"})]}),i.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[Re.selectedExams.length," exámenes seleccionados de ",lr().length," disponibles"]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Historia Clínica"}),i.jsx(Et,{value:Re.clinicalHistory,onChange:f=>Pt({...Re,clinicalHistory:f.target.value}),rows:4,placeholder:"Motivo de consulta, síntomas observados, evolución..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sospecha Clínica"}),i.jsx(Et,{value:Re.clinicalSuspicion,onChange:f=>Pt({...Re,clinicalSuspicion:f.target.value}),rows:4,placeholder:"Diagnóstico presuntivo, diagnósticos diferenciales..."})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Urgencia"}),i.jsxs(Ue,{value:Re.urgency,onValueChange:f=>Pt({...Re,urgency:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"normal",children:"Normal"}),i.jsx(W,{value:"urgent",children:"Urgente (24-48h)"}),i.jsx(W,{value:"stat",children:"STAT (Inmediato)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fecha de Orden"}),i.jsx(J,{type:"date",value:Re.orderDate,onChange:f=>Pt({...Re,orderDate:f.target.value})})]}),i.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[i.jsx("input",{type:"checkbox",id:"fasting",checked:Re.fastingRequired,onChange:f=>Pt({...Re,fastingRequired:f.target.checked}),className:"w-4 h-4"}),i.jsx("label",{htmlFor:"fasting",className:"text-sm font-medium",children:"Requiere Ayuno"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Instrucciones Especiales"}),i.jsx(Et,{value:Re.specialInstructions,onChange:f=>Pt({...Re,specialInstructions:f.target.value}),rows:3,placeholder:"Preparación especial, medicaciones a suspender, cuidados pre-examen..."})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{type:"button",variant:"outline",onClick:()=>u("patient-hub"),children:"Cancelar"}),i.jsx(ee,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Generar Orden de Exámenes"})]})]})})})]}),gn&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Agregar Nuevo Examen"}),i.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>En(!1),children:"✕"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nombre del Examen *"}),i.jsx(J,{value:U.name,onChange:f=>H({...U,name:f.target.value}),placeholder:"Ej: Perfil de Coagulación"})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Categoría Existente"}),i.jsxs(Ue,{value:U.category,onValueChange:f=>H({...U,category:f,newCategory:""}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Seleccionar categoría existente"})}),i.jsx(Me,{children:ii().filter(f=>f!=="all").map(f=>i.jsx(W,{value:f,children:f},f))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nueva Categoría"}),i.jsx(J,{value:U.newCategory,onChange:f=>H({...U,newCategory:f.target.value,category:""}),placeholder:"Crear nueva categoría"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripción"}),i.jsx(Et,{value:U.description,onChange:f=>H({...U,description:f.target.value}),rows:3,placeholder:"Descripción del examen, qué evalúa, para qué sirve..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Instrucciones de Preparación"}),i.jsx(Et,{value:U.preparationInstructions,onChange:f=>H({...U,preparationInstructions:f.target.value}),rows:3,placeholder:"Instrucciones especiales de preparación para el paciente..."})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"customFasting",checked:U.fastingRequired,onChange:f=>H({...U,fastingRequired:f.target.checked}),className:"w-4 h-4"}),i.jsx("label",{htmlFor:"customFasting",className:"text-sm font-medium",children:"Requiere Ayuno"})]}),i.jsxs("div",{className:"flex gap-4 pt-4",children:[i.jsx(ee,{type:"button",variant:"outline",onClick:()=>En(!1),className:"flex-1",children:"Cancelar"}),i.jsx(ee,{type:"button",onClick:tc,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Agregar Examen"})]})]})]})}),c==="exam-documents"&&s&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(xn,{className:"h-5 w-5"}),"Documentos de Exámenes - ",s.name]}),i.jsx(Jt,{children:"Documentos y resultados de exámenes guardados"})]}),i.jsx(De,{children:ac.length>0?i.jsx("div",{className:"space-y-4",children:ac.map((f,V)=>i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-blue-800",children:f.examType}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f.fileName})]}),i.jsx($r,{variant:"outline",className:"bg-blue-100",children:ks(f.uploadDate)})]}),i.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:[i.jsxs("p",{children:["Tamaño: ",Math.round(f.fileSize/1024)," KB"]}),f.notes&&i.jsxs("p",{children:["Notas: ",f.notes]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>window.open(f.objectPath,"_blank"),children:[i.jsx(Ob,{className:"h-4 w-4 mr-2"}),"Ver Documento"]}),i.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>{const ie=document.createElement("a");ie.href=f.objectPath,ie.download=f.fileName,ie.click()},children:[i.jsx(el,{className:"h-4 w-4 mr-2"}),"Descargar"]}),i.jsxs(ee,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>{window.confirm(`¿Eliminar el documento "${f.fileName}"?

Esta acción no se puede deshacer.`)&&af.mutate(f.id)},children:[i.jsx(ui,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]})]},V))}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(xn,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:"No hay documentos de exámenes guardados"})]})})]}),i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(xn,{size:20}),"Subir Nuevo Documento de Examen"]}),i.jsx(Jt,{children:"Sube resultados de exámenes para esta mascota"})]}),i.jsx(De,{children:i.jsx("form",{onSubmit:async f=>{if(f.preventDefault(),!I.examType||!I.uploadedFile){b({title:"Error",description:"Completa todos los campos obligatorios y selecciona un archivo",variant:"destructive"});return}try{const V={petId:s.id,examType:I.examType,documentURL:I.uploadedFile.uploadURL,fileName:I.uploadedFile.name,fileSize:I.uploadedFile.size,uploadedBy:(t==null?void 0:t.uid)||"unknown",notes:I.notes,tutorEmail:s.tutorEmail,tutorName:s.tutorName,petName:s.name,species:s.species};await Xt("/api/exam-documents","POST",V),b({title:"Éxito",description:`Documento de examen subido correctamente${s.tutorEmail?" y enviado por email al cliente":""}`}),S.invalidateQueries({queryKey:["/api/exam-documents/pet",s==null?void 0:s.id]}),L({examType:"",notes:"",uploadedFile:null}),u("patient-hub")}catch(V){console.error("Error uploading exam document:",V),b({title:"Error",description:"No se pudo subir el documento",variant:"destructive"})}},children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Examen *"}),i.jsxs(Ue,{value:I.examType,onValueChange:f=>L({...I,examType:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Selecciona el tipo de examen"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Hemograma",children:"Hemograma"}),i.jsx(W,{value:"Bioquímica Sanguínea",children:"Bioquímica Sanguínea"}),i.jsx(W,{value:"Perfil Renal",children:"Perfil Renal"}),i.jsx(W,{value:"Perfil Hepático",children:"Perfil Hepático"}),i.jsx(W,{value:"Perfil Tiroideo",children:"Perfil Tiroideo"}),i.jsx(W,{value:"Radiografía",children:"Radiografía"}),i.jsx(W,{value:"Ecografía",children:"Ecografía"}),i.jsx(W,{value:"Electrocardiograma",children:"Electrocardiograma"}),i.jsx(W,{value:"Análisis de Orina",children:"Análisis de Orina"}),i.jsx(W,{value:"Coprocultivo",children:"Coprocultivo"}),i.jsx(W,{value:"Citología",children:"Citología"}),i.jsx(W,{value:"Histopatología",children:"Histopatología"}),i.jsx(W,{value:"Cultivo Bacteriano",children:"Cultivo Bacteriano"}),i.jsx(W,{value:"PCR",children:"PCR"}),i.jsx(W,{value:"Serología",children:"Serología"}),i.jsx(W,{value:"Otro",children:"Otro"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subir Documento *"}),i.jsxs(ZY,{maxNumberOfFiles:1,maxFileSize:50*1024*1024,onGetUploadParameters:async()=>({method:"PUT",url:(await Xt("/api/objects/upload","POST")).uploadURL}),onComplete:f=>{var ie;const V=(ie=f.successful)==null?void 0:ie[0];V&&(L({...I,uploadedFile:V}),b({title:"Archivo subido",description:`${V.name} se subió correctamente`}))},buttonClassName:"w-full bg-blue-600 hover:bg-blue-700",children:[i.jsx(xn,{className:"h-4 w-4 mr-2"}),I.uploadedFile?"Cambiar Archivo":"Seleccionar Archivo"]}),I.uploadedFile&&i.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["✓ ",I.uploadedFile.name," (",Math.round(I.uploadedFile.size/1024)," KB)"]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Formatos admitidos: PDF, JPG, PNG. Máximo 50MB"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notas Adicionales"}),i.jsx(Et,{value:I.notes,onChange:f=>L({...I,notes:f.target.value}),rows:4,placeholder:"Observaciones, hallazgos relevantes, indicaciones del laboratorio..."})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{type:"button",variant:"outline",onClick:()=>u("patient-hub"),children:"Cancelar"}),i.jsxs(ee,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",disabled:!I.examType||!I.uploadedFile,children:[i.jsx(T3,{className:"h-4 w-4 mr-2"}),"Guardar Documento"]})]})]})})})]})]}),c==="certificate"&&s&&i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(Oc,{size:20}),"Generar Certificado - ",s.name]}),i.jsx(Jt,{children:"Genera un certificado oficial para el paciente"})]}),i.jsx(De,{children:i.jsxs("form",{onSubmit:Bo,className:"space-y-4",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Certificado *"}),i.jsxs(Ue,{value:zt.certificateType,onValueChange:f=>zn({...zt,certificateType:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"health",children:"Certificado de Salud"}),i.jsx(W,{value:"export",children:"Certificado de Exportación SAG"}),i.jsx(W,{value:"vaccination",children:"Certificado de Vacunación"}),i.jsx(W,{value:"deworming",children:"Certificado de Desparasitación"}),i.jsx(W,{value:"microchip",children:"Certificado de Microchip"}),i.jsx(W,{value:"sterilization",children:"Certificado de Esterilización"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Propósito"}),i.jsx(J,{value:zt.purpose,onChange:f=>zn({...zt,purpose:f.target.value}),placeholder:"Viaje, adopción, residencia..."})]})]}),zt.certificateType==="microchip"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Procedimiento *"}),i.jsxs(Ue,{value:zt.microchipType,onValueChange:f=>zn({...zt,microchipType:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"implantation",children:"Implantación de Microchip"}),i.jsx(W,{value:"verification",children:"Verificación de Microchip"})]})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fecha de Emisión *"}),i.jsx(J,{type:"date",value:zt.issueDate,onChange:f=>zn({...zt,issueDate:f.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Información Adicional"}),i.jsx(J,{value:zt.additionalInfo,onChange:f=>zn({...zt,additionalInfo:f.target.value}),placeholder:"Datos específicos requeridos"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaciones Clínicas"}),i.jsx(Et,{value:zt.observations,onChange:f=>zn({...zt,observations:f.target.value}),rows:4,placeholder:"Estado de salud actual, hallazgos clínicos relevantes..."})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{type:"button",variant:"outline",onClick:()=>u("patient-hub"),children:"Cancelar"}),i.jsx(ee,{type:"submit",className:"bg-mint hover:bg-mint-dark",disabled:fs.isPending,children:fs.isPending?"Generando...":"Generar Certificado"})]})]})})]}),c==="nutrition"&&s&&i.jsx("div",{className:"space-y-6",children:i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(dS,{className:"w-5 h-5 text-mint"}),"Evaluación Nutricional - ",s.name]}),i.jsx(Jt,{children:"Evaluación de condición corporal y requerimientos nutricionales"})]}),i.jsx(De,{className:"space-y-6",children:i.jsxs(u0,{defaultValue:"assessment",className:"w-full",children:[i.jsxs(Ag,{className:"grid w-full grid-cols-3",children:[i.jsx(rs,{value:"assessment",children:"Evaluación"}),i.jsx(rs,{value:"calculator",children:"Calculadora"}),i.jsx(rs,{value:"foods",children:"Alimentos"})]}),i.jsxs(ss,{value:"assessment",className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsx(Be,{className:"text-lg",children:"Evaluación de Condición Corporal"})}),i.jsxs(De,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Peso Actual (kg)"}),i.jsx(J,{value:_.currentWeight,onChange:f=>{const V=f.target.value;if(P({..._,currentWeight:V}),V&&_.bcs&&he(V,_.bcs),V){const ie=parseFloat(V),oe=Math.round(70*Math.pow(ie,.75)),Ce=parseFloat(_.activityFactor)||1.6,Ze=Math.round(oe*Ce);we(ut=>({...ut,rer:oe,der:Ze}))}},placeholder:"0.0",type:"number",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Peso Ideal (kg)"}),i.jsx(J,{value:_.idealWeight,readOnly:!0,placeholder:"Calculado automáticamente con BCS",className:"bg-gray-50"})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Método de Evaluación"}),i.jsxs(Ue,{value:_.bcsMethod,onValueChange:f=>P({..._,bcsMethod:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"canine_9_point",children:"BCS Canino (1-9 puntos)"}),i.jsx(W,{value:"feline_9_point",children:"BCS Felino (1-9 puntos)"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Puntuación BCS"}),i.jsxs(Ue,{value:_.bcs,onValueChange:f=>{if(console.log("BCS selected:",f,"Current weight:",_.currentWeight),P({..._,bcs:f}),f&&_.currentWeight){console.log("Calling calculateIdealWeightFromBCS with:",_.currentWeight,f),he(_.currentWeight,f);let V="";const ie=parseInt(f);ie<=2?V="Evaluación médica urgente. Dieta hipercalórica y suplementación nutricional.":ie===3?V="Dieta de ganancia de peso controlada. Evaluar causas subyacentes.":ie>=8?V="Programa médico de pérdida de peso. Control veterinario semanal inicial.":ie>=6?V="Dieta hipocalórica controlada. Reducción 1-2% peso corporal/semana.":V="Mantener dieta actual. Peso corporal ideal según BCS 4-5.",P(oe=>({...oe,recommendations:V}))}else console.log("Cannot calculate - missing BCS or weight")},children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Seleccionar puntuación"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"1",children:"1 - Extremadamente delgado"}),i.jsx(W,{value:"2",children:"2 - Muy delgado"}),i.jsx(W,{value:"3",children:"3 - Delgado"}),i.jsx(W,{value:"4",children:"4 - Bajo peso"}),i.jsx(W,{value:"5",children:"5 - Ideal"}),i.jsx(W,{value:"6",children:"6 - Ligeramente sobrepeso"}),i.jsx(W,{value:"7",children:"7 - Sobrepeso"}),i.jsx(W,{value:"8",children:"8 - Obesidad moderada"}),i.jsx(W,{value:"9",children:"9 - Obesidad severa"})]})]})]}),i.jsxs("div",{className:"space-y-3 p-4 bg-blue-50 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-sm",children:"Evaluación Automática de Peso"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Estado de Peso"}),i.jsx(J,{value:ue.weightStatus||"Seleccione BCS y peso",readOnly:!0,className:"bg-gray-50"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Peso Ideal Estimado (kg)"}),i.jsx(J,{value:ue.idealWeight?`${ue.idealWeight.toFixed(2)} kg`:"Automático con BCS",readOnly:!0,className:"bg-gray-50"})]}),i.jsx("div",{className:"mt-3 p-3 bg-mint/10 rounded-lg",children:i.jsxs("div",{className:"text-sm font-medium text-darkgray",children:[i.jsx("div",{children:"Fórmula AAHA validada contra DEXA"}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[_.bcs&&parseInt(_.bcs)>5&&i.jsx(i.Fragment,{children:"Peso ideal = Peso actual ÷ (1 + 0.10 × (BCS−5))"}),_.bcs&&parseInt(_.bcs)<5&&i.jsx(i.Fragment,{children:"Peso ideal = Peso actual ÷ (1 − 0.10 × (5−BCS))"}),_.bcs&&(parseInt(_.bcs)===4||parseInt(_.bcs)===5)&&i.jsx(i.Fragment,{children:"BCS 4-5: Peso corporal ideal (sin corrección)"}),!_.bcs&&i.jsx(i.Fragment,{children:"Cada punto BCS = ±10% de peso corporal"})]}),ue.bcsPercentage>0&&i.jsxs("div",{className:"text-xs font-medium text-blue-700 mt-1",children:["Diferencia estimada: ",ue.bcsPercentage.toFixed(1),"% del peso ideal"]})]})})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Notas de Condición Corporal"}),i.jsx(Et,{value:_.bodyConditionNotes,onChange:f=>P({..._,bodyConditionNotes:f.target.value}),placeholder:"Descripción detallada de la evaluación física...",rows:3})]})]})]}),i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsx(Be,{className:"text-lg",children:"Dieta Actual"})}),i.jsxs(De,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Alimento Principal"}),i.jsx(J,{value:_.currentFood,onChange:f=>P({..._,currentFood:f.target.value}),placeholder:"Nombre del alimento"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Marca"}),i.jsx(J,{value:_.currentFoodBrand,onChange:f=>P({..._,currentFoodBrand:f.target.value}),placeholder:"Marca del alimento"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Cantidad Diaria (g)"}),i.jsx(J,{value:_.dailyAmount,onChange:f=>P({..._,dailyAmount:f.target.value}),placeholder:"0",type:"number"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Frecuencia"}),i.jsxs(Ue,{value:_.feedingFrequency,onValueChange:f=>P({..._,feedingFrequency:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{placeholder:"Seleccionar"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"1",children:"1 vez al día"}),i.jsx(W,{value:"2",children:"2 veces al día"}),i.jsx(W,{value:"3",children:"3 veces al día"}),i.jsx(W,{value:"libre",children:"Alimentación libre"})]})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Premios y Snacks"}),i.jsx(J,{value:_.treats,onChange:f=>P({..._,treats:f.target.value}),placeholder:"Tipo y cantidad de premios"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Suplementos"}),i.jsx(J,{value:_.supplements,onChange:f=>P({..._,supplements:f.target.value}),placeholder:"Vitaminas, minerales, etc."})]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Preocupaciones Nutricionales"}),i.jsx(Et,{value:_.nutritionalConcerns,onChange:f=>P({..._,nutritionalConcerns:f.target.value}),placeholder:"Alergias alimentarias, intolerancias, problemas digestivos...",rows:3})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Recomendaciones"}),i.jsx(Et,{value:_.recommendations,onChange:f=>P({..._,recommendations:f.target.value}),placeholder:"Cambios en la dieta, plan nutricional recomendado...",rows:4})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Meta de Peso"}),i.jsxs(Ue,{value:_.weightGoal,onValueChange:f=>P({..._,weightGoal:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"maintain",children:"Mantener"}),i.jsx(W,{value:"gain",children:"Aumentar"}),i.jsx(W,{value:"lose",children:"Reducir"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Peso Objetivo (kg)"}),i.jsx(J,{value:_.targetWeight,onChange:f=>P({..._,targetWeight:f.target.value}),placeholder:"0.0",type:"number",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Próximo Control"}),i.jsx(J,{value:_.followUpDate,onChange:f=>P({..._,followUpDate:f.target.value}),type:"date"})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{onClick:Xe,className:"bg-mint hover:bg-mint-dark",disabled:$e.isPending,children:$e.isPending?"Guardando...":"Guardar Evaluación"}),i.jsx(ee,{variant:"outline",onClick:()=>je(),children:"Generar Informe de Consulta"})]})]}),i.jsx(ss,{value:"calculator",className:"space-y-4",children:i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsx(Be,{children:"Calculadora de Requerimientos Energéticos"}),i.jsx(Jt,{children:"Cálculo de RER (Requerimiento Energético de Reposo) y DER (Requerimiento Energético Diario)"})]}),i.jsxs(De,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Peso Corporal (kg)"}),i.jsx(J,{value:_.currentWeight,onChange:f=>{const V=f.target.value;if(P({..._,currentWeight:V}),V){const ie=parseFloat(V),oe=Math.round(70*Math.pow(ie,.75)),Ce=parseFloat(_.activityFactor),Ze=Math.round(oe*Ce);we({...ue,rer:oe,der:Ze})}},placeholder:"0.0",type:"number",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Factor de Actividad/Estado Fisiológico"}),i.jsxs(Ue,{value:_.activityFactor,onValueChange:f=>{if(P({..._,activityFactor:f}),_.currentWeight){const V=parseFloat(_.currentWeight),ie=Math.round(70*Math.pow(V,.75)),oe=parseFloat(f),Ce=Math.round(ie*oe);we({...ue,rer:ie,der:Ce})}},children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsx(Me,{className:"max-h-[400px] overflow-y-auto",children:(()=>{console.log("Rendering factors for species:",s==null?void 0:s.species);const f=(s==null?void 0:s.species)==="Canina"?Te:(s==null?void 0:s.species)==="Felina"?z:[];return console.log("Total factors to render:",f.length),f.length===0?i.jsxs(i.Fragment,{children:[i.jsx(W,{value:"1.6",children:"Adulto castrado (1.6)"}),i.jsx(W,{value:"1.8",children:"Adulto entero (1.8)"}),i.jsx(W,{value:"1.2",children:"Inactivo (1.2)"}),i.jsx(W,{value:"1.0",children:"Pérdida peso (1.0)"}),i.jsx(W,{value:"2.0",children:"Gestación/lactancia (2.0)"}),i.jsx(W,{value:"2.5",children:"Crecimiento (2.5)"})]}):f.map((V,ie)=>i.jsx(W,{value:V.value,children:V.label},`${V.value}-${ie}`))})()})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Calorías del Alimento (kcal/100g)"}),i.jsx(J,{placeholder:"350",type:"number",onChange:f=>{const V=parseFloat(f.target.value);if(V&&ue.der){const ie=Math.round(ue.der/V*100);we({...ue,recommendedAmount:ie})}}})]})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Resultados del Cálculo:"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-600",children:"RER (kcal/día):"}),i.jsx("p",{className:"text-lg font-bold text-mint",children:ue.rer})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-600",children:"DER (kcal/día):"}),i.jsx("p",{className:"text-lg font-bold text-mint",children:ue.der})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Cantidad Recomendada (g/día):"}),i.jsx("p",{className:"text-lg font-bold text-mint",children:ue.recommendedAmount})]})]})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Fórmulas y Referencias:"}),i.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"RER ="})," 70 × (peso en kg)^0.75"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"DER ="})," RER × Factor Específico por Especie y Estado"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Cantidad ="})," (DER / calorías por 100g) × 100"]})]}),i.jsxs("div",{className:"mt-3 text-xs text-blue-600",children:[i.jsx("p",{children:i.jsx("strong",{children:"Factores específicos por estado fisiológico:"})}),i.jsxs("p",{children:["• ",(s==null?void 0:s.species)==="Canina"?"Caninos":(s==null?void 0:s.species)==="Felina"?"Felinos":"Caninos/Felinos",": Factores filtrados según especie del paciente"]}),i.jsxs("p",{children:["• Base de datos: ",Ge.length," alimentos registrados"]})]})]})]})]})}),i.jsxs(ss,{value:"foods",className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Base de Datos de Alimentos"}),i.jsxs(ee,{onClick:()=>G(!0),className:"bg-mint hover:bg-mint-dark",children:[i.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Agregar Alimento"]})]}),($||Q)&&i.jsxs(Ae,{children:[i.jsx(Le,{children:i.jsx(Be,{children:se?"Editar Alimento":"Agregar Nuevo Alimento"})}),i.jsx(De,{children:i.jsxs("form",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Nombre del Alimento"}),i.jsx(J,{value:D.name,onChange:f=>E({...D,name:f.target.value}),placeholder:"Ejemplo: Adult Maintenance"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Marca"}),i.jsx(J,{value:D.brand,onChange:f=>E({...D,brand:f.target.value}),placeholder:"Ejemplo: Royal Canin"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Tipo"}),i.jsxs(Ue,{value:D.type,onValueChange:f=>E({...D,type:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"kibble",children:"Pellet/Croquetas"}),i.jsx(W,{value:"wet",children:"Húmedo"}),i.jsx(W,{value:"raw",children:"Dieta BARF"}),i.jsx(W,{value:"treat",children:"Premio/Snack"}),i.jsx(W,{value:"supplement",children:"Suplemento"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Especie"}),i.jsxs(Ue,{value:D.species,onValueChange:f=>E({...D,species:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"Canino",children:"Canino"}),i.jsx(W,{value:"Felino",children:"Felino"}),i.jsx(W,{value:"Ambos",children:"Ambos"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Etapa de Vida"}),i.jsxs(Ue,{value:D.lifeStage,onValueChange:f=>E({...D,lifeStage:f}),children:[i.jsx(Fe,{children:i.jsx(ze,{})}),i.jsxs(Me,{children:[i.jsx(W,{value:"puppy",children:"Cachorro"}),i.jsx(W,{value:"kitten",children:"Gatito"}),i.jsx(W,{value:"adult",children:"Adulto"}),i.jsx(W,{value:"senior",children:"Senior"}),i.jsx(W,{value:"all",children:"Todas las edades"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Información Nutricional (por 100g)"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Calorías (kcal)"}),i.jsx(J,{value:D.calories,onChange:f=>E({...D,calories:f.target.value}),placeholder:"350",type:"number"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Proteína (g)"}),i.jsx(J,{value:D.protein,onChange:f=>E({...D,protein:f.target.value}),placeholder:"25",type:"number",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Grasa (g)"}),i.jsx(J,{value:D.fat,onChange:f=>E({...D,fat:f.target.value}),placeholder:"15",type:"number",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Carbohidratos (g)"}),i.jsx(J,{value:D.carbohydrates,onChange:f=>E({...D,carbohydrates:f.target.value}),placeholder:"45",type:"number",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Fibra (g)"}),i.jsx(J,{value:D.fiber,onChange:f=>E({...D,fiber:f.target.value}),placeholder:"3",type:"number",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Humedad (g)"}),i.jsx(J,{value:D.moisture,onChange:f=>E({...D,moisture:f.target.value}),placeholder:"10",type:"number",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Calcio (mg)"}),i.jsx(J,{value:D.calcium,onChange:f=>E({...D,calcium:f.target.value}),placeholder:"1000",type:"number"})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Fósforo (mg)"}),i.jsx(J,{value:D.phosphorus,onChange:f=>E({...D,phosphorus:f.target.value}),placeholder:"800",type:"number"})]})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Ingredientes Principales"}),i.jsx(Et,{value:D.ingredients,onChange:f=>E({...D,ingredients:f.target.value}),placeholder:"Pollo, arroz, maíz, subproductos de pollo...",rows:2})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Notas Adicionales"}),i.jsx(Et,{value:D.notes,onChange:f=>E({...D,notes:f.target.value}),placeholder:"Indicaciones especiales, beneficios, contraindicaciones...",rows:2})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{type:"button",onClick:Je,className:"bg-mint hover:bg-mint-dark",disabled:B.isPending||me.isPending,children:B.isPending||me.isPending?se?"Actualizando...":"Guardando...":se?"Actualizar Alimento":"Guardar Alimento"}),i.jsx(ee,{type:"button",variant:"outline",onClick:se?At:()=>G(!1),children:"Cancelar"})]})]})})]}),i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsx(Be,{children:"Alimentos Guardados"}),i.jsxs(Jt,{children:[Ge.length," alimentos en la base de datos"]})]}),i.jsx(De,{children:ye?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{children:"Cargando alimentos..."})}):Ge.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("p",{children:"No hay alimentos guardados aún."}),i.jsx("p",{className:"text-sm",children:"Agrega alimentos para crear tu base de datos nutricional."})]}):i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ge.map(f=>i.jsxs(Ae,{className:"hover:shadow-md transition-shadow",children:[i.jsx(Le,{className:"pb-3",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold",children:f.name}),f.brand&&i.jsx("p",{className:"text-sm text-gray-600",children:f.brand})]}),i.jsx("div",{className:"flex gap-1",children:i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="kibble"?"bg-brown-100 text-brown-800":f.type==="wet"?"bg-blue-100 text-blue-800":f.type==="raw"?"bg-green-100 text-green-800":f.type==="treat"?"bg-yellow-100 text-yellow-800":"bg-purple-100 text-purple-800"}`,children:f.type==="kibble"?"Pellet":f.type==="wet"?"Húmedo":f.type==="raw"?"BARF":f.type==="treat"?"Premio":"Suplemento"})})]})}),i.jsxs(De,{className:"space-y-2",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Especie:"}),i.jsx("p",{className:"font-medium",children:f.species})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Etapa:"}),i.jsx("p",{className:"font-medium",children:f.lifeStage==="puppy"?"Cachorro":f.lifeStage==="kitten"?"Gatito":f.lifeStage==="adult"?"Adulto":f.lifeStage==="senior"?"Senior":"Todas"})]})]}),f.calories&&i.jsx("div",{className:"pt-2 border-t",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Calorías:"}),i.jsxs("p",{className:"font-medium",children:[f.calories," kcal/100g"]})]}),f.protein&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Proteína:"}),i.jsxs("p",{className:"font-medium",children:[f.protein,"g/100g"]})]})]})}),i.jsxs("div",{className:"pt-2 flex gap-2 flex-wrap",children:[i.jsx(ee,{size:"sm",variant:"outline",onClick:()=>{P(V=>({...V,currentFood:f.name,currentFoodBrand:f.brand||""})),b({title:"Alimento seleccionado",description:`${f.name} agregado a la evaluación`})},children:"Usar en Evaluación"}),i.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>Ve(f),className:"text-blue-600 hover:text-blue-700",children:[i.jsx(N3,{size:14,className:"mr-1"}),"Editar"]}),i.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>Ke(f.id),className:"text-red-600 hover:text-red-700",disabled:ve.isPending,children:[i.jsx(ui,{size:14,className:"mr-1"}),ve.isPending?"Eliminando...":"Eliminar"]})]})]})]},f.id))})})})]})]})]})})]})}),c==="report"&&s&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("h2",{className:"text-xl font-semibold",children:["Informe de Atención para ",s.name]})}),i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsx(Be,{className:"text-lg",children:"Resumen de Consulta para el Tutor"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Crea un resumen comprensible de la consulta para enviar al tutor de la mascota"})]}),i.jsxs(De,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Fecha de la Visita"}),i.jsx(J,{type:"date",value:A.visitDate,onChange:f=>F({...A,visitDate:f.target.value})})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Motivo de la Consulta"}),i.jsx(J,{value:A.visitReason,onChange:f=>F({...A,visitReason:f.target.value}),placeholder:"Ej: Control de rutina, vacunación, problema de salud..."})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Hallazgos Principales"}),i.jsx(Et,{value:A.clinicalFindings,onChange:f=>F({...A,clinicalFindings:f.target.value}),placeholder:"Describe los hallazgos principales en términos comprensibles para el tutor...",rows:3})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Diagnóstico (para el tutor)"}),i.jsx(Et,{value:A.diagnosis,onChange:f=>F({...A,diagnosis:f.target.value}),placeholder:"Explica el diagnóstico de manera clara y comprensible...",rows:2})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Tratamiento Realizado"}),i.jsx(Et,{value:A.treatmentPerformed,onChange:f=>F({...A,treatmentPerformed:f.target.value}),placeholder:"Describe qué procedimientos o tratamientos se realizaron...",rows:3})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Medicamentos Prescritos"}),i.jsx(Et,{value:A.medications,onChange:f=>F({...A,medications:f.target.value}),placeholder:"Lista los medicamentos con instrucciones claras de administración...",rows:3})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Recomendaciones para el Hogar"}),i.jsx(Et,{value:A.recommendations,onChange:f=>F({...A,recommendations:f.target.value}),placeholder:"Cuidados especiales, dieta, ejercicio, observaciones...",rows:4})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Instrucciones de Seguimiento"}),i.jsx(Et,{value:A.followUpInstructions,onChange:f=>F({...A,followUpInstructions:f.target.value}),placeholder:"Cuándo regresar, qué observar, próximas citas...",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Y,{children:"Próxima Cita (si aplica)"}),i.jsx(J,{type:"date",value:A.nextAppointment,onChange:f=>F({...A,nextAppointment:f.target.value})})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Señales de Alerta"}),i.jsx(J,{value:A.urgentSigns,onChange:f=>F({...A,urgentSigns:f.target.value}),placeholder:"Síntomas que requieren atención inmediata..."})]})]}),i.jsxs("div",{children:[i.jsx(Y,{children:"Preguntas del Tutor Respondidas"}),i.jsx(Et,{value:A.tutorQuestions,onChange:f=>F({...A,tutorQuestions:f.target.value}),placeholder:"Resumen de las preguntas del tutor y sus respuestas...",rows:3})]}),i.jsxs("div",{className:"flex gap-4 flex-wrap",children:[i.jsx(ee,{variant:"secondary",onClick:()=>Rt(),className:"flex items-center gap-2",children:"Auto-rellenar Datos"}),i.jsxs(ee,{onClick:()=>yn(),className:"flex items-center gap-2",children:[i.jsx(xn,{size:16}),"Generar Informe para Tutor"]}),i.jsxs(ee,{variant:"outline",onClick:()=>Bt(),className:"flex items-center gap-2",children:[i.jsx(Mb,{size:16}),"Enviar por WhatsApp"]})]})]})]})]}),c==="schedule-management"&&i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(nr,{size:20}),"Gestión de Horarios"]}),i.jsx(Jt,{children:"Administra tus horarios de atención y disponibilidad"})]}),i.jsx(De,{children:i.jsx(mZ,{})})]}),c==="notifications"&&i.jsx(vZ,{}),c==="calendar-integration"&&i.jsx(yZ,{})]})]})}function bZ(){const[t,e]=y.useState(""),[n,r]=y.useState(""),[s,a]=y.useState("rut"),[o,l]=y.useState(!1),[c,u]=y.useState(null),[h,p]=y.useState({isValid:!0,message:""}),{toast:m}=ti(),{data:x=[],isLoading:N,refetch:w}=Qt({queryKey:[`/api/search/pets/${s}/${s==="rut"?t:n}`],enabled:!1,queryFn:async()=>{const E=s==="rut"?t:n;if(!E)return[];let $=[];try{if(s==="rut"){const se=await fetch(`/api/pets/rut/${E.replace(/[.-]/g,"")}`);if(se.ok){const de=await se.json();if(de.length>0)return de}}const G=await fetch(`/api/search/patients/${E}`);if(G.ok&&($=await G.json()),$.length===0){let se="";switch(s){case"rut":se=`/api/pets/firebase/tutor/${E.replace(/[.-]/g,"")}`;break;case"record":se=`/api/pets/firebase/record/${E}`;break;default:return $}const de=await fetch(se);de.ok&&($=await de.json())}return $}catch(G){return console.error("Error searching pets:",G),[]}}}),b=x.map(E=>E.id),S=b.join(","),{data:v=[]}=Qt({queryKey:[`/api/vaccinations/firebase/pets/${S}`],enabled:b.length>0}),{data:T=[]}=Qt({queryKey:[`/api/dewormings/firebase/pets/${S}`],enabled:b.length>0}),{data:I=[]}=Qt({queryKey:[`/api/certificates/firebase/pets/${S}`],enabled:b.length>0,queryFn:async()=>{if(b.length===0)return[];let E=[];for(const $ of b)try{const G=await fetch(`/api/certificates/firebase/pet/${$}`);if(G.ok){const se=await G.json();E.push(...se.map(de=>({...de,petId:$})))}}catch(G){console.error(`Error fetching certificates for pet ${$}:`,G)}return E}}),{data:L=[]}=Qt({queryKey:[`/api/prescriptions/firebase/pets/${S}`],enabled:b.length>0,queryFn:async()=>{if(b.length===0)return[];let E=[];for(const $ of b)try{const G=await fetch(`/api/prescriptions/firebase/pet/${$}`);if(G.ok){const se=await G.json();E.push(...se.map(de=>({...de,petId:$})))}}catch(G){console.error(`Error fetching prescriptions for pet ${$}:`,G)}return E}}),{data:R=[]}=Qt({queryKey:[`/api/exam-documents/pets/${S}`],enabled:b.length>0,queryFn:async()=>{if(b.length===0)return[];let E=[];for(const $ of b)try{const G=await fetch(`/api/exam-documents/pet/${$}`);if(G.ok){const se=await G.json();E.push(...se.map(de=>({...de,petId:$})))}}catch(G){console.error(`Error fetching exam documents for pet ${$}:`,G)}return E}}),C=E=>{const $=rl(E.target.value);if(e($),$.length>=9){const G=Tg($);p(G)}else p({isValid:!0,message:""})},_=async E=>{try{const $=x.find(Q=>Q.id===E);if(!$)return;const G=v.filter(Q=>Q.petId===E),se={certificateType:"vaccination",issueDate:new Date().toISOString(),purpose:"Carnet de Vacunación",observations:"Carnet digital de vacunas"};await Pg($,se,{name:"Alejandra Benavides",title:"Médica Veterinaria",credentials:"COLMEVET N° 3456",phone:"+56 9 1234 5678",email:"contacto@aleveterinaria.cl"}),m({title:"Carnet descargado",description:"El carnet de vacunas se ha descargado correctamente"})}catch($){console.error("Error generating vaccination card:",$),m({title:"Error",description:"No se pudo generar el carnet de vacunas",variant:"destructive"})}},P=async E=>{try{const $=x.find(se=>se.id===E.petId);if(!$)return;await Pg($,E,{name:"Alejandra Benavides",title:"Médica Veterinaria",credentials:"COLMEVET N° 3456",phone:"+56 9 1234 5678",email:"contacto@aleveterinaria.cl"}),m({title:"Certificado descargado",description:"El certificado se ha descargado correctamente"})}catch($){console.error("Error generating certificate:",$),m({title:"Error",description:"No se pudo generar el certificado",variant:"destructive"})}},A=async E=>{try{const $=x.find(se=>se.id===E.petId);if(!$)return;await h0($,E,{name:"Alejandra Benavides",title:"Médica Veterinaria",credentials:"COLMEVET N° 3456",phone:"+56 9 1234 5678",email:"contacto@aleveterinaria.cl"}),m({title:"Receta generada",description:"La receta se ha abierto correctamente"})}catch($){console.error("Error generating prescription:",$),m({title:"Error",description:"No se pudo generar la receta",variant:"destructive"})}},F=async()=>{const E=s==="rut"?t:n;if(!E){m({title:"Error",description:`Ingresa ${s==="rut"?"tu RUT":s==="name"?"el nombre de la mascota":"el número de ficha"} para buscar`,variant:"destructive"});return}if(s==="rut"){const $=Tg(E);if(!$.isValid){m({title:"RUT inválido",description:$.message,variant:"destructive"});return}}try{l(!0),s==="rut"&&r(t),setTimeout(async()=>{await w(),x.length===0?m({title:"Sin registros",description:`No se encontraron mascotas con ${s==="rut"?"este RUT":s==="name"?"este nombre":"este número de ficha"}`,variant:"destructive"}):(u(x[0]||{}),m({title:"Búsqueda exitosa",description:`Se encontraron ${x.length} mascota(s)`}))},100)}catch($){console.error("Search error:",$),m({title:"Error",description:"No se pudo realizar la búsqueda. Intenta nuevamente.",variant:"destructive"})}},D=()=>i.jsxs(Ae,{className:"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2 text-blue-800",children:[i.jsx(Oc,{className:"h-5 w-5"}),"Carnet Digital Veterinario"]}),i.jsx(Jt,{children:"Certificación oficial de vacunas y desparasitaciones"})]}),i.jsx(De,{children:i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:x.map(E=>{const $=v.filter(se=>se.petId===E.id),G=T.filter(se=>se.petId===E.id);return i.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-200",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx(is,{className:"h-6 w-6 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:E.name}),i.jsxs("p",{className:"text-sm text-gray-600",children:[E.species," - ",E.breed]}),i.jsx("p",{className:"text-xs text-gray-500",children:E.birthDate&&V1(B1(E.birthDate))})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Vacunas al día"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:$.length>0?$.slice(0,3).map((se,de)=>i.jsx($r,{variant:"secondary",className:"text-xs",children:se.vaccineName},de)):i.jsx("span",{className:"text-xs text-gray-400",children:"Sin registros"})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Desparasitaciones"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:G.length>0?G.slice(0,2).map((se,de)=>i.jsx($r,{variant:"outline",className:"text-xs",children:se.product},de)):i.jsx("span",{className:"text-xs text-gray-400",children:"Sin registros"})})]})]}),i.jsxs(ee,{size:"sm",className:"w-full mt-4",variant:"outline",onClick:()=>_(E.id),"data-testid":`download-card-${E.id}`,children:[i.jsx(el,{className:"h-4 w-4 mr-2"}),"Descargar Carnet"]})]},E.id)})})})]});return o?x.length===0?i.jsxs("div",{className:"min-h-screen bg-[#F4EDE6]",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"container mx-auto px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:"/assets/logo.png",alt:"Ale Veterinaria Logo",className:"w-8 h-8"}),i.jsxs("h1",{className:"text-xl font-poppins font-bold text-darkgray",children:[i.jsx("span",{className:"text-mint",children:"Ale"})," Veterinaria"]})]}),i.jsx(uh,{href:"/",children:i.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-2","data-testid":"button-home",children:[i.jsx(bm,{className:"w-4 h-4"}),"Volver al Inicio"]})})]})})}),i.jsx("div",{className:"flex items-center justify-center p-6",style:{minHeight:"calc(100vh - 80px)"},children:i.jsx(Ae,{className:"w-full max-w-md text-center",children:i.jsxs(De,{className:"pt-6",children:[i.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(cg,{className:"h-6 w-6 text-gray-400"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Sin registros encontrados"}),i.jsxs("p",{className:"text-gray-600 mb-4",children:["No se encontraron mascotas con ",s==="rut"?`el RUT: ${t}`:s==="name"?`el nombre: ${n}`:`el número de ficha: ${n}`]}),i.jsx(ee,{onClick:()=>{l(!1),e(""),r(""),u(null)},variant:"outline",children:"Intentar nuevamente"})]})})})]}):i.jsxs("div",{className:"min-h-screen bg-[#F4EDE6]",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"container mx-auto px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:"/assets/logo.png",alt:"Ale Veterinaria Logo",className:"w-8 h-8"}),i.jsxs("h1",{className:"text-xl font-poppins font-bold text-darkgray",children:[i.jsx("span",{className:"text-mint",children:"Ale"})," Veterinaria"]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(uh,{href:"/",children:i.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-2","data-testid":"button-home",children:[i.jsx(bm,{className:"w-4 h-4"}),"Volver al Inicio"]})}),i.jsx(ee,{onClick:()=>{l(!1),e(""),u(null)},variant:"outline",size:"sm","data-testid":"button-logout",children:"Salir"})]})]})})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Portal del Tutor"}),i.jsxs("p",{className:"text-gray-600",children:["Bienvenido ",(c==null?void 0:c.name)||"Tutor"," - RUT: ",t]})]}),D(),i.jsxs(u0,{defaultValue:"appointments",className:"w-full",children:[i.jsxs(Ag,{className:"grid w-full grid-cols-6",children:[i.jsxs(rs,{value:"appointments",className:"flex items-center gap-2",children:[i.jsx(Bk,{className:"h-4 w-4"}),"Agenda"]}),i.jsxs(rs,{value:"prescriptions",className:"flex items-center gap-2",children:[i.jsx(xn,{className:"h-4 w-4"}),"Recetas"]}),i.jsxs(rs,{value:"certificates",className:"flex items-center gap-2",children:[i.jsx(Oc,{className:"h-4 w-4"}),"Certificados"]}),i.jsxs(rs,{value:"vaccinations",className:"flex items-center gap-2",children:[i.jsx(tl,{className:"h-4 w-4"}),"Vacunas"]}),i.jsxs(rs,{value:"dewormings",className:"flex items-center gap-2",children:[i.jsx(Gc,{className:"h-4 w-4"}),"Desparasitaciones"]}),i.jsxs(rs,{value:"exam-results",className:"flex items-center gap-2",children:[i.jsx(xn,{className:"h-4 w-4"}),"Exámenes"]})]}),i.jsx(ss,{value:"appointments",className:"mt-6",children:i.jsx(z1,{tutorRut:t,pets:x})}),i.jsx(ss,{value:"prescriptions",className:"mt-6",children:i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(xn,{className:"h-5 w-5"}),"Recetas Médicas"]}),i.jsx(Jt,{children:"Historial de recetas emitidas para tus mascotas"})]}),i.jsx(De,{children:L.length>0?i.jsx("div",{className:"space-y-4",children:L.map((E,$)=>{var G;return i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:((G=x.find(se=>se.id===E.petId))==null?void 0:G.name)||"Mascota"}),i.jsx($r,{variant:"secondary",children:ks(E.date)})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:E.diagnosis}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Dr. ",E.veterinarianName]}),i.jsxs(ee,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>A(E),"data-testid":`view-prescription-${$}`,children:[i.jsx(Ob,{className:"h-4 w-4 mr-2"}),"Ver Receta"]})]},$)})}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(xn,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:"No hay recetas registradas"})]})})]})}),i.jsx(ss,{value:"certificates",className:"mt-6",children:i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(Oc,{className:"h-5 w-5"}),"Certificados Emitidos"]}),i.jsx(Jt,{children:"Certificados de salud y otros documentos oficiales"})]}),i.jsx(De,{children:I.length>0?i.jsx("div",{className:"space-y-4",children:I.map((E,$)=>{var G;return i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold",children:((G=x.find(se=>se.id===E.petId))==null?void 0:G.name)||"Mascota"}),i.jsx($r,{variant:"secondary",children:ks(E.issueDate)})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:E.type}),i.jsx("p",{className:"text-xs text-gray-500 mb-2",children:E.purpose}),i.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>P(E),"data-testid":`download-certificate-${$}`,children:[i.jsx(el,{className:"h-4 w-4 mr-2"}),"Descargar PDF"]})]},$)})}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(Oc,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:"No hay certificados emitidos"})]})})]})}),i.jsx(ss,{value:"vaccinations",className:"mt-6",children:i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(tl,{className:"h-5 w-5"}),"Registro de Vacunas"]}),i.jsx(Jt,{children:"Historial completo de vacunación de tus mascotas"})]}),i.jsx(De,{children:v.length>0?i.jsx("div",{className:"space-y-6",children:x.map(E=>{const $=v.filter(G=>G.petId===E.id);return i.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"font-semibold",children:E.name}),i.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>_(E.id),"data-testid":`download-vaccination-card-${E.id}`,children:[i.jsx(el,{className:"h-4 w-4 mr-2"}),"Descargar Carnet"]})]}),i.jsx("div",{className:"space-y-3",children:$.map((G,se)=>i.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-medium",children:G.vaccineName}),i.jsx($r,{variant:"outline",children:ks(G.applicationDate)})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsxs("p",{children:["Laboratorio: ",G.laboratory]}),i.jsxs("p",{children:["Lote: ",G.batchNumber]}),G.nextDueDate&&i.jsxs("p",{children:["Próxima dosis: ",ks(G.nextDueDate)]})]})]},se))})]},E.id)})}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(tl,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:"No hay vacunas registradas"})]})})]})}),i.jsx(ss,{value:"dewormings",className:"mt-6",children:i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(Gc,{className:"h-5 w-5"}),"Registro de Desparasitaciones"]}),i.jsx(Jt,{children:"Historial completo de desparasitaciones de tus mascotas"})]}),i.jsx(De,{children:T.length>0?i.jsx("div",{className:"space-y-6",children:x.map(E=>{const $=T.filter(G=>G.petId===E.id);return i.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[i.jsx("h3",{className:"font-semibold mb-3",children:E.name}),i.jsx("div",{className:"space-y-3",children:$.map((G,se)=>i.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-medium",children:G.product}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($r,{variant:G.type==="internal"?"default":"secondary",children:G.type==="internal"?"Interno":"Externo"}),i.jsx($r,{variant:"outline",children:ks(G.applicationDate)})]})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsxs("p",{children:["Principio activo: ",G.activeIngredient]}),i.jsxs("p",{children:["Laboratorio: ",G.laboratory]}),i.jsxs("p",{children:["Dosis: ",G.dose]}),G.nextDueDate&&i.jsxs("p",{children:["Próxima dosis: ",ks(G.nextDueDate)]})]})]},se))})]},E.id)})}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(Gc,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:"No hay desparasitaciones registradas"})]})})]})}),i.jsx(ss,{value:"exam-results",className:"mt-6",children:i.jsxs(Ae,{children:[i.jsxs(Le,{children:[i.jsxs(Be,{className:"flex items-center gap-2",children:[i.jsx(xn,{className:"h-5 w-5"}),"Resultados de Exámenes"]}),i.jsx(Jt,{children:"Documentos y resultados de exámenes realizados a tus mascotas"})]}),i.jsx(De,{children:R.length>0?i.jsx("div",{className:"space-y-6",children:x.map(E=>{const $=R.filter(G=>G.petId===E.id);return $.length===0?null:i.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[i.jsx("h3",{className:"font-semibold mb-3",children:E.name}),i.jsx("div",{className:"space-y-3",children:$.map((G,se)=>i.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:G.examType}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:G.fileName})]}),i.jsx($r,{variant:"outline",children:ks(G.uploadDate)})]}),i.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:[i.jsxs("p",{children:["Tamaño: ",Math.round(G.fileSize/1024)," KB"]}),G.notes&&i.jsxs("p",{children:["Notas: ",G.notes]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>window.open(G.objectPath,"_blank"),children:[i.jsx(Ob,{className:"h-4 w-4 mr-2"}),"Ver Documento"]}),i.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>{const de=document.createElement("a");de.href=G.objectPath,de.download=G.fileName,de.click()},children:[i.jsx(el,{className:"h-4 w-4 mr-2"}),"Descargar"]})]})]},se))})]},E.id)})}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(xn,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),i.jsx("p",{children:"No hay resultados de exámenes disponibles"})]})})]})})]})]})})]}):i.jsxs("div",{className:"min-h-screen bg-[#F4EDE6]",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"container mx-auto px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:"/assets/logo.png",alt:"Ale Veterinaria Logo",className:"w-8 h-8"}),i.jsxs("h1",{className:"text-xl font-poppins font-bold text-darkgray",children:[i.jsx("span",{className:"text-mint",children:"Ale"})," Veterinaria"]})]}),i.jsx(uh,{href:"/",children:i.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-2","data-testid":"button-home",children:[i.jsx(bm,{className:"w-4 h-4"}),"Volver al Inicio"]})})]})})}),i.jsx("div",{className:"flex items-center justify-center p-6",style:{minHeight:"calc(100vh - 80px)"},children:i.jsxs(Ae,{className:"w-full max-w-md",children:[i.jsxs(Le,{className:"text-center",children:[i.jsx(Be,{className:"text-2xl font-bold text-gray-800",children:"Portal del Tutor"}),i.jsx(Jt,{children:"Accede con tu RUT para ver los registros de tus mascotas"})]}),i.jsxs(De,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Tipo de búsqueda"}),i.jsxs(Ue,{value:s,onValueChange:E=>a(E),children:[i.jsx(Fe,{"data-testid":"select-search-type",children:i.jsx(ze,{placeholder:"Seleccionar método de búsqueda"})}),i.jsxs(Me,{children:[i.jsx(W,{value:"rut",children:"Por RUT del Tutor"}),i.jsx(W,{value:"name",children:"Por Nombre de Mascota"}),i.jsx(W,{value:"record",children:"Por Número de Ficha"})]})]})]}),i.jsx("div",{className:"space-y-2",children:s==="rut"?i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-sm font-medium",children:"RUT del Tutor"}),i.jsx(J,{type:"text",placeholder:"12.345.678-9",value:t,onChange:C,className:`${h.isValid?"":"border-red-500"}`,"data-testid":"input-rut-tutor"}),!h.isValid&&i.jsx("p",{className:"text-sm text-red-500",children:h.message})]}):s==="name"?i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-sm font-medium",children:"Nombre de la Mascota"}),i.jsx(J,{type:"text",placeholder:"Nombre de tu mascota",value:n,onChange:E=>r(E.target.value),"data-testid":"input-pet-name"})]}):i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"text-sm font-medium",children:"Número de Ficha"}),i.jsx(J,{type:"text",placeholder:"Número de ficha médica",value:n,onChange:E=>r(E.target.value),"data-testid":"input-record-number"})]})}),i.jsx(ee,{onClick:F,className:"w-full bg-emerald-600 hover:bg-emerald-700",disabled:N,"data-testid":"button-search-pets",children:N?"Buscando...":i.jsxs(i.Fragment,{children:[i.jsx(cg,{className:"h-4 w-4 mr-2"}),s==="rut"?"Acceder por RUT":s==="name"?"Buscar por Nombre":"Buscar por Ficha"]})}),i.jsx("div",{className:"text-xs text-gray-500 text-center mt-4",children:s==="rut"?i.jsxs(i.Fragment,{children:[i.jsx("p",{children:"Solo necesitas tu RUT para acceder."}),i.jsx("p",{children:"No requieres crear una cuenta."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["Busca las mascotas por ",s==="name"?"nombre":"número de ficha","."]}),i.jsx("p",{children:"Accede directamente a los registros veterinarios."})]})})]})]})})]})}var rf=t=>t.type==="checkbox",il=t=>t instanceof Date,yr=t=>t==null;const d4=t=>typeof t=="object";var mn=t=>!yr(t)&&!Array.isArray(t)&&d4(t)&&!il(t),wZ=t=>mn(t)&&t.target?rf(t.target)?t.target.checked:t.target.value:t,_Z=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,CZ=(t,e)=>t.has(_Z(e)),SZ=t=>{const e=t.constructor&&t.constructor.prototype;return mn(e)&&e.hasOwnProperty("isPrototypeOf")},o_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Xn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(o_&&(t instanceof Blob||r))&&(n||mn(t)))if(e=n?[]:{},!n&&!SZ(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Xn(t[s]));else return t;return e}var Wv=t=>Array.isArray(t)?t.filter(Boolean):[],_n=t=>t===void 0,Ne=(t,e,n)=>{if(!e||!mn(t))return n;const r=Wv(e.split(/[,[\].]+?/)).reduce((s,a)=>yr(s)?s:s[a],t);return _n(r)||r===t?_n(t[e])?n:t[e]:r},mi=t=>typeof t=="boolean",l_=t=>/^\w*$/.test(t),u4=t=>Wv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ot=(t,e,n)=>{let r=-1;const s=l_(e)?[e]:u4(e),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let c=n;if(r!==o){const u=t[l];c=mn(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const rN={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ls={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Qi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};bn.createContext(null);var EZ=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==Ls.all&&(e._proxyFormState[o]=!r||Ls.all),t[o]}});return s},Ai=t=>typeof t=="string",jZ=(t,e,n,r,s)=>Ai(t)?(r&&e.watch.add(t),Ne(n,t,s)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Ne(n,a))):(r&&(e.watchAll=!0),n),h4=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},bh=t=>Array.isArray(t)?t:[t],sN=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},H0=t=>yr(t)||!d4(t);function Wa(t,e){if(H0(t)||H0(e))return t===e;if(il(t)&&il(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const a=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(il(a)&&il(o)||mn(a)&&mn(o)||Array.isArray(a)&&Array.isArray(o)?!Wa(a,o):a!==o)return!1}}return!0}var mr=t=>mn(t)&&!Object.keys(t).length,c_=t=>t.type==="file",$s=t=>typeof t=="function",Og=t=>{if(!o_)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},p4=t=>t.type==="select-multiple",d_=t=>t.type==="radio",NZ=t=>d_(t)||rf(t),bx=t=>Og(t)&&t.isConnected;function TZ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=_n(t)?r++:t[e[r++]];return t}function kZ(t){for(const e in t)if(t.hasOwnProperty(e)&&!_n(t[e]))return!1;return!0}function Nn(t,e){const n=Array.isArray(e)?e:l_(e)?[e]:u4(e),r=n.length===1?t:TZ(t,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(mn(r)&&mr(r)||Array.isArray(r)&&kZ(r))&&Nn(t,n.slice(0,-1)),t}var f4=t=>{for(const e in t)if($s(t[e]))return!0;return!1};function Fg(t,e={}){const n=Array.isArray(t);if(mn(t)||n)for(const r in t)Array.isArray(t[r])||mn(t[r])&&!f4(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Fg(t[r],e[r])):yr(t[r])||(e[r]=!0);return e}function m4(t,e,n){const r=Array.isArray(t);if(mn(t)||r)for(const s in t)Array.isArray(t[s])||mn(t[s])&&!f4(t[s])?_n(e)||H0(n[s])?n[s]=Array.isArray(t[s])?Fg(t[s],[]):{...Fg(t[s])}:m4(t[s],yr(e)?{}:e[s],n[s]):n[s]=!Wa(t[s],e[s]);return n}var Lu=(t,e)=>m4(t,e,Fg(e));const iN={value:!1,isValid:!1},aN={value:!0,isValid:!0};var g4=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!_n(t[0].attributes.value)?_n(t[0].value)||t[0].value===""?aN:{value:t[0].value,isValid:!0}:aN:iN}return iN},v4=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>_n(t)?t:e?t===""?NaN:t&&+t:n&&Ai(t)?new Date(t):r?r(t):t;const oN={isValid:!1,value:null};var y4=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,oN):oN;function lN(t){const e=t.ref;return c_(e)?e.files:d_(e)?y4(t.refs).value:p4(e)?[...e.selectedOptions].map(({value:n})=>n):rf(e)?g4(t.refs).value:v4(_n(e.value)?t.ref.value:e.value,t)}var AZ=(t,e,n,r)=>{const s={};for(const a of t){const o=Ne(e,a);o&&Ot(s,a,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Mg=t=>t instanceof RegExp,$u=t=>_n(t)?t:Mg(t)?t.source:mn(t)?Mg(t.value)?t.value.source:t.value:t,cN=t=>({isOnSubmit:!t||t===Ls.onSubmit,isOnBlur:t===Ls.onBlur,isOnChange:t===Ls.onChange,isOnAll:t===Ls.all,isOnTouch:t===Ls.onTouched});const dN="AsyncFunction";var PZ=t=>!!t&&!!t.validate&&!!($s(t.validate)&&t.validate.constructor.name===dN||mn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===dN)),IZ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),uN=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const wh=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const a=Ne(t,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(wh(l,e))break}else if(mn(l)&&wh(l,e))break}}};function hN(t,e,n){const r=Ne(t,n);if(r||l_(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=Ne(e,a),l=Ne(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};s.pop()}return{name:n}}var RZ=(t,e,n,r)=>{n(t);const{name:s,...a}=t;return mr(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||Ls.all))},DZ=(t,e,n)=>!t||!e||t===e||bh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),OZ=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,FZ=(t,e)=>!Wv(Ne(t,e)).length&&Nn(t,e),MZ=(t,e,n)=>{const r=bh(Ne(t,n));return Ot(r,"root",e[n]),Ot(t,n,r),t},Om=t=>Ai(t);function pN(t,e,n="validate"){if(Om(t)||Array.isArray(t)&&t.every(Om)||mi(t)&&!t)return{type:n,message:Om(t)?t:"",ref:e}}var wc=t=>mn(t)&&!Mg(t)?t:{value:t,message:""},fN=async(t,e,n,r,s,a)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:h,min:p,max:m,pattern:x,validate:N,name:w,valueAsNumber:b,mount:S}=t._f,v=Ne(n,w);if(!S||e.has(w))return{};const T=l?l[0]:o,I=D=>{s&&T.reportValidity&&(T.setCustomValidity(mi(D)?"":D||""),T.reportValidity())},L={},R=d_(o),C=rf(o),_=R||C,P=(b||c_(o))&&_n(o.value)&&_n(v)||Og(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,A=h4.bind(null,w,r,L),F=(D,E,$,G=Qi.maxLength,se=Qi.minLength)=>{const de=D?E:$;L[w]={type:D?G:se,message:de,ref:o,...A(D?G:se,de)}};if(a?!Array.isArray(v)||!v.length:c&&(!_&&(P||yr(v))||mi(v)&&!v||C&&!g4(l).isValid||R&&!y4(l).isValid)){const{value:D,message:E}=Om(c)?{value:!!c,message:c}:wc(c);if(D&&(L[w]={type:Qi.required,message:E,ref:T,...A(Qi.required,E)},!r))return I(E),L}if(!P&&(!yr(p)||!yr(m))){let D,E;const $=wc(m),G=wc(p);if(!yr(v)&&!isNaN(v)){const se=o.valueAsNumber||v&&+v;yr($.value)||(D=se>$.value),yr(G.value)||(E=se<G.value)}else{const se=o.valueAsDate||new Date(v),de=ue=>new Date(new Date().toDateString()+" "+ue),Q=o.type=="time",ce=o.type=="week";Ai($.value)&&v&&(D=Q?de(v)>de($.value):ce?v>$.value:se>new Date($.value)),Ai(G.value)&&v&&(E=Q?de(v)<de(G.value):ce?v<G.value:se<new Date(G.value))}if((D||E)&&(F(!!D,$.message,G.message,Qi.max,Qi.min),!r))return I(L[w].message),L}if((u||h)&&!P&&(Ai(v)||a&&Array.isArray(v))){const D=wc(u),E=wc(h),$=!yr(D.value)&&v.length>+D.value,G=!yr(E.value)&&v.length<+E.value;if(($||G)&&(F($,D.message,E.message),!r))return I(L[w].message),L}if(x&&!P&&Ai(v)){const{value:D,message:E}=wc(x);if(Mg(D)&&!v.match(D)&&(L[w]={type:Qi.pattern,message:E,ref:o,...A(Qi.pattern,E)},!r))return I(E),L}if(N){if($s(N)){const D=await N(v,n),E=pN(D,T);if(E&&(L[w]={...E,...A(Qi.validate,E.message)},!r))return I(E.message),L}else if(mn(N)){let D={};for(const E in N){if(!mr(D)&&!r)break;const $=pN(await N[E](v,n),T,E);$&&(D={...$,...A(E,$.message)},I($.message),r&&(L[w]=D))}if(!mr(D)&&(L[w]={ref:T,...D},!r))return L}}return I(!0),L};const LZ={mode:Ls.onSubmit,reValidateMode:Ls.onChange,shouldFocusError:!0};function $Z(t={}){let e={...LZ,...t},n={submitCount:0,isDirty:!1,isLoading:$s(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=mn(e.defaultValues)||mn(e.values)?Xn(e.values||e.defaultValues)||{}:{},a=e.shouldUnregister?{}:Xn(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...h};const m={array:sN(),state:sN()},x=cN(e.mode),N=cN(e.reValidateMode),w=e.criteriaMode===Ls.all,b=U=>H=>{clearTimeout(u),u=setTimeout(U,H)},S=async U=>{if(!e.disabled&&(h.isValid||p.isValid||U)){const H=e.resolver?mr((await P()).errors):await F(r,!0);H!==n.isValid&&m.state.next({isValid:H})}},v=(U,H)=>{!e.disabled&&(h.isValidating||h.validatingFields||p.isValidating||p.validatingFields)&&((U||Array.from(l.mount)).forEach(ne=>{ne&&(H?Ot(n.validatingFields,ne,H):Nn(n.validatingFields,ne))}),m.state.next({validatingFields:n.validatingFields,isValidating:!mr(n.validatingFields)}))},T=(U,H=[],ne,xe,le=!0,K=!0)=>{if(xe&&ne&&!e.disabled){if(o.action=!0,K&&Array.isArray(Ne(r,U))){const ge=ne(Ne(r,U),xe.argA,xe.argB);le&&Ot(r,U,ge)}if(K&&Array.isArray(Ne(n.errors,U))){const ge=ne(Ne(n.errors,U),xe.argA,xe.argB);le&&Ot(n.errors,U,ge),FZ(n.errors,U)}if((h.touchedFields||p.touchedFields)&&K&&Array.isArray(Ne(n.touchedFields,U))){const ge=ne(Ne(n.touchedFields,U),xe.argA,xe.argB);le&&Ot(n.touchedFields,U,ge)}(h.dirtyFields||p.dirtyFields)&&(n.dirtyFields=Lu(s,a)),m.state.next({name:U,isDirty:E(U,H),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ot(a,U,H)},I=(U,H)=>{Ot(n.errors,U,H),m.state.next({errors:n.errors})},L=U=>{n.errors=U,m.state.next({errors:n.errors,isValid:!1})},R=(U,H,ne,xe)=>{const le=Ne(r,U);if(le){const K=Ne(a,U,_n(ne)?Ne(s,U):ne);_n(K)||xe&&xe.defaultChecked||H?Ot(a,U,H?K:lN(le._f)):se(U,K),o.mount&&S()}},C=(U,H,ne,xe,le)=>{let K=!1,ge=!1;const it={name:U};if(!e.disabled){if(!ne||xe){(h.isDirty||p.isDirty)&&(ge=n.isDirty,n.isDirty=it.isDirty=E(),K=ge!==it.isDirty);const It=Wa(Ne(s,U),H);ge=!!Ne(n.dirtyFields,U),It?Nn(n.dirtyFields,U):Ot(n.dirtyFields,U,!0),it.dirtyFields=n.dirtyFields,K=K||(h.dirtyFields||p.dirtyFields)&&ge!==!It}if(ne){const It=Ne(n.touchedFields,U);It||(Ot(n.touchedFields,U,ne),it.touchedFields=n.touchedFields,K=K||(h.touchedFields||p.touchedFields)&&It!==ne)}K&&le&&m.state.next(it)}return K?it:{}},_=(U,H,ne,xe)=>{const le=Ne(n.errors,U),K=(h.isValid||p.isValid)&&mi(H)&&n.isValid!==H;if(e.delayError&&ne?(c=b(()=>I(U,ne)),c(e.delayError)):(clearTimeout(u),c=null,ne?Ot(n.errors,U,ne):Nn(n.errors,U)),(ne?!Wa(le,ne):le)||!mr(xe)||K){const ge={...xe,...K&&mi(H)?{isValid:H}:{},errors:n.errors,name:U};n={...n,...ge},m.state.next(ge)}},P=async U=>{v(U,!0);const H=await e.resolver(a,e.context,AZ(U||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return v(U),H},A=async U=>{const{errors:H}=await P(U);if(U)for(const ne of U){const xe=Ne(H,ne);xe?Ot(n.errors,ne,xe):Nn(n.errors,ne)}else n.errors=H;return H},F=async(U,H,ne={valid:!0})=>{for(const xe in U){const le=U[xe];if(le){const{_f:K,...ge}=le;if(K){const it=l.array.has(K.name),It=le._f&&PZ(le._f);It&&h.validatingFields&&v([xe],!0);const Mt=await fN(le,l.disabled,a,w,e.shouldUseNativeValidation&&!H,it);if(It&&h.validatingFields&&v([xe]),Mt[K.name]&&(ne.valid=!1,H))break;!H&&(Ne(Mt,K.name)?it?MZ(n.errors,Mt,K.name):Ot(n.errors,K.name,Mt[K.name]):Nn(n.errors,K.name))}!mr(ge)&&await F(ge,H,ne)}}return ne.valid},D=()=>{for(const U of l.unMount){const H=Ne(r,U);H&&(H._f.refs?H._f.refs.every(ne=>!bx(ne)):!bx(H._f.ref))&&Ye(U)}l.unMount=new Set},E=(U,H)=>!e.disabled&&(U&&H&&Ot(a,U,H),!Wa($e(),s)),$=(U,H,ne)=>jZ(U,l,{...o.mount?a:_n(H)?s:Ai(U)?{[U]:H}:H},ne,H),G=U=>Wv(Ne(o.mount?a:s,U,e.shouldUnregister?Ne(s,U,[]):[])),se=(U,H,ne={})=>{const xe=Ne(r,U);let le=H;if(xe){const K=xe._f;K&&(!K.disabled&&Ot(a,U,v4(H,K)),le=Og(K.ref)&&yr(H)?"":H,p4(K.ref)?[...K.ref.options].forEach(ge=>ge.selected=le.includes(ge.value)):K.refs?rf(K.ref)?K.refs.length>1?K.refs.forEach(ge=>(!ge.defaultChecked||!ge.disabled)&&(ge.checked=Array.isArray(le)?!!le.find(it=>it===ge.value):le===ge.value)):K.refs[0]&&(K.refs[0].checked=!!le):K.refs.forEach(ge=>ge.checked=ge.value===le):c_(K.ref)?K.ref.value="":(K.ref.value=le,K.ref.type||m.state.next({name:U,values:Xn(a)})))}(ne.shouldDirty||ne.shouldTouch)&&C(U,le,ne.shouldTouch,ne.shouldDirty,!0),ne.shouldValidate&&we(U)},de=(U,H,ne)=>{for(const xe in H){const le=H[xe],K=`${U}.${xe}`,ge=Ne(r,K);(l.array.has(U)||mn(le)||ge&&!ge._f)&&!il(le)?de(K,le,ne):se(K,le,ne)}},Q=(U,H,ne={})=>{const xe=Ne(r,U),le=l.array.has(U),K=Xn(H);Ot(a,U,K),le?(m.array.next({name:U,values:Xn(a)}),(h.isDirty||h.dirtyFields||p.isDirty||p.dirtyFields)&&ne.shouldDirty&&m.state.next({name:U,dirtyFields:Lu(s,a),isDirty:E(U,K)})):xe&&!xe._f&&!yr(K)?de(U,K,ne):se(U,K,ne),uN(U,l)&&m.state.next({...n}),m.state.next({name:o.mount?U:void 0,values:Xn(a)})},ce=async U=>{o.mount=!0;const H=U.target;let ne=H.name,xe=!0;const le=Ne(r,ne),K=ge=>{xe=Number.isNaN(ge)||il(ge)&&isNaN(ge.getTime())||Wa(ge,Ne(a,ne,ge))};if(le){let ge,it;const It=H.type?lN(le._f):wZ(U),Mt=U.type===rN.BLUR||U.type===rN.FOCUS_OUT,ar=!IZ(le._f)&&!e.resolver&&!Ne(n.errors,ne)&&!le._f.deps||OZ(Mt,Ne(n.touchedFields,ne),n.isSubmitted,N,x),Un=uN(ne,l,Mt);Ot(a,ne,It),Mt?(le._f.onBlur&&le._f.onBlur(U),c&&c(0)):le._f.onChange&&le._f.onChange(U);const vn=C(ne,It,Mt),Pe=!mr(vn)||Un;if(!Mt&&m.state.next({name:ne,type:U.type,values:Xn(a)}),ar)return(h.isValid||p.isValid)&&(e.mode==="onBlur"?Mt&&S():Mt||S()),Pe&&m.state.next({name:ne,...Un?{}:vn});if(!Mt&&Un&&m.state.next({...n}),e.resolver){const{errors:Ht}=await P([ne]);if(K(It),xe){const at=hN(n.errors,r,ne),cn=hN(Ht,r,at.name||ne);ge=cn.error,ne=cn.name,it=mr(Ht)}}else v([ne],!0),ge=(await fN(le,l.disabled,a,w,e.shouldUseNativeValidation))[ne],v([ne]),K(It),xe&&(ge?it=!1:(h.isValid||p.isValid)&&(it=await F(r,!0)));xe&&(le._f.deps&&we(le._f.deps),_(ne,it,ge,vn))}},ue=(U,H)=>{if(Ne(n.errors,H)&&U.focus)return U.focus(),1},we=async(U,H={})=>{let ne,xe;const le=bh(U);if(e.resolver){const K=await A(_n(U)?U:le);ne=mr(K),xe=U?!le.some(ge=>Ne(K,ge)):ne}else U?(xe=(await Promise.all(le.map(async K=>{const ge=Ne(r,K);return await F(ge&&ge._f?{[K]:ge}:ge)}))).every(Boolean),!(!xe&&!n.isValid)&&S()):xe=ne=await F(r);return m.state.next({...!Ai(U)||(h.isValid||p.isValid)&&ne!==n.isValid?{}:{name:U},...e.resolver||!U?{isValid:ne}:{},errors:n.errors}),H.shouldFocus&&!xe&&wh(r,ue,U?le:l.mount),xe},$e=U=>{const H={...o.mount?a:s};return _n(U)?H:Ai(U)?Ne(H,U):U.map(ne=>Ne(H,ne))},B=(U,H)=>({invalid:!!Ne((H||n).errors,U),isDirty:!!Ne((H||n).dirtyFields,U),error:Ne((H||n).errors,U),isValidating:!!Ne(n.validatingFields,U),isTouched:!!Ne((H||n).touchedFields,U)}),me=U=>{U&&bh(U).forEach(H=>Nn(n.errors,H)),m.state.next({errors:U?n.errors:{}})},ve=(U,H,ne)=>{const xe=(Ne(r,U,{_f:{}})._f||{}).ref,le=Ne(n.errors,U)||{},{ref:K,message:ge,type:it,...It}=le;Ot(n.errors,U,{...It,...H,ref:xe}),m.state.next({name:U,errors:n.errors,isValid:!1}),ne&&ne.shouldFocus&&xe&&xe.focus&&xe.focus()},Ge=(U,H)=>$s(U)?m.state.subscribe({next:ne=>U($(void 0,H),ne)}):$(U,H,!0),ye=U=>m.state.subscribe({next:H=>{DZ(U.name,H.name,U.exact)&&RZ(H,U.formState||h,et,U.reRenderRoot)&&U.callback({values:{...a},...n,...H})}}).unsubscribe,Xe=U=>(o.mount=!0,p={...p,...U.formState},ye({...U,formState:p})),Ye=(U,H={})=>{for(const ne of U?bh(U):l.mount)l.mount.delete(ne),l.array.delete(ne),H.keepValue||(Nn(r,ne),Nn(a,ne)),!H.keepError&&Nn(n.errors,ne),!H.keepDirty&&Nn(n.dirtyFields,ne),!H.keepTouched&&Nn(n.touchedFields,ne),!H.keepIsValidating&&Nn(n.validatingFields,ne),!e.shouldUnregister&&!H.keepDefaultValue&&Nn(s,ne);m.state.next({values:Xn(a)}),m.state.next({...n,...H.keepDirty?{isDirty:E()}:{}}),!H.keepIsValid&&S()},Je=({disabled:U,name:H})=>{(mi(U)&&o.mount||U||l.disabled.has(H))&&(U?l.disabled.add(H):l.disabled.delete(H))},Ve=(U,H={})=>{let ne=Ne(r,U);const xe=mi(H.disabled)||mi(e.disabled);return Ot(r,U,{...ne||{},_f:{...ne&&ne._f?ne._f:{ref:{name:U}},name:U,mount:!0,...H}}),l.mount.add(U),ne?Je({disabled:mi(H.disabled)?H.disabled:e.disabled,name:U}):R(U,!0,H.value),{...xe?{disabled:H.disabled||e.disabled}:{},...e.progressive?{required:!!H.required,min:$u(H.min),max:$u(H.max),minLength:$u(H.minLength),maxLength:$u(H.maxLength),pattern:$u(H.pattern)}:{},name:U,onChange:ce,onBlur:ce,ref:le=>{if(le){Ve(U,H),ne=Ne(r,U);const K=_n(le.value)&&le.querySelectorAll&&le.querySelectorAll("input,select,textarea")[0]||le,ge=NZ(K),it=ne._f.refs||[];if(ge?it.find(It=>It===K):K===ne._f.ref)return;Ot(r,U,{_f:{...ne._f,...ge?{refs:[...it.filter(bx),K,...Array.isArray(Ne(s,U))?[{}]:[]],ref:{type:K.type,name:U}}:{ref:K}}}),R(U,!1,void 0,K)}else ne=Ne(r,U,{}),ne._f&&(ne._f.mount=!1),(e.shouldUnregister||H.shouldUnregister)&&!(CZ(l.array,U)&&o.action)&&l.unMount.add(U)}}},Ke=()=>e.shouldFocusError&&wh(r,ue,l.mount),At=U=>{mi(U)&&(m.state.next({disabled:U}),wh(r,(H,ne)=>{const xe=Ne(r,ne);xe&&(H.disabled=xe._f.disabled||U,Array.isArray(xe._f.refs)&&xe._f.refs.forEach(le=>{le.disabled=xe._f.disabled||U}))},0,!1))},Re=(U,H)=>async ne=>{let xe;ne&&(ne.preventDefault&&ne.preventDefault(),ne.persist&&ne.persist());let le=Xn(a);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:K,values:ge}=await P();n.errors=K,le=ge}else await F(r);if(l.disabled.size)for(const K of l.disabled)Ot(le,K,void 0);if(Nn(n.errors,"root"),mr(n.errors)){m.state.next({errors:{}});try{await U(le,ne)}catch(K){xe=K}}else H&&await H({...n.errors},ne),Ke(),setTimeout(Ke);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:mr(n.errors)&&!xe,submitCount:n.submitCount+1,errors:n.errors}),xe)throw xe},Pt=(U,H={})=>{Ne(r,U)&&(_n(H.defaultValue)?Q(U,Xn(Ne(s,U))):(Q(U,H.defaultValue),Ot(s,U,Xn(H.defaultValue))),H.keepTouched||Nn(n.touchedFields,U),H.keepDirty||(Nn(n.dirtyFields,U),n.isDirty=H.defaultValue?E(U,Xn(Ne(s,U))):E()),H.keepError||(Nn(n.errors,U),h.isValid&&S()),m.state.next({...n}))},ln=(U,H={})=>{const ne=U?Xn(U):s,xe=Xn(ne),le=mr(U),K=le?s:xe;if(H.keepDefaultValues||(s=ne),!H.keepValues){if(H.keepDirtyValues){const ge=new Set([...l.mount,...Object.keys(Lu(s,a))]);for(const it of Array.from(ge))Ne(n.dirtyFields,it)?Ot(K,it,Ne(a,it)):Q(it,Ne(K,it))}else{if(o_&&_n(U))for(const ge of l.mount){const it=Ne(r,ge);if(it&&it._f){const It=Array.isArray(it._f.refs)?it._f.refs[0]:it._f.ref;if(Og(It)){const Mt=It.closest("form");if(Mt){Mt.reset();break}}}}for(const ge of l.mount)Q(ge,Ne(K,ge))}a=Xn(K),m.array.next({values:{...K}}),m.state.next({values:{...K}})}l={mount:H.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!H.keepIsValid||!!H.keepDirtyValues,o.watch=!!e.shouldUnregister,m.state.next({submitCount:H.keepSubmitCount?n.submitCount:0,isDirty:le?!1:H.keepDirty?n.isDirty:!!(H.keepDefaultValues&&!Wa(U,s)),isSubmitted:H.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:le?{}:H.keepDirtyValues?H.keepDefaultValues&&a?Lu(s,a):n.dirtyFields:H.keepDefaultValues&&U?Lu(s,U):H.keepDirty?n.dirtyFields:{},touchedFields:H.keepTouched?n.touchedFields:{},errors:H.keepErrors?n.errors:{},isSubmitSuccessful:H.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},sn=(U,H)=>ln($s(U)?U(a):U,H),st=(U,H={})=>{const ne=Ne(r,U),xe=ne&&ne._f;if(xe){const le=xe.refs?xe.refs[0]:xe.ref;le.focus&&(le.focus(),H.shouldSelect&&$s(le.select)&&le.select())}},et=U=>{n={...n,...U}},En={control:{register:Ve,unregister:Ye,getFieldState:B,handleSubmit:Re,setError:ve,_subscribe:ye,_runSchema:P,_getWatch:$,_getDirty:E,_setValid:S,_setFieldArray:T,_setDisabledField:Je,_setErrors:L,_getFieldArray:G,_reset:ln,_resetDefaultValues:()=>$s(e.defaultValues)&&e.defaultValues().then(U=>{sn(U,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:At,_subjects:m,_proxyFormState:h,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(U){o=U},get _defaultValues(){return s},get _names(){return l},set _names(U){l=U},get _formState(){return n},get _options(){return e},set _options(U){e={...e,...U}}},subscribe:Xe,trigger:we,register:Ve,handleSubmit:Re,watch:Ge,setValue:Q,getValues:$e,reset:sn,resetField:Pt,clearErrors:me,unregister:Ye,setError:ve,setFocus:st,getFieldState:B};return{...En,formControl:En}}function UZ(t={}){const e=bn.useRef(void 0),n=bn.useRef(void 0),[r,s]=bn.useState({isDirty:!1,isValidating:!1,isLoading:$s(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:$s(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:$Z(t),formState:r},t.formControl&&t.defaultValues&&!$s(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const a=e.current.control;return a._options=t,bn.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0}),[a]),bn.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),bn.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),bn.useEffect(()=>{t.values&&!Wa(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,s(o=>({...o}))):a._resetDefaultValues()},[t.values,a]),bn.useEffect(()=>{t.errors&&!mr(t.errors)&&a._setErrors(t.errors)},[t.errors,a]),bn.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),bn.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=EZ(r,a),e.current}const mN=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Ne(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},x4=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?mN(r.ref,n,t):r.refs&&r.refs.forEach(s=>mN(s,n,t))}},zZ=(t,e)=>{e.shouldUseNativeValidation&&x4(t,e);const n={};for(const r in t){const s=Ne(e.fields,r),a=Object.assign(t[r]||{},{ref:s&&s.ref});if(BZ(e.names||Object.keys(t),r)){const o=Object.assign({},Ne(n,r));Ot(o,"root",a),Ot(n,r,o)}else Ot(n,r,a)}return n},BZ=(t,e)=>t.some(n=>n.startsWith(e+"."));var VZ=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(p){return t.push(p)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=h4(o,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},HZ=function(t,e,n){return n===void 0&&(n={}),function(r,s,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return a.shouldUseNativeValidation&&x4({},a),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:zZ(VZ(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},yt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of a)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(yt||(yt={}));var q0;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(q0||(q0={}));const Se=yt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ta=t=>{switch(typeof t){case"undefined":return Se.undefined;case"string":return Se.string;case"number":return isNaN(t)?Se.nan:Se.number;case"boolean":return Se.boolean;case"function":return Se.function;case"bigint":return Se.bigint;case"symbol":return Se.symbol;case"object":return Array.isArray(t)?Se.array:t===null?Se.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Se.promise:typeof Map<"u"&&t instanceof Map?Se.map:typeof Set<"u"&&t instanceof Set?Se.set:typeof Date<"u"&&t instanceof Date?Se.date:Se.object;default:return Se.unknown}},pe=yt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),qZ=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class qr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof qr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,yt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}qr.create=t=>new qr(t);const Xd=(t,e)=>{let n;switch(t.code){case pe.invalid_type:t.received===Se.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case pe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,yt.jsonStringifyReplacer)}`;break;case pe.unrecognized_keys:n=`Unrecognized key(s) in object: ${yt.joinValues(t.keys,", ")}`;break;case pe.invalid_union:n="Invalid input";break;case pe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${yt.joinValues(t.options)}`;break;case pe.invalid_enum_value:n=`Invalid enum value. Expected ${yt.joinValues(t.options)}, received '${t.received}'`;break;case pe.invalid_arguments:n="Invalid function arguments";break;case pe.invalid_return_type:n="Invalid function return type";break;case pe.invalid_date:n="Invalid date";break;case pe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:yt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case pe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case pe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case pe.custom:n="Invalid input";break;case pe.invalid_intersection_types:n="Intersection results could not be merged";break;case pe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case pe.not_finite:n="Number must be finite";break;default:n=e.defaultError,yt.assertNever(t)}return{message:n}};let b4=Xd;function WZ(t){b4=t}function Lg(){return b4}const $g=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,a=[...n,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...s,path:a,message:l}},GZ=[];function _e(t,e){const n=Lg(),r=$g({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Xd?void 0:Xd].filter(s=>!!s)});t.common.issues.push(r)}class ir{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Qe;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const a=await s.key,o=await s.value;r.push({key:a,value:o})}return ir.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return Qe;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const Qe=Object.freeze({status:"aborted"}),$c=t=>({status:"dirty",value:t}),Cr=t=>({status:"valid",value:t}),W0=t=>t.status==="aborted",G0=t=>t.status==="dirty",Hl=t=>t.status==="valid",Zh=t=>typeof Promise<"u"&&t instanceof Promise;function Ug(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function w4(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var ke;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ke||(ke={}));var eh,th;class Ui{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const gN=(t,e)=>{if(Hl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new qr(t.common.issues);return this._error=n,this._error}}};function tt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{var c,u;const{message:h}=t;return o.code==="invalid_enum_value"?{message:h??l.defaultError}:typeof l.data>"u"?{message:(c=h??r)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(u=h??n)!==null&&u!==void 0?u:l.defaultError}},description:s}}class lt{get description(){return this._def.description}_getType(e){return ta(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ir,ctx:{common:e.parent.common,data:e.data,parsedType:ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Zh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ta(e)},a=this._parseSync({data:e,path:s.path,parent:s});return gN(s,a)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ta(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:s});return Hl(a)?{value:a.value}:{issues:s.common.issues}}catch(a){!((r=(n=a==null?void 0:a.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(a=>Hl(a)?{value:a.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ta(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(Zh(s)?s:Promise.resolve(s));return gN(r,a)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const o=e(s),l=()=>a.addIssue({code:pe.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Js({schema:this,typeName:We.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Mi.create(this,this._def)}nullable(){return Ao.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Gs.create(this)}promise(){return eu.create(this,this._def)}or(e){return tp.create([this,e],this._def)}and(e){return np.create(this,e,this._def)}transform(e){return new Js({...tt(this._def),schema:this,typeName:We.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new op({...tt(this._def),innerType:this,defaultValue:n,typeName:We.ZodDefault})}brand(){return new u_({typeName:We.ZodBranded,type:this,...tt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new lp({...tt(this._def),innerType:this,catchValue:n,typeName:We.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return sf.create(this,e)}readonly(){return cp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const KZ=/^c[^\s-]{8,}$/i,QZ=/^[0-9a-z]+$/,YZ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ZZ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,XZ=/^[a-z0-9_-]{21}$/i,JZ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,eX=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tX=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let wx;const rX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,sX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,iX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,aX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,oX=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,lX=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_4="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",cX=new RegExp(`^${_4}$`);function C4(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function dX(t){return new RegExp(`^${C4(t)}$`)}function S4(t){let e=`${_4}T${C4(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function uX(t,e){return!!((e==="v4"||!e)&&rX.test(t)||(e==="v6"||!e)&&iX.test(t))}function hX(t,e){if(!JZ.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function pX(t,e){return!!((e==="v4"||!e)&&sX.test(t)||(e==="v6"||!e)&&aX.test(t))}class Hs extends lt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Se.string){const a=this._getOrReturnCtx(e);return _e(a,{code:pe.invalid_type,expected:Se.string,received:a.parsedType}),Qe}const r=new ir;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),_e(s,{code:pe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),_e(s,{code:pe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?_e(s,{code:pe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&_e(s,{code:pe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")tX.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"email",code:pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")wx||(wx=new RegExp(nX,"u")),wx.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"emoji",code:pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")ZZ.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"uuid",code:pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")XZ.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"nanoid",code:pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")KZ.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"cuid",code:pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")QZ.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"cuid2",code:pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")YZ.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"ulid",code:pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),_e(s,{validation:"url",code:pe.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"regex",code:pe.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),_e(s,{code:pe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),_e(s,{code:pe.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),_e(s,{code:pe.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?S4(a).test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{code:pe.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?cX.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{code:pe.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?dX(a).test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{code:pe.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?eX.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"duration",code:pe.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?uX(e.data,a.version)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"ip",code:pe.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?hX(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"jwt",code:pe.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?pX(e.data,a.version)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"cidr",code:pe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?oX.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"base64",code:pe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?lX.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"base64url",code:pe.invalid_string,message:a.message}),r.dirty()):yt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:pe.invalid_string,...ke.errToObj(r)})}_addCheck(e){return new Hs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ke.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ke.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ke.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ke.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ke.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ke.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ke.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ke.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ke.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ke.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ke.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ke.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ke.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ke.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ke.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ke.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ke.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ke.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ke.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ke.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ke.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ke.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ke.errToObj(n)})}nonempty(e){return this.min(1,ke.errToObj(e))}trim(){return new Hs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Hs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Hs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Hs.create=t=>{var e;return new Hs({checks:[],typeName:We.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...tt(t)})};function fX(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,a=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return a%o/Math.pow(10,s)}class No extends lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Se.number){const a=this._getOrReturnCtx(e);return _e(a,{code:pe.invalid_type,expected:Se.number,received:a.parsedType}),Qe}let r;const s=new ir;for(const a of this._def.checks)a.kind==="int"?yt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{code:pe.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:pe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:pe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?fX(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),_e(r,{code:pe.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{code:pe.not_finite,message:a.message}),s.dirty()):yt.assertNever(a);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ke.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ke.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ke.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ke.toString(n))}setLimit(e,n,r,s){return new No({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ke.toString(s)}]})}_addCheck(e){return new No({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ke.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ke.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ke.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ke.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ke.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ke.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&yt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}No.create=t=>new No({checks:[],typeName:We.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...tt(t)});class To extends lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Se.bigint)return this._getInvalidInput(e);let r;const s=new ir;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:pe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:pe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:pe.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):yt.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return _e(n,{code:pe.invalid_type,expected:Se.bigint,received:n.parsedType}),Qe}gte(e,n){return this.setLimit("min",e,!0,ke.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ke.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ke.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ke.toString(n))}setLimit(e,n,r,s){return new To({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ke.toString(s)}]})}_addCheck(e){return new To({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ke.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ke.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}To.create=t=>{var e;return new To({checks:[],typeName:We.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...tt(t)})};class Xh extends lt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Se.boolean){const r=this._getOrReturnCtx(e);return _e(r,{code:pe.invalid_type,expected:Se.boolean,received:r.parsedType}),Qe}return Cr(e.data)}}Xh.create=t=>new Xh({typeName:We.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...tt(t)});class ql extends lt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Se.date){const a=this._getOrReturnCtx(e);return _e(a,{code:pe.invalid_type,expected:Se.date,received:a.parsedType}),Qe}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return _e(a,{code:pe.invalid_date}),Qe}const r=new ir;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),_e(s,{code:pe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),_e(s,{code:pe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):yt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ql({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ke.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ke.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ql.create=t=>new ql({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:We.ZodDate,...tt(t)});class zg extends lt{_parse(e){if(this._getType(e)!==Se.symbol){const r=this._getOrReturnCtx(e);return _e(r,{code:pe.invalid_type,expected:Se.symbol,received:r.parsedType}),Qe}return Cr(e.data)}}zg.create=t=>new zg({typeName:We.ZodSymbol,...tt(t)});class Jh extends lt{_parse(e){if(this._getType(e)!==Se.undefined){const r=this._getOrReturnCtx(e);return _e(r,{code:pe.invalid_type,expected:Se.undefined,received:r.parsedType}),Qe}return Cr(e.data)}}Jh.create=t=>new Jh({typeName:We.ZodUndefined,...tt(t)});class ep extends lt{_parse(e){if(this._getType(e)!==Se.null){const r=this._getOrReturnCtx(e);return _e(r,{code:pe.invalid_type,expected:Se.null,received:r.parsedType}),Qe}return Cr(e.data)}}ep.create=t=>new ep({typeName:We.ZodNull,...tt(t)});class Jd extends lt{constructor(){super(...arguments),this._any=!0}_parse(e){return Cr(e.data)}}Jd.create=t=>new Jd({typeName:We.ZodAny,...tt(t)});class Tl extends lt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Cr(e.data)}}Tl.create=t=>new Tl({typeName:We.ZodUnknown,...tt(t)});class Sa extends lt{_parse(e){const n=this._getOrReturnCtx(e);return _e(n,{code:pe.invalid_type,expected:Se.never,received:n.parsedType}),Qe}}Sa.create=t=>new Sa({typeName:We.ZodNever,...tt(t)});class Bg extends lt{_parse(e){if(this._getType(e)!==Se.undefined){const r=this._getOrReturnCtx(e);return _e(r,{code:pe.invalid_type,expected:Se.void,received:r.parsedType}),Qe}return Cr(e.data)}}Bg.create=t=>new Bg({typeName:We.ZodVoid,...tt(t)});class Gs extends lt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Se.array)return _e(n,{code:pe.invalid_type,expected:Se.array,received:n.parsedType}),Qe;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(o||l)&&(_e(n,{code:o?pe.too_big:pe.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(_e(n,{code:pe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(_e(n,{code:pe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>s.type._parseAsync(new Ui(n,o,n.path,l)))).then(o=>ir.mergeArray(r,o));const a=[...n.data].map((o,l)=>s.type._parseSync(new Ui(n,o,n.path,l)));return ir.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Gs({...this._def,minLength:{value:e,message:ke.toString(n)}})}max(e,n){return new Gs({...this._def,maxLength:{value:e,message:ke.toString(n)}})}length(e,n){return new Gs({...this._def,exactLength:{value:e,message:ke.toString(n)}})}nonempty(e){return this.min(1,e)}}Gs.create=(t,e)=>new Gs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:We.ZodArray,...tt(e)});function _c(t){if(t instanceof en){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Mi.create(_c(r))}return new en({...t._def,shape:()=>e})}else return t instanceof Gs?new Gs({...t._def,type:_c(t.element)}):t instanceof Mi?Mi.create(_c(t.unwrap())):t instanceof Ao?Ao.create(_c(t.unwrap())):t instanceof zi?zi.create(t.items.map(e=>_c(e))):t}class en extends lt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=yt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Se.object){const u=this._getOrReturnCtx(e);return _e(u,{code:pe.invalid_type,expected:Se.object,received:u.parsedType}),Qe}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Sa&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const h=a[u],p=s.data[u];c.push({key:{status:"valid",value:u},value:h._parse(new Ui(s,p,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Sa){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of l)c.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(u==="strict")l.length>0&&(_e(s,{code:pe.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of l){const p=s.data[h];c.push({key:{status:"valid",value:h},value:u._parse(new Ui(s,p,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of c){const p=await h.key,m=await h.value;u.push({key:p,value:m,alwaysSet:h.alwaysSet})}return u}).then(u=>ir.mergeObjectSync(r,u)):ir.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ke.errToObj,new en({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,a,o,l;const c=(o=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=ke.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new en({...this._def,unknownKeys:"strip"})}passthrough(){return new en({...this._def,unknownKeys:"passthrough"})}extend(e){return new en({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new en({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:We.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new en({...this._def,catchall:e})}pick(e){const n={};return yt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new en({...this._def,shape:()=>n})}omit(e){const n={};return yt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new en({...this._def,shape:()=>n})}deepPartial(){return _c(this)}partial(e){const n={};return yt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new en({...this._def,shape:()=>n})}required(e){const n={};return yt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Mi;)a=a._def.innerType;n[r]=a}}),new en({...this._def,shape:()=>n})}keyof(){return E4(yt.objectKeys(this.shape))}}en.create=(t,e)=>new en({shape:()=>t,unknownKeys:"strip",catchall:Sa.create(),typeName:We.ZodObject,...tt(e)});en.strictCreate=(t,e)=>new en({shape:()=>t,unknownKeys:"strict",catchall:Sa.create(),typeName:We.ZodObject,...tt(e)});en.lazycreate=(t,e)=>new en({shape:t,unknownKeys:"strip",catchall:Sa.create(),typeName:We.ZodObject,...tt(e)});class tp extends lt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new qr(l.ctx.common.issues));return _e(n,{code:pe.invalid_union,unionErrors:o}),Qe}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},h=c._parseSync({data:n.data,path:n.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new qr(c));return _e(n,{code:pe.invalid_union,unionErrors:l}),Qe}}get options(){return this._def.options}}tp.create=(t,e)=>new tp({options:t,typeName:We.ZodUnion,...tt(e)});const Xi=t=>t instanceof sp?Xi(t.schema):t instanceof Js?Xi(t.innerType()):t instanceof ip?[t.value]:t instanceof ko?t.options:t instanceof ap?yt.objectValues(t.enum):t instanceof op?Xi(t._def.innerType):t instanceof Jh?[void 0]:t instanceof ep?[null]:t instanceof Mi?[void 0,...Xi(t.unwrap())]:t instanceof Ao?[null,...Xi(t.unwrap())]:t instanceof u_||t instanceof cp?Xi(t.unwrap()):t instanceof lp?Xi(t._def.innerType):[];class Gv extends lt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.object)return _e(n,{code:pe.invalid_type,expected:Se.object,received:n.parsedType}),Qe;const r=this.discriminator,s=n.data[r],a=this.optionsMap.get(s);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(_e(n,{code:pe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Qe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const a of n){const o=Xi(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,a)}}return new Gv({typeName:We.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...tt(r)})}}function K0(t,e){const n=ta(t),r=ta(e);if(t===e)return{valid:!0,data:t};if(n===Se.object&&r===Se.object){const s=yt.objectKeys(e),a=yt.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=K0(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===Se.array&&r===Se.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=K0(o,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Se.date&&r===Se.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class np extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(a,o)=>{if(W0(a)||W0(o))return Qe;const l=K0(a.value,o.value);return l.valid?((G0(a)||G0(o))&&n.dirty(),{status:n.value,value:l.data}):(_e(r,{code:pe.invalid_intersection_types}),Qe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}np.create=(t,e,n)=>new np({left:t,right:e,typeName:We.ZodIntersection,...tt(n)});class zi extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.array)return _e(r,{code:pe.invalid_type,expected:Se.array,received:r.parsedType}),Qe;if(r.data.length<this._def.items.length)return _e(r,{code:pe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Qe;!this._def.rest&&r.data.length>this._def.items.length&&(_e(r,{code:pe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ui(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>ir.mergeArray(n,o)):ir.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new zi({...this._def,rest:e})}}zi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new zi({items:t,typeName:We.ZodTuple,rest:null,...tt(e)})};class rp extends lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.object)return _e(r,{code:pe.invalid_type,expected:Se.object,received:r.parsedType}),Qe;const s=[],a=this._def.keyType,o=this._def.valueType;for(const l in r.data)s.push({key:a._parse(new Ui(r,l,r.path,l)),value:o._parse(new Ui(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?ir.mergeObjectAsync(n,s):ir.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof lt?new rp({keyType:e,valueType:n,typeName:We.ZodRecord,...tt(r)}):new rp({keyType:Hs.create(),valueType:e,typeName:We.ZodRecord,...tt(n)})}}class Vg extends lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.map)return _e(r,{code:pe.invalid_type,expected:Se.map,received:r.parsedType}),Qe;const s=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:s._parse(new Ui(r,l,r.path,[u,"key"])),value:a._parse(new Ui(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,h=await c.value;if(u.status==="aborted"||h.status==="aborted")return Qe;(u.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(u.value,h.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,h=c.value;if(u.status==="aborted"||h.status==="aborted")return Qe;(u.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(u.value,h.value)}return{status:n.value,value:l}}}}Vg.create=(t,e,n)=>new Vg({valueType:e,keyType:t,typeName:We.ZodMap,...tt(n)});class Wl extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.set)return _e(r,{code:pe.invalid_type,expected:Se.set,received:r.parsedType}),Qe;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(_e(r,{code:pe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(_e(r,{code:pe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const h of c){if(h.status==="aborted")return Qe;h.status==="dirty"&&n.dirty(),u.add(h.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>a._parse(new Ui(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new Wl({...this._def,minSize:{value:e,message:ke.toString(n)}})}max(e,n){return new Wl({...this._def,maxSize:{value:e,message:ke.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Wl.create=(t,e)=>new Wl({valueType:t,minSize:null,maxSize:null,typeName:We.ZodSet,...tt(e)});class nd extends lt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.function)return _e(n,{code:pe.invalid_type,expected:Se.function,received:n.parsedType}),Qe;function r(l,c){return $g({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Lg(),Xd].filter(u=>!!u),issueData:{code:pe.invalid_arguments,argumentsError:c}})}function s(l,c){return $g({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Lg(),Xd].filter(u=>!!u),issueData:{code:pe.invalid_return_type,returnTypeError:c}})}const a={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof eu){const l=this;return Cr(async function(...c){const u=new qr([]),h=await l._def.args.parseAsync(c,a).catch(x=>{throw u.addIssue(r(c,x)),u}),p=await Reflect.apply(o,this,h);return await l._def.returns._def.type.parseAsync(p,a).catch(x=>{throw u.addIssue(s(p,x)),u})})}else{const l=this;return Cr(function(...c){const u=l._def.args.safeParse(c,a);if(!u.success)throw new qr([r(c,u.error)]);const h=Reflect.apply(o,this,u.data),p=l._def.returns.safeParse(h,a);if(!p.success)throw new qr([s(h,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new nd({...this._def,args:zi.create(e).rest(Tl.create())})}returns(e){return new nd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new nd({args:e||zi.create([]).rest(Tl.create()),returns:n||Tl.create(),typeName:We.ZodFunction,...tt(r)})}}class sp extends lt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}sp.create=(t,e)=>new sp({getter:t,typeName:We.ZodLazy,...tt(e)});class ip extends lt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return _e(n,{received:n.data,code:pe.invalid_literal,expected:this._def.value}),Qe}return{status:"valid",value:e.data}}get value(){return this._def.value}}ip.create=(t,e)=>new ip({value:t,typeName:We.ZodLiteral,...tt(e)});function E4(t,e){return new ko({values:t,typeName:We.ZodEnum,...tt(e)})}class ko extends lt{constructor(){super(...arguments),eh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return _e(n,{expected:yt.joinValues(r),received:n.parsedType,code:pe.invalid_type}),Qe}if(Ug(this,eh)||w4(this,eh,new Set(this._def.values)),!Ug(this,eh).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return _e(n,{received:n.data,code:pe.invalid_enum_value,options:r}),Qe}return Cr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ko.create(e,{...this._def,...n})}exclude(e,n=this._def){return ko.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}eh=new WeakMap;ko.create=E4;class ap extends lt{constructor(){super(...arguments),th.set(this,void 0)}_parse(e){const n=yt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Se.string&&r.parsedType!==Se.number){const s=yt.objectValues(n);return _e(r,{expected:yt.joinValues(s),received:r.parsedType,code:pe.invalid_type}),Qe}if(Ug(this,th)||w4(this,th,new Set(yt.getValidEnumValues(this._def.values))),!Ug(this,th).has(e.data)){const s=yt.objectValues(n);return _e(r,{received:r.data,code:pe.invalid_enum_value,options:s}),Qe}return Cr(e.data)}get enum(){return this._def.values}}th=new WeakMap;ap.create=(t,e)=>new ap({values:t,typeName:We.ZodNativeEnum,...tt(e)});class eu extends lt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.promise&&n.common.async===!1)return _e(n,{code:pe.invalid_type,expected:Se.promise,received:n.parsedType}),Qe;const r=n.parsedType===Se.promise?n.data:Promise.resolve(n.data);return Cr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}eu.create=(t,e)=>new eu({type:t,typeName:We.ZodPromise,...tt(e)});class Js extends lt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===We.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{_e(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Qe;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Qe:c.status==="dirty"||n.value==="dirty"?$c(c.value):c});{if(n.value==="aborted")return Qe;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Qe:l.status==="dirty"||n.value==="dirty"?$c(l.value):l}}if(s.type==="refinement"){const o=l=>{const c=s.refinement(l,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Qe:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Qe:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Hl(o))return o;const l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Hl(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:n.value,value:l})):o);yt.assertNever(s)}}Js.create=(t,e,n)=>new Js({schema:t,typeName:We.ZodEffects,effect:e,...tt(n)});Js.createWithPreprocess=(t,e,n)=>new Js({schema:e,effect:{type:"preprocess",transform:t},typeName:We.ZodEffects,...tt(n)});class Mi extends lt{_parse(e){return this._getType(e)===Se.undefined?Cr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Mi.create=(t,e)=>new Mi({innerType:t,typeName:We.ZodOptional,...tt(e)});class Ao extends lt{_parse(e){return this._getType(e)===Se.null?Cr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ao.create=(t,e)=>new Ao({innerType:t,typeName:We.ZodNullable,...tt(e)});class op extends lt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Se.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}op.create=(t,e)=>new op({innerType:t,typeName:We.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...tt(e)});class lp extends lt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Zh(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new qr(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new qr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}lp.create=(t,e)=>new lp({innerType:t,typeName:We.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...tt(e)});class Hg extends lt{_parse(e){if(this._getType(e)!==Se.nan){const r=this._getOrReturnCtx(e);return _e(r,{code:pe.invalid_type,expected:Se.nan,received:r.parsedType}),Qe}return{status:"valid",value:e.data}}}Hg.create=t=>new Hg({typeName:We.ZodNaN,...tt(t)});const mX=Symbol("zod_brand");class u_ extends lt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class sf extends lt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Qe:a.status==="dirty"?(n.dirty(),$c(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Qe:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new sf({in:e,out:n,typeName:We.ZodPipeline})}}class cp extends lt{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Hl(s)&&(s.value=Object.freeze(s.value)),s);return Zh(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}cp.create=(t,e)=>new cp({innerType:t,typeName:We.ZodReadonly,...tt(e)});function vN(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function j4(t,e={},n){return t?Jd.create().superRefine((r,s)=>{var a,o;const l=t(r);if(l instanceof Promise)return l.then(c=>{var u,h;if(!c){const p=vN(e,r),m=(h=(u=p.fatal)!==null&&u!==void 0?u:n)!==null&&h!==void 0?h:!0;s.addIssue({code:"custom",...p,fatal:m})}});if(!l){const c=vN(e,r),u=(o=(a=c.fatal)!==null&&a!==void 0?a:n)!==null&&o!==void 0?o:!0;s.addIssue({code:"custom",...c,fatal:u})}}):Jd.create()}const gX={object:en.lazycreate};var We;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(We||(We={}));const vX=(t,e={message:`Input not instance of ${t.name}`})=>j4(n=>n instanceof t,e),N4=Hs.create,T4=No.create,yX=Hg.create,xX=To.create,k4=Xh.create,bX=ql.create,wX=zg.create,_X=Jh.create,CX=ep.create,SX=Jd.create,EX=Tl.create,jX=Sa.create,NX=Bg.create,TX=Gs.create,kX=en.create,AX=en.strictCreate,PX=tp.create,IX=Gv.create,RX=np.create,DX=zi.create,OX=rp.create,FX=Vg.create,MX=Wl.create,LX=nd.create,$X=sp.create,UX=ip.create,zX=ko.create,BX=ap.create,VX=eu.create,yN=Js.create,HX=Mi.create,qX=Ao.create,WX=Js.createWithPreprocess,GX=sf.create,KX=()=>N4().optional(),QX=()=>T4().optional(),YX=()=>k4().optional(),ZX={string:t=>Hs.create({...t,coerce:!0}),number:t=>No.create({...t,coerce:!0}),boolean:t=>Xh.create({...t,coerce:!0}),bigint:t=>To.create({...t,coerce:!0}),date:t=>ql.create({...t,coerce:!0})},XX=Qe;var hn=Object.freeze({__proto__:null,defaultErrorMap:Xd,setErrorMap:WZ,getErrorMap:Lg,makeIssue:$g,EMPTY_PATH:GZ,addIssueToContext:_e,ParseStatus:ir,INVALID:Qe,DIRTY:$c,OK:Cr,isAborted:W0,isDirty:G0,isValid:Hl,isAsync:Zh,get util(){return yt},get objectUtil(){return q0},ZodParsedType:Se,getParsedType:ta,ZodType:lt,datetimeRegex:S4,ZodString:Hs,ZodNumber:No,ZodBigInt:To,ZodBoolean:Xh,ZodDate:ql,ZodSymbol:zg,ZodUndefined:Jh,ZodNull:ep,ZodAny:Jd,ZodUnknown:Tl,ZodNever:Sa,ZodVoid:Bg,ZodArray:Gs,ZodObject:en,ZodUnion:tp,ZodDiscriminatedUnion:Gv,ZodIntersection:np,ZodTuple:zi,ZodRecord:rp,ZodMap:Vg,ZodSet:Wl,ZodFunction:nd,ZodLazy:sp,ZodLiteral:ip,ZodEnum:ko,ZodNativeEnum:ap,ZodPromise:eu,ZodEffects:Js,ZodTransformer:Js,ZodOptional:Mi,ZodNullable:Ao,ZodDefault:op,ZodCatch:lp,ZodNaN:Hg,BRAND:mX,ZodBranded:u_,ZodPipeline:sf,ZodReadonly:cp,custom:j4,Schema:lt,ZodSchema:lt,late:gX,get ZodFirstPartyTypeKind(){return We},coerce:ZX,any:SX,array:TX,bigint:xX,boolean:k4,date:bX,discriminatedUnion:IX,effect:yN,enum:zX,function:LX,instanceof:vX,intersection:RX,lazy:$X,literal:UX,map:FX,nan:yX,nativeEnum:BX,never:jX,null:CX,nullable:qX,number:T4,object:kX,oboolean:YX,onumber:QX,optional:HX,ostring:KX,pipeline:GX,preprocess:WX,promise:VX,record:OX,set:MX,strictObject:AX,string:N4,symbol:wX,transformer:yN,tuple:DX,undefined:_X,union:PX,unknown:EX,void:NX,NEVER:XX,ZodIssueCode:pe,quotelessJson:qZ,ZodError:qr});const JX=hn.object({clientName:hn.string().min(2,"El nombre del cliente es requerido"),petName:hn.string().min(1,"El nombre de la mascota es requerido"),email:hn.string().email("Email inválido"),phone:hn.string().optional(),appointmentDate:hn.string().optional(),travelMethod:hn.string().optional(),travelBehaviors:hn.array(hn.string()).default([]),otherTravelBehavior:hn.string().optional(),dislikes:hn.array(hn.string()).default([]),behaviorAroundOthers:hn.string().optional(),sensitiveBodyAreas:hn.string().optional(),difficultProcedures:hn.string().optional(),petReaction:hn.string().optional(),favoriteTreats:hn.string().optional(),favoriteToys:hn.string().optional(),previousMedications:hn.string().optional(),medicationResults:hn.string().optional(),additionalInfo:hn.string().optional()}),eJ=()=>{const[t,e]=y.useState(1),{toast:n}=ti();Zl();const r=UZ({resolver:HZ(JX),defaultValues:{travelBehaviors:[],dislikes:[]}}),s=jt({mutationFn:async p=>{console.log("Enviando cuestionario:",p);const m=await Xt("/api/questionnaires","POST",p);return console.log("Respuesta del servidor:",m),m},onSuccess:p=>{console.log("Cuestionario enviado exitosamente:",p),n({title:"Cuestionario Enviado",description:"Tu cuestionario pre-visita ha sido enviado exitosamente. Nos pondremos en contacto contigo pronto."}),r.reset(),e(1)},onError:p=>{console.error("Error al enviar cuestionario:",p),n({title:"Error",description:"Hubo un problema al enviar el cuestionario. Por favor, inténtalo nuevamente.",variant:"destructive"})}}),a=["Ansioso y excitado","Reacio","Se esconde","Babea","Vomita","Se orina/defeca","No quiere caminar","Ladra/Maúlla","Gime","Jadea","Tiembla","Está inquieto"],o=["Entrar en el transportín o el automóvil","Ir a la consulta","Entrar al centro veterinario","Ser subido a la mesa para examinarlo","Otras personas y/o animales pasando cerca en la recepción","Tener contacto visual directo con el técnico y/o veterinario","Esperar con otras personas y animales en la sala de espera","Voces fuertes durante el examen","Ser abordado por personal veterinario","Que le tomen la temperatura rectal","Subirse a la balanza","El uso de instrumentos como estetoscopio u otoscopio","Escuchar el timbre, interfono o teléfonos sonando","Sonidos que vienen de la parte de atrás de la clínica","Ser sacado de la consulta para realizar procedimientos"],l=(p,m)=>{const x=r.getValues(m)||[];x.includes(p)?r.setValue(m,x.filter(N=>N!==p)):r.setValue(m,[...x,p])},c=p=>{s.mutate(p)},u=()=>{t<4&&e(t+1)},h=()=>{t>1&&e(t-1)};return i.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-2xl shadow-lg",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-3xl font-poppins font-bold text-darkgray mb-4",children:"Cuestionario Previo a la Visita Fear Free®"}),i.jsx("p",{className:"text-gray-600 font-lato mb-6",children:"Como Profesionales Certificados Fear Free®, queremos hacer que la experiencia veterinaria de tu animal sea lo más agradable y libre de estrés posible. Por favor, responde las siguientes preguntas para personalizar la atención."}),i.jsx("div",{className:"flex items-center mb-8",children:[1,2,3,4].map(p=>i.jsxs("div",{className:"flex-1 flex items-center",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-medium ${p<=t?"bg-mint text-darkgray":"bg-gray-200 text-gray-500"}`,children:p}),p<4&&i.jsx("div",{className:`flex-1 h-2 mx-2 ${p<t?"bg-mint":"bg-gray-200"}`})]},p))})]}),i.jsxs("form",{onSubmit:r.handleSubmit(c),className:"space-y-6",children:[t===1&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-poppins font-semibold text-darkgray mb-4",children:"Información Básica"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"Nombre del Cliente *"}),i.jsx("input",{...r.register("clientName"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"client-name-input"}),r.formState.errors.clientName&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.formState.errors.clientName.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"Nombre de la Mascota *"}),i.jsx("input",{...r.register("petName"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"pet-name-input"}),r.formState.errors.petName&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.formState.errors.petName.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"Email *"}),i.jsx("input",{type:"email",...r.register("email"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"email-input"}),r.formState.errors.email&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.formState.errors.email.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"Teléfono"}),i.jsx("input",{...r.register("phone"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"phone-input"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"¿Cómo y dónde viaja tu mascota en el automóvil?"}),i.jsx("textarea",{...r.register("travelMethod"),rows:3,placeholder:"Ejemplo: transportín, cinturón de seguridad, suelto, etc.",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"travel-method-input"})]})]}),t===2&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-poppins font-semibold text-darkgray mb-4",children:"Comportamiento Durante el Viaje"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-4",children:"Durante el viaje al centro veterinario, marca las conductas que presenta tu mascota:"}),i.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:a.map(p=>{var m;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:((m=r.watch("travelBehaviors"))==null?void 0:m.includes(p))||!1,onChange:()=>l(p,"travelBehaviors"),className:"rounded border-gray-300 text-mint focus:ring-mint","data-testid":`travel-behavior-${p.toLowerCase().replace(/\s/g,"-")}`}),i.jsx("span",{className:"text-sm text-darkgray",children:p})]},p)})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"Otro comportamiento:"}),i.jsx("input",{...r.register("otherTravelBehavior"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"other-travel-behavior-input"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"¿Cómo describirías a tu mascota cerca de otros animales y personas?"}),i.jsx("textarea",{...r.register("behaviorAroundOthers"),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"behavior-around-others-input"})]})]}),t===3&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-poppins font-semibold text-darkgray mb-4",children:"Experiencias Veterinarias"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-4",children:"Marca las situaciones que no le han gustado a tu mascota:"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-3 max-h-96 overflow-y-auto",children:o.map(p=>{var m;return i.jsxs("label",{className:"flex items-start space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:((m=r.watch("dislikes"))==null?void 0:m.includes(p))||!1,onChange:()=>l(p,"dislikes"),className:"rounded border-gray-300 text-mint focus:ring-mint mt-1","data-testid":`dislike-${p.toLowerCase().replace(/\s/g,"-")}`}),i.jsx("span",{className:"text-sm text-darkgray",children:p})]},p)})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"¿Tu mascota tiene áreas del cuerpo sensibles que no le gusta que toquen?"}),i.jsx("textarea",{...r.register("sensitiveBodyAreas"),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"sensitive-body-areas-input"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"¿Hay algún procedimiento que no le haya gustado? ¿Cómo reaccionó?"}),i.jsx("textarea",{...r.register("difficultProcedures"),rows:3,placeholder:"Describe el procedimiento y la reacción...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"difficult-procedures-input"})]})]}),t===4&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-poppins font-semibold text-darkgray mb-4",children:"Preferencias y Información Adicional"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"¿Cuáles son los premios favoritos de tu mascota?"}),i.jsx("input",{...r.register("favoriteTreats"),placeholder:"Trae algunos para la próxima visita",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"favorite-treats-input"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"¿A tu mascota le gusta jugar con juguetes? ¿Cuáles?"}),i.jsx("input",{...r.register("favoriteToys"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"favorite-toys-input"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"¿Le han recetado medicamentos para visitas veterinarias? ¿Cuáles y qué resultados?"}),i.jsx("textarea",{...r.register("previousMedications"),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"previous-medications-input"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-darkgray mb-2",children:"¿Algo más que quieras que sepamos?"}),i.jsx("textarea",{...r.register("additionalInfo"),rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mint focus:border-mint","data-testid":"additional-info-input"})]})]}),i.jsxs("div",{className:"flex justify-between pt-6",children:[i.jsx("button",{type:"button",onClick:h,disabled:t===1,className:`px-6 py-3 rounded-lg font-medium ${t===1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-100 text-darkgray hover:bg-gray-200"}`,"data-testid":"prev-step-button",children:"Anterior"}),t<4?i.jsx("button",{type:"button",onClick:u,className:"px-6 py-3 bg-mint text-darkgray rounded-lg font-medium hover:shadow-lg transition-all","data-testid":"next-step-button",children:"Siguiente"}):i.jsx("button",{type:"submit",disabled:s.isPending,className:"px-6 py-3 bg-mint text-darkgray rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50","data-testid":"submit-questionnaire-button",children:s.isPending?"Enviando...":"Enviar Cuestionario"})]})]})]})},tJ=()=>i.jsx("div",{className:"min-h-screen bg-warmbeige py-12",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h1",{className:"text-4xl font-poppins font-bold text-darkgray mb-4",children:"Cuestionario Pre-Visita"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Completa este cuestionario para que podamos brindarte la mejor atención Fear Free® a tu mascota."})]}),i.jsx(eJ,{})]})});function nJ(){return i.jsxs(V5,{children:[i.jsx(ju,{path:"/",component:YB}),i.jsx(ju,{path:"/portal/profesional",component:xZ}),i.jsx(ju,{path:"/portal/tutor",component:bZ}),i.jsx(ju,{path:"/cuestionario",component:tJ}),i.jsx(ju,{children:i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"404 - Página no encontrada"}),i.jsx("p",{className:"text-gray-600",children:"La página que buscas no existe."})]})})})]})}function rJ(){return i.jsx(cM,{client:_M,children:i.jsx(q7,{children:i.jsxs(F6,{children:[i.jsx(dL,{}),i.jsx(nJ,{})]})})})}z2(document.getElementById("root")).render(i.jsx(rJ,{}));export{FE as _,Ea as a,gf as c,iJ as g,mJ as p};
